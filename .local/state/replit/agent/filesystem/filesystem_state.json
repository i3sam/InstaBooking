{"file_contents":{"client/src/components/demo/DemoWizard.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useMutation } from '@tanstack/react-query';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Progress } from '@/components/ui/progress';\nimport { useToast } from '@/hooks/use-toast';\nimport { apiRequest } from '@/lib/queryClient';\nimport { useAuth } from '@/hooks/use-auth';\nimport { ArrowLeft, ArrowRight, X } from 'lucide-react';\nimport BusinessInfoStep from './steps/BusinessInfoStep';\nimport AppearanceStep from './steps/AppearanceStep';\nimport ServicesStep from './steps/ServicesStep';\nimport PreviewStep from './steps/PreviewStep';\nimport UpgradeModal from '@/components/modals/upgrade-modal';\n\nconst DEMO_STORAGE_KEY = 'bookinggen_demo_v1';\n\ninterface DemoWizardProps {\n  open: boolean;\n  onClose: () => void;\n}\n\ninterface DemoData {\n  // Step 1: Business Info\n  businessName: string;\n  tagline: string;\n  contactPhone: string;\n  logoBase64: string;\n  businessType: string;\n  \n  // Step 1: Additional Business Info\n  walkInsAccepted: string;\n  parking: string;\n  amenities: string;\n  spokenLanguages: string;\n  kidFriendly: string;\n  appointmentCancellationPolicy: string;\n  \n  // Step 2: Appearance\n  theme: string;\n  primaryColor: string;\n  fontSize: 'small' | 'medium' | 'large';\n  showLogo: boolean;\n  showPhone: boolean;\n  \n  // Step 3: Services & Availability\n  services: Array<{\n    name: string;\n    duration: number;\n    price: number;\n    imageUrl?: string;\n  }>;\n  businessHours: {\n    monday: string;\n    tuesday: string;\n    wednesday: string;\n    thursday: string;\n    friday: string;\n    saturday: string;\n    sunday: string;\n  };\n}\n\nconst initialDemoData: DemoData = {\n  businessName: '',\n  tagline: '',\n  contactPhone: '',\n  logoBase64: '',\n  businessType: 'salon',\n  walkInsAccepted: 'accepted',\n  parking: '',\n  amenities: '',\n  spokenLanguages: 'English',\n  kidFriendly: 'yes',\n  appointmentCancellationPolicy: '',\n  theme: 'Ocean Blue',\n  primaryColor: '#2563eb',\n  fontSize: 'medium',\n  showLogo: true,\n  showPhone: true,\n  services: [{ name: '', duration: 60, price: 0, imageUrl: undefined }],\n  businessHours: {\n    monday: '9:00-17:00',\n    tuesday: '9:00-17:00',\n    wednesday: '9:00-17:00',\n    thursday: '9:00-17:00',\n    friday: '9:00-17:00',\n    saturday: 'Closed',\n    sunday: 'Closed'\n  }\n};\n\nconst steps = [\n  { id: 1, title: 'Business Info', description: 'Tell us about your business' },\n  { id: 2, title: 'Appearance', description: 'Customize your look' },\n  { id: 3, title: 'Services & Hours', description: 'Add your services' },\n  { id: 4, title: 'Preview', description: 'See your booking page' }\n];\n\nexport default function DemoWizard({ open, onClose }: DemoWizardProps) {\n  const [currentStep, setCurrentStep] = useState(1);\n  const [demoData, setDemoData] = useState<DemoData>(initialDemoData);\n  const [demoId, setDemoId] = useState<string | null>(null);\n  const [convertToken, setConvertToken] = useState<string | null>(null);\n  const [showUpgradeModal, setShowUpgradeModal] = useState(false);\n  const { toast } = useToast();\n  const { user } = useAuth();\n\n  // Load demo data from localStorage on mount\n  useEffect(() => {\n    const savedDemo = localStorage.getItem(DEMO_STORAGE_KEY);\n    if (savedDemo) {\n      try {\n        const parsed = JSON.parse(savedDemo);\n        setDemoData({ ...initialDemoData, ...parsed.demoData });\n        setCurrentStep(parsed.currentStep || 1);\n        setDemoId(parsed.demoId || null);\n        setConvertToken(parsed.convertToken || null);\n      } catch (error) {\n        console.error('Failed to load demo data:', error);\n      }\n    }\n  }, []);\n\n  // Save demo data to localStorage whenever it changes\n  useEffect(() => {\n    localStorage.setItem(DEMO_STORAGE_KEY, JSON.stringify({\n      demoData,\n      currentStep,\n      demoId,\n      convertToken\n    }));\n  }, [demoData, currentStep, demoId, convertToken]);\n\n  const createDemoMutation = useMutation({\n    mutationFn: async (params: { data: DemoData; createDemoUser?: boolean; email?: string; fullName?: string }) => {\n      const response = await apiRequest('POST', '/api/demo', params);\n      return response.json();\n    },\n    onSuccess: (response: any) => {\n      setDemoId(response.id);\n      setConvertToken(response.convertToken);\n      \n      // For the new flow: always redirect to signup regardless of demo type\n      toast({\n        title: 'Demo Created!',\n        description: 'Your demo booking page has been created! Please sign up to access it in your dashboard.'\n      });\n      \n      // Store demo info for post-signup redirect\n      localStorage.setItem('pending_demo_info', JSON.stringify({\n        demoId: response.id,\n        convertToken: response.convertToken,\n        demoUser: response.demoUser || null\n      }));\n      \n      // Redirect to signup after short delay\n      setTimeout(() => {\n        window.location.href = '/signup?redirect_from=demo';\n      }, 1500);\n    },\n    onError: (error) => {\n      toast({\n        title: 'Error',\n        description: 'Failed to create demo. Please try again.',\n        variant: 'destructive'\n      });\n    }\n  });\n\n  const convertDemoMutation = useMutation({\n    mutationFn: async () => {\n      if (!demoId || !convertToken) throw new Error('No demo to convert');\n      const response = await apiRequest('POST', '/api/demo/convert', { demoId, convertToken });\n      return response.json();\n    },\n    onSuccess: (response: any) => {\n      localStorage.removeItem(DEMO_STORAGE_KEY);\n      toast({\n        title: 'Success!',\n        description: `Your booking page has been created! Slug: ${response.slug}`\n      });\n      onClose();\n    },\n    onError: (error: any) => {\n      // Check if this is an upgrade required error (403)\n      const isUpgradeError = error.message && (\n        error.message.startsWith('403:') || \n        error.message.includes('Upgrade Required') || \n        error.message.includes('You need a Pro subscription')\n      );\n      \n      if (isUpgradeError) {\n        // Show upgrade modal instead of ugly error toast\n        setShowUpgradeModal(true);\n      } else {\n        // Show regular error toast for other errors\n        toast({\n          title: 'Error',\n          description: error.message || 'Failed to convert demo. Please try again.',\n          variant: 'destructive'\n        });\n      }\n    }\n  });\n\n  const updateDemoData = (updates: Partial<DemoData>) => {\n    setDemoData(prev => ({ ...prev, ...updates }));\n  };\n\n  const nextStep = () => {\n    if (currentStep < steps.length) {\n      setCurrentStep(prev => prev + 1);\n    }\n  };\n\n  const prevStep = () => {\n    if (currentStep > 1) {\n      setCurrentStep(prev => prev - 1);\n    }\n  };\n\n  const handleSaveDemo = (userInfo?: { email: string; fullName?: string }) => {\n    console.log('handleSaveDemo called with userInfo:', userInfo);\n    try {\n      if (userInfo) {\n        // Save demo with demo user account\n        console.log('Saving demo with user account');\n        createDemoMutation.mutate({\n          data: demoData,\n          createDemoUser: true,\n          email: userInfo.email,\n          fullName: userInfo.fullName\n        });\n      } else {\n        // Save demo without user account (anonymous)\n        console.log('Saving demo anonymously');\n        createDemoMutation.mutate({ data: demoData });\n      }\n    } catch (error) {\n      console.error('Error in handleSaveDemo:', error);\n    }\n  };\n\n  const handleCreateAccount = () => {\n    console.log('🔥 CREATE ACCOUNT BUTTON CLICKED! User:', user);\n    console.log('🔥 Demo data:', demoData);\n    try {\n      if (user) {\n        // User is logged in, convert directly\n        console.log('✅ User is logged in, converting demo directly');\n        convertDemoMutation.mutate();\n      } else {\n        // For new flow: save demo first, then redirect to signup\n        console.log('✅ User not logged in, saving demo and redirecting to signup');\n        // Save the demo anonymously first, then redirect to signup\n        createDemoMutation.mutate({ data: demoData });\n      }\n    } catch (error) {\n      console.error('❌ Error in handleCreateAccount:', error);\n    }\n  };\n\n  const renderStep = () => {\n    switch (currentStep) {\n      case 1:\n        return <BusinessInfoStep data={demoData} updateData={updateDemoData} />;\n      case 2:\n        return <AppearanceStep data={demoData} updateData={updateDemoData} />;\n      case 3:\n        return <ServicesStep data={demoData} updateData={updateDemoData} />;\n      case 4:\n        return (\n          <PreviewStep \n            data={demoData} \n            onCreateAccount={handleCreateAccount}\n            onRestart={() => {\n              // Reset demo data and go to step 1\n              setDemoData(initialDemoData);\n              setCurrentStep(1);\n              setDemoId(null);\n              setConvertToken(null);\n              localStorage.removeItem(DEMO_STORAGE_KEY);\n            }}\n            isConverting={convertDemoMutation.isPending}\n            isSaving={createDemoMutation.isPending}\n            user={user}\n          />\n        );\n      default:\n        return null;\n    }\n  };\n\n  const progress = (currentStep / steps.length) * 100;\n\n  return (\n    <>\n      <Dialog open={open} onOpenChange={onClose}>\n        <DialogContent className=\"max-w-4xl h-[90vh] flex flex-col glass-prism-card border-none shadow-2xl animate-scale-in\" data-testid=\"dialog-demo-wizard\">\n          {/* Glass Prism Background Elements */}\n          <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n            <div className=\"absolute top-10 left-10 w-48 h-48 glass-prism rounded-full opacity-20 animate-float bg-overlay\"></div>\n            <div className=\"absolute top-32 right-20 w-64 h-64 glass-prism rounded-full opacity-20 animate-float bg-overlay\" style={{animationDelay: '1.5s'}}></div>\n            <div className=\"absolute bottom-20 left-1/3 w-32 h-32 glass-prism rounded-full opacity-25 animate-float bg-overlay\" style={{animationDelay: '3s'}}></div>\n          </div>\n          \n          <DialogHeader className=\"flex-shrink-0 relative z-10 animate-fade-in-up\">\n            <div className=\"flex items-center justify-between\">\n              <DialogTitle className=\"text-2xl font-bold text-blue-gradient flex items-center gap-3\" data-testid=\"text-demo-wizard-title\">\n                <div className=\"w-10 h-10 rounded-xl glass-prism flex items-center justify-center\">\n                  <svg className=\"w-6 h-6\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M12 2L3 7L12 12L21 7L12 2Z\" fill=\"currentColor\" opacity=\"0.3\"/>\n                    <path d=\"M21 16L12 21L3 16\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                    <path d=\"M21 12L12 17L3 12\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                  </svg>\n                </div>\n                Test before you Launch\n              </DialogTitle>\n              <Button variant=\"ghost\" size=\"sm\" onClick={onClose} className=\"glass-effect hover-lift rounded-xl\" data-testid=\"button-close\">\n                <X className=\"w-4 h-4\" />\n              </Button>\n            </div>\n            <DialogDescription className=\"sr-only\">\n              Create and customize your booking page through our step-by-step wizard. Preview your page before making it live.\n            </DialogDescription>\n            \n            {/* Progress Bar */}\n            <div className=\"space-y-2 mt-6\">\n              <Progress value={progress} className=\"w-full h-2 glass-effect\" data-testid=\"progress-wizard\" />\n              <div className=\"flex justify-between text-sm text-muted-foreground\">\n                {steps.map((step, index) => (\n                  <div \n                    key={step.id} \n                    className={`text-center transition-all duration-300 animate-slide-in-left ${\n                      currentStep === step.id ? 'text-foreground font-semibold scale-105' : ''\n                    }`}\n                    style={{animationDelay: `${index * 0.1}s`}}\n                  >\n                    <div className=\"text-xs\">{step.title}</div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </DialogHeader>\n\n          {/* Step Content */}\n          <div className=\"flex-1 overflow-y-auto p-1 relative z-10 animate-fade-in-up\" style={{animationDelay: '0.2s'}}>\n            {renderStep()}\n          </div>\n\n          {/* Navigation */}\n          {currentStep < steps.length && (\n            <div className=\"flex-shrink-0 flex justify-between items-center pt-6 border-t border-border/20 relative z-10 animate-slide-in-right\" style={{animationDelay: '0.3s'}}>\n              <Button \n                variant=\"outline\" \n                onClick={prevStep} \n                disabled={currentStep === 1}\n                className=\"glass-effect hover-lift\"\n                data-testid=\"button-prev-step\"\n              >\n                <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                Previous\n              </Button>\n              \n              <span className=\"text-sm text-muted-foreground font-medium\" data-testid=\"text-step-counter\">\n                Step {currentStep} of {steps.length}\n              </span>\n              \n              <Button onClick={nextStep} className=\"glass-prism-button\" data-testid=\"button-next-step\">\n                Next\n                <ArrowRight className=\"w-4 h-4 ml-2\" />\n              </Button>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n\n      {/* Upgrade Modal */}\n      <UpgradeModal \n        isOpen={showUpgradeModal} \n        onClose={() => setShowUpgradeModal(false)} \n      />\n    </>\n  );\n}","size_bytes":13825},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground transition-all duration-200 ease-in-out transform hover:scale-105 data-[state=checked]:scale-105\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current transition-all duration-150 ease-in-out data-[state=checked]:animate-in data-[state=checked]:zoom-in-50\")}\n    >\n      <Check className=\"h-4 w-4 transition-all duration-150 ease-in-out\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1297},"client/src/pages/help-center.tsx":{"content":"import { useState } from 'react';\nimport Header from '@/components/layout/header';\nimport Footer from '@/components/layout/footer';\nimport SEO from '@/components/seo';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { useLocation } from 'wouter';\nimport { \n  Search, \n  ArrowLeft, \n  BookOpen, \n  Settings, \n  Users, \n  CreditCard,\n  Shield,\n  Mail,\n  ChevronRight,\n  Clock,\n  CheckCircle,\n  AlertCircle,\n  HelpCircle,\n  FileText,\n  Monitor,\n  Smartphone,\n  Globe\n} from 'lucide-react';\n\nexport default function HelpCenter() {\n  const [, setLocation] = useLocation();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedArticle, setSelectedArticle] = useState<string | null>(null);\n\n  // Detailed article content with step-by-step guides\n  const articleContent = {\n    \"How to create your first booking page\": {\n      title: \"How to create your first booking page\",\n      category: \"Getting Started\",\n      readTime: \"5 min read\",\n      content: [\n        {\n          type: \"intro\",\n          text: \"Creating your first booking page with BookingGen is simple and takes just a few minutes. This guide will walk you through every step to get your professional booking page live and ready to accept appointments.\"\n        },\n        {\n          type: \"step\",\n          number: 1,\n          title: \"Sign up or log into your account\",\n          content: \"If you haven't already, create your BookingGen account at the signup page. If you already have an account, log in to access your dashboard.\",\n          tips: [\"Use a professional email address for your account\", \"Choose a strong password for security\"]\n        },\n        {\n          type: \"step\",\n          number: 2,\n          title: \"Access the Page Creator\",\n          content: \"Once logged in, you'll see your dashboard. Look for the 'Create Page' button - it's usually prominently displayed on your dashboard. Click this button to start creating your booking page.\",\n          tips: [\"The Create Page button may be in the top navigation or center of your dashboard\"]\n        },\n        {\n          type: \"step\",\n          number: 3,\n          title: \"Choose your page name and URL\",\n          content: \"Enter a name for your booking page that represents your business or service. This will also determine your unique BookingGen URL (e.g., yourname.bookinggen.xyz).\",\n          tips: [\"Choose a memorable and professional name\", \"Keep it short and easy to type\", \"Avoid special characters or spaces\"]\n        },\n        {\n          type: \"step\",\n          number: 4,\n          title: \"Add your services\",\n          content: \"Define what services you offer. For each service, you'll need to specify the name, duration, and optionally the price and description.\",\n          tips: [\"Be specific with service names\", \"Set realistic durations including buffer time\", \"Add descriptions to help clients choose\"]\n        },\n        {\n          type: \"step\",\n          number: 5,\n          title: \"Set your availability\",\n          content: \"Configure when you're available for bookings. Set your working days, hours, and any break times. You can also set buffer times between appointments.\",\n          tips: [\"Be realistic about your availability\", \"Consider travel time between appointments\", \"Set buffer times to avoid back-to-back bookings\"]\n        },\n        {\n          type: \"step\",\n          number: 6,\n          title: \"Customize your page appearance\",\n          content: \"Upload your logo, choose your brand colors, and customize the layout to match your brand. This helps create a professional impression.\",\n          tips: [\"Use high-quality images\", \"Stick to your brand colors\", \"Keep the design clean and professional\"]\n        },\n        {\n          type: \"step\",\n          number: 7,\n          title: \"Preview and publish\",\n          content: \"Before going live, preview your booking page to make sure everything looks correct. Once satisfied, click 'Publish' to make your page live.\",\n          tips: [\"Test the booking process yourself\", \"Check on mobile devices\", \"Share with friends for feedback before going live\"]\n        },\n        {\n          type: \"conclusion\",\n          text: \"Congratulations! Your booking page is now live and ready to accept appointments. Share your unique URL with clients and start accepting bookings immediately.\"\n        }\n      ]\n    },\n    \"Setting up your profile and business information\": {\n      title: \"Setting up your profile and business information\",\n      category: \"Getting Started\",\n      readTime: \"3 min read\",\n      content: [\n        {\n          type: \"intro\",\n          text: \"A complete profile builds trust with potential clients and provides them with essential information about your business. Here's how to set up your profile properly.\"\n        },\n        {\n          type: \"step\",\n          number: 1,\n          title: \"Navigate to Profile Settings\",\n          content: \"From your dashboard, click on 'Settings' or your profile picture in the top right corner, then select 'Profile Settings'.\",\n          tips: [\"Settings may be in the main navigation or dropdown menu\"]\n        },\n        {\n          type: \"step\",\n          number: 2,\n          title: \"Add your professional photo\",\n          content: \"Upload a high-quality, professional headshot or business logo. This will appear on your booking pages and helps clients recognize and trust your brand.\",\n          tips: [\"Use a photo with good lighting\", \"Smile and look professional\", \"Ensure the image is high resolution\"]\n        },\n        {\n          type: \"step\",\n          number: 3,\n          title: \"Fill in your business information\",\n          content: \"Complete all relevant fields including your business name, description, contact information, and location. Be thorough as this information helps with SEO and client trust.\",\n          tips: [\"Write a compelling business description\", \"Include all contact methods\", \"Add your physical address if relevant\"]\n        },\n        {\n          type: \"step\",\n          number: 4,\n          title: \"Set your timezone\",\n          content: \"Make sure your timezone is set correctly so appointments are scheduled at the right times for both you and your clients.\",\n          tips: [\"Double-check your timezone setting\", \"Consider daylight saving changes\"]\n        },\n        {\n          type: \"step\",\n          number: 5,\n          title: \"Add social media links\",\n          content: \"Connect your social media profiles to build credibility and allow clients to learn more about your business.\",\n          tips: [\"Only add professional social media accounts\", \"Ensure your profiles are up-to-date\"]\n        },\n        {\n          type: \"conclusion\",\n          text: \"A complete profile increases booking conversions by up to 40%. Take time to fill out all sections thoroughly.\"\n        }\n      ]\n    },\n    \"Understanding the dashboard layout\": {\n      title: \"Understanding the dashboard layout\",\n      category: \"Getting Started\",\n      readTime: \"4 min read\",\n      content: [\n        {\n          type: \"intro\",\n          text: \"Your dashboard is your central hub for managing bookings, viewing analytics, and controlling your booking pages. Here's a complete guide to understanding each section.\"\n        },\n        {\n          type: \"step\",\n          number: 1,\n          title: \"Main navigation overview\",\n          content: \"The top navigation bar contains your main menu items: Dashboard, Bookings, Pages, Settings, and your profile. Each section serves a specific purpose for managing your business.\",\n          tips: [\"Bookmark your dashboard for quick access\", \"Use keyboard shortcuts when available\"]\n        },\n        {\n          type: \"step\",\n          number: 2,\n          title: \"Dashboard overview section\",\n          content: \"The main dashboard shows key metrics like today's bookings, upcoming appointments, recent activity, and quick action buttons for common tasks.\",\n          tips: [\"Check your dashboard daily for updates\", \"Use quick actions for efficiency\"]\n        },\n        {\n          type: \"step\",\n          number: 3,\n          title: \"Bookings management area\",\n          content: \"The Bookings section shows all your appointments in calendar and list views. You can accept, decline, reschedule, or communicate with clients from here.\",\n          tips: [\"Use calendar view for planning\", \"Set up notifications for new bookings\"]\n        },\n        {\n          type: \"step\",\n          number: 4,\n          title: \"Pages management\",\n          content: \"View and edit all your booking pages from the Pages section. You can create new pages, modify existing ones, and view page performance.\",\n          tips: [\"Regularly update your page content\", \"Monitor page performance metrics\"]\n        },\n        {\n          type: \"step\",\n          number: 5,\n          title: \"Settings and customization\",\n          content: \"The Settings area contains all configuration options including profile settings, notification preferences, integrations, and billing information.\",\n          tips: [\"Review settings regularly\", \"Keep payment information up to date\"]\n        },\n        {\n          type: \"conclusion\",\n          text: \"Familiarizing yourself with the dashboard layout will help you work more efficiently and make the most of BookingGen's features.\"\n        }\n      ]\n    },\n    \"Advanced branding and styling options\": {\n      title: \"Advanced branding and styling options\",\n      category: \"Customization\",\n      readTime: \"6 min read\",\n      content: [\n        {\n          type: \"intro\",\n          text: \"Take your booking pages to the next level with advanced branding and styling options. Create a seamless brand experience that matches your business perfectly.\"\n        },\n        {\n          type: \"step\",\n          number: 1,\n          title: \"Access advanced styling settings\",\n          content: \"From your page editor, look for 'Advanced Styling' or 'Brand Settings'. This is usually found in the customization section of your page editor.\",\n          tips: [\"Pro plans offer more advanced options\", \"Changes preview in real-time\"]\n        },\n        {\n          type: \"step\",\n          number: 2,\n          title: \"Upload custom logos and images\",\n          content: \"Upload your business logo, favicon, and header images. Use high-resolution images for the best quality across all devices.\",\n          tips: [\"Use PNG format for logos with transparency\", \"Optimize images for web to reduce loading times\"]\n        },\n        {\n          type: \"step\",\n          number: 3,\n          title: \"Customize color schemes\",\n          content: \"Set your brand colors including primary color, accent colors, button colors, and background colors. Use your brand's color palette for consistency.\",\n          tips: [\"Use a color palette generator for harmony\", \"Ensure good contrast for accessibility\"]\n        },\n        {\n          type: \"step\",\n          number: 4,\n          title: \"Choose custom fonts\",\n          content: \"Select fonts that match your brand personality. You can choose from Google Fonts or upload custom fonts if available in your plan.\",\n          tips: [\"Limit to 2-3 font families maximum\", \"Ensure fonts are readable on all devices\"]\n        },\n        {\n          type: \"step\",\n          number: 5,\n          title: \"Design custom layouts\",\n          content: \"Arrange page elements, adjust spacing, and create custom layouts that reflect your brand's style and improve user experience.\",\n          tips: [\"Keep layouts clean and intuitive\", \"Test on mobile devices\"]\n        },\n        {\n          type: \"step\",\n          number: 6,\n          title: \"Add custom CSS (Pro feature)\",\n          content: \"For ultimate customization, add custom CSS code to style your pages exactly how you want them. This gives you complete design control.\",\n          tips: [\"Test CSS changes thoroughly\", \"Keep a backup of working CSS code\"]\n        },\n        {\n          type: \"conclusion\",\n          text: \"Advanced branding creates a professional impression and increases client trust. Spend time perfecting your brand presentation.\"\n        }\n      ]\n    },\n    \"Managing subscription and billing\": {\n      title: \"Managing subscription and billing\",\n      category: \"Account Management\",\n      readTime: \"4 min read\",\n      content: [\n        {\n          type: \"intro\",\n          text: \"Keep track of your subscription, update payment methods, and manage billing preferences with ease. Here's everything you need to know about managing your BookingGen account billing.\"\n        },\n        {\n          type: \"step\",\n          number: 1,\n          title: \"Access billing settings\",\n          content: \"Navigate to Settings > Billing & Subscription from your dashboard. Here you'll find all your billing information and options.\",\n          tips: [\"Bookmark this page for easy access\", \"Check billing details regularly\"]\n        },\n        {\n          type: \"step\",\n          number: 2,\n          title: \"View current subscription\",\n          content: \"See your current plan, billing cycle, next payment date, and included features. This helps you understand what you're paying for and when.\",\n          tips: [\"Set calendar reminders before renewal dates\", \"Review feature usage regularly\"]\n        },\n        {\n          type: \"step\",\n          number: 3,\n          title: \"Update payment methods\",\n          content: \"Add, remove, or update credit cards and payment methods. Set a default payment method to ensure uninterrupted service.\",\n          tips: [\"Keep multiple payment methods on file\", \"Update expiring cards promptly\"]\n        },\n        {\n          type: \"step\",\n          number: 4,\n          title: \"Change subscription plans\",\n          content: \"Upgrade or downgrade your plan based on your current needs. Changes typically take effect at the next billing cycle.\",\n          tips: [\"Compare plan features before changing\", \"Consider usage patterns when choosing plans\"]\n        },\n        {\n          type: \"step\",\n          number: 5,\n          title: \"Download invoices and receipts\",\n          content: \"Access your billing history, download invoices, and get receipts for tax purposes or expense reporting.\",\n          tips: [\"Save invoices for tax records\", \"Set up automatic receipt forwarding\"]\n        },\n        {\n          type: \"step\",\n          number: 6,\n          title: \"Manage cancellation if needed\",\n          content: \"If you need to cancel, you can do so from the billing settings. Your account remains active until the end of the current billing period.\",\n          tips: [\"Export your data before canceling\", \"Consider downgrading instead of canceling\"]\n        },\n        {\n          type: \"conclusion\",\n          text: \"Proper billing management ensures uninterrupted service and helps you optimize your subscription based on your actual usage.\"\n        }\n      ]\n    },\n    \"Understanding your analytics dashboard\": {\n      title: \"Understanding your analytics dashboard\",\n      category: \"Analytics & Reporting\",\n      readTime: \"5 min read\",\n      content: [\n        {\n          type: \"intro\",\n          text: \"Make data-driven decisions with BookingGen's analytics dashboard. Learn how to interpret your booking data and use insights to grow your business.\"\n        },\n        {\n          type: \"step\",\n          number: 1,\n          title: \"Access your analytics dashboard\",\n          content: \"Navigate to Analytics or Reports from your main dashboard. Pro users have access to more detailed analytics and longer data history.\",\n          tips: [\"Check analytics weekly for trends\", \"Set up regular reporting schedules\"]\n        },\n        {\n          type: \"step\",\n          number: 2,\n          title: \"Understanding key metrics\",\n          content: \"Learn about important metrics like total bookings, conversion rates, popular services, peak booking times, and revenue tracking.\",\n          tips: [\"Focus on trends rather than daily fluctuations\", \"Compare month-over-month data\"]\n        },\n        {\n          type: \"step\",\n          number: 3,\n          title: \"Analyze booking patterns\",\n          content: \"Identify peak booking days and times, seasonal trends, and popular services. Use this data to optimize your availability and service offerings.\",\n          tips: [\"Adjust availability based on demand\", \"Promote slow periods with special offers\"]\n        },\n        {\n          type: \"step\",\n          number: 4,\n          title: \"Track conversion rates\",\n          content: \"Monitor how many page visitors actually book appointments. Low conversion rates might indicate issues with pricing, availability, or page design.\",\n          tips: [\"A/B test different page layouts\", \"Simplify the booking process if conversion is low\"]\n        },\n        {\n          type: \"step\",\n          number: 5,\n          title: \"Monitor revenue and growth\",\n          content: \"Track your booking revenue over time, average booking value, and growth metrics to understand your business performance.\",\n          tips: [\"Set monthly revenue goals\", \"Track metrics that matter to your business\"]\n        },\n        {\n          type: \"step\",\n          number: 6,\n          title: \"Export and share data\",\n          content: \"Export analytics data for deeper analysis or sharing with team members, accountants, or business partners.\",\n          tips: [\"Regular data exports for record keeping\", \"Share insights with your team\"]\n        },\n        {\n          type: \"conclusion\",\n          text: \"Regular analytics review helps you make informed decisions about pricing, services, and business growth strategies.\"\n        }\n      ]\n    },\n    \"Basic customization options\": {\n      title: \"Basic customization options\",\n      category: \"Getting Started\", \n      readTime: \"3 min read\",\n      content: [\n        {\n          type: \"intro\",\n          text: \"Start personalizing your booking page with these essential customization options. Make your page reflect your brand and improve client experience.\"\n        },\n        {\n          type: \"step\",\n          number: 1,\n          title: \"Update your page title and description\",\n          content: \"Give your booking page a clear, professional title and description that explains your services and value proposition.\",\n          tips: [\"Keep titles under 60 characters for SEO\", \"Write descriptions that convert visitors to bookers\"]\n        },\n        {\n          type: \"step\",\n          number: 2,\n          title: \"Upload your business logo\",\n          content: \"Add your logo to build brand recognition and trust. Your logo appears at the top of your booking page.\",\n          tips: [\"Use PNG format for transparent backgrounds\", \"Ensure logos are high resolution\"]\n        },\n        {\n          type: \"step\",\n          number: 3,\n          title: \"Choose your brand colors\",\n          content: \"Select primary and secondary colors that match your brand. This affects buttons, headers, and accent colors.\",\n          tips: [\"Use your brand's existing color palette\", \"Ensure good contrast for readability\"]\n        },\n        {\n          type: \"step\",\n          number: 4,\n          title: \"Set up your contact information\",\n          content: \"Add your phone number, email, and business address so clients can reach you directly if needed.\",\n          tips: [\"Include all relevant contact methods\", \"Keep information up to date\"]\n        },\n        {\n          type: \"conclusion\",\n          text: \"These basic customizations create a professional first impression and help build trust with potential clients.\"\n        }\n      ]\n    },\n    \"Adding custom fields to booking forms\": {\n      title: \"Adding custom fields to booking forms\",\n      category: \"Customization\",\n      readTime: \"4 min read\",\n      content: [\n        {\n          type: \"intro\",\n          text: \"Collect additional information from clients by adding custom fields to your booking forms. This helps you prepare better for appointments and provide personalized service.\"\n        },\n        {\n          type: \"step\",\n          number: 1,\n          title: \"Access form customization settings\",\n          content: \"Go to your page editor and look for 'Form Settings' or 'Custom Fields' section. This is where you can add, edit, and manage form fields.\",\n          tips: [\"Changes preview in real-time\", \"Test forms after making changes\"]\n        },\n        {\n          type: \"step\",\n          number: 2,\n          title: \"Choose field types\",\n          content: \"Select from various field types including text input, dropdown menus, checkboxes, radio buttons, and text areas based on what information you need.\",\n          tips: [\"Use dropdowns for limited options\", \"Text areas for longer responses\"]\n        },\n        {\n          type: \"step\",\n          number: 3,\n          title: \"Set field properties\",\n          content: \"Configure each field with labels, placeholder text, help text, and validation rules. Mark important fields as required.\",\n          tips: [\"Use clear, specific labels\", \"Add help text for complex fields\"]\n        },\n        {\n          type: \"step\",\n          number: 4,\n          title: \"Order and organize fields\",\n          content: \"Arrange fields in logical order and group related fields together. This improves user experience and completion rates.\",\n          tips: [\"Put required fields first\", \"Group related information\"]\n        },\n        {\n          type: \"conclusion\",\n          text: \"Custom fields help you gather the information needed to provide excellent service while keeping the booking process smooth.\"\n        }\n      ]\n    },\n    \"Understanding membership plans\": {\n      title: \"Understanding membership plans\",\n      category: \"Account Management\",\n      readTime: \"3 min read\",\n      content: [\n        {\n          type: \"intro\",\n          text: \"BookingGen offers different membership plans to suit various business needs. Understanding the features and limitations of each plan helps you choose the right one.\"\n        },\n        {\n          type: \"step\",\n          number: 1,\n          title: \"Free Plan features\",\n          content: \"The free plan includes basic booking functionality, one booking page, limited customization, and BookingGen branding. Perfect for trying out the service.\",\n          tips: [\"Great for testing BookingGen\", \"Limited to basic features\"]\n        },\n        {\n          type: \"step\",\n          number: 2,\n          title: \"Pro Plan benefits\",\n          content: \"Pro plan offers unlimited booking pages, advanced customization, analytics, priority support, custom branding, and removal of BookingGen branding.\",\n          tips: [\"Best value for growing businesses\", \"All essential features included\"]\n        },\n        {\n          type: \"step\",\n          number: 3,\n          title: \"Enterprise features\",\n          content: \"Enterprise plans include everything in Pro plus team management, advanced integrations, custom development, and dedicated support.\",\n          tips: [\"Contact sales for custom pricing\", \"Ideal for large organizations\"]\n        },\n        {\n          type: \"step\",\n          number: 4,\n          title: \"Choosing the right plan\",\n          content: \"Consider your booking volume, customization needs, team size, and required integrations when selecting a plan.\",\n          tips: [\"Start with Pro for most businesses\", \"Upgrade as you grow\"]\n        },\n        {\n          type: \"conclusion\",\n          text: \"The right plan balances features and cost based on your current needs while allowing room for growth.\"\n        }\n      ]\n    },\n    \"Booking conversion metrics\": {\n      title: \"Booking conversion metrics\",\n      category: \"Analytics & Reporting\",\n      readTime: \"4 min read\",\n      content: [\n        {\n          type: \"intro\",\n          text: \"Understanding your booking conversion metrics helps identify areas for improvement and optimize your booking pages for better performance.\"\n        },\n        {\n          type: \"step\",\n          number: 1,\n          title: \"Understanding conversion rate\",\n          content: \"Conversion rate is the percentage of page visitors who complete a booking. Industry average is typically 2-5% for service businesses.\",\n          tips: [\"Track trends over time\", \"Compare different pages if you have multiple\"]\n        },\n        {\n          type: \"step\",\n          number: 2,\n          title: \"Identifying conversion factors\",\n          content: \"Factors affecting conversion include page load speed, service descriptions, pricing clarity, availability display, and booking process complexity.\",\n          tips: [\"Test page speed regularly\", \"Simplify the booking process\"]\n        },\n        {\n          type: \"step\",\n          number: 3,\n          title: \"Tracking abandonment points\",\n          content: \"Identify where potential clients leave the booking process. Common abandonment points include pricing reveal, form filling, and payment processing.\",\n          tips: [\"Address common objections upfront\", \"Minimize required form fields\"]\n        },\n        {\n          type: \"step\",\n          number: 4,\n          title: \"Improving conversion rates\",\n          content: \"Optimize by improving page speed, clarifying services, displaying social proof, simplifying forms, and testing different layouts.\",\n          tips: [\"A/B test major changes\", \"Focus on high-impact improvements first\"]\n        },\n        {\n          type: \"conclusion\",\n          text: \"Regular conversion analysis and optimization can significantly increase your booking rates and business growth.\"\n        }\n      ]\n    },\n    \"Setting up booking time slots\": {\n      title: \"Setting up booking time slots\",\n      category: \"Customization\",\n      readTime: \"5 min read\",\n      content: [\n        {\n          type: \"intro\",\n          text: \"Configure precise time slots for your services to manage your schedule efficiently and provide clear availability to clients.\"\n        },\n        {\n          type: \"step\",\n          number: 1,\n          title: \"Access time slot settings\",\n          content: \"Navigate to your page editor and find 'Time Slots' or 'Scheduling Settings'. This is where you'll configure when clients can book appointments.\",\n          tips: [\"Changes may take a few minutes to reflect on your live page\", \"Test different configurations\"]\n        },\n        {\n          type: \"step\",\n          number: 2,\n          title: \"Set service duration\",\n          content: \"Define how long each service takes. This determines the length of each booking slot and spacing between appointments.\",\n          tips: [\"Include setup and cleanup time\", \"Consider travel time for mobile services\"]\n        },\n        {\n          type: \"step\",\n          number: 3,\n          title: \"Configure buffer times\",\n          content: \"Add buffer time before and after appointments to prevent back-to-back bookings and allow for preparation or travel.\",\n          tips: [\"15-30 minutes is common for most services\", \"Adjust based on your specific needs\"]\n        },\n        {\n          type: \"step\",\n          number: 4,\n          title: \"Set working hours\",\n          content: \"Define your daily working hours for each day of the week. Clients can only book appointments during these times.\",\n          tips: [\"Be realistic about your availability\", \"Consider peak demand times\"]\n        },\n        {\n          type: \"step\",\n          number: 5,\n          title: \"Handle breaks and lunch times\",\n          content: \"Block out time for breaks, lunch, and administrative tasks to ensure a manageable schedule.\",\n          tips: [\"Schedule breaks during low-demand periods\", \"Block time for follow-ups and prep\"]\n        },\n        {\n          type: \"step\",\n          number: 6,\n          title: \"Preview and test\",\n          content: \"Preview your booking page to see how time slots appear to clients. Test the booking process to ensure it works as expected.\",\n          tips: [\"Check on mobile devices too\", \"Ask friends to test the process\"]\n        },\n        {\n          type: \"conclusion\",\n          text: \"Well-configured time slots improve client experience and help you maintain a balanced, efficient schedule.\"\n        }\n      ]\n    },\n    \"Managing booking availability\": {\n      title: \"Managing booking availability\",\n      category: \"Customization\",\n      readTime: \"4 min read\",\n      content: [\n        {\n          type: \"intro\",\n          text: \"Take control of your schedule by managing when clients can and cannot book appointments. This includes handling vacations, busy periods, and special availability.\"\n        },\n        {\n          type: \"step\",\n          number: 1,\n          title: \"Access availability settings\",\n          content: \"Go to your dashboard and look for 'Availability', 'Schedule', or 'Calendar Settings'. This is your central hub for managing when you're available.\",\n          tips: [\"Bookmark this page for quick access\", \"Check settings regularly\"]\n        },\n        {\n          type: \"step\",\n          number: 2,\n          title: \"Set default availability\",\n          content: \"Configure your standard working hours and days. This becomes your default schedule that applies unless you make specific overrides.\",\n          tips: [\"Be consistent with your standard hours\", \"Consider client preferences for timing\"]\n        },\n        {\n          type: \"step\",\n          number: 3,\n          title: \"Block unavailable dates\",\n          content: \"Mark dates when you're unavailable due to vacations, holidays, or other commitments. Clients won't be able to book during these periods.\",\n          tips: [\"Block dates as early as possible\", \"Consider partial day blocks for appointments\"]\n        },\n        {\n          type: \"step\",\n          number: 4,\n          title: \"Add special availability\",\n          content: \"Create exceptions for special hours, extended availability, or one-time availability outside your normal schedule.\",\n          tips: [\"Useful for special events or high-demand periods\", \"Clear exceptions after the special period\"]\n        },\n        {\n          type: \"step\",\n          number: 5,\n          title: \"Set booking windows\",\n          content: \"Define how far in advance clients can book and any minimum notice required for bookings.\",\n          tips: [\"Consider your preparation time needs\", \"Balance convenience with planning time\"]\n        },\n        {\n          type: \"step\",\n          number: 6,\n          title: \"Monitor and adjust\",\n          content: \"Regularly review your availability settings and adjust based on booking patterns, seasonal changes, or business needs.\",\n          tips: [\"Track which times get booked most\", \"Adjust availability based on demand\"]\n        },\n        {\n          type: \"conclusion\",\n          text: \"Active availability management helps maintain work-life balance while maximizing booking opportunities.\"\n        }\n      ]\n    },\n    \"Updating your account information\": {\n      title: \"Updating your account information\",\n      category: \"Account Management\",\n      readTime: \"3 min read\",\n      content: [\n        {\n          type: \"intro\",\n          text: \"Keep your account information current to ensure smooth service delivery, proper communication, and accurate business representation.\"\n        },\n        {\n          type: \"step\",\n          number: 1,\n          title: \"Access account settings\",\n          content: \"Click on your profile picture or name in the top right corner, then select 'Account Settings' or 'Profile' from the dropdown menu.\",\n          tips: [\"Settings may also be accessible from the main navigation\", \"Keep this information updated monthly\"]\n        },\n        {\n          type: \"step\",\n          number: 2,\n          title: \"Update personal information\",\n          content: \"Review and update your name, email address, phone number, and other personal details. Ensure all information is current and accurate.\",\n          tips: [\"Use a professional email address\", \"Keep contact information up to date\"]\n        },\n        {\n          type: \"step\",\n          number: 3,\n          title: \"Modify business details\",\n          content: \"Update your business name, description, address, and other business-related information that appears on your booking pages.\",\n          tips: [\"Keep business description compelling and current\", \"Update address if you move locations\"]\n        },\n        {\n          type: \"step\",\n          number: 4,\n          title: \"Review timezone settings\",\n          content: \"Verify your timezone is correct, especially if you've moved or if daylight saving time has changed. This affects all booking times.\",\n          tips: [\"Double-check during daylight saving changes\", \"Consider client timezones for online services\"]\n        },\n        {\n          type: \"step\",\n          number: 5,\n          title: \"Update notification preferences\",\n          content: \"Configure how and when you want to receive notifications about new bookings, cancellations, and other important updates.\",\n          tips: [\"Enable critical notifications\", \"Customize frequency to avoid overload\"]\n        },\n        {\n          type: \"conclusion\",\n          text: \"Regular account updates ensure accurate communication and professional presentation to your clients.\"\n        }\n      ]\n    },\n    \"Account security settings\": {\n      title: \"Account security settings\",\n      category: \"Account Management\",\n      readTime: \"4 min read\",\n      content: [\n        {\n          type: \"intro\",\n          text: \"Protect your BookingGen account and client data with proper security settings. Strong security builds trust and protects your business.\"\n        },\n        {\n          type: \"step\",\n          number: 1,\n          title: \"Update your password\",\n          content: \"Use a strong, unique password for your BookingGen account. Consider using a password manager to generate and store secure passwords.\",\n          tips: [\"Use at least 12 characters with mixed case, numbers, and symbols\", \"Change passwords periodically\"]\n        },\n        {\n          type: \"step\",\n          number: 2,\n          title: \"Enable two-factor authentication\",\n          content: \"Add an extra layer of security by enabling 2FA. This requires a second verification step when logging in from new devices.\",\n          tips: [\"Use authenticator apps rather than SMS when possible\", \"Save backup codes securely\"]\n        },\n        {\n          type: \"step\",\n          number: 3,\n          title: \"Review login activity\",\n          content: \"Regularly check your account's login history to identify any suspicious activity or unauthorized access attempts.\",\n          tips: [\"Log out from unfamiliar devices\", \"Report suspicious activity immediately\"]\n        },\n        {\n          type: \"step\",\n          number: 4,\n          title: \"Manage connected devices\",\n          content: \"Review and manage devices that have access to your account. Remove access from devices you no longer use or recognize.\",\n          tips: [\"Regularly audit connected devices\", \"Remove old or unused device access\"]\n        },\n        {\n          type: \"step\",\n          number: 5,\n          title: \"Set up security alerts\",\n          content: \"Configure alerts for important security events like password changes, new device logins, or account modifications.\",\n          tips: [\"Enable immediate alerts for critical changes\", \"Use a secure email for alerts\"]\n        },\n        {\n          type: \"step\",\n          number: 6,\n          title: \"Regular security checkups\",\n          content: \"Periodically review all security settings and update them as needed. Stay informed about security best practices.\",\n          tips: [\"Schedule monthly security reviews\", \"Keep recovery information current\"]\n        },\n        {\n          type: \"conclusion\",\n          text: \"Strong account security protects your business data and maintains client trust in your professional services.\"\n        }\n      ]\n    },\n    \"Customer engagement insights\": {\n      title: \"Customer engagement insights\",\n      category: \"Analytics & Reporting\",\n      readTime: \"5 min read\",\n      content: [\n        {\n          type: \"intro\",\n          text: \"Understand how clients interact with your booking pages and use these insights to improve engagement and increase bookings.\"\n        },\n        {\n          type: \"step\",\n          number: 1,\n          title: \"Access engagement analytics\",\n          content: \"Navigate to your analytics dashboard and look for the 'Engagement' or 'Client Insights' section to view detailed interaction data.\",\n          tips: [\"Pro plans offer more detailed engagement data\", \"Check analytics weekly for trends\"]\n        },\n        {\n          type: \"step\",\n          number: 2,\n          title: \"Analyze page interaction patterns\",\n          content: \"Review how visitors navigate your booking page, which sections they spend time on, and where they typically exit.\",\n          tips: [\"Look for patterns in user behavior\", \"Identify popular and ignored sections\"]\n        },\n        {\n          type: \"step\",\n          number: 3,\n          title: \"Track service popularity\",\n          content: \"Identify which services get the most views and bookings. This helps you understand client preferences and adjust your offerings.\",\n          tips: [\"Promote popular services more prominently\", \"Consider why some services get less attention\"]\n        },\n        {\n          type: \"step\",\n          number: 4,\n          title: \"Monitor time-based engagement\",\n          content: \"Analyze when clients are most active on your booking page and when they're most likely to complete bookings.\",\n          tips: [\"Adjust your availability based on high-engagement times\", \"Send marketing during peak activity periods\"]\n        },\n        {\n          type: \"step\",\n          number: 5,\n          title: \"Evaluate content effectiveness\",\n          content: \"Assess how well your service descriptions, images, and other content engage visitors and encourage bookings.\",\n          tips: [\"Update content that doesn't perform well\", \"A/B test different descriptions\"]\n        },\n        {\n          type: \"step\",\n          number: 6,\n          title: \"Implement improvements\",\n          content: \"Use engagement insights to make data-driven improvements to your booking page layout, content, and service offerings.\",\n          tips: [\"Make gradual changes and measure impact\", \"Focus on high-impact improvements first\"]\n        },\n        {\n          type: \"conclusion\",\n          text: \"Regular engagement analysis helps you optimize your booking experience and increase client satisfaction and conversions.\"\n        }\n      ]\n    },\n    \"Exporting booking data\": {\n      title: \"Exporting booking data\",\n      category: \"Analytics & Reporting\",\n      readTime: \"3 min read\",\n      content: [\n        {\n          type: \"intro\",\n          text: \"Export your booking data for deeper analysis, record keeping, tax purposes, or integration with other business tools.\"\n        },\n        {\n          type: \"step\",\n          number: 1,\n          title: \"Access export features\",\n          content: \"Go to your analytics or reports section and look for 'Export Data', 'Download Reports', or similar options.\",\n          tips: [\"Export capabilities may vary by plan level\", \"Pro plans typically offer more export options\"]\n        },\n        {\n          type: \"step\",\n          number: 2,\n          title: \"Choose export format\",\n          content: \"Select the appropriate format for your needs: CSV for spreadsheets, PDF for reports, or JSON for technical integrations.\",\n          tips: [\"CSV is most versatile for analysis\", \"PDF is best for sharing reports\"]\n        },\n        {\n          type: \"step\",\n          number: 3,\n          title: \"Set date ranges\",\n          content: \"Specify the time period for your export. You can export data for specific months, quarters, or custom date ranges.\",\n          tips: [\"Export regularly for backup purposes\", \"Match date ranges to your reporting periods\"]\n        },\n        {\n          type: \"step\",\n          number: 4,\n          title: \"Select data fields\",\n          content: \"Choose which information to include: booking details, client information, service data, payment information, etc.\",\n          tips: [\"Include relevant fields for your analysis\", \"Be mindful of client privacy when sharing data\"]\n        },\n        {\n          type: \"step\",\n          number: 5,\n          title: \"Download and organize\",\n          content: \"Download your exported data and organize it properly. Create a consistent naming convention and storage system.\",\n          tips: [\"Use descriptive file names with dates\", \"Store exports securely\"]\n        },\n        {\n          type: \"step\",\n          number: 6,\n          title: \"Analyze and utilize\",\n          content: \"Use exported data for business analysis, accounting, tax preparation, or integration with other business tools and systems.\",\n          tips: [\"Regular exports help with business planning\", \"Consider automated export options if available\"]\n        },\n        {\n          type: \"conclusion\",\n          text: \"Regular data exports provide valuable insights and ensure you have complete records for business management and compliance.\"\n        }\n      ]\n    }\n  };\n\n  const helpCategories = [\n    {\n      icon: BookOpen,\n      title: \"Getting Started\",\n      description: \"Learn the basics of BookingGen\",\n      color: \"bg-blue-100 text-blue-600 dark:bg-blue-900/50 dark:text-blue-400\",\n      articles: [\n        { title: \"How to create your first booking page\", id: \"create-booking-page\" },\n        { title: \"Setting up your profile and business information\", id: \"setup-profile\" },\n        { title: \"Understanding the dashboard layout\", id: \"dashboard-layout\" },\n        { title: \"Basic customization options\", id: \"basic-customization\" }\n      ]\n    },\n    {\n      icon: Settings,\n      title: \"Customization\",\n      description: \"Customize your booking pages\",\n      color: \"bg-purple-100 text-purple-600 dark:bg-purple-900/50 dark:text-purple-400\",\n      articles: [\n        { title: \"Advanced branding and styling options\", id: \"advanced-branding\" },\n        { title: \"Adding custom fields to booking forms\", id: \"custom-fields\" },\n        { title: \"Setting up booking time slots\", id: \"time-slots\" },\n        { title: \"Managing booking availability\", id: \"booking-availability\" }\n      ]\n    },\n    {\n      icon: Users,\n      title: \"Account Management\",\n      description: \"Manage your account settings\",\n      color: \"bg-green-100 text-green-600 dark:bg-green-900/50 dark:text-green-400\",\n      articles: [\n        { title: \"Updating your account information\", id: \"update-account\" },\n        { title: \"Managing subscription and billing\", id: \"subscription-billing\" },\n        { title: \"Understanding membership plans\", id: \"membership-plans\" },\n        { title: \"Account security settings\", id: \"security-settings\" }\n      ]\n    },\n    {\n      icon: Monitor,\n      title: \"Analytics & Reporting\",\n      description: \"Track your booking performance\",\n      color: \"bg-orange-100 text-orange-600 dark:bg-orange-900/50 dark:text-orange-400\",\n      articles: [\n        { title: \"Understanding your analytics dashboard\", id: \"analytics-dashboard\" },\n        { title: \"Booking conversion metrics\", id: \"conversion-metrics\" },\n        { title: \"Customer engagement insights\", id: \"engagement-insights\" },\n        { title: \"Exporting booking data\", id: \"export-data\" }\n      ]\n    }\n  ];\n\n  const commonQuestions = [\n    {\n      question: \"How do I create my first booking page?\",\n      answer: \"To create your first booking page, log into your dashboard and click 'Create Page'. You'll be guided through setting up your services, availability, and customizing the look and feel of your booking page.\",\n      category: \"Getting Started\"\n    },\n    {\n      question: \"Can I customize the appearance of my booking page?\",\n      answer: \"Yes! BookingGen offers extensive customization options including custom branding, colors, fonts, and layout options. Pro users have access to advanced styling features.\",\n      category: \"Customization\"\n    },\n    {\n      question: \"How do I manage my booking availability?\",\n      answer: \"In your dashboard, go to 'Settings' and then 'Availability'. Here you can set your working hours, block out unavailable times, and set buffer times between bookings.\",\n      category: \"Customization\"\n    },\n    {\n      question: \"What's included in the Pro plan?\",\n      answer: \"The Pro plan includes unlimited booking pages, advanced customization options, analytics dashboard, priority support, custom branding, and removal of BookingGen branding.\",\n      category: \"Account Management\"\n    },\n    {\n      question: \"How do I cancel my subscription?\",\n      answer: \"You can cancel your subscription at any time from your account settings. Go to 'Billing & Subscription' and click 'Cancel Subscription'. Your account will remain active until the end of your current billing period.\",\n      category: \"Account Management\"\n    },\n    {\n      question: \"How can I track my booking performance?\",\n      answer: \"Pro users have access to a comprehensive analytics dashboard showing booking conversion rates, customer engagement, popular time slots, and more detailed insights about their booking pages.\",\n      category: \"Analytics & Reporting\"\n    }\n  ];\n\n  const quickActions = [\n    {\n      icon: FileText,\n      title: \"User Guide\",\n      description: \"Complete step-by-step documentation\",\n      action: () => setLocation('/legal')\n    },\n    {\n      icon: Mail,\n      title: \"Contact Support\",\n      description: \"Send us a message for personalized help\",\n      action: () => setLocation('/contact')\n    },\n    {\n      icon: AlertCircle,\n      title: \"Report a Bug\",\n      description: \"Help us improve by reporting issues\",\n      action: () => setLocation('/report-bug')\n    },\n    {\n      icon: HelpCircle,\n      title: \"Request a Feature\",\n      description: \"Suggest new features for BookingGen\",\n      action: () => setLocation('/request-feature')\n    }\n  ];\n\n  const filteredQuestions = commonQuestions.filter(q => \n    searchTerm === '' || \n    q.question.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    q.answer.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    q.category.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  // Article display component\n  const ArticleView = ({ articleKey }: { articleKey: string }) => {\n    const article = (articleContent as any)[articleKey];\n    if (!article) return null;\n\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <SEO \n          title={`${article.title} | Help Center - BookingGen`}\n          description={article.content[0]?.text || `Learn about ${article.title.toLowerCase()}`}\n          ogTitle={`${article.title} - BookingGen Help`}\n          ogDescription={article.content[0]?.text || `Complete guide for ${article.title.toLowerCase()}`}\n        />\n        <Header />\n        \n        {/* Article Header */}\n        <section className=\"pt-32 pb-16 bg-gradient-to-br from-blue-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-900\">\n          <div className=\"container mx-auto px-6\">\n            <div className=\"max-w-4xl mx-auto\">\n              <Button \n                variant=\"ghost\" \n                onClick={() => setSelectedArticle(null)}\n                className=\"mb-6\"\n                data-testid=\"button-back-to-help-center\"\n              >\n                <ArrowLeft className=\"h-4 w-4 mr-2\" />\n                Back to Help Center\n              </Button>\n              \n              <div className=\"mb-6\">\n                <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400 mb-4\">\n                  {article.category}\n                </span>\n              </div>\n              \n              <h1 className=\"text-4xl lg:text-5xl font-bold text-foreground mb-6\">\n                {article.title}\n              </h1>\n              \n              <div className=\"flex items-center text-muted-foreground mb-8\">\n                <Clock className=\"h-4 w-4 mr-2\" />\n                <span>{article.readTime}</span>\n              </div>\n            </div>\n          </div>\n        </section>\n\n        {/* Article Content */}\n        <section className=\"py-16\">\n          <div className=\"container mx-auto px-6\">\n            <div className=\"max-w-4xl mx-auto\">\n              <div className=\"prose prose-lg dark:prose-invert max-w-none\">\n                {article.content.map((section: any, index: number) => {\n                  if (section.type === 'intro') {\n                    return (\n                      <div key={index} className=\"text-xl text-muted-foreground mb-8 p-6 bg-muted/30 rounded-lg\">\n                        {section.text}\n                      </div>\n                    );\n                  }\n                  \n                  if (section.type === 'step') {\n                    return (\n                      <Card key={index} className=\"mb-6\">\n                        <CardHeader>\n                          <div className=\"flex items-center gap-4\">\n                            <div className=\"w-10 h-10 bg-primary text-primary-foreground rounded-full flex items-center justify-center font-bold\">\n                              {section.number}\n                            </div>\n                            <CardTitle className=\"text-xl\">{section.title}</CardTitle>\n                          </div>\n                        </CardHeader>\n                        <CardContent>\n                          <p className=\"text-foreground mb-4\">{section.content}</p>\n                          {section.tips && section.tips.length > 0 && (\n                            <div className=\"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg\">\n                              <h4 className=\"font-semibold text-blue-900 dark:text-blue-100 mb-2 flex items-center\">\n                                <CheckCircle className=\"h-4 w-4 mr-2\" />\n                                Pro Tips\n                              </h4>\n                              <ul className=\"list-disc list-inside text-sm text-blue-800 dark:text-blue-200 space-y-1\">\n                                {section.tips.map((tip: string, tipIndex: number) => (\n                                  <li key={tipIndex}>{tip}</li>\n                                ))}\n                              </ul>\n                            </div>\n                          )}\n                        </CardContent>\n                      </Card>\n                    );\n                  }\n                  \n                  if (section.type === 'conclusion') {\n                    return (\n                      <div key={index} className=\"bg-green-50 dark:bg-green-900/20 p-6 rounded-lg mt-8\">\n                        <div className=\"flex items-start\">\n                          <CheckCircle className=\"h-6 w-6 text-green-600 dark:text-green-400 mr-3 mt-1 flex-shrink-0\" />\n                          <div>\n                            <h4 className=\"font-semibold text-green-900 dark:text-green-100 mb-2\">Summary</h4>\n                            <p className=\"text-green-800 dark:text-green-200\">{section.text}</p>\n                          </div>\n                        </div>\n                      </div>\n                    );\n                  }\n                  \n                  return null;\n                })}\n              </div>\n              \n              {/* Related Articles */}\n              <div className=\"mt-12 p-6 bg-muted/30 rounded-lg\">\n                <h3 className=\"text-lg font-semibold mb-4\">Need more help?</h3>\n                <div className=\"flex flex-col sm:flex-row gap-4\">\n                  <Button \n                    variant=\"outline\" \n                    onClick={() => setLocation('/contact')}\n                    data-testid=\"button-contact-from-article\"\n                  >\n                    <Mail className=\"h-4 w-4 mr-2\" />\n                    Contact Support\n                  </Button>\n                  <Button \n                    variant=\"outline\" \n                    onClick={() => setSelectedArticle(null)}\n                    data-testid=\"button-browse-more-articles\"\n                  >\n                    <BookOpen className=\"h-4 w-4 mr-2\" />\n                    Browse More Articles\n                  </Button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n        \n        <Footer />\n      </div>\n    );\n  };\n\n  // Main help center view\n  if (selectedArticle) {\n    return <ArticleView articleKey={selectedArticle} />;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <SEO \n        title=\"Help Center | BookingGen\" \n        description=\"Find answers to common questions, browse comprehensive guides, and get the help you need to make the most of BookingGen's booking page platform.\"\n        ogTitle=\"BookingGen Help Center - Self-Service Support\"\n        ogDescription=\"Get instant help with BookingGen. Browse our knowledge base, read step-by-step guides, and find solutions to common questions.\"\n      />\n      <Header />\n      \n      {/* Hero Section */}\n      <section className=\"pt-32 pb-16 bg-gradient-to-br from-blue-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-900\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto text-center\">\n            <Button \n              variant=\"ghost\" \n              onClick={() => setLocation('/legal')}\n              className=\"mb-6\"\n              data-testid=\"button-back-to-legal\"\n            >\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Back to Legal & Support\n            </Button>\n            \n            <div className=\"w-20 h-20 mx-auto mb-8 rounded-2xl bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center\">\n              <BookOpen className=\"h-10 w-10 text-blue-600 dark:text-blue-400\" />\n            </div>\n            \n            <h1 className=\"text-4xl lg:text-6xl font-bold text-foreground mb-6\">\n              Help Center\n            </h1>\n            <p className=\"text-xl text-muted-foreground mb-8\">\n              Find answers to your questions and learn how to make the most of BookingGen\n            </p>\n            \n            {/* Search Bar */}\n            <div className=\"relative max-w-2xl mx-auto mb-8\">\n              <Search className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-muted-foreground h-5 w-5\" />\n              <Input\n                type=\"text\"\n                placeholder=\"Search for answers...\"\n                className=\"pl-12 pr-4 py-6 text-lg rounded-2xl border-2 border-border focus:border-primary transition-colors\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                data-testid=\"input-search-help\"\n              />\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Quick Actions */}\n      <section className=\"py-16\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-6xl mx-auto\">\n            <h2 className=\"text-2xl font-bold text-foreground mb-8 text-center\">Quick Actions</h2>\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6\">\n              {quickActions.map((action, index) => (\n                <Card key={index} className=\"hover:shadow-lg transition-shadow cursor-pointer\" onClick={action.action}>\n                  <CardContent className=\"p-6 text-center\">\n                    <div className={`w-12 h-12 mx-auto mb-4 rounded-xl bg-gray-100 dark:bg-gray-800 flex items-center justify-center`}>\n                      <action.icon className=\"h-6 w-6 text-gray-600 dark:text-gray-400\" />\n                    </div>\n                    <h3 className=\"font-semibold text-foreground mb-2\">{action.title}</h3>\n                    <p className=\"text-sm text-muted-foreground\">{action.description}</p>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Help Categories */}\n      <section className=\"py-16 bg-muted/30\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-6xl mx-auto\">\n            <h2 className=\"text-2xl font-bold text-foreground mb-8 text-center\">Browse by Category</h2>\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6\">\n              {helpCategories.map((category, index) => (\n                <Card key={index} className=\"hover:shadow-lg transition-shadow\">\n                  <CardHeader>\n                    <div className={`w-12 h-12 rounded-xl ${category.color} flex items-center justify-center mb-4`}>\n                      <category.icon className=\"h-6 w-6\" />\n                    </div>\n                    <CardTitle className=\"text-lg\">{category.title}</CardTitle>\n                    <p className=\"text-sm text-muted-foreground\">{category.description}</p>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-2\">\n                      {category.articles.slice(0, 3).map((article, articleIndex) => (\n                        <div \n                          key={articleIndex} \n                          className=\"flex items-center text-sm text-muted-foreground hover:text-foreground transition-colors cursor-pointer\"\n                          onClick={() => setSelectedArticle(article.title)}\n                          data-testid={`article-link-${article.id}`}\n                        >\n                          <ChevronRight className=\"h-4 w-4 mr-2\" />\n                          {article.title}\n                        </div>\n                      ))}\n                      <div className=\"pt-2\">\n                        <span className=\"text-xs text-primary cursor-pointer hover:underline\">\n                          View all {category.articles.length} articles\n                        </span>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Common Questions */}\n      <section className=\"py-16\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            <h2 className=\"text-2xl font-bold text-foreground mb-8 text-center\">\n              {searchTerm ? `Search Results (${filteredQuestions.length})` : 'Frequently Asked Questions'}\n            </h2>\n            <div className=\"space-y-4\">\n              {filteredQuestions.map((qa, index) => (\n                <Card key={index} className=\"hover:shadow-md transition-shadow\">\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex items-start space-x-4\">\n                      <div className=\"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center flex-shrink-0 mt-1\">\n                        <HelpCircle className=\"h-4 w-4 text-blue-600 dark:text-blue-400\" />\n                      </div>\n                      <div className=\"flex-1\">\n                        <h3 className=\"font-semibold text-foreground mb-2\">{qa.question}</h3>\n                        <p className=\"text-muted-foreground mb-3\">{qa.answer}</p>\n                        <div className=\"flex items-center\">\n                          <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400\">\n                            {qa.category}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n            \n            {filteredQuestions.length === 0 && searchTerm && (\n              <div className=\"text-center py-12\">\n                <AlertCircle className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n                <h3 className=\"text-lg font-semibold text-foreground mb-2\">No results found</h3>\n                <p className=\"text-muted-foreground mb-6\">\n                  We couldn't find any articles matching \"{searchTerm}\". Try a different search term or browse our categories above.\n                </p>\n                <Button variant=\"outline\" onClick={() => setSearchTerm('')} data-testid=\"button-clear-search\">\n                  Clear Search\n                </Button>\n              </div>\n            )}\n          </div>\n        </div>\n      </section>\n\n      {/* Additional Help */}\n      <section className=\"py-16 bg-muted/30\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto text-center\">\n            <h2 className=\"text-2xl font-bold text-foreground mb-4\">Still need help?</h2>\n            <p className=\"text-muted-foreground mb-8\">\n              Can't find what you're looking for? Our support team is here to help.\n            </p>\n            <div className=\"flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4\">\n              <Button \n                size=\"lg\" \n                onClick={() => setLocation('/contact')}\n                data-testid=\"button-contact-support\"\n                className=\"flex items-center\"\n              >\n                <Mail className=\"h-4 w-4 mr-2\" />\n                Contact Support\n              </Button>\n              <Button \n                variant=\"outline\" \n                size=\"lg\" \n                onClick={() => setLocation('/report-bug')}\n                data-testid=\"button-report-bug\"\n                className=\"flex items-center\"\n              >\n                <AlertCircle className=\"h-4 w-4 mr-2\" />\n                Report a Bug\n              </Button>\n            </div>\n            <div className=\"mt-6 flex items-center justify-center text-sm text-muted-foreground\">\n              <Clock className=\"h-4 w-4 mr-2\" />\n              Average response time: 24-48 hours\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <Footer />\n    </div>\n  );\n}","size_bytes":62479},"client/src/pages/request-feature.tsx":{"content":"import { useState } from 'react';\nimport { useLocation } from 'wouter';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { ArrowLeft, Lightbulb, Mail, Sparkles, Copy, CheckCircle, Bug } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\n\nexport default function RequestFeature() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [copied, setCopied] = useState(false);\n  const supportEmail = 'team@bookinggen.xyz';\n\n  const copyEmail = async () => {\n    try {\n      await navigator.clipboard.writeText(supportEmail);\n      setCopied(true);\n      toast({\n        title: \"Email copied!\",\n        description: \"The email address has been copied to your clipboard.\",\n      });\n      setTimeout(() => setCopied(false), 2000);\n    } catch (err) {\n      toast({\n        title: \"Copy failed\",\n        description: \"Unable to copy email to clipboard.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const openEmailClient = () => {\n    const subject = encodeURIComponent('Feature Request - BookingGen');\n    const body = encodeURIComponent(`Dear BookingGen Team,\n\nI would like to request a new feature for the BookingGen platform. Here are the details:\n\nFeature Title:\n[Brief, descriptive title of the feature]\n\nFeature Description:\n[Detailed description of what the feature should do]\n\nUse Case/Problem to Solve:\n[Why is this feature needed? What problem does it solve?]\n\nHow it would help:\n[How would this feature benefit you and other users?]\n\nSuggested Implementation:\n[Any ideas on how this could work? This is optional]\n\nPriority Level:\n[High/Medium/Low - how important is this to you?]\n\nSimilar Features in Other Tools:\n[Have you seen this feature elsewhere? Please provide examples]\n\nAdditional Notes:\n[Any other relevant information or ideas]\n\nThank you for considering my request!\n\nBest regards,\n[Your Name]`);\n    \n    window.location.href = `mailto:${supportEmail}?subject=${subject}&body=${body}`;\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <div className=\"container mx-auto px-6 py-8 max-w-4xl\">\n        <div className=\"mb-8\">\n          <Button \n            variant=\"ghost\" \n            onClick={() => setLocation('/dashboard')}\n            className=\"mb-4\"\n            data-testid=\"button-back-to-dashboard\"\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Back to Dashboard\n          </Button>\n          <div className=\"text-center\">\n            <div className=\"w-20 h-20 mx-auto mb-6 rounded-2xl bg-yellow-100 flex items-center justify-center\">\n              <Lightbulb className=\"h-10 w-10 text-yellow-600\" />\n            </div>\n            <h1 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">Request a Feature</h1>\n            <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\n              Have an idea that could make BookingGen even better? We love hearing from our users! Share your feature requests and help shape the future of our platform.\n            </p>\n          </div>\n        </div>\n\n        <div className=\"grid lg:grid-cols-2 gap-8\">\n          {/* Contact Information */}\n          <Card className=\"border-0 shadow-lg\">\n            <CardContent className=\"p-8\">\n              <div className=\"text-center mb-8\">\n                <div className=\"w-16 h-16 mx-auto mb-4 rounded-xl bg-primary/10 flex items-center justify-center\">\n                  <Mail className=\"h-8 w-8 text-primary\" />\n                </div>\n                <h2 className=\"text-2xl font-bold text-foreground mb-4\">Share Your Ideas</h2>\n                <p className=\"text-muted-foreground\">\n                  Send us your feature request via email\n                </p>\n              </div>\n\n              <div className=\"space-y-6\">\n                <div className=\"text-center p-6 bg-muted/30 rounded-xl\">\n                  <p className=\"text-sm text-muted-foreground mb-2\">Support Email</p>\n                  <div className=\"flex items-center justify-center gap-3\">\n                    <span className=\"text-xl font-semibold text-foreground\" data-testid=\"support-email\">\n                      {supportEmail}\n                    </span>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={copyEmail}\n                      className=\"h-8 w-8 p-0\"\n                      data-testid=\"button-copy-email\"\n                    >\n                      {copied ? (\n                        <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                      ) : (\n                        <Copy className=\"h-4 w-4 text-muted-foreground\" />\n                      )}\n                    </Button>\n                  </div>\n                </div>\n\n                <Button\n                  onClick={openEmailClient}\n                  className=\"w-full h-12 text-lg font-semibold\"\n                  data-testid=\"button-open-email-client\"\n                >\n                  <Mail className=\"h-5 w-5 mr-2\" />\n                  Open Email Client\n                </Button>\n\n                <div className=\"text-center\">\n                  <p className=\"text-sm text-muted-foreground\">\n                    We review all feature requests and respond promptly\n                  </p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Feature Request Guidelines */}\n          <Card className=\"border-0 shadow-lg\">\n            <CardContent className=\"p-8\">\n              <div className=\"mb-6\">\n                <div className=\"w-16 h-16 mx-auto mb-4 rounded-xl bg-purple-100 flex items-center justify-center\">\n                  <Sparkles className=\"h-8 w-8 text-purple-600\" />\n                </div>\n                <h2 className=\"text-2xl font-bold text-foreground text-center mb-4\">How to Suggest Great Features</h2>\n              </div>\n\n              <div className=\"space-y-6\">\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-start space-x-3\">\n                    <div className=\"w-6 h-6 rounded-full bg-primary text-white text-sm font-bold flex items-center justify-center flex-shrink-0 mt-0.5\">1</div>\n                    <div>\n                      <h3 className=\"font-semibold text-foreground\">Clear Title</h3>\n                      <p className=\"text-sm text-muted-foreground\">Give your feature a clear, descriptive name.</p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-start space-x-3\">\n                    <div className=\"w-6 h-6 rounded-full bg-primary text-white text-sm font-bold flex items-center justify-center flex-shrink-0 mt-0.5\">2</div>\n                    <div>\n                      <h3 className=\"font-semibold text-foreground\">Problem & Solution</h3>\n                      <p className=\"text-sm text-muted-foreground\">Explain what problem this feature would solve.</p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-start space-x-3\">\n                    <div className=\"w-6 h-6 rounded-full bg-primary text-white text-sm font-bold flex items-center justify-center flex-shrink-0 mt-0.5\">3</div>\n                    <div>\n                      <h3 className=\"font-semibold text-foreground\">User Benefits</h3>\n                      <p className=\"text-sm text-muted-foreground\">How would this help you and other users?</p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-start space-x-3\">\n                    <div className=\"w-6 h-6 rounded-full bg-primary text-white text-sm font-bold flex items-center justify-center flex-shrink-0 mt-0.5\">4</div>\n                    <div>\n                      <h3 className=\"font-semibold text-foreground\">Use Cases</h3>\n                      <p className=\"text-sm text-muted-foreground\">Provide specific examples of when you'd use this feature.</p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-start space-x-3\">\n                    <div className=\"w-6 h-6 rounded-full bg-primary text-white text-sm font-bold flex items-center justify-center flex-shrink-0 mt-0.5\">5</div>\n                    <div>\n                      <h3 className=\"font-semibold text-foreground\">Priority Level</h3>\n                      <p className=\"text-sm text-muted-foreground\">Tell us how important this feature is to you.</p>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"p-4 bg-green-50 rounded-lg border border-green-200\">\n                  <p className=\"text-sm text-green-800 font-medium\">\n                    🌟 <strong>Great Ideas Welcome:</strong> No idea is too small or too big - we want to hear them all!\n                  </p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Popular Feature Categories */}\n        <Card className=\"mt-8 border-0 shadow-lg\">\n          <CardContent className=\"p-8\">\n            <h3 className=\"text-xl font-bold text-foreground mb-6 text-center\">Popular Feature Categories</h3>\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n              <div className=\"text-center p-4 bg-blue-50 rounded-lg\">\n                <div className=\"text-2xl mb-2\">📅</div>\n                <p className=\"text-sm font-medium text-blue-800\">Scheduling</p>\n              </div>\n              <div className=\"text-center p-4 bg-green-50 rounded-lg\">\n                <div className=\"text-2xl mb-2\">💬</div>\n                <p className=\"text-sm font-medium text-green-800\">Communication</p>\n              </div>\n              <div className=\"text-center p-4 bg-purple-50 rounded-lg\">\n                <div className=\"text-2xl mb-2\">📊</div>\n                <p className=\"text-sm font-medium text-purple-800\">Analytics</p>\n              </div>\n              <div className=\"text-center p-4 bg-orange-50 rounded-lg\">\n                <div className=\"text-2xl mb-2\">🎨</div>\n                <p className=\"text-sm font-medium text-orange-800\">Customization</p>\n              </div>\n            </div>\n            <p className=\"text-center text-muted-foreground mt-4 text-sm\">\n              Whether it's in these areas or something completely new, we'd love to hear your ideas!\n            </p>\n          </CardContent>\n        </Card>\n\n        {/* Additional Help */}\n        <Card className=\"mt-8 border-0 shadow-lg\">\n          <CardContent className=\"p-8 text-center\">\n            <h3 className=\"text-xl font-bold text-foreground mb-4\">What Happens Next?</h3>\n            <p className=\"text-muted-foreground mb-6\">\n              Our team reviews every feature request. While we can't implement everything immediately, \n              your feedback directly influences our product roadmap and development priorities.\n            </p>\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n              <Button\n                variant=\"outline\"\n                onClick={() => setLocation('/dashboard')}\n                data-testid=\"button-back-to-dashboard-bottom\"\n              >\n                Back to Dashboard\n              </Button>\n              <Button\n                variant=\"outline\"\n                onClick={() => setLocation('/report-bug')}\n                data-testid=\"button-report-bug\"\n              >\n                <Bug className=\"h-4 w-4 mr-2\" />\n                Report a Bug Instead\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}","size_bytes":11701},"client/src/components/seo.tsx":{"content":"import { useEffect } from 'react';\n\ninterface SEOProps {\n  title: string;\n  description: string;\n  ogTitle?: string;\n  ogDescription?: string;\n}\n\nexport default function SEO({ title, description, ogTitle, ogDescription }: SEOProps) {\n  useEffect(() => {\n    // Set page title\n    document.title = title;\n\n    // Set or update meta description\n    let metaDescription = document.querySelector('meta[name=\"description\"]');\n    if (!metaDescription) {\n      metaDescription = document.createElement('meta');\n      metaDescription.setAttribute('name', 'description');\n      document.head.appendChild(metaDescription);\n    }\n    metaDescription.setAttribute('content', description);\n\n    // Set or update Open Graph title\n    let ogTitleMeta = document.querySelector('meta[property=\"og:title\"]');\n    if (!ogTitleMeta) {\n      ogTitleMeta = document.createElement('meta');\n      ogTitleMeta.setAttribute('property', 'og:title');\n      document.head.appendChild(ogTitleMeta);\n    }\n    ogTitleMeta.setAttribute('content', ogTitle || title);\n\n    // Set or update Open Graph description\n    let ogDescMeta = document.querySelector('meta[property=\"og:description\"]');\n    if (!ogDescMeta) {\n      ogDescMeta = document.createElement('meta');\n      ogDescMeta.setAttribute('property', 'og:description');\n      document.head.appendChild(ogDescMeta);\n    }\n    ogDescMeta.setAttribute('content', ogDescription || description);\n\n    // Set or update Open Graph type\n    let ogTypeMeta = document.querySelector('meta[property=\"og:type\"]');\n    if (!ogTypeMeta) {\n      ogTypeMeta = document.createElement('meta');\n      ogTypeMeta.setAttribute('property', 'og:type');\n      document.head.appendChild(ogTypeMeta);\n    }\n    ogTypeMeta.setAttribute('content', 'website');\n\n    // Cleanup function is not needed for meta tags as they persist across navigation\n  }, [title, description, ogTitle, ogDescription]);\n\n  return null; // This component doesn't render anything\n}","size_bytes":1955},"client/src/lib/currencies.ts":{"content":"// Comprehensive currency list with symbols and ISO codes\nexport interface Currency {\n  code: string;\n  symbol: string;\n  name: string;\n  country?: string;\n}\n\nexport const currencies: Currency[] = [\n  // Major currencies\n  { code: 'USD', symbol: '$', name: 'US Dollar', country: 'United States' },\n  { code: 'EUR', symbol: '€', name: 'Euro', country: 'European Union' },\n  { code: 'GBP', symbol: '£', name: 'British Pound', country: 'United Kingdom' },\n  { code: 'JPY', symbol: '¥', name: 'Japanese Yen', country: 'Japan' },\n  { code: 'CHF', symbol: 'CHF', name: 'Swiss Franc', country: 'Switzerland' },\n  { code: 'CAD', symbol: 'C$', name: 'Canadian Dollar', country: 'Canada' },\n  { code: 'AUD', symbol: 'A$', name: 'Australian Dollar', country: 'Australia' },\n  { code: 'CNY', symbol: '¥', name: 'Chinese Yuan', country: 'China' },\n  \n  // Americas\n  { code: 'BRL', symbol: 'R$', name: 'Brazilian Real', country: 'Brazil' },\n  { code: 'MXN', symbol: '$', name: 'Mexican Peso', country: 'Mexico' },\n  { code: 'ARS', symbol: '$', name: 'Argentine Peso', country: 'Argentina' },\n  { code: 'CLP', symbol: '$', name: 'Chilean Peso', country: 'Chile' },\n  { code: 'COP', symbol: '$', name: 'Colombian Peso', country: 'Colombia' },\n  { code: 'PEN', symbol: 'S/', name: 'Peruvian Sol', country: 'Peru' },\n  { code: 'UYU', symbol: '$', name: 'Uruguayan Peso', country: 'Uruguay' },\n  \n  // Europe\n  { code: 'NOK', symbol: 'kr', name: 'Norwegian Krone', country: 'Norway' },\n  { code: 'SEK', symbol: 'kr', name: 'Swedish Krona', country: 'Sweden' },\n  { code: 'DKK', symbol: 'kr', name: 'Danish Krone', country: 'Denmark' },\n  { code: 'PLN', symbol: 'zł', name: 'Polish Zloty', country: 'Poland' },\n  { code: 'CZK', symbol: 'Kč', name: 'Czech Koruna', country: 'Czech Republic' },\n  { code: 'HUF', symbol: 'Ft', name: 'Hungarian Forint', country: 'Hungary' },\n  { code: 'RON', symbol: 'lei', name: 'Romanian Leu', country: 'Romania' },\n  { code: 'BGN', symbol: 'лв', name: 'Bulgarian Lev', country: 'Bulgaria' },\n  { code: 'HRK', symbol: 'kn', name: 'Croatian Kuna', country: 'Croatia' },\n  { code: 'RUB', symbol: '₽', name: 'Russian Ruble', country: 'Russia' },\n  { code: 'UAH', symbol: '₴', name: 'Ukrainian Hryvnia', country: 'Ukraine' },\n  { code: 'TRY', symbol: '₺', name: 'Turkish Lira', country: 'Turkey' },\n  \n  // Asia-Pacific\n  { code: 'INR', symbol: '₹', name: 'Indian Rupee', country: 'India' },\n  { code: 'KRW', symbol: '₩', name: 'South Korean Won', country: 'South Korea' },\n  { code: 'SGD', symbol: 'S$', name: 'Singapore Dollar', country: 'Singapore' },\n  { code: 'HKD', symbol: 'HK$', name: 'Hong Kong Dollar', country: 'Hong Kong' },\n  { code: 'TWD', symbol: 'NT$', name: 'Taiwan Dollar', country: 'Taiwan' },\n  { code: 'THB', symbol: '฿', name: 'Thai Baht', country: 'Thailand' },\n  { code: 'MYR', symbol: 'RM', name: 'Malaysian Ringgit', country: 'Malaysia' },\n  { code: 'IDR', symbol: 'Rp', name: 'Indonesian Rupiah', country: 'Indonesia' },\n  { code: 'PHP', symbol: '₱', name: 'Philippine Peso', country: 'Philippines' },\n  { code: 'VND', symbol: '₫', name: 'Vietnamese Dong', country: 'Vietnam' },\n  { code: 'NZD', symbol: 'NZ$', name: 'New Zealand Dollar', country: 'New Zealand' },\n  \n  // Middle East & Africa\n  { code: 'AED', symbol: 'د.إ', name: 'UAE Dirham', country: 'United Arab Emirates' },\n  { code: 'SAR', symbol: '﷼', name: 'Saudi Riyal', country: 'Saudi Arabia' },\n  { code: 'QAR', symbol: '﷼', name: 'Qatari Riyal', country: 'Qatar' },\n  { code: 'KWD', symbol: 'د.ك', name: 'Kuwaiti Dinar', country: 'Kuwait' },\n  { code: 'BHD', symbol: '.د.ب', name: 'Bahraini Dinar', country: 'Bahrain' },\n  { code: 'OMR', symbol: '﷼', name: 'Omani Rial', country: 'Oman' },\n  { code: 'ILS', symbol: '₪', name: 'Israeli Shekel', country: 'Israel' },\n  { code: 'EGP', symbol: '£', name: 'Egyptian Pound', country: 'Egypt' },\n  { code: 'ZAR', symbol: 'R', name: 'South African Rand', country: 'South Africa' },\n  { code: 'NGN', symbol: '₦', name: 'Nigerian Naira', country: 'Nigeria' },\n  { code: 'KES', symbol: 'KSh', name: 'Kenyan Shilling', country: 'Kenya' },\n  \n  // Cryptocurrencies (popular ones)\n  { code: 'BTC', symbol: '₿', name: 'Bitcoin' },\n  { code: 'ETH', symbol: 'Ξ', name: 'Ethereum' },\n  { code: 'USDC', symbol: 'USDC', name: 'USD Coin' },\n  { code: 'USDT', symbol: 'USDT', name: 'Tether' },\n];\n\nexport const getCurrencyByCode = (code: string): Currency | undefined => {\n  return currencies.find(currency => currency.code === code);\n};\n\nexport const formatCurrencyDisplay = (currency: Currency): string => {\n  return `${currency.symbol} ${currency.code} - ${currency.name}${currency.country ? ` (${currency.country})` : ''}`;\n};\n\nexport const searchCurrencies = (query: string): Currency[] => {\n  if (!query.trim()) return currencies;\n  \n  const lowercaseQuery = query.toLowerCase();\n  return currencies.filter(currency => \n    currency.code.toLowerCase().includes(lowercaseQuery) ||\n    currency.name.toLowerCase().includes(lowercaseQuery) ||\n    currency.symbol.includes(query) ||\n    (currency.country && currency.country.toLowerCase().includes(lowercaseQuery))\n  );\n};","size_bytes":5148},"client/src/pages/subscription/success.tsx":{"content":"import { useEffect, useState } from 'react';\nimport { useLocation } from 'wouter';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Check, Loader2, Crown } from 'lucide-react';\nimport { apiRequest, queryClient } from '@/lib/queryClient';\nimport { useToast } from '@/hooks/use-toast';\nimport Header from '@/components/layout/header';\nimport Footer from '@/components/layout/footer';\n\nexport default function SubscriptionSuccess() {\n  const [, setLocation] = useLocation();\n  const [isProcessing, setIsProcessing] = useState(true);\n  const [subscriptionData, setSubscriptionData] = useState<any>(null);\n  const [error, setError] = useState<string | null>(null);\n  const { toast } = useToast();\n\n  useEffect(() => {\n    const processSubscription = async () => {\n      try {\n        // Get subscription ID from URL params or session storage\n        const urlParams = new URLSearchParams(window.location.search);\n        const subscriptionId = urlParams.get('razorpay_subscription_id') || \n                             urlParams.get('subscription_id') || \n                             sessionStorage.getItem('pendingSubscriptionId');\n        \n        if (!subscriptionId) {\n          throw new Error('No subscription ID found');\n        }\n\n        // Get subscription details from Razorpay to confirm it's active\n        const response = await apiRequest('GET', `/api/razorpay/subscriptions/${subscriptionId}`);\n        \n        if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(errorData.error || 'Failed to verify subscription');\n        }\n\n        const subscription = await response.json();\n        setSubscriptionData(subscription);\n\n        // Clear session storage\n        sessionStorage.removeItem('pendingSubscriptionId');\n        sessionStorage.removeItem('subscriptionPlanKey');\n\n        // Refresh user profile to show new membership status\n        await queryClient.invalidateQueries({ queryKey: ['/api/profile'] });\n\n        toast({\n          title: subscription.status?.toLowerCase() === 'active' ? \"Subscription Activated!\" : \"Subscription Created!\",\n          description: subscription.status?.toLowerCase() === 'active' \n            ? \"Your Pro membership is now active. You have access to all premium features.\"\n            : \"Your subscription has been created successfully. It may take a few minutes to become fully active.\",\n        });\n\n      } catch (error) {\n        console.error('Subscription processing failed:', error);\n        setError(error instanceof Error ? error.message : 'Failed to process subscription');\n        \n        toast({\n          title: \"Subscription Error\",\n          description: \"There was an issue processing your subscription. Please contact support.\",\n          variant: \"destructive\",\n        });\n      } finally {\n        setIsProcessing(false);\n      }\n    };\n\n    processSubscription();\n  }, [toast]);\n\n  if (isProcessing) {\n    return (\n      <div className=\"min-h-screen bg-background page-gradient flex items-center justify-center\">\n        <Header />\n        <Card className=\"w-full max-w-md mx-auto glass-prism-card backdrop-blur-xl bg-gradient-to-br from-white/95 via-blue-50/80 to-white/90 dark:from-gray-900/95 dark:via-blue-950/80 dark:to-gray-900/90 border border-white/30 dark:border-white/20 shadow-2xl\">\n          <CardContent className=\"p-8 text-center\">\n            <Loader2 className=\"h-12 w-12 animate-spin mx-auto mb-4 text-blue-600\" />\n            <h2 className=\"text-xl font-semibold mb-2\">Processing your subscription...</h2>\n            <p className=\"text-gray-600 dark:text-gray-300\">Please wait while we activate your Pro membership.</p>\n          </CardContent>\n        </Card>\n        <Footer />\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-background page-gradient\">\n        <Header />\n        <div className=\"container mx-auto px-4 py-16 flex items-center justify-center min-h-[60vh]\">\n          <Card className=\"w-full max-w-md mx-auto glass-prism-card backdrop-blur-xl bg-gradient-to-br from-white/95 via-red-50/80 to-white/90 dark:from-gray-900/95 dark:via-red-950/80 dark:to-gray-900/90 border border-red-200/30 dark:border-red-800/20 shadow-2xl\">\n            <CardHeader className=\"text-center\">\n              <CardTitle className=\"text-red-600 dark:text-red-400\">Subscription Error</CardTitle>\n            </CardHeader>\n            <CardContent className=\"text-center space-y-4\">\n              <p className=\"text-gray-600 dark:text-gray-300\">{error}</p>\n              <div className=\"space-y-2\">\n                <Button \n                  onClick={() => setLocation('/pricing')}\n                  className=\"w-full\"\n                  data-testid=\"button-try-again\"\n                >\n                  Try Again\n                </Button>\n                <Button \n                  variant=\"outline\"\n                  onClick={() => setLocation('/dashboard')}\n                  className=\"w-full\"\n                  data-testid=\"button-dashboard\"\n                >\n                  Go to Dashboard\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n        <Footer />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background page-gradient\">\n      <Header />\n      <div className=\"container mx-auto px-4 py-16 flex items-center justify-center min-h-[60vh]\">\n        <Card className=\"w-full max-w-lg mx-auto glass-prism-card backdrop-blur-xl bg-gradient-to-br from-white/95 via-green-50/80 to-white/90 dark:from-gray-900/95 dark:via-green-950/80 dark:to-gray-900/90 border border-green-200/30 dark:border-green-800/20 shadow-2xl\">\n          <CardHeader className=\"text-center\">\n            <div className=\"w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <Check className=\"h-8 w-8 text-green-600 dark:text-green-400\" />\n            </div>\n            <CardTitle className=\"text-2xl text-green-800 dark:text-green-200 flex items-center justify-center gap-2\">\n              <Crown className=\"h-6 w-6\" />\n              {subscriptionData?.status?.toLowerCase() === 'active' ? 'Subscription Activated!' : 'Subscription Created!'}\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"text-center space-y-6\">\n            <div className=\"space-y-2\">\n              <p className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">\n                {subscriptionData?.status?.toLowerCase() === 'active' ? 'Welcome to Pro!' : 'Subscription Created!'}\n              </p>\n              <p className=\"text-gray-600 dark:text-gray-300\">\n                {subscriptionData?.status?.toLowerCase() === 'active' \n                  ? 'Your subscription is now active and you have access to all premium features.'\n                  : 'Your subscription has been created. It may take a few minutes to become fully active.'\n                }\n              </p>\n            </div>\n\n            {subscriptionData && (\n              <div className=\"bg-white/50 dark:bg-gray-800/50 rounded-lg p-4 space-y-2\">\n                <div className=\"flex justify-between text-sm\">\n                  <span className=\"text-gray-600 dark:text-gray-400\">Subscription ID:</span>\n                  <span className=\"font-mono text-xs\">{subscriptionData.subscriptionId}</span>\n                </div>\n                <div className=\"flex justify-between text-sm\">\n                  <span className=\"text-gray-600 dark:text-gray-400\">Status:</span>\n                  <span className=\"font-semibold text-green-600 dark:text-green-400\">\n                    {subscriptionData.status?.toUpperCase()}\n                  </span>\n                </div>\n                <div className=\"flex justify-between text-sm\">\n                  <span className=\"text-gray-600 dark:text-gray-400\">Plan:</span>\n                  <span className=\"text-gray-900 dark:text-gray-100\">\n                    {subscriptionData.plan?.toUpperCase() || 'Pro'}\n                  </span>\n                </div>\n              </div>\n            )}\n\n            <div className=\"space-y-3\">\n              <Button \n                onClick={() => setLocation('/dashboard')}\n                className=\"w-full bg-green-600 hover:bg-green-700 text-white\"\n                data-testid=\"button-dashboard\"\n              >\n                Go to Dashboard\n              </Button>\n              <Button \n                variant=\"outline\"\n                onClick={() => setLocation('/pages/create')}\n                className=\"w-full\"\n                data-testid=\"button-create-page\"\n              >\n                Create Your First Page\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n      <Footer />\n    </div>\n  );\n}","size_bytes":8921},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\n// Global auth handler for 401 errors\nlet authHandler: (() => void) | null = null;\n\nexport function setAuthHandler(handler: () => void) {\n  authHandler = handler;\n}\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    // Handle 401 errors before reading the body to avoid consumption issues\n    if (res.status === 401 && authHandler) {\n      authHandler();\n      throw new Error('Unauthorized');\n    }\n    \n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const headers: Record<string, string> = {};\n  \n  if (data) {\n    headers[\"Content-Type\"] = \"application/json\";\n  }\n  \n  // Include JWT token if available\n  const token = localStorage.getItem('token');\n  if (token) {\n    headers[\"Authorization\"] = `Bearer ${token}`;\n  }\n\n  const res = await fetch(url, {\n    method,\n    headers,\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const headers: Record<string, string> = {};\n    \n    // Include JWT token if available\n    const token = localStorage.getItem('token');\n    if (token) {\n      headers[\"Authorization\"] = `Bearer ${token}`;\n    }\n\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      headers,\n      credentials: \"include\",\n    });\n\n    // Handle 401 errors\n    if (res.status === 401) {\n      if (authHandler) {\n        authHandler();\n        return null; // Return null instead of throwing to prevent error display\n      }\n      if (unauthorizedBehavior === \"returnNull\") {\n        return null;\n      }\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":2376},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/pages/report-bug.tsx":{"content":"import { useState } from 'react';\nimport { useLocation } from 'wouter';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { ArrowLeft, Bug, Mail, AlertTriangle, Copy, CheckCircle, Lightbulb } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\n\nexport default function ReportBug() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [copied, setCopied] = useState(false);\n  const supportEmail = 'team@bookinggen.xyz';\n\n  const copyEmail = async () => {\n    try {\n      await navigator.clipboard.writeText(supportEmail);\n      setCopied(true);\n      toast({\n        title: \"Email copied!\",\n        description: \"The email address has been copied to your clipboard.\",\n      });\n      setTimeout(() => setCopied(false), 2000);\n    } catch (err) {\n      toast({\n        title: \"Copy failed\",\n        description: \"Unable to copy email to clipboard.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const openEmailClient = () => {\n    const subject = encodeURIComponent('Bug Report - BookingGen');\n    const body = encodeURIComponent(`Dear BookingGen Team,\n\nI've encountered a bug in the application. Here are the details:\n\nBug Description:\n[Please describe what went wrong]\n\nSteps to Reproduce:\n1. [First step]\n2. [Second step]\n3. [Third step]\n\nExpected Behavior:\n[What should have happened]\n\nActual Behavior:\n[What actually happened]\n\nBrowser/Device Information:\n- Browser: [e.g., Chrome, Firefox, Safari]\n- Version: [Browser version]\n- Operating System: [e.g., Windows 10, macOS, iOS]\n- Device: [Desktop, Mobile, Tablet]\n\nAdditional Information:\n[Any other relevant details, screenshots, or error messages]\n\nThank you for your help!\n\nBest regards,\n[Your Name]`);\n    \n    window.location.href = `mailto:${supportEmail}?subject=${subject}&body=${body}`;\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <div className=\"container mx-auto px-6 py-8 max-w-4xl\">\n        <div className=\"mb-8\">\n          <Button \n            variant=\"ghost\" \n            onClick={() => setLocation('/dashboard')}\n            className=\"mb-4\"\n            data-testid=\"button-back-to-dashboard\"\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Back to Dashboard\n          </Button>\n          <div className=\"text-center\">\n            <div className=\"w-20 h-20 mx-auto mb-6 rounded-2xl bg-red-100 flex items-center justify-center\">\n              <Bug className=\"h-10 w-10 text-red-600\" />\n            </div>\n            <h1 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">Report a Bug</h1>\n            <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\n              Found something that's not working as expected? We want to hear about it! Help us improve BookingGen by reporting any bugs you encounter.\n            </p>\n          </div>\n        </div>\n\n        <div className=\"grid lg:grid-cols-2 gap-8\">\n          {/* Contact Information */}\n          <Card className=\"border-0 shadow-lg\">\n            <CardContent className=\"p-8\">\n              <div className=\"text-center mb-8\">\n                <div className=\"w-16 h-16 mx-auto mb-4 rounded-xl bg-primary/10 flex items-center justify-center\">\n                  <Mail className=\"h-8 w-8 text-primary\" />\n                </div>\n                <h2 className=\"text-2xl font-bold text-foreground mb-4\">Contact Our Team</h2>\n                <p className=\"text-muted-foreground\">\n                  Send us your bug report directly via email\n                </p>\n              </div>\n\n              <div className=\"space-y-6\">\n                <div className=\"text-center p-6 bg-muted/30 rounded-xl\">\n                  <p className=\"text-sm text-muted-foreground mb-2\">Support Email</p>\n                  <div className=\"flex items-center justify-center gap-3\">\n                    <span className=\"text-xl font-semibold text-foreground\" data-testid=\"support-email\">\n                      {supportEmail}\n                    </span>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={copyEmail}\n                      className=\"h-8 w-8 p-0\"\n                      data-testid=\"button-copy-email\"\n                    >\n                      {copied ? (\n                        <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                      ) : (\n                        <Copy className=\"h-4 w-4 text-muted-foreground\" />\n                      )}\n                    </Button>\n                  </div>\n                </div>\n\n                <Button\n                  onClick={openEmailClient}\n                  className=\"w-full h-12 text-lg font-semibold\"\n                  data-testid=\"button-open-email-client\"\n                >\n                  <Mail className=\"h-5 w-5 mr-2\" />\n                  Open Email Client\n                </Button>\n\n                <div className=\"text-center\">\n                  <p className=\"text-sm text-muted-foreground\">\n                    We typically respond within 24 hours\n                  </p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Bug Reporting Guidelines */}\n          <Card className=\"border-0 shadow-lg\">\n            <CardContent className=\"p-8\">\n              <div className=\"mb-6\">\n                <div className=\"w-16 h-16 mx-auto mb-4 rounded-xl bg-yellow-100 flex items-center justify-center\">\n                  <AlertTriangle className=\"h-8 w-8 text-yellow-600\" />\n                </div>\n                <h2 className=\"text-2xl font-bold text-foreground text-center mb-4\">How to Report Effectively</h2>\n              </div>\n\n              <div className=\"space-y-6\">\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-start space-x-3\">\n                    <div className=\"w-6 h-6 rounded-full bg-primary text-white text-sm font-bold flex items-center justify-center flex-shrink-0 mt-0.5\">1</div>\n                    <div>\n                      <h3 className=\"font-semibold text-foreground\">Describe the Problem</h3>\n                      <p className=\"text-sm text-muted-foreground\">Tell us what went wrong in clear, simple language.</p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-start space-x-3\">\n                    <div className=\"w-6 h-6 rounded-full bg-primary text-white text-sm font-bold flex items-center justify-center flex-shrink-0 mt-0.5\">2</div>\n                    <div>\n                      <h3 className=\"font-semibold text-foreground\">Steps to Reproduce</h3>\n                      <p className=\"text-sm text-muted-foreground\">List the exact steps that led to the bug.</p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-start space-x-3\">\n                    <div className=\"w-6 h-6 rounded-full bg-primary text-white text-sm font-bold flex items-center justify-center flex-shrink-0 mt-0.5\">3</div>\n                    <div>\n                      <h3 className=\"font-semibold text-foreground\">Expected vs Actual</h3>\n                      <p className=\"text-sm text-muted-foreground\">What should have happened vs what actually happened.</p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-start space-x-3\">\n                    <div className=\"w-6 h-6 rounded-full bg-primary text-white text-sm font-bold flex items-center justify-center flex-shrink-0 mt-0.5\">4</div>\n                    <div>\n                      <h3 className=\"font-semibold text-foreground\">Browser & Device Info</h3>\n                      <p className=\"text-sm text-muted-foreground\">Include your browser, version, and device details.</p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-start space-x-3\">\n                    <div className=\"w-6 h-6 rounded-full bg-primary text-white text-sm font-bold flex items-center justify-center flex-shrink-0 mt-0.5\">5</div>\n                    <div>\n                      <h3 className=\"font-semibold text-foreground\">Screenshots (if possible)</h3>\n                      <p className=\"text-sm text-muted-foreground\">Visual evidence helps us understand the issue better.</p>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"p-4 bg-blue-50 rounded-lg border border-blue-200\">\n                  <p className=\"text-sm text-blue-800 font-medium\">\n                    💡 <strong>Pro Tip:</strong> The more details you provide, the faster we can fix the issue!\n                  </p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Additional Help */}\n        <Card className=\"mt-8 border-0 shadow-lg\">\n          <CardContent className=\"p-8 text-center\">\n            <h3 className=\"text-xl font-bold text-foreground mb-4\">Need Immediate Help?</h3>\n            <p className=\"text-muted-foreground mb-6\">\n              If you're experiencing a critical issue that's preventing you from using BookingGen, \n              please mark your email as \"URGENT\" in the subject line.\n            </p>\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n              <Button\n                variant=\"outline\"\n                onClick={() => setLocation('/dashboard')}\n                data-testid=\"button-back-to-dashboard-bottom\"\n              >\n                Back to Dashboard\n              </Button>\n              <Button\n                variant=\"outline\"\n                onClick={() => setLocation('/request-feature')}\n                data-testid=\"button-request-feature\"\n              >\n                <Lightbulb className=\"h-4 w-4 mr-2\" />\n                Request a Feature Instead\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}","size_bytes":10034},"client/src/components/dashboard/appointments-list.tsx":{"content":"import { useState } from 'react';\nimport { useQuery, useMutation } from '@tanstack/react-query';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport { Check, X, Calendar, Mail, Filter, Download, Wifi, WifiOff, ChevronDown, ChevronUp, Eye, DollarSign, Phone, FileText, ExternalLink, User, Copy } from 'lucide-react';\nimport { SiGooglecalendar } from 'react-icons/si';\nimport { apiRequest, queryClient } from '@/lib/queryClient';\nimport { useToast } from '@/hooks/use-toast';\nimport { useAuth } from '@/hooks/use-auth';\nimport { useRealtimeAppointments } from '@/hooks/useRealtimeSubscription';\nimport { getUserAppointments } from '@/lib/supabase-queries';\nimport RescheduleModal from './reschedule-modal';\nimport { useCurrency } from '@/hooks/use-currency';\n\nexport default function AppointmentsList() {\n  const { toast } = useToast();\n  const { user } = useAuth();\n  const { formatPrice } = useCurrency();\n  const [expandedAppointment, setExpandedAppointment] = useState<string | null>(null);\n  const [rescheduleModal, setRescheduleModal] = useState<{\n    open: boolean;\n    appointment: any | null;\n  }>({ open: false, appointment: null });\n  \n  // Use direct Supabase client for user's appointments data\n  const { data: appointments = [], isLoading } = useQuery<any[]>({\n    queryKey: [`user-appointments-${user?.id}`],\n    queryFn: getUserAppointments,\n    enabled: !!user?.id,\n  });\n\n  // Enable real-time subscriptions for live appointment updates\n  const { isConnected: isRealtimeConnected } = useRealtimeAppointments(user?.id);\n\n  const updateAppointmentMutation = useMutation({\n    mutationFn: async ({ id, status }: { id: string; status: string }) => {\n      const response = await apiRequest('PATCH', `/api/appointments/${id}`, { status });\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`user-appointments-${user?.id}`] });\n      toast({\n        title: \"Success\",\n        description: \"Appointment status updated successfully\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update appointment status\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleStatusUpdate = (id: string, status: string) => {\n    updateAppointmentMutation.mutate({ id, status });\n  };\n\n  const handleCopyEmail = (email: string) => {\n    navigator.clipboard.writeText(email);\n    toast({\n      title: \"Email copied!\",\n      description: \"Customer email has been copied to clipboard\",\n    });\n  };\n\n  const handleReschedule = (appointment: any) => {\n    setRescheduleModal({ open: true, appointment });\n  };\n\n  const closeRescheduleModal = () => {\n    setRescheduleModal({ open: false, appointment: null });\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"animate-fade-in-up space-y-6\">\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8\">\n        <div>\n          <h2 className=\"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent\">Appointments</h2>\n          <p className=\"text-gray-600 dark:text-gray-300\">Manage your upcoming and past appointments</p>\n        </div>\n        <div className=\"flex flex-wrap items-center gap-3\">\n          {/* Real-time connection indicator */}\n          <div className=\"flex items-center gap-2 px-3 py-2 rounded-lg glass-prism backdrop-blur-md bg-white/10 dark:bg-black/10 border border-white/20\">\n            {isRealtimeConnected ? (\n              <>\n                <Wifi className=\"h-4 w-4 text-green-500\" />\n                <span className=\"text-sm font-medium text-green-600 dark:text-green-400\">Live</span>\n              </>\n            ) : (\n              <>\n                <WifiOff className=\"h-4 w-4 text-gray-400\" />\n                <span className=\"text-sm font-medium text-gray-500\">Offline</span>\n              </>\n            )}\n          </div>\n          <Button variant=\"outline\" className=\"glass-prism backdrop-blur-md bg-white/10 dark:bg-black/10 border border-white/20 hover:bg-white/20 dark:hover:bg-black/20 transition-all duration-300\" data-testid=\"button-filter\">\n            <Filter className=\"h-4 w-4 mr-2\" />\n            Filter\n          </Button>\n          <Button variant=\"outline\" className=\"glass-prism backdrop-blur-md bg-white/10 dark:bg-black/10 border border-white/20 hover:bg-white/20 dark:hover:bg-black/20 transition-all duration-300\" data-testid=\"button-export\">\n            <Download className=\"h-4 w-4 mr-2\" />\n            Export\n          </Button>\n        </div>\n      </div>\n\n      {appointments.length === 0 ? (\n        <Card className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-2xl animate-scale-in\">\n          <CardContent className=\"p-12 text-center\">\n            <div className=\"text-6xl mb-4\">📅</div>\n            <h3 className=\"text-xl font-bold text-gray-800 dark:text-gray-100 mb-2\">No appointments yet</h3>\n            <p className=\"text-gray-600 dark:text-gray-400 mb-6\">\n              Once people start booking appointments through your pages, they'll appear here.\n            </p>\n            <Button \n              variant=\"default\"\n              className=\"glass-prism-button text-white shadow-lg backdrop-blur-lg\" \n              data-testid=\"button-create-page-from-appointments\"\n            >\n              Create Your First Booking Page\n            </Button>\n          </CardContent>\n        </Card>\n      ) : (\n        <>\n          {/* Desktop Table View - Hidden on Mobile */}\n          <Card className=\"hidden md:block glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-2xl animate-scale-in\">\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead className=\"glass-prism backdrop-blur-md bg-gradient-to-r from-blue-500/10 to-purple-500/10 border-b border-white/20\">\n                  <tr>\n                    <th className=\"text-left py-4 px-6 text-sm font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider\">Customer</th>\n                    <th className=\"text-left py-4 px-6 text-sm font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider\">Service</th>\n                    <th className=\"text-left py-4 px-6 text-sm font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider\">Date & Time</th>\n                    <th className=\"text-left py-4 px-6 text-sm font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider\">Status</th>\n                    <th className=\"text-left py-4 px-6 text-sm font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-white/10\">\n                  {appointments.map((appointment: any, index: number) => {\n                    const isExpanded = expandedAppointment === appointment.id;\n                    return (\n                      <>\n                        <tr key={appointment.id} className=\"hover:bg-white/5 dark:hover:bg-black/5 transition-colors duration-200\">\n                          <td className=\"py-4 px-6\">\n                            <div className=\"flex items-center space-x-3\">\n                              <div className=\"w-11 h-11 bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-full flex items-center justify-center border border-blue-300/30 dark:border-blue-600/30\">\n                                <span className=\"text-sm font-bold text-blue-600 dark:text-blue-400\">\n                                  {appointment.customerName?.charAt(0).toUpperCase()}\n                                </span>\n                              </div>\n                              <div>\n                                <p className=\"font-semibold text-gray-800 dark:text-gray-100\" data-testid={`customer-name-${appointment.id}`}>\n                                  {appointment.customerName}\n                                </p>\n                                <p className=\"text-sm text-gray-600 dark:text-gray-400\" data-testid={`customer-email-${appointment.id}`}>\n                                  {appointment.customerEmail}\n                                </p>\n                              </div>\n                            </div>\n                          </td>\n                          <td className=\"py-4 px-6\">\n                            <div className=\"flex items-center space-x-2\">\n                              <span className=\"font-medium text-gray-800 dark:text-gray-200\" data-testid={`service-name-${appointment.id}`}>\n                                {appointment.serviceName || 'Service'}\n                              </span>\n                              {appointment.syncedFromGoogle && (\n                                <Badge \n                                  variant=\"outline\" \n                                  className=\"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800 text-xs flex items-center gap-1\"\n                                  data-testid={`synced-badge-${appointment.id}`}\n                                >\n                                  <SiGooglecalendar className=\"h-3 w-3\" />\n                                  Synced\n                                </Badge>\n                              )}\n                            </div>\n                          </td>\n                          <td className=\"py-4 px-6\">\n                            <div>\n                              <p className=\"font-medium text-gray-800 dark:text-gray-200\">{appointment.date}</p>\n                              <p className=\"text-sm text-gray-600 dark:text-gray-400\">{appointment.time}</p>\n                            </div>\n                          </td>\n                          <td className=\"py-4 px-6\">\n                            <div className=\"flex items-center gap-2\">\n                              <Badge \n                                variant={appointment.status === 'pending' ? 'secondary' : 'default'}\n                                className={\n                                  appointment.status === 'pending' ? 'bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300 border-orange-300 dark:border-orange-700' :\n                                  appointment.status === 'accepted' ? 'bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 border-green-300 dark:border-green-700' :\n                                  appointment.status === 'declined' ? 'bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300 border-red-300 dark:border-red-700' :\n                                  'bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 border-blue-300 dark:border-blue-700'\n                                }\n                                data-testid={`status-${appointment.id}`}\n                              >\n                                {appointment.status?.charAt(0).toUpperCase() + appointment.status?.slice(1)}\n                              </Badge>\n                              {appointment.status === 'rescheduled' && (\n                                <div className=\"flex items-center gap-1 text-xs text-blue-600 dark:text-blue-400\">\n                                  <Calendar className=\"h-3 w-3\" />\n                                  <span className=\"font-medium\">Updated</span>\n                                </div>\n                              )}\n                            </div>\n                          </td>\n                          <td className=\"py-4 px-6\">\n                            <div className=\"flex space-x-1\">\n                              <Button \n                                size=\"sm\" \n                                variant=\"ghost\" \n                                className=\"text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/30 p-2 rounded-lg transition-all\"\n                                data-testid={`button-view-details-${appointment.id}`}\n                                onClick={() => setExpandedAppointment(isExpanded ? null : appointment.id)}\n                              >\n                                {isExpanded ? <ChevronUp className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\n                              </Button>\n                              {appointment.status === 'pending' && (\n                                <>\n                                  <Button \n                                    size=\"sm\" \n                                    variant=\"ghost\" \n                                    className=\"text-green-600 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/30 p-2 rounded-lg transition-all\"\n                                    data-testid={`button-accept-${appointment.id}`}\n                                    onClick={() => handleStatusUpdate(appointment.id, 'accepted')}\n                                    disabled={updateAppointmentMutation.isPending}\n                                  >\n                                    <Check className=\"h-4 w-4\" />\n                                  </Button>\n                                  <Button \n                                    size=\"sm\" \n                                    variant=\"ghost\" \n                                    className=\"text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 p-2 rounded-lg transition-all\"\n                                    data-testid={`button-decline-${appointment.id}`}\n                                    onClick={() => handleStatusUpdate(appointment.id, 'declined')}\n                                    disabled={updateAppointmentMutation.isPending}\n                                  >\n                                    <X className=\"h-4 w-4\" />\n                                  </Button>\n                                </>\n                              )}\n                              <Button \n                                size=\"sm\" \n                                variant=\"ghost\" \n                                className=\"text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/30 p-2 rounded-lg transition-all\"\n                                data-testid={`button-reschedule-${appointment.id}`}\n                                onClick={() => handleReschedule(appointment)}\n                              >\n                                <Calendar className=\"h-4 w-4\" />\n                              </Button>\n                              {appointment.customerEmail && (\n                                <Popover>\n                                  <PopoverTrigger asChild>\n                                    <Button \n                                      size=\"sm\" \n                                      variant=\"ghost\" \n                                      className=\"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800/30 p-2 rounded-lg transition-all\"\n                                      data-testid={`button-email-${appointment.id}`}\n                                    >\n                                      <Mail className=\"h-4 w-4\" />\n                                    </Button>\n                                  </PopoverTrigger>\n                                  <PopoverContent className=\"w-80 glass-prism-card backdrop-blur-xl bg-white/90 dark:bg-black/90 border border-white/30 shadow-2xl\">\n                                    <div className=\"space-y-3\">\n                                      <div>\n                                        <h4 className=\"font-semibold text-gray-800 dark:text-gray-100 mb-1\">Customer Email</h4>\n                                        <p className=\"text-sm text-gray-600 dark:text-gray-400\">Click to copy the email address</p>\n                                      </div>\n                                      <div \n                                        onClick={() => handleCopyEmail(appointment.customerEmail)}\n                                        className=\"flex items-center justify-between p-3 glass-prism backdrop-blur-md bg-white/30 dark:bg-black/30 border border-white/30 rounded-lg cursor-pointer hover:bg-white/50 dark:hover:bg-black/50 transition-all group\"\n                                      >\n                                        <span className=\"text-sm font-medium text-gray-800 dark:text-gray-100 truncate flex-1\">\n                                          {appointment.customerEmail}\n                                        </span>\n                                        <Copy className=\"h-4 w-4 text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 ml-2 flex-shrink-0\" />\n                                      </div>\n                                    </div>\n                                  </PopoverContent>\n                                </Popover>\n                              )}\n                            </div>\n                          </td>\n                        </tr>\n                        {isExpanded && (\n                          <tr key={`${appointment.id}-details`} className=\"bg-gradient-to-r from-blue-50/50 to-purple-50/50 dark:from-blue-950/30 dark:to-purple-950/30\">\n                            <td colSpan={5} className=\"px-6 py-6\">\n                              <div className=\"glass-prism-card backdrop-blur-lg bg-white/40 dark:bg-black/40 border border-white/30 rounded-xl p-6\">\n                                <h4 className=\"text-lg font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent mb-4\">\n                                  Appointment Details\n                                </h4>\n                                <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                                  {/* Customer Information */}\n                                  <div className=\"space-y-3\">\n                                    <h5 className=\"text-sm font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider flex items-center gap-2\">\n                                      <User className=\"h-4 w-4\" />\n                                      Customer Information\n                                    </h5>\n                                    <div className=\"space-y-2\">\n                                      <div>\n                                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">Name</p>\n                                        <p className=\"text-sm font-medium text-gray-800 dark:text-gray-100\">{appointment.customerName}</p>\n                                      </div>\n                                      <div>\n                                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">Email</p>\n                                        <p className=\"text-sm font-medium text-gray-800 dark:text-gray-100\">{appointment.customerEmail}</p>\n                                      </div>\n                                      {appointment.customerPhone && (\n                                        <div>\n                                          <p className=\"text-xs text-gray-500 dark:text-gray-400\">Phone</p>\n                                          <p className=\"text-sm font-medium text-gray-800 dark:text-gray-100 flex items-center gap-1\">\n                                            <Phone className=\"h-3 w-3\" />\n                                            {appointment.customerPhone}\n                                          </p>\n                                        </div>\n                                      )}\n                                    </div>\n                                  </div>\n\n                                  {/* Service & Booking Details */}\n                                  <div className=\"space-y-3\">\n                                    <h5 className=\"text-sm font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider flex items-center gap-2\">\n                                      <Calendar className=\"h-4 w-4\" />\n                                      Service Details\n                                    </h5>\n                                    <div className=\"space-y-2\">\n                                      <div>\n                                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">Service</p>\n                                        <p className=\"text-sm font-medium text-gray-800 dark:text-gray-100\">{appointment.serviceName || 'N/A'}</p>\n                                      </div>\n                                      <div>\n                                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">Date & Time</p>\n                                        <p className=\"text-sm font-medium text-gray-800 dark:text-gray-100\">{appointment.date} at {appointment.time}</p>\n                                      </div>\n                                      {appointment.price && (\n                                        <div>\n                                          <p className=\"text-xs text-gray-500 dark:text-gray-400\">Price</p>\n                                          <p className=\"text-sm font-medium text-gray-800 dark:text-gray-100 flex items-center gap-1\">\n                                            <DollarSign className=\"h-3 w-3\" />\n                                            {formatPrice(appointment.price)}\n                                          </p>\n                                        </div>\n                                      )}\n                                    </div>\n                                  </div>\n\n                                  {/* Booking Page & Notes */}\n                                  <div className=\"space-y-3\">\n                                    <h5 className=\"text-sm font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider flex items-center gap-2\">\n                                      <FileText className=\"h-4 w-4\" />\n                                      Additional Information\n                                    </h5>\n                                    <div className=\"space-y-2\">\n                                      <div>\n                                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">Booking Page</p>\n                                        <a \n                                          href={`/${appointment.pages?.slug}`} \n                                          target=\"_blank\" \n                                          rel=\"noopener noreferrer\"\n                                          className=\"text-sm font-medium text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1\"\n                                        >\n                                          {appointment.pages?.title || 'View Page'}\n                                          <ExternalLink className=\"h-3 w-3\" />\n                                        </a>\n                                      </div>\n                                      {appointment.notes && (\n                                        <div>\n                                          <p className=\"text-xs text-gray-500 dark:text-gray-400\">Customer Notes</p>\n                                          <p className=\"text-sm text-gray-700 dark:text-gray-300 bg-white/50 dark:bg-black/30 p-2 rounded-lg border border-white/30\">\n                                            {appointment.notes}\n                                          </p>\n                                        </div>\n                                      )}\n                                      {appointment.status === 'rescheduled' && (\n                                        <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3\">\n                                          <div className=\"flex items-start gap-2\">\n                                            <Calendar className=\"h-4 w-4 text-blue-600 dark:text-blue-400 mt-0.5\" />\n                                            <div>\n                                              <p className=\"text-xs font-semibold text-blue-800 dark:text-blue-300\">Rescheduled Appointment</p>\n                                              <p className=\"text-xs text-blue-600 dark:text-blue-400 mt-0.5\">This appointment has been rescheduled to a new date and time.</p>\n                                            </div>\n                                          </div>\n                                        </div>\n                                      )}\n                                      {appointment.syncedFromGoogle && (\n                                        <div className=\"flex items-center gap-2 text-sm text-blue-600 dark:text-blue-400\">\n                                          <SiGooglecalendar className=\"h-4 w-4\" />\n                                          <span>Synced with Google Calendar</span>\n                                        </div>\n                                      )}\n                                    </div>\n                                  </div>\n                                </div>\n                              </div>\n                            </td>\n                          </tr>\n                        )}\n                      </>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n          </Card>\n\n          {/* Mobile Card View - Visible only on Mobile */}\n          <div className=\"md:hidden space-y-4\">\n            {appointments.map((appointment: any) => {\n              const isExpanded = expandedAppointment === appointment.id;\n              return (\n                <Card key={appointment.id} className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-lg overflow-hidden\">\n                  <CardContent className=\"p-0\">\n                    {/* Card Header */}\n                    <div className=\"bg-gradient-to-r from-blue-500/10 to-purple-500/10 p-4 border-b border-white/10\">\n                      <div className=\"flex items-start justify-between gap-3\">\n                        <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                          <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-full flex items-center justify-center border border-blue-300/30 dark:border-blue-600/30 flex-shrink-0\">\n                            <span className=\"text-base font-bold text-blue-600 dark:text-blue-400\">\n                              {appointment.customerName?.charAt(0).toUpperCase()}\n                            </span>\n                          </div>\n                          <div className=\"flex-1 min-w-0\">\n                            <p className=\"font-semibold text-gray-800 dark:text-gray-100 truncate\" data-testid={`customer-name-${appointment.id}`}>\n                              {appointment.customerName}\n                            </p>\n                            <p className=\"text-sm text-gray-600 dark:text-gray-400 truncate\" data-testid={`customer-email-${appointment.id}`}>\n                              {appointment.customerEmail}\n                            </p>\n                          </div>\n                        </div>\n                        <Badge \n                          variant={appointment.status === 'pending' ? 'secondary' : 'default'}\n                          className={\n                            appointment.status === 'pending' ? 'bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300 border-orange-300 dark:border-orange-700' :\n                            appointment.status === 'accepted' ? 'bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 border-green-300 dark:border-green-700' :\n                            appointment.status === 'declined' ? 'bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300 border-red-300 dark:border-red-700' :\n                            'bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 border-blue-300 dark:border-blue-700'\n                          }\n                          data-testid={`status-${appointment.id}`}\n                        >\n                          {appointment.status?.charAt(0).toUpperCase() + appointment.status?.slice(1)}\n                        </Badge>\n                      </div>\n                    </div>\n\n                    {/* Card Content */}\n                    <div className=\"p-4 space-y-3\">\n                      {/* Service */}\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"text-sm text-gray-600 dark:text-gray-400\">Service:</span>\n                        <span className=\"font-medium text-gray-800 dark:text-gray-200\" data-testid={`service-name-${appointment.id}`}>\n                          {appointment.serviceName || 'Service'}\n                        </span>\n                      </div>\n\n                      {/* Date & Time */}\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"text-sm text-gray-600 dark:text-gray-400\">Date:</span>\n                        <span className=\"font-medium text-gray-800 dark:text-gray-200\">{appointment.date}</span>\n                      </div>\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"text-sm text-gray-600 dark:text-gray-400\">Time:</span>\n                        <span className=\"font-medium text-gray-800 dark:text-gray-200\">{appointment.time}</span>\n                      </div>\n\n                      {/* Phone if available */}\n                      {appointment.customerPhone && (\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-sm text-gray-600 dark:text-gray-400\">Phone:</span>\n                          <a href={`tel:${appointment.customerPhone}`} className=\"font-medium text-blue-600 dark:text-blue-400 flex items-center gap-1\">\n                            <Phone className=\"h-3 w-3\" />\n                            {appointment.customerPhone}\n                          </a>\n                        </div>\n                      )}\n\n                      {/* Action Buttons */}\n                      <div className=\"pt-3 border-t border-white/10\">\n                        <div className=\"flex flex-wrap gap-2\">\n                          <Button \n                            size=\"sm\" \n                            variant=\"outline\"\n                            className=\"flex-1 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 border-blue-200 dark:border-blue-800 hover:bg-blue-100 dark:hover:bg-blue-900/30\"\n                            data-testid={`button-view-details-${appointment.id}`}\n                            onClick={() => setExpandedAppointment(isExpanded ? null : appointment.id)}\n                          >\n                            {isExpanded ? (\n                              <>\n                                <ChevronUp className=\"h-4 w-4 mr-1\" />\n                                Hide\n                              </>\n                            ) : (\n                              <>\n                                <Eye className=\"h-4 w-4 mr-1\" />\n                                Details\n                              </>\n                            )}\n                          </Button>\n\n                          {appointment.status === 'pending' && (\n                            <>\n                              <Button \n                                size=\"sm\" \n                                variant=\"outline\"\n                                className=\"flex-1 bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 border-green-200 dark:border-green-800 hover:bg-green-100 dark:hover:bg-green-900/30\"\n                                data-testid={`button-accept-${appointment.id}`}\n                                onClick={() => handleStatusUpdate(appointment.id, 'accepted')}\n                                disabled={updateAppointmentMutation.isPending}\n                              >\n                                <Check className=\"h-4 w-4 mr-1\" />\n                                Accept\n                              </Button>\n                              <Button \n                                size=\"sm\" \n                                variant=\"outline\"\n                                className=\"flex-1 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 border-red-200 dark:border-red-800 hover:bg-red-100 dark:hover:bg-red-900/30\"\n                                data-testid={`button-decline-${appointment.id}`}\n                                onClick={() => handleStatusUpdate(appointment.id, 'declined')}\n                                disabled={updateAppointmentMutation.isPending}\n                              >\n                                <X className=\"h-4 w-4 mr-1\" />\n                                Decline\n                              </Button>\n                            </>\n                          )}\n\n                          <Button \n                            size=\"sm\" \n                            variant=\"outline\"\n                            className=\"flex-1 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 border-blue-200 dark:border-blue-800 hover:bg-blue-100 dark:hover:bg-blue-900/30\"\n                            data-testid={`button-reschedule-${appointment.id}`}\n                            onClick={() => handleReschedule(appointment)}\n                          >\n                            <Calendar className=\"h-4 w-4 mr-1\" />\n                            Reschedule\n                          </Button>\n\n                          {appointment.customerEmail && (\n                            <Button \n                              size=\"sm\" \n                              variant=\"outline\"\n                              className=\"flex-1 bg-gray-50 dark:bg-gray-800/20 text-gray-600 dark:text-gray-400 border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800/30\"\n                              data-testid={`button-email-${appointment.id}`}\n                              onClick={() => handleCopyEmail(appointment.customerEmail)}\n                            >\n                              <Copy className=\"h-4 w-4 mr-1\" />\n                              Copy Email\n                            </Button>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Expanded Details */}\n                    {isExpanded && (\n                      <div className=\"border-t border-white/10 bg-gradient-to-r from-blue-50/30 to-purple-50/30 dark:from-blue-950/20 dark:to-purple-950/20 p-4 space-y-4\">\n                        <h4 className=\"font-bold text-gray-900 dark:text-white mb-3\">Additional Details</h4>\n                        \n                        {/* Page Name */}\n                        <div>\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-1\">Booking Page</p>\n                          <p className=\"text-sm font-medium text-gray-800 dark:text-gray-200\">{appointment.pageName || 'N/A'}</p>\n                        </div>\n\n                        {/* Price if available */}\n                        {appointment.servicePrice && (\n                          <div>\n                            <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-1\">Price</p>\n                            <p className=\"text-sm font-medium text-gray-800 dark:text-gray-100 flex items-center gap-1\">\n                              <DollarSign className=\"h-3 w-3\" />\n                              {formatPrice(appointment.servicePrice)}\n                            </p>\n                          </div>\n                        )}\n\n                        {/* Notes */}\n                        {appointment.notes && (\n                          <div>\n                            <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-1\">Customer Notes</p>\n                            <p className=\"text-sm text-gray-700 dark:text-gray-300 bg-white/50 dark:bg-black/30 p-3 rounded-lg border border-white/20\">\n                              {appointment.notes}\n                            </p>\n                          </div>\n                        )}\n\n                        {/* Rescheduled Notice */}\n                        {appointment.status === 'rescheduled' && (\n                          <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3\">\n                            <div className=\"flex items-start gap-2\">\n                              <Calendar className=\"h-4 w-4 text-blue-600 dark:text-blue-400 mt-0.5\" />\n                              <div>\n                                <p className=\"text-xs font-semibold text-blue-800 dark:text-blue-300\">Rescheduled Appointment</p>\n                                <p className=\"text-xs text-blue-600 dark:text-blue-400 mt-0.5\">This appointment has been rescheduled to a new date and time.</p>\n                              </div>\n                            </div>\n                          </div>\n                        )}\n\n                        {/* Google Sync Badge */}\n                        {appointment.syncedFromGoogle && (\n                          <Badge \n                            variant=\"outline\" \n                            className=\"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800 flex items-center gap-1 w-fit\"\n                          >\n                            <SiGooglecalendar className=\"h-3 w-3\" />\n                            Synced with Google Calendar\n                          </Badge>\n                        )}\n                      </div>\n                    )}\n                  </CardContent>\n                </Card>\n              );\n            })}\n          </div>\n        </>\n      )}\n\n      <RescheduleModal\n        open={rescheduleModal.open}\n        onClose={closeRescheduleModal}\n        appointment={rescheduleModal.appointment}\n      />\n    </div>\n  );\n}\n","size_bytes":38744},"client/src/components/modals/upgrade-modal.tsx":{"content":"import { useState } from 'react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Check, Crown, CreditCard, AlertTriangle, Mail } from 'lucide-react';\nimport { SiPaypal } from 'react-icons/si';\nimport { useAuth } from '@/hooks/use-auth';\nimport { DialogDescription } from '@/components/ui/dialog';\nimport { apiRequest } from '@/lib/queryClient';\nimport RazorpaySubscriptionButton from '@/components/RazorpaySubscriptionButton';\nimport PayPalSubscriptionButton from '@/components/PayPalSubscriptionButton';\nimport { useToast } from '@/hooks/use-toast';\nimport { queryClient } from '@/lib/queryClient';\nimport { useCurrency } from '@/hooks/use-currency';\nimport CurrencySelector from '@/components/ui/currency-selector';\n\ninterface UpgradeModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport default function UpgradeModal({ isOpen, onClose }: UpgradeModalProps) {\n  const { user, profile } = useAuth();\n  const [isProcessing, setIsProcessing] = useState(false);\n  const { toast } = useToast();\n  const { formatPrice, convertPrice, selectedCurrency } = useCurrency();\n\n  const [showPayment, setShowPayment] = useState(false);\n\n  const handleUpgrade = async () => {\n    if (!user) return;\n    setShowPayment(true);\n  };\n\n  const handleSubscriptionSuccess = async (subscriptionId: string) => {\n    try {\n      console.log('Subscription successful:', { subscriptionId });\n      \n      // Invalidate profile query to refresh user data\n      await queryClient.invalidateQueries({ queryKey: ['/api/profile'] });\n      \n      // Force a small delay to ensure backend has updated the profile\n      await new Promise(resolve => setTimeout(resolve, 500));\n      \n      toast({\n        title: \"Subscription Activated!\",\n        description: \"You've been upgraded to Pro! All features are now unlocked.\",\n      });\n      \n      onClose();\n      \n      // Reload the page to ensure all UI updates\n      window.location.reload();\n    } catch (error) {\n      console.error('Profile refresh failed:', error);\n      toast({\n        title: \"Upgrade successful\",\n        description: \"Your subscription was activated successfully. Please refresh the page to see your new features.\",\n      });\n      onClose();\n    }\n  };\n\n  const handlePaymentError = (error: any) => {\n    console.error('Payment error:', error);\n    toast({\n      title: \"Payment failed\",\n      description: \"There was an error processing your payment. Please try again.\",\n      variant: \"destructive\",\n    });\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"glass-prism-card backdrop-blur-xl bg-gradient-to-br from-white/95 via-blue-50/80 to-white/90 dark:from-gray-900/95 dark:via-blue-950/80 dark:to-gray-900/90 border border-white/30 dark:border-white/20 shadow-2xl max-w-lg sm:max-w-xl md:max-w-2xl mx-auto rounded-3xl overflow-hidden max-h-[90vh] overflow-y-auto\" data-testid=\"modal-upgrade\">\n        <div className=\"relative\">\n          {/* Glass prism background decorations matching app theme */}\n          <div className=\"absolute top-0 right-0 w-40 h-40 glass-prism bg-gradient-to-br from-white/20 via-blue-50/30 to-white/15 rounded-full -translate-y-20 translate-x-20 blur-2xl animate-pulse\"></div>\n          <div className=\"absolute bottom-0 left-0 w-32 h-32 glass-prism bg-gradient-to-br from-blue-50/25 via-white/20 to-blue-50/15 rounded-full translate-y-16 -translate-x-16 blur-2xl animate-pulse\" style={{animationDelay: '1s'}}></div>\n          <div className=\"absolute top-1/2 left-1/2 w-60 h-20 glass-prism bg-gradient-to-r from-white/15 via-blue-50/25 to-white/15 rounded-full -translate-x-1/2 -translate-y-1/2 blur-3xl opacity-40\"></div>\n          \n          <div className=\"relative z-10 p-4 sm:p-6 md:p-8\">\n            <DialogHeader className=\"text-center mb-4 sm:mb-6 md:mb-8\">\n              <div className=\"flex justify-center mb-4\">\n                <div className=\"w-16 h-16 glass-prism rounded-full flex items-center justify-center mx-auto group animate-fade-in-up backdrop-blur-md bg-gradient-to-br from-white/60 via-blue-50/40 to-white/50 border border-white/30\">\n                  <Crown className=\"h-8 w-8 text-blue-600 dark:text-blue-400 group-hover:scale-110 transition-transform duration-300\" />\n                </div>\n              </div>\n              <DialogTitle className=\"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-700 dark:from-blue-100 dark:to-white bg-clip-text text-transparent\">\n                Upgrade to Pro\n              </DialogTitle>\n              <DialogDescription className=\"text-gray-600 dark:text-gray-300 mt-2\">\n                Unlock all features and take your booking business to the next level\n              </DialogDescription>\n            </DialogHeader>\n        \n            <div className=\"space-y-4 sm:space-y-6 md:space-y-8\">\n              {/* Currency Selector */}\n              <div className=\"flex justify-center\">\n                <CurrencySelector variant=\"compact\" />\n              </div>\n              \n              {/* Plan Details */}\n              <div className=\"glass-prism-card backdrop-blur-md bg-gradient-to-br from-white/90 via-blue-50/70 to-white/80 dark:from-gray-900/90 dark:via-blue-950/70 dark:to-gray-900/80 border border-white/30 dark:border-white/20 rounded-2xl p-4 sm:p-6 md:p-8 relative overflow-hidden shadow-xl\">\n                <Badge className=\"absolute top-4 right-4 sm:top-6 sm:right-6 glass-prism-button backdrop-blur-md bg-gradient-to-r from-blue-100 via-blue-200 to-blue-300 dark:from-blue-800 dark:via-blue-700 dark:to-blue-600 text-blue-800 dark:text-blue-100 shadow-lg animate-pulse border border-white/30 px-3 py-1 sm:px-4 sm:py-2 font-semibold text-xs sm:text-sm\">\n                  50% OFF!\n                </Badge>\n                <div className=\"flex items-center mb-6\">\n                  <div className=\"w-12 h-12 glass-prism rounded-xl flex items-center justify-center mr-4 backdrop-blur-md bg-gradient-to-br from-white/50 via-blue-50/40 to-white/40 border border-white/30\">\n                    <Crown className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n                  </div>\n                  <div>\n                    <h3 className=\"text-2xl font-bold bg-gradient-to-r from-blue-900 to-blue-700 dark:from-blue-100 dark:to-white bg-clip-text text-transparent\">Pro Plan</h3>\n                    <p className=\"text-gray-600 dark:text-gray-300\">Everything you need to succeed</p>\n                  </div>\n                </div>\n                \n                <div className=\"flex flex-wrap items-baseline mb-6 sm:mb-8 gap-2\">\n                  <span className=\"text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent\">{formatPrice(14.99)}</span>\n                  <span className=\"text-gray-500 dark:text-gray-400 text-base sm:text-lg\">/month</span>\n                  <div className=\"glass-prism backdrop-blur-md bg-gradient-to-r from-white/60 via-blue-50/40 to-white/50 border border-white/30 rounded-lg px-2 sm:px-3 py-1\">\n                    <span className=\"text-gray-500 dark:text-gray-400 text-xs sm:text-sm font-semibold line-through\">{formatPrice(29.99)}</span>\n                  </div>\n                </div>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  {[\n                    \"Unlimited booking pages\",\n                    \"Custom branding\",\n                    \"Analytics dashboard\",\n                    \"Priority support\",\n                    \"Full customization\",\n                    \"Mobile optimized\",\n                    \"No usage limits\"\n                  ].map((feature) => (\n                    <div key={feature} className=\"flex items-center\">\n                      <div className=\"w-5 h-5 glass-prism rounded-full flex items-center justify-center mr-3 backdrop-blur-md bg-gradient-to-br from-white/60 via-blue-50/50 to-white/40 border border-white/30\">\n                        <Check className=\"h-3 w-3 text-blue-600 dark:text-blue-400\" />\n                      </div>\n                      <span className=\"text-sm text-gray-700 dark:text-gray-300 font-medium\">{feature}</span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              {/* Current Plan Info */}\n              <div className=\"glass-prism-card backdrop-blur-md bg-gradient-to-r from-white/80 via-blue-50/60 to-white/70 dark:from-gray-900/80 dark:via-blue-950/60 dark:to-gray-900/70 border border-white/30 dark:border-white/20 rounded-xl p-4 sm:p-6 shadow-lg\">\n                <div className=\"flex flex-col sm:flex-row gap-2 sm:gap-0 items-start sm:items-center sm:justify-between\">\n                  <div>\n                    <p className=\"font-semibold text-gray-800 dark:text-gray-100 mb-1\">\n                      Current Plan: {profile?.membershipStatus === 'pro' ? 'Pro' : 'Starter'}\n                    </p>\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                      {profile?.membershipStatus === 'pro' ? 'All features included' : 'Limited features - upgrade to unlock everything'}\n                    </p>\n                  </div>\n                  <Badge className={profile?.membershipStatus === 'pro' ? 'glass-prism-button bg-gradient-to-r from-white/60 via-blue-50/40 to-white/50 dark:from-blue-800 dark:via-blue-700 dark:to-blue-600 text-blue-800 dark:text-blue-100 border border-white/30' : 'glass-prism bg-gradient-to-r from-white/60 via-blue-50/40 to-white/50 dark:from-blue-800 dark:via-blue-700 dark:to-blue-600 text-blue-800 dark:text-blue-200 border border-white/30'}>\n                    {profile?.membershipStatus === 'pro' ? 'Pro' : 'Starter'}\n                  </Badge>\n                </div>\n              </div>\n\n              {/* Payment Options Section */}\n              {showPayment && (\n                <div className=\"glass-prism-card backdrop-blur-md bg-gradient-to-br from-white/90 via-blue-50/70 to-white/80 dark:from-gray-900/90 dark:via-blue-950/70 dark:to-gray-900/80 border border-white/30 dark:border-white/20 rounded-2xl p-4 sm:p-6 md:p-8 shadow-xl\">\n                  <div className=\"text-center mb-6\">\n                    <h3 className=\"text-xl font-bold bg-gradient-to-r from-blue-900 to-blue-700 dark:from-blue-100 dark:to-white bg-clip-text text-transparent mb-2\">\n                      Complete Your Upgrade\n                    </h3>\n                    <p className=\"text-gray-600 dark:text-gray-300 text-sm\">\n                      Choose your preferred payment method\n                    </p>\n                  </div>\n                  \n                  <div className=\"max-w-2xl mx-auto space-y-6\">\n                    {/* PayPal Payment */}\n                    <div className=\"glass-prism-card backdrop-blur-sm bg-gradient-to-br from-white/80 via-blue-50/60 to-white/70 dark:from-gray-800/80 dark:via-blue-950/60 dark:to-gray-800/70 border border-white/30 dark:border-white/20 rounded-xl p-6\" data-testid=\"section-paypal-payment\">\n                      <div className=\"text-center mb-6\">\n                        <div className=\"w-16 h-16 glass-prism rounded-xl flex items-center justify-center mx-auto mb-4 backdrop-blur-md bg-gradient-to-br from-blue-100/90 via-blue-200/80 to-blue-100/90 border border-blue-300/40\">\n                          <SiPaypal className=\"h-8 w-8 text-blue-600 dark:text-blue-400\" />\n                        </div>\n                        <h4 className=\"text-xl font-semibold text-gray-800 dark:text-gray-200 mb-2\">Pay with PayPal</h4>\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-2\">\n                          Recurring monthly subscription at $14.99/month\n                        </p>\n                        <p className=\"text-xs text-gray-500 dark:text-gray-500\">\n                          Secure PayPal subscription • Instant activation • Cancel anytime\n                        </p>\n                      </div>\n                      <PayPalSubscriptionButton\n                        onSuccess={(subscriptionId) => {\n                          handleSubscriptionSuccess(subscriptionId);\n                        }}\n                        onError={handlePaymentError}\n                      />\n                    </div>\n\n                    {/* OR Divider */}\n                    <div className=\"relative\">\n                      <div className=\"absolute inset-0 flex items-center\">\n                        <div className=\"w-full border-t border-gray-300 dark:border-gray-600\"></div>\n                      </div>\n                      <div className=\"relative flex justify-center text-sm\">\n                        <span className=\"px-4 bg-white dark:bg-gray-900 text-gray-500 dark:text-gray-400 font-medium\">OR</span>\n                      </div>\n                    </div>\n\n                    {/* Credit/Debit Card Payment (Razorpay) */}\n                    <div className=\"glass-prism-card backdrop-blur-sm bg-gradient-to-br from-white/80 via-blue-50/60 to-white/70 dark:from-gray-800/80 dark:via-blue-950/60 dark:to-gray-800/70 border border-white/30 dark:border-white/20 rounded-xl p-6\" data-testid=\"section-payment\">\n                      <div className=\"text-center mb-6\">\n                        <div className=\"w-16 h-16 glass-prism rounded-xl flex items-center justify-center mx-auto mb-4 backdrop-blur-md bg-gradient-to-br from-white/60 via-blue-50/50 to-white/40 border border-white/30\">\n                          <CreditCard className=\"h-8 w-8 text-blue-600 dark:text-blue-400\" />\n                        </div>\n                        <h4 className=\"text-xl font-semibold text-gray-800 dark:text-gray-200 mb-2\">Pay with Card</h4>\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-2\">\n                          Recurring monthly subscription at {formatPrice(14.99)}/month\n                        </p>\n                        <p className=\"text-xs text-gray-500 dark:text-gray-500\">\n                          Secure payment • Instant activation • Cancel anytime • Full access to all Pro features\n                        </p>\n                      </div>\n                      <RazorpaySubscriptionButton\n                        plan=\"pro\"\n                        isTrial={false}\n                        onSuccess={handleSubscriptionSuccess}\n                        onError={handlePaymentError}\n                        onPaymentStart={() => {\n                          onClose();\n                        }}\n                        onCancel={() => {\n                          toast({\n                            title: \"Subscription Cancelled\",\n                            description: \"You can try again anytime.\",\n                            variant: \"default\",\n                          });\n                        }}\n                        className=\"w-full glass-prism-button backdrop-blur-lg bg-gradient-to-r from-green-100 via-green-200 to-green-300 dark:from-green-800 dark:via-green-700 dark:to-green-600 hover:from-green-200 hover:via-green-300 hover:to-green-400 dark:hover:from-green-700 dark:hover:via-green-600 dark:hover:to-green-500 text-green-800 dark:text-green-100 shadow-lg hover:scale-105 transition-all duration-300 border border-white/30 font-semibold h-12\"\n                      >\n                        Subscribe for {formatPrice(14.99)}/month\n                      </RazorpaySubscriptionButton>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Warning about activation time */}\n              {showPayment && (\n                <div className=\"glass-prism-card backdrop-blur-md bg-gradient-to-br from-yellow-50/90 via-yellow-100/70 to-yellow-50/80 dark:from-yellow-900/30 dark:via-yellow-800/20 dark:to-yellow-900/30 border-2 border-yellow-400/50 dark:border-yellow-600/50 rounded-xl p-4 sm:p-6 shadow-lg\" data-testid=\"warning-activation\">\n                  <div className=\"flex items-start gap-3 mb-4\">\n                    <div className=\"flex-shrink-0 w-8 h-8 rounded-lg bg-yellow-400/30 dark:bg-yellow-600/30 flex items-center justify-center\">\n                      <AlertTriangle className=\"h-5 w-5 text-yellow-700 dark:text-yellow-400\" />\n                    </div>\n                    <div className=\"flex-1\">\n                      <p className=\"text-sm text-yellow-900 dark:text-yellow-200 leading-relaxed\">\n                        After you checkout, to activate your subscription, the app may take around 3-5 minutes, please be patient & if you have any issues please contact us at{' '}\n                        <a \n                          href=\"mailto:team@bookinggen.xyz\" \n                          className=\"font-semibold underline hover:text-yellow-700 dark:hover:text-yellow-300 transition-colors\"\n                          data-testid=\"link-contact-email\"\n                        >\n                          team@bookinggen.xyz\n                        </a>\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center justify-between pt-3 border-t border-yellow-400/30 dark:border-yellow-600/30\">\n                    <p className=\"text-sm font-medium text-yellow-900 dark:text-yellow-200\">\n                      Facing any issues?\n                    </p>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => {\n                        const subject = encodeURIComponent('Subscription Activation Issue - BookingGen');\n                        const body = encodeURIComponent('Hi BookingGen Team,\\n\\nI need help with my subscription activation.\\n\\nPlease provide details about your issue:\\n\\n');\n                        window.location.href = `mailto:team@bookinggen.xyz?subject=${subject}&body=${body}`;\n                      }}\n                      className=\"bg-yellow-100 dark:bg-yellow-800/50 border-yellow-400 dark:border-yellow-600 text-yellow-900 dark:text-yellow-200 hover:bg-yellow-200 dark:hover:bg-yellow-700/50 transition-colors\"\n                      data-testid=\"button-contact-us\"\n                    >\n                      <Mail className=\"h-4 w-4 mr-2\" />\n                      Contact Us\n                    </Button>\n                  </div>\n                </div>\n              )}\n\n              {/* Action Buttons */}\n              <div className=\"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4\">\n                <Button\n                  variant=\"ghost\"\n                  onClick={onClose}\n                  className=\"flex-1 h-12 glass-prism backdrop-blur-md bg-gradient-to-r from-white/40 via-blue-50/30 to-white/30 dark:from-gray-800/40 dark:via-blue-950/30 dark:to-gray-800/30 border border-white/30 hover:bg-white/50 dark:hover:bg-gray-800/50 transition-all duration-300 text-blue-700 dark:text-blue-300 font-medium\"\n                  data-testid=\"button-cancel-upgrade\"\n                >\n                  Maybe Later\n                </Button>\n                {!showPayment && (\n                  <Button\n                    type=\"button\"\n                    size=\"lg\"\n                    onClick={handleUpgrade}\n                    disabled={isProcessing}\n                    className=\"flex-1 h-12 glass-prism-button backdrop-blur-lg bg-gradient-to-r from-blue-100 via-blue-200 to-blue-300 dark:from-blue-800 dark:via-blue-700 dark:to-blue-600 hover:from-blue-200 hover:via-blue-300 hover:to-blue-400 dark:hover:from-blue-700 dark:hover:via-blue-600 dark:hover:to-blue-500 text-blue-800 dark:text-blue-100 shadow-lg hover:scale-105 transition-all duration-300 border border-white/30 font-semibold\"\n                    data-testid=\"button-confirm-upgrade\"\n                  >\n                    {isProcessing ? (\n                      <>\n                        <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                        Processing...\n                      </>\n                    ) : (\n                      <>\n                        <CreditCard className=\"h-4 w-4 mr-2\" />\n                        Upgrade to Pro\n                      </>\n                    )}\n                  </Button>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":20546},"client/src/pages/privacy.tsx":{"content":"import Header from '@/components/layout/header';\nimport Footer from '@/components/layout/footer';\nimport SEO from '@/components/seo';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { useLocation } from 'wouter';\nimport { \n  Shield, \n  ArrowLeft, \n  Eye, \n  Lock, \n  UserCheck, \n  Database, \n  Globe, \n  Mail,\n  AlertTriangle,\n  CheckCircle\n} from 'lucide-react';\n\nexport default function Privacy() {\n  const [, setLocation] = useLocation();\n\n  const principles = [\n    {\n      icon: Shield,\n      title: \"Data Protection\",\n      description: \"We use industry-standard security measures to protect your personal information\"\n    },\n    {\n      icon: Eye,\n      title: \"Transparency\",\n      description: \"We're clear about what data we collect and how we use it\"\n    },\n    {\n      icon: UserCheck,\n      title: \"User Control\",\n      description: \"You have control over your data and can request changes or deletion\"\n    },\n    {\n      icon: Lock,\n      title: \"Secure Storage\",\n      description: \"Your data is encrypted and stored in secure, compliant facilities\"\n    }\n  ];\n\n  const sections = [\n    {\n      title: \"1. Information We Collect\",\n      icon: Database,\n      content: [\n        \"Personal Information: When you create an account, we collect your name, email address, and contact details you provide.\",\n        \"Business Information: Details about your business, services, and booking preferences to customize your booking pages.\",\n        \"Billing Information: We collect billing information through secure processors for subscription management. We do not store full credit card details on our servers.\",\n        \"Usage Data: We automatically collect information about how you use our platform, including IP address, browser type, pages visited, and interaction data.\",\n        \"Customer Data: When your clients make bookings, we collect the information they provide, which you control and own.\"\n      ]\n    },\n    {\n      title: \"2. How We Use Your Information\",\n      icon: Globe,\n      content: [\n        \"Service Provision: To provide, maintain, and improve our booking platform services.\",\n        \"Communication: To send important updates, notifications, and respond to your inquiries.\",\n        \"Customization: To personalize your experience and optimize our platform for your needs.\",\n        \"Analytics: To analyze usage patterns and improve our services (using anonymized data when possible).\",\n        \"Legal Compliance: To comply with legal obligations and protect against fraud or abuse.\",\n        \"Marketing: To send promotional materials (only with your consent, and you can opt out anytime).\"\n      ]\n    },\n    {\n      title: \"3. Data Sharing and Disclosure\",\n      icon: UserCheck,\n      content: [\n        \"We do not sell your personal information to third parties under any circumstances.\",\n        \"Service Providers: We may share data with trusted third-party services that help us operate our platform (hosting, billing services, email services).\",\n        \"Legal Requirements: We may disclose information if required by law, court order, or to protect our rights and safety.\",\n        \"Business Transfers: In the event of a merger or acquisition, user data may be transferred as part of the business assets.\",\n        \"Your Clients: Information you collect through your booking pages is shared with you as the business owner.\",\n        \"With Your Consent: We may share information for other purposes with your explicit consent.\"\n      ]\n    },\n    {\n      title: \"4. Data Security\",\n      icon: Lock,\n      content: [\n        \"Encryption: All data transmission is protected using SSL/TLS encryption.\",\n        \"Secure Storage: Data is stored in secure, access-controlled environments with regular security updates.\",\n        \"Access Controls: Only authorized personnel have access to your data, and access is logged and monitored.\",\n        \"Regular Audits: We conduct regular security assessments and vulnerability testing.\",\n        \"Incident Response: We have procedures in place to detect, respond to, and notify users of security incidents.\",\n        \"Industry Standards: Our security practices follow industry standards and compliance requirements.\"\n      ]\n    },\n    {\n      title: \"5. Your Rights and Choices\",\n      icon: Eye,\n      content: [\n        \"Access: You can request access to the personal information we hold about you.\",\n        \"Correction: You can update or correct your personal information through your account settings.\",\n        \"Deletion: You can request deletion of your personal data (subject to legal retention requirements).\",\n        \"Portability: You can request a copy of your data in a portable format.\",\n        \"Objection: You can object to certain types of data processing, including marketing communications.\",\n        \"Restriction: You can request that we restrict the processing of your data in certain circumstances.\"\n      ]\n    },\n    {\n      title: \"6. Cookies and Tracking\",\n      icon: Globe,\n      content: [\n        \"Essential Cookies: We use necessary cookies to operate our platform and maintain your session.\",\n        \"Analytics Cookies: We use analytics tools to understand how our platform is used (you can opt out).\",\n        \"Preference Cookies: We store your settings and preferences to enhance your experience.\",\n        \"Third-party Cookies: Some third-party services we use may set their own cookies.\",\n        \"Cookie Controls: You can manage cookie preferences through your browser settings.\",\n        \"Do Not Track: We respect Do Not Track signals where technically feasible.\"\n      ]\n    },\n    {\n      title: \"7. Data Retention\",\n      icon: Database,\n      content: [\n        \"Account Data: We retain your account information while your account is active.\",\n        \"Booking Data: Customer booking data is retained according to your business needs and legal requirements.\",\n        \"Usage Logs: Technical logs are typically retained for 12 months for security and improvement purposes.\",\n        \"Deleted Data: When you delete your account, we remove or anonymize your personal data within 30 days.\",\n        \"Legal Holds: Some data may be retained longer if required for legal compliance or dispute resolution.\",\n        \"Backup Data: Data in backups is deleted according to our backup retention schedule.\"\n      ]\n    },\n    {\n      title: \"8. International Data Transfers\",\n      icon: Globe,\n      content: [\n        \"Global Services: Our services may involve data transfers to countries outside your location.\",\n        \"Safeguards: We implement appropriate safeguards for international transfers, including standard contractual clauses.\",\n        \"EU-US Privacy Framework: We comply with applicable privacy frameworks for international transfers.\",\n        \"Data Localization: We strive to keep data within appropriate geographical boundaries where required by law.\"\n      ]\n    },\n    {\n      title: \"9. Children's Privacy\",\n      icon: UserCheck,\n      content: [\n        \"Age Restrictions: Our services are not intended for children under 16 years of age.\",\n        \"No Knowing Collection: We do not knowingly collect personal information from children under 16.\",\n        \"Parental Rights: If we become aware of child data collection, we will take steps to remove the information.\",\n        \"Verification: We may implement age verification measures where appropriate.\"\n      ]\n    },\n    {\n      title: \"10. Privacy Policy Changes\",\n      icon: Shield,\n      content: [\n        \"Updates: We may update this Privacy Policy to reflect changes in our practices or legal requirements.\",\n        \"Notification: Significant changes will be communicated via email or prominent platform notices.\",\n        \"Review: We encourage you to review this policy periodically.\",\n        \"Effective Date: Changes become effective on the date specified in the updated policy.\"\n      ]\n    }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <SEO \n        title=\"Privacy Policy | BookingGen\" \n        description=\"Learn how BookingGen protects your privacy and handles your personal data. Our comprehensive privacy policy explains data collection, usage, and security measures.\"\n        ogTitle=\"Privacy Policy - BookingGen\"\n        ogDescription=\"Comprehensive privacy policy explaining how BookingGen handles and protects your personal information.\"\n      />\n      <Header />\n      \n      {/* Hero Section */}\n      <section className=\"py-20 bg-muted/30\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            <Button \n              variant=\"ghost\" \n              onClick={() => setLocation('/legal')}\n              className=\"mb-6\"\n              data-testid=\"button-back-to-legal\"\n            >\n              <ArrowLeft className=\"mr-2 h-4 w-4\" />\n              Back to Legal & Support\n            </Button>\n            \n            <div className=\"text-center mb-12\">\n              <div className=\"inline-flex items-center justify-center w-16 h-16 bg-primary/10 rounded-full mb-6\">\n                <Shield className=\"h-8 w-8 text-primary\" />\n              </div>\n              <h1 className=\"text-3xl lg:text-5xl font-bold text-foreground mb-6\">\n                Privacy Policy\n              </h1>\n              <p className=\"text-xl text-muted-foreground\">\n                Last updated: September 17, 2025\n              </p>\n              <p className=\"text-lg text-muted-foreground mt-4 max-w-2xl mx-auto\">\n                Your privacy is important to us. This policy explains how we collect, use, and protect \n                your personal information when you use BookingGen.\n              </p>\n            </div>\n\n            {/* Privacy Commitment */}\n            <Card className=\"mb-8 border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-950/20\">\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-start gap-3\">\n                  <CheckCircle className=\"h-5 w-5 text-green-600 mt-1 flex-shrink-0\" />\n                  <div>\n                    <h3 className=\"font-semibold text-green-900 dark:text-green-100 mb-2\">\n                      Our Privacy Commitment\n                    </h3>\n                    <p className=\"text-green-800 dark:text-green-200 text-sm\">\n                      We are committed to protecting your privacy and handling your data responsibly. \n                      We only collect information necessary to provide our services and never sell your personal data.\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </section>\n\n      {/* Privacy Principles */}\n      <section className=\"py-16\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto mb-16\">\n            <h2 className=\"text-3xl font-bold text-center mb-8\">Our Privacy Principles</h2>\n            <div className=\"grid md:grid-cols-2 gap-6\">\n              {principles.map((principle, index) => (\n                <Card key={index} className=\"text-center\">\n                  <CardContent className=\"p-6\">\n                    <div className=\"inline-flex items-center justify-center w-12 h-12 bg-primary/10 rounded-lg mb-4\">\n                      <principle.icon className=\"h-6 w-6 text-primary\" />\n                    </div>\n                    <h3 className=\"font-semibold text-lg mb-2\">{principle.title}</h3>\n                    <p className=\"text-muted-foreground text-sm\" data-testid={`text-principle-${index}`}>\n                      {principle.description}\n                    </p>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Privacy Policy Content */}\n      <section className=\"py-16 bg-muted/30\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto space-y-8\">\n            {sections.map((section, index) => (\n              <Card key={index} className=\"p-6\">\n                <CardHeader className=\"p-0 mb-4\">\n                  <CardTitle className=\"flex items-center gap-3 text-xl\">\n                    <div className=\"inline-flex items-center justify-center w-8 h-8 bg-primary/10 rounded-lg\">\n                      <section.icon className=\"h-4 w-4 text-primary\" />\n                    </div>\n                    {section.title}\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"p-0\">\n                  <div className=\"space-y-3\">\n                    {section.content.map((paragraph, pIndex) => (\n                      <p \n                        key={pIndex} \n                        className=\"text-muted-foreground leading-relaxed\"\n                        data-testid={`text-section-${index}-paragraph-${pIndex}`}\n                      >\n                        {paragraph}\n                      </p>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Contact Section */}\n      <section className=\"py-16\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            <Card className=\"bg-primary/5 border-primary/20\">\n              <CardContent className=\"p-8 text-center\">\n                <Mail className=\"h-12 w-12 text-primary mx-auto mb-4\" />\n                <h3 className=\"text-xl font-semibold mb-4\">Questions About Your Privacy?</h3>\n                <p className=\"text-muted-foreground mb-6\">\n                  If you have any questions about this Privacy Policy or how we handle your data, \n                  we're here to help. Contact our privacy team directly.\n                </p>\n                <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n                  <Button \n                    onClick={() => setLocation('/contact')}\n                    data-testid=\"button-contact-privacy\"\n                  >\n                    <Mail className=\"mr-2 h-4 w-4\" />\n                    Contact Us\n                  </Button>\n                  <Button \n                    variant=\"outline\"\n                    onClick={() => setLocation('/legal')}\n                    data-testid=\"button-back-legal\"\n                  >\n                    Legal Center\n                  </Button>\n                </div>\n                <p className=\"text-sm text-muted-foreground mt-4\">\n                  Email us directly at: <span className=\"font-medium\" data-testid=\"text-privacy-email\">team@bookinggen.xyz</span>\n                </p>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </section>\n\n      <Footer />\n    </div>\n  );\n}","size_bytes":14915},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/dashboard/help-center.tsx":{"content":"import { useState, useRef, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { HelpCircle, BookOpen, MessageCircle, Search, ChevronRight, Sparkles, Clock, TrendingUp, Calendar, Palette, BarChart, ArrowRight, CheckCircle, Star, ChevronDown, Send } from 'lucide-react';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from '@/components/ui/accordion';\nimport SupportBot from './support-bot';\n\nfunction renderFormattedContent(content: string) {\n  const lines = content.split('\\n');\n  \n  return lines.map((line, lineIndex) => {\n    if (!line.trim()) {\n      return <div key={lineIndex} className=\"h-4\" />;\n    }\n\n    let formattedLine = line;\n    const parts: JSX.Element[] = [];\n    let currentText = '';\n    let inBold = false;\n    let key = 0;\n\n    for (let i = 0; i < formattedLine.length; i++) {\n      if (formattedLine[i] === '*' && formattedLine[i + 1] === '*') {\n        if (currentText) {\n          parts.push(\n            inBold ? (\n              <strong key={key++} className=\"font-bold text-gray-900 dark:text-white\">\n                {currentText}\n              </strong>\n            ) : (\n              <span key={key++}>{currentText}</span>\n            )\n          );\n          currentText = '';\n        }\n        inBold = !inBold;\n        i++;\n      } else {\n        currentText += formattedLine[i];\n      }\n    }\n\n    if (currentText) {\n      parts.push(\n        inBold ? (\n          <strong key={key++} className=\"font-bold text-gray-900 dark:text-white\">\n            {currentText}\n          </strong>\n        ) : (\n          <span key={key++}>{currentText}</span>\n        )\n      );\n    }\n\n    const trimmedLine = line.trim();\n    const isNumberedList = /^\\d+\\./.test(trimmedLine);\n    const isBulletList = trimmedLine.startsWith('•') || trimmedLine.startsWith('-');\n\n    if (isNumberedList) {\n      return (\n        <div key={lineIndex} className=\"ml-4 mb-2\">\n          {parts}\n        </div>\n      );\n    } else if (isBulletList) {\n      const textWithoutBullet = trimmedLine.startsWith('•') ? trimmedLine.slice(1).trim() : trimmedLine.slice(1).trim();\n      \n      const cleanParts: JSX.Element[] = [];\n      let cleanText = '';\n      let inBoldClean = false;\n      let keyClean = 0;\n\n      for (let i = 0; i < textWithoutBullet.length; i++) {\n        if (textWithoutBullet[i] === '*' && textWithoutBullet[i + 1] === '*') {\n          if (cleanText) {\n            cleanParts.push(\n              inBoldClean ? (\n                <strong key={keyClean++} className=\"font-bold text-gray-900 dark:text-white\">\n                  {cleanText}\n                </strong>\n              ) : (\n                <span key={keyClean++}>{cleanText}</span>\n              )\n            );\n            cleanText = '';\n          }\n          inBoldClean = !inBoldClean;\n          i++;\n        } else {\n          cleanText += textWithoutBullet[i];\n        }\n      }\n\n      if (cleanText) {\n        cleanParts.push(\n          inBoldClean ? (\n            <strong key={keyClean++} className=\"font-bold text-gray-900 dark:text-white\">\n              {cleanText}\n            </strong>\n          ) : (\n            <span key={keyClean++}>{cleanText}</span>\n          )\n        );\n      }\n\n      return (\n        <div key={lineIndex} className=\"ml-4 mb-2 flex items-start\">\n          <span className=\"mr-2 text-blue-600 dark:text-blue-400\">•</span>\n          <span className=\"flex-1\">{cleanParts}</span>\n        </div>\n      );\n    } else {\n      return (\n        <div key={lineIndex} className=\"mb-3\">\n          {parts}\n        </div>\n      );\n    }\n  });\n}\n\ninterface BlogPost {\n  id: string;\n  title: string;\n  excerpt: string;\n  content: string;\n  category: string;\n  readTime: string;\n  date: string;\n  icon: any;\n  gradient: string;\n}\n\ninterface FAQ {\n  id: string;\n  question: string;\n  answer: string;\n  category: string;\n}\n\nconst blogPosts: BlogPost[] = [\n  {\n    id: '1',\n    title: 'Getting Started with BookingGen',\n    excerpt: 'Learn how to create your first booking page in minutes and start accepting appointments from clients.',\n    content: `Welcome to BookingGen! This guide will help you get started.\\n\\n**Step 1: Create Your First Booking Page**\\n1. Click on 'Booking Pages' in the sidebar\\n2. Click 'Create New Page'\\n3. Fill in your business details\\n4. Add your services and pricing\\n5. Customize your branding\\n\\n**Step 2: Set Your Availability**\\nSet your business hours so clients know when they can book:\\n• Go to your page settings\\n• Set hours for each day\\n• Mark days off as closed\\n\\n**Step 3: Share Your Link**\\nOnce published, share your unique booking link:\\n• Copy the link from your page\\n• Add it to your website\\n• Share on social media\\n• Include in email signatures\\n\\n**Step 4: Manage Appointments**\\nWhen bookings come in:\\n• Review in the Appointments section\\n• Accept or reject requests\\n• Clients get automatic notifications\\n\\nYou're all set! Start accepting bookings today.`,\n    category: 'Getting Started',\n    readTime: '5 min read',\n    date: 'Oct 1, 2025',\n    icon: Sparkles,\n    gradient: 'from-blue-500/20 to-purple-500/20'\n  },\n  {\n    id: '2',\n    title: 'Customize Your Booking Page Design',\n    excerpt: 'Make your booking page stand out with custom themes, colors, and branding that matches your business.',\n    content: `Your booking page is your digital storefront. Make it shine!\\n\\n**Choose a Theme**\\nBookingGen offers beautiful pre-designed themes:\\n• Ocean Blue - Professional and calm\\n• Sunset - Warm and inviting\\n• Forest - Natural and organic\\n• Midnight - Sleek and modern\\n• Rose - Elegant and sophisticated\\n\\n**Customize Colors**\\n1. Pick your primary brand color\\n2. Select background style\\n3. Choose text colors\\n4. Preview changes in real-time\\n\\n**Upload Your Logo**\\n• Supports PNG, JPG, SVG\\n• Recommended size: 200x200px\\n• Displays prominently on your page\\n\\n**Advanced Customization**\\n• Choose font families\\n• Adjust spacing and layout\\n• Mobile-responsive automatically\\n• Preview on different devices\\n\\n**Pro Tip:** Keep your branding consistent across all platforms for better brand recognition!`,\n    category: 'Customization',\n    readTime: '4 min read',\n    date: 'Sep 28, 2025',\n    icon: Palette,\n    gradient: 'from-purple-500/20 to-pink-500/20'\n  },\n  {\n    id: '3',\n    title: 'Manage Your Appointments Like a Pro',\n    excerpt: 'Master appointment management with our powerful tools for accepting, declining, and organizing bookings.',\n    content: `Efficient appointment management is key to running a successful booking business.\\n\\n**The Appointments Dashboard**\\nYour central hub for all bookings:\\n• View all appointments at a glance\\n• Filter by status (pending, accepted, rejected)\\n• Search by client name or date\\n• Quick actions for each appointment\\n\\n**Accept or Decline Bookings**\\nSimple workflow:\\n1. Review appointment details\\n2. Click Accept or Reject\\n3. Client gets instant notification\\n4. Accepted bookings show in calendar\\n\\n**Reschedule Appointments**\\nWhen plans change:\\n• Click 'Reschedule' on any appointment\\n• Pick a new date and time\\n• Add a note for your client\\n• Client receives update automatically\\n\\n**View Client Information**\\nEvery booking includes:\\n• Client name and contact\\n• Service requested\\n• Date and time\\n• Special requests or notes\\n• Payment status\\n\\n**Calendar Integration**\\nSync with your favorite calendar apps to never miss an appointment!`,\n    category: 'Appointments',\n    readTime: '6 min read',\n    date: 'Sep 25, 2025',\n    icon: Calendar,\n    gradient: 'from-green-500/20 to-cyan-500/20'\n  },\n  {\n    id: '4',\n    title: 'Track Your Success with Analytics',\n    excerpt: 'Understand your booking performance with detailed analytics and insights to grow your business.',\n    content: `Data-driven decisions lead to business growth. Here's how to use BookingGen analytics.\\n\\n**Dashboard Overview**\\nYour analytics at a glance:\\n• Total booking pages created\\n• Total appointments received\\n• Pending appointments count\\n• Revenue tracking\\n• Conversion rates\\n\\n**Key Metrics to Monitor**\\n\\n**Conversion Rate**\\n• Percentage of page visits to bookings\\n• Industry average: 2-5%\\n• Higher is better!\\n\\n**Average Booking Value**\\n• Your typical appointment value\\n• Track trends over time\\n• Identify high-value services\\n\\n**Booking Trends**\\n• Peak booking times\\n• Popular services\\n• Client preferences\\n• Seasonal patterns\\n\\n**Using Insights**\\n1. Identify your best-performing pages\\n2. Optimize underperforming services\\n3. Adjust pricing based on demand\\n4. Plan capacity for busy periods\\n\\n**Pro Tips:**\\n• Review analytics weekly\\n• A/B test different page designs\\n• Track before and after changes\\n• Set monthly growth goals`,\n    category: 'Analytics',\n    readTime: '7 min read',\n    date: 'Sep 20, 2025',\n    icon: BarChart,\n    gradient: 'from-orange-500/20 to-yellow-500/20'\n  },\n  {\n    id: '5',\n    title: 'Best Practices for Service Descriptions',\n    excerpt: 'Write compelling service descriptions that convert visitors into paying clients.',\n    content: `Great service descriptions are the key to more bookings. Here's how to write them.\\n\\n**The Perfect Service Description Structure**\\n\\n**1. Headline (Service Name)**\\n• Clear and descriptive\\n• Include key benefit\\n• Example: \"60-Minute Deep Tissue Massage\"\\n\\n**2. What's Included**\\nBullet points work best:\\n• Duration of service\\n• What client can expect\\n• Any materials or resources included\\n• Follow-up support if applicable\\n\\n**3. Who It's For**\\nHelp clients self-identify:\\n• \"Perfect for busy professionals\"\\n• \"Ideal for beginners\"\\n• \"Designed for advanced users\"\\n\\n**4. Benefits Over Features**\\nFocus on outcomes:\\n❌ \"Uses advanced techniques\"\\n✅ \"Leave feeling relaxed and rejuvenated\"\\n\\n**5. Clear Pricing**\\n• Be upfront about costs\\n• Explain what's included\\n• Mention any packages or discounts\\n\\n**Writing Tips:**\\n• Keep it concise (100-150 words)\\n• Use action words\\n• Address client pain points\\n• Include social proof when possible\\n• Make it scannable with formatting\\n\\n**Examples:**\\n\\n**Good:** \"Transform your space with our 2-hour professional organizing session. We'll declutter one room, create custom storage solutions, and teach you systems to stay organized. Perfect for busy families struggling with clutter. You'll get a personalized action plan and 30 days of follow-up support.\"\\n\\n**Better:** \"Reclaim your peace of mind with our Professional Home Organization package. In just 2 hours, we'll transform your most chaotic room into an organized oasis. You'll learn proven systems used by organizing experts, receive a custom maintenance plan, and enjoy 30 days of text support. Ideal for anyone feeling overwhelmed by clutter and ready for lasting change.\"`,\n    category: 'Best Practices',\n    readTime: '5 min read',\n    date: 'Sep 15, 2025',\n    icon: TrendingUp,\n    gradient: 'from-pink-500/20 to-red-500/20'\n  },\n  {\n    id: '6',\n    title: 'Time Management Tips for Service Providers',\n    excerpt: 'Optimize your schedule and maximize productivity with smart time management strategies.',\n    content: `Running a booking business requires excellent time management. Here are proven strategies.\\n\\n**Set Realistic Availability**\\n• Don't overbook yourself\\n• Include buffer time between appointments\\n• Block time for admin tasks\\n• Reserve personal time\\n\\n**Use Business Hours Strategically**\\nMorning vs Evening bookings:\\n• Set peak hours for premium pricing\\n• Offer off-peak discounts\\n• Consider client preferences\\n• Factor in your energy levels\\n\\n**Buffer Time is Essential**\\nWhy you need it:\\n• Travel between locations\\n• Preparation and cleanup\\n• Unexpected delays\\n• Mental breaks\\n\\n**Batch Similar Services**\\n• Group similar appointments together\\n• Reduce context switching\\n• Improve efficiency\\n• Maintain focus\\n\\n**The Calendar View**\\nBookingGen's calendar tool helps you:\\n• Visualize your schedule\\n• Spot gaps and opportunities\\n• Prevent double-booking\\n• Plan ahead effectively\\n\\n**Time Blocking Technique**\\n1. Divide your day into blocks\\n2. Assign specific tasks to each block\\n3. Client appointments in prime hours\\n4. Admin work in low-energy times\\n5. Breaks are non-negotiable\\n\\n**Productivity Hacks:**\\n• Turn off notifications during appointments\\n• Use the Notes tool for quick reminders\\n• Review tomorrow's schedule each evening\\n• Prepare materials in advance\\n• Set clear boundaries with clients\\n\\n**Remember:** A well-managed schedule means better service for your clients and less stress for you!`,\n    category: 'Productivity',\n    readTime: '6 min read',\n    date: 'Sep 10, 2025',\n    icon: Clock,\n    gradient: 'from-indigo-500/20 to-blue-500/20'\n  }\n];\n\nconst faqs: FAQ[] = [\n  {\n    id: '1',\n    category: 'General',\n    question: 'What is BookingGen?',\n    answer: 'BookingGen is a modern SaaS platform that helps freelancers, consultants, and service providers create professional booking pages. Create custom pages, manage appointments, track analytics, and grow your business - all in one place.'\n  },\n  {\n    id: '2',\n    category: 'General',\n    question: 'How do I create my first booking page?',\n    answer: \"It's simple! Click 'Booking Pages' in the sidebar, then 'Create New Page'. Fill in your details, add services, customize your branding, and publish. Your unique shareable link will be ready in minutes!\"\n  },\n  {\n    id: '3',\n    category: 'Pages',\n    question: 'Can I have multiple booking pages?',\n    answer: 'Yes! Create unlimited booking pages with a Pro membership. Each page can have different services, branding, and availability settings. Perfect for offering different service types or targeting different client segments.'\n  },\n  {\n    id: '4',\n    category: 'Pages',\n    question: 'How do I share my booking page?',\n    answer: \"Once your page is published, click 'Copy Link' on the page card. Share this link on your website, social media, email signature, or anywhere you connect with clients. Anyone with the link can view and book your services.\"\n  },\n  {\n    id: '5',\n    category: 'Customization',\n    question: 'Can I customize the look of my booking page?',\n    answer: 'Absolutely! Choose from beautiful themes, customize colors, upload your logo, select fonts, and more. All changes preview in real-time, and your page is automatically mobile-responsive.'\n  },\n  {\n    id: '6',\n    category: 'Appointments',\n    question: 'How do clients book appointments?',\n    answer: 'Clients visit your booking page, select a service, choose an available time slot that works for them, provide their details, and submit. You receive a notification and can accept or decline the booking.'\n  },\n  {\n    id: '7',\n    category: 'Appointments',\n    question: 'Can I reschedule appointments?',\n    answer: \"Yes! From the Appointments section, click 'Reschedule' on any appointment, select a new date/time, add an optional note, and send. Your client receives an automatic notification with the updated details.\"\n  },\n  {\n    id: '8',\n    category: 'Appointments',\n    question: 'What happens when I accept or reject a booking?',\n    answer: 'When you accept or reject an appointment, your client receives an automatic email notification. Accepted appointments appear in your calendar and count toward your analytics. Rejected appointments do not.'\n  },\n  {\n    id: '9',\n    category: 'Calendar',\n    question: 'How do I set my availability?',\n    answer: \"Edit your booking page and scroll to 'Business Hours'. Set opening and closing times for each day, or mark days as closed. Clients can only book during your available hours, preventing conflicts.\"\n  },\n  {\n    id: '10',\n    category: 'Calendar',\n    question: 'Can I sync with Google Calendar?',\n    answer: 'Yes! Add your Google Calendar link in the Calendar Integration section when editing your page. This helps you keep track of all appointments in one place.'\n  },\n  {\n    id: '11',\n    category: 'Analytics',\n    question: 'What analytics are available?',\n    answer: 'Track key metrics including total pages, appointments, revenue, conversion rates, and average booking values. Use these insights to optimize your services and grow your business.'\n  },\n  {\n    id: '12',\n    category: 'Account',\n    question: 'What are the differences between Starter and Pro plans?',\n    answer: 'Starter includes basic features for getting started. Pro unlocks unlimited booking pages, unlimited appointments, advanced analytics, custom branding, and priority support. New users can try Pro free for 7 days!'\n  },\n  {\n    id: '13',\n    category: 'Account',\n    question: 'How does the 7-day free trial work?',\n    answer: \"Activate your free trial instantly from the sidebar - no credit card required! Enjoy all Pro features for 7 days completely free. After the trial, you can choose to upgrade to Pro for $14.99/month or continue with the free plan.\"\n  },\n  {\n    id: '14',\n    category: 'Services',\n    question: 'How do I add services to my page?',\n    answer: \"Edit your booking page, scroll to 'Services', click 'Add Service', then enter the name, description, duration, and price. You can add multiple services per page, each with different pricing and durations.\"\n  },\n  {\n    id: '15',\n    category: 'Troubleshooting',\n    question: 'My booking page is not showing up. What should I do?',\n    answer: \"First, ensure your page is published (toggle the 'Published' switch). If it's published but still not visible, try copying the link again and opening it in an incognito/private browser window. Contact support if issues persist.\"\n  }\n];\n\nexport default function HelpCenter() {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [selectedPost, setSelectedPost] = useState<BlogPost | null>(null);\n  const [activeTab, setActiveTab] = useState('guides');\n  const [botMessages, setBotMessages] = useState<Array<{ id: string; type: 'user' | 'bot'; content: string; timestamp: Date }>>([\n    {\n      id: '1',\n      type: 'bot',\n      content: \"👋 Hi! I'm your BookingGen assistant. I'm here to help you with pages, appointments, and settings. How can I help you today?\",\n      timestamp: new Date()\n    }\n  ]);\n  const [botInput, setBotInput] = useState('');\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  const blogCategories = Array.from(new Set(blogPosts.map(post => post.category)));\n  const faqCategories = Array.from(new Set(faqs.map(faq => faq.category)));\n\n  const filteredPosts = blogPosts.filter(post => {\n    const matchesSearch = post.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                         post.excerpt.toLowerCase().includes(searchQuery.toLowerCase());\n    const matchesCategory = selectedCategory === 'all' || post.category === selectedCategory;\n    return matchesSearch && matchesCategory;\n  });\n\n  const filteredFAQs = faqs.filter(faq => {\n    const matchesSearch = faq.question.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                         faq.answer.toLowerCase().includes(searchQuery.toLowerCase());\n    return matchesSearch;\n  });\n\n  const groupedFAQs = faqCategories.reduce((acc, category) => {\n    acc[category] = filteredFAQs.filter(faq => faq.category === category);\n    return acc;\n  }, {} as Record<string, FAQ[]>);\n\n  const getBotResponse = (userMessage: string): string => {\n    const message = userMessage.toLowerCase().trim();\n\n    if (message.includes('hello') || message.includes('hi') || message.includes('hey')) {\n      return `Hello! 👋 How can I assist you today?`;\n    }\n\n    if (message.includes('create') && message.includes('page')) {\n      return \"To create a booking page:\\n1. Click 'Booking Pages' in the sidebar\\n2. Click 'Create New Page'\\n3. Fill in your details, services, and branding\\n4. Click 'Create Page'\\n5. Toggle 'Published' to make it live!\";\n    }\n\n    if (message.includes('appointment') || message.includes('booking')) {\n      return \"To manage appointments:\\n1. Go to 'Appointments' in the sidebar\\n2. View pending, accepted, and rejected bookings\\n3. Accept or reject appointments\\n4. Customers get automatic notifications!\";\n    }\n\n    if (message.includes('customize') || message.includes('brand') || message.includes('theme')) {\n      return \"To customize your page:\\n1. Edit your booking page\\n2. Choose a theme (Ocean Blue, Sunset, etc.)\\n3. Select colors and upload your logo\\n4. Preview changes in real-time\\n5. Save when ready!\";\n    }\n\n    if (message.includes('help') || message.includes('what can you do')) {\n      return \"I can help you with:\\n\\n📄 Booking Pages - Create, edit, customize\\n📅 Appointments - Accept, reject, manage\\n⚙️ Settings - Services, availability, branding\\n📊 Analytics - Stats, revenue, conversions\\n\\nJust ask me anything!\";\n    }\n\n    return \"I'm here to help! Try asking about:\\n• Creating booking pages\\n• Managing appointments\\n• Customizing branding\\n• Or type 'help' to see what I can do!\";\n  };\n\n  const handleBotSend = () => {\n    if (!botInput.trim()) return;\n\n    const userMessage = {\n      id: Date.now().toString(),\n      type: 'user' as const,\n      content: botInput,\n      timestamp: new Date()\n    };\n\n    setBotMessages(prev => [...prev, userMessage]);\n\n    setTimeout(() => {\n      const botResponse = {\n        id: (Date.now() + 1).toString(),\n        type: 'bot' as const,\n        content: getBotResponse(botInput),\n        timestamp: new Date()\n      };\n      setBotMessages(prev => [...prev, botResponse]);\n    }, 500);\n\n    setBotInput('');\n  };\n\n  const handleQuickQuestion = (question: string) => {\n    setBotInput(question);\n    setTimeout(() => handleBotSend(), 100);\n  };\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [botMessages]);\n\n  return (\n    <div className=\"space-y-6 animate-fade-in\">\n      <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n        <div>\n          <h2 className=\"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent\">\n            Help Center\n          </h2>\n          <p className=\"text-muted-foreground mt-1\">Get help, learn tips, and master BookingGen</p>\n        </div>\n      </div>\n\n      <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n        <TabsList className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border-white/20 p-1 mobile-no-blur\">\n          <TabsTrigger \n            value=\"guides\" \n            className=\"text-gray-700 dark:text-gray-300 data-[state=active]:glass-prism-button data-[state=active]:text-gray-900 dark:data-[state=active]:text-white\"\n            data-testid=\"tab-guides\"\n          >\n            <BookOpen className=\"h-4 w-4 mr-2\" />\n            Guides & Tips\n          </TabsTrigger>\n          <TabsTrigger \n            value=\"faqs\" \n            className=\"text-gray-700 dark:text-gray-300 data-[state=active]:glass-prism-button data-[state=active]:text-gray-900 dark:data-[state=active]:text-white\"\n            data-testid=\"tab-faqs\"\n          >\n            <HelpCircle className=\"h-4 w-4 mr-2\" />\n            FAQs\n          </TabsTrigger>\n          <TabsTrigger \n            value=\"support\" \n            className=\"text-gray-700 dark:text-gray-300 data-[state=active]:glass-prism-button data-[state=active]:text-gray-900 dark:data-[state=active]:text-white\"\n            data-testid=\"tab-support\"\n          >\n            <MessageCircle className=\"h-4 w-4 mr-2\" />\n            Support Bot\n          </TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"guides\" className=\"mt-6 space-y-6\">\n          <Card className=\"glass-prism-card backdrop-blur-xl bg-white/5 dark:bg-black/5 border-white/20 shadow-2xl mobile-no-blur\">\n            <CardContent className=\"p-6\">\n              <div className=\"flex flex-col sm:flex-row gap-3\">\n                <div className=\"relative flex-1\">\n                  <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-600 dark:text-gray-400 z-10 pointer-events-none\" />\n                  <Input\n                    placeholder=\"Search guides and tips...\"\n                    value={searchQuery}\n                    onChange={(e) => setSearchQuery(e.target.value)}\n                    className=\"pl-10 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-gray-100 placeholder:text-gray-500\"\n                    data-testid=\"input-search-guides\"\n                  />\n                </div>\n                <div className=\"flex gap-2 flex-wrap\">\n                  <Button\n                    variant={selectedCategory === 'all' ? 'default' : 'outline'}\n                    size=\"sm\"\n                    onClick={() => setSelectedCategory('all')}\n                    className={selectedCategory === 'all' ? 'glass-prism-button text-gray-900 dark:text-white' : 'glass-prism text-gray-700 dark:text-gray-300'}\n                    data-testid=\"button-category-all\"\n                  >\n                    All\n                  </Button>\n                  {blogCategories.map(category => (\n                    <Button\n                      key={category}\n                      variant={selectedCategory === category ? 'default' : 'outline'}\n                      size=\"sm\"\n                      onClick={() => setSelectedCategory(category)}\n                      className={selectedCategory === category ? 'glass-prism-button text-gray-900 dark:text-white' : 'glass-prism text-gray-700 dark:text-gray-300'}\n                      data-testid={`button-category-${category.toLowerCase().replace(/\\s+/g, '-')}`}\n                    >\n                      {category}\n                    </Button>\n                  ))}\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {selectedPost ? (\n            <Card className=\"glass-prism-card backdrop-blur-xl bg-white/5 dark:bg-black/5 border-white/20 shadow-2xl animate-slide-up mobile-no-blur\">\n              <CardHeader>\n                <div className=\"flex items-start justify-between mb-4\">\n                  <div className=\"flex-1\">\n                    <Badge className=\"mb-3\" variant=\"secondary\">{selectedPost.category}</Badge>\n                    <CardTitle className=\"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-3\">\n                      {selectedPost.title}\n                    </CardTitle>\n                    <div className=\"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400\">\n                      <span className=\"flex items-center gap-1\">\n                        <Clock className=\"h-4 w-4\" />\n                        {selectedPost.readTime}\n                      </span>\n                      <span>{selectedPost.date}</span>\n                    </div>\n                  </div>\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => setSelectedPost(null)}\n                    className=\"glass-prism\"\n                    data-testid=\"button-back-to-guides\"\n                  >\n                    ← Back\n                  </Button>\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"prose dark:prose-invert max-w-none\">\n                  <div className=\"glass-prism p-6 rounded-xl text-gray-700 dark:text-gray-300 leading-relaxed\">\n                    {renderFormattedContent(selectedPost.content)}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          ) : (\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {filteredPosts.map((post, index) => {\n                const Icon = post.icon;\n                return (\n                  <Card\n                    key={post.id}\n                    className=\"glass-prism-card backdrop-blur-xl bg-white/5 dark:bg-black/5 border-white/20 shadow-2xl hover-lift cursor-pointer group animate-fade-in mobile-no-blur\"\n                    style={{ animationDelay: `${index * 0.1}s` }}\n                    onClick={() => setSelectedPost(post)}\n                    data-testid={`blog-post-${post.id}`}\n                  >\n                    <CardHeader>\n                      <div className={`w-12 h-12 glass-prism rounded-xl flex items-center justify-center mb-4 bg-gradient-to-br ${post.gradient} border border-white/30 group-hover:scale-110 transition-transform duration-300`}>\n                        <Icon className=\"h-6 w-6 text-gray-700 dark:text-gray-200\" />\n                      </div>\n                      <Badge className=\"mb-2 w-fit\" variant=\"secondary\">{post.category}</Badge>\n                      <CardTitle className=\"text-xl font-bold text-gray-800 dark:text-gray-100 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors\">\n                        {post.title}\n                      </CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <p className=\"text-gray-600 dark:text-gray-400 mb-4 line-clamp-3\">\n                        {post.excerpt}\n                      </p>\n                      <div className=\"flex items-center justify-between text-sm\">\n                        <span className=\"text-gray-500 dark:text-gray-500 flex items-center gap-1\">\n                          <Clock className=\"h-3 w-3\" />\n                          {post.readTime}\n                        </span>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          className=\"text-blue-600 dark:text-blue-400 group-hover:translate-x-1 transition-transform\"\n                        >\n                          Read more\n                          <ChevronRight className=\"h-4 w-4 ml-1\" />\n                        </Button>\n                      </div>\n                    </CardContent>\n                  </Card>\n                );\n              })}\n            </div>\n          )}\n\n          {!selectedPost && filteredPosts.length === 0 && (\n            <Card className=\"glass-prism-card backdrop-blur-xl bg-white/5 dark:bg-black/5 border-white/20 shadow-2xl mobile-no-blur\">\n              <CardContent className=\"p-12 text-center\">\n                <BookOpen className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n                <p className=\"text-gray-600 dark:text-gray-400\">No guides found matching your search.</p>\n              </CardContent>\n            </Card>\n          )}\n        </TabsContent>\n\n        <TabsContent value=\"faqs\" className=\"mt-6 space-y-6\">\n          <Card className=\"glass-prism-card backdrop-blur-xl bg-white/5 dark:bg-black/5 border-white/20 shadow-2xl mobile-no-blur\">\n            <CardContent className=\"p-6\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-600 dark:text-gray-400 z-10 pointer-events-none\" />\n                <Input\n                  placeholder=\"Search frequently asked questions...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-10 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-gray-100 placeholder:text-gray-500\"\n                  data-testid=\"input-search-faqs\"\n                />\n              </div>\n            </CardContent>\n          </Card>\n\n          <div className=\"space-y-6\">\n            {Object.entries(groupedFAQs).map(([category, categoryFAQs]) => (\n              categoryFAQs.length > 0 && (\n                <Card key={category} className=\"glass-prism-card backdrop-blur-xl bg-white/5 dark:bg-black/5 border-white/20 shadow-2xl animate-slide-up mobile-no-blur\">\n                  <CardHeader>\n                    <CardTitle className=\"text-xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2\">\n                      <HelpCircle className=\"h-5 w-5 text-blue-600 dark:text-blue-400\" />\n                      {category}\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <Accordion type=\"single\" collapsible className=\"space-y-2\">\n                      {categoryFAQs.map((faq, index) => (\n                        <AccordionItem \n                          key={faq.id} \n                          value={faq.id}\n                          className=\"glass-prism rounded-xl border-0 animate-fade-in\"\n                          style={{ animationDelay: `${index * 0.05}s` }}\n                          data-testid={`faq-item-${faq.id}`}\n                        >\n                          <AccordionTrigger className=\"px-5 py-4 hover:no-underline group [&[data-state=open]]:bg-gradient-to-r [&[data-state=open]]:from-blue-500/10 [&[data-state=open]]:to-purple-500/10 rounded-t-xl transition-all\">\n                            <div className=\"flex items-start gap-3 flex-1 text-left\">\n                              <div className=\"w-6 h-6 rounded-full bg-gradient-to-br from-blue-500/20 to-purple-500/20 flex items-center justify-center flex-shrink-0 mt-0.5 group-hover:scale-110 transition-transform\">\n                                <HelpCircle className=\"h-4 w-4 text-blue-600 dark:text-blue-400\" />\n                              </div>\n                              <h4 className=\"font-semibold text-gray-800 dark:text-gray-100 pr-4\">\n                                {faq.question}\n                              </h4>\n                            </div>\n                          </AccordionTrigger>\n                          <AccordionContent className=\"px-5 pb-4 pt-2\">\n                            <div className=\"ml-9 text-gray-700 dark:text-gray-300 leading-relaxed\">\n                              {faq.answer}\n                            </div>\n                          </AccordionContent>\n                        </AccordionItem>\n                      ))}\n                    </Accordion>\n                  </CardContent>\n                </Card>\n              )\n            ))}\n          </div>\n\n          {filteredFAQs.length === 0 && (\n            <Card className=\"glass-prism-card backdrop-blur-xl bg-white/5 dark:bg-black/5 border-white/20 shadow-2xl mobile-no-blur\">\n              <CardContent className=\"p-12 text-center\">\n                <HelpCircle className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n                <p className=\"text-gray-600 dark:text-gray-400\">No FAQs found matching your search.</p>\n              </CardContent>\n            </Card>\n          )}\n        </TabsContent>\n\n        <TabsContent value=\"support\" className=\"mt-6\">\n          <div className=\"grid lg:grid-cols-3 gap-6\">\n            <Card className=\"glass-prism-card backdrop-blur-xl bg-white/5 dark:bg-black/5 border-white/20 shadow-2xl animate-slide-in-left mobile-no-blur\">\n              <CardHeader>\n                <CardTitle className=\"text-lg font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2\">\n                  <MessageCircle className=\"h-5 w-5 text-blue-600 dark:text-blue-400\" />\n                  Quick Actions\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"p-4 space-y-3\">\n                <button\n                  onClick={() => handleQuickQuestion('How do I create a booking page?')}\n                  className=\"w-full p-4 rounded-xl glass-prism border border-white/20 hover:border-blue-500/50 transition-all duration-300 group hover:scale-[1.02] active:scale-[0.98]\"\n                  data-testid=\"quick-action-create-page\"\n                >\n                  <div className=\"flex items-center gap-4\">\n                    <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center flex-shrink-0 shadow-lg group-hover:shadow-blue-500/50 transition-shadow\">\n                      <Star className=\"h-6 w-6 text-white\" />\n                    </div>\n                    <div className=\"text-left flex-1\">\n                      <h4 className=\"font-semibold text-gray-800 dark:text-gray-100 mb-1 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors\">Create Booking Page</h4>\n                      <p className=\"text-xs text-gray-600 dark:text-gray-400\">Get started with your first page</p>\n                    </div>\n                    <ChevronRight className=\"h-5 w-5 text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 group-hover:translate-x-1 transition-all\" />\n                  </div>\n                </button>\n                \n                <button\n                  onClick={() => handleQuickQuestion('How do I manage appointments?')}\n                  className=\"w-full p-4 rounded-xl glass-prism border border-white/20 hover:border-green-500/50 transition-all duration-300 group hover:scale-[1.02] active:scale-[0.98]\"\n                  data-testid=\"quick-action-appointments\"\n                >\n                  <div className=\"flex items-center gap-4\">\n                    <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-cyan-600 flex items-center justify-center flex-shrink-0 shadow-lg group-hover:shadow-green-500/50 transition-shadow\">\n                      <Calendar className=\"h-6 w-6 text-white\" />\n                    </div>\n                    <div className=\"text-left flex-1\">\n                      <h4 className=\"font-semibold text-gray-800 dark:text-gray-100 mb-1 group-hover:text-green-600 dark:group-hover:text-green-400 transition-colors\">Manage Appointments</h4>\n                      <p className=\"text-xs text-gray-600 dark:text-gray-400\">Accept and organize bookings</p>\n                    </div>\n                    <ChevronRight className=\"h-5 w-5 text-gray-400 group-hover:text-green-600 dark:group-hover:text-green-400 group-hover:translate-x-1 transition-all\" />\n                  </div>\n                </button>\n\n                <button\n                  onClick={() => handleQuickQuestion('How do I customize my branding?')}\n                  className=\"w-full p-4 rounded-xl glass-prism border border-white/20 hover:border-purple-500/50 transition-all duration-300 group hover:scale-[1.02] active:scale-[0.98]\"\n                  data-testid=\"quick-action-branding\"\n                >\n                  <div className=\"flex items-center gap-4\">\n                    <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-pink-600 flex items-center justify-center flex-shrink-0 shadow-lg group-hover:shadow-purple-500/50 transition-shadow\">\n                      <Sparkles className=\"h-6 w-6 text-white\" />\n                    </div>\n                    <div className=\"text-left flex-1\">\n                      <h4 className=\"font-semibold text-gray-800 dark:text-gray-100 mb-1 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors\">Customize Branding</h4>\n                      <p className=\"text-xs text-gray-600 dark:text-gray-400\">Match your business style</p>\n                    </div>\n                    <ChevronRight className=\"h-5 w-5 text-gray-400 group-hover:text-purple-600 dark:group-hover:text-purple-400 group-hover:translate-x-1 transition-all\" />\n                  </div>\n                </button>\n\n                <button\n                  onClick={() => setActiveTab('faqs')}\n                  className=\"w-full p-4 rounded-xl glass-prism border border-white/20 hover:border-orange-500/50 transition-all duration-300 group hover:scale-[1.02] active:scale-[0.98]\"\n                  data-testid=\"quick-action-browse-faqs\"\n                >\n                  <div className=\"flex items-center gap-4\">\n                    <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-orange-500 to-yellow-600 flex items-center justify-center flex-shrink-0 shadow-lg group-hover:shadow-orange-500/50 transition-shadow\">\n                      <BookOpen className=\"h-6 w-6 text-white\" />\n                    </div>\n                    <div className=\"text-left flex-1\">\n                      <h4 className=\"font-semibold text-gray-800 dark:text-gray-100 mb-1 group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors\">Browse FAQs</h4>\n                      <p className=\"text-xs text-gray-600 dark:text-gray-400\">Find answers by category</p>\n                    </div>\n                    <ChevronRight className=\"h-5 w-5 text-gray-400 group-hover:text-orange-600 dark:group-hover:text-orange-400 group-hover:translate-x-1 transition-all\" />\n                  </div>\n                </button>\n              </CardContent>\n            </Card>\n\n            <div className=\"lg:col-span-2\">\n              <Card className=\"glass-prism-card backdrop-blur-xl bg-white/5 dark:bg-black/5 border-white/20 shadow-2xl h-full animate-slide-in-right mobile-no-blur\">\n                <CardHeader className=\"border-b border-white/10\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"w-10 h-10 glass-prism rounded-full flex items-center justify-center bg-gradient-to-br from-blue-500/20 to-purple-500/20\">\n                      <MessageCircle className=\"h-5 w-5 text-blue-600 dark:text-blue-400\" />\n                    </div>\n                    <div>\n                      <CardTitle className=\"text-lg font-bold text-gray-800 dark:text-gray-100\">\n                        Support Assistant\n                      </CardTitle>\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                        Ask anything about BookingGen\n                      </p>\n                    </div>\n                  </div>\n                </CardHeader>\n                <CardContent className=\"p-0 flex flex-col h-[500px]\">\n                  <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n                    {botMessages.map(message => (\n                      <div\n                        key={message.id}\n                        className={`flex ${message.type === 'user' ? 'justify-end' : 'justify-start'}`}\n                      >\n                        <div\n                          className={`max-w-[80%] rounded-2xl p-3 ${\n                            message.type === 'user'\n                              ? 'bg-gradient-to-br from-blue-500 to-blue-600 text-white'\n                              : 'glass-prism text-gray-800 dark:text-gray-200'\n                          }`}\n                          data-testid={`bot-message-${message.type}-${message.id}`}\n                        >\n                          <p className=\"text-sm whitespace-pre-line break-words\">{message.content}</p>\n                          <p className={`text-xs mt-1 ${message.type === 'user' ? 'opacity-70' : 'opacity-60'}`}>\n                            {message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                          </p>\n                        </div>\n                      </div>\n                    ))}\n                    <div ref={messagesEndRef} />\n                  </div>\n                  <div className=\"border-t border-white/10 p-4\">\n                    <div className=\"flex gap-2\">\n                      <Input\n                        value={botInput}\n                        onChange={(e) => setBotInput(e.target.value)}\n                        onKeyPress={(e) => {\n                          if (e.key === 'Enter' && !e.shiftKey) {\n                            e.preventDefault();\n                            handleBotSend();\n                          }\n                        }}\n                        placeholder=\"Ask me anything...\"\n                        className=\"flex-1 glass-prism bg-white/5 border-white/20\"\n                        data-testid=\"input-bot-message\"\n                      />\n                      <Button\n                        onClick={handleBotSend}\n                        size=\"sm\"\n                        className=\"glass-prism-button text-white\"\n                        data-testid=\"button-send-bot-message\"\n                      >\n                        <Send className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n        </TabsContent>\n      </Tabs>\n\n      <SupportBot />\n    </div>\n  );\n}\n","size_bytes":44964},"client/src/components/layout/footer.tsx":{"content":"import { CalendarDays } from 'lucide-react';\nimport { Link } from 'wouter';\n\nexport default function Footer() {\n  const footerLinks = {\n    product: [\n      { name: 'Features', href: '/#features', isSection: true },\n      { name: 'Pricing', href: '/pricing', isSection: false },\n      { name: 'How It Works', href: '/#how-it-works', isSection: true },\n    ],\n    support: [\n      { name: 'Legal & Support', href: '/legal' },\n      { name: 'Terms & Conditions', href: '/terms' },\n      { name: 'Privacy Policy', href: '/privacy' },\n      { name: 'Cancellation & Refunds', href: '/refunds' },\n      { name: 'Contact Us', href: '/contact' },\n    ],\n  };\n\n\n  return (\n    <footer className=\"bg-muted/50 border-t border-border py-16\">\n      <div className=\"container mx-auto px-6\">\n        <div className=\"grid md:grid-cols-4 gap-8 mb-8\">\n          {/* Brand */}\n          <div>\n            <div className=\"flex items-center space-x-3 mb-6\">\n              <div className=\"w-10 h-10 bg-primary rounded-lg flex items-center justify-center\">\n                <CalendarDays className=\"h-6 w-6 text-primary-foreground\" />\n              </div>\n              <span className=\"text-xl font-bold text-foreground\">BookingGen</span>\n            </div>\n            <p className=\"text-muted-foreground mb-4\">\n              Create beautiful booking pages that convert visitors into customers.\n            </p>\n          </div>\n\n          {/* Product Links */}\n          <div>\n            <h4 className=\"font-semibold text-foreground mb-4\">Product</h4>\n            <ul className=\"space-y-3\">\n              {footerLinks.product.map((link) => (\n                <li key={link.name}>\n                  {link.isSection ? (\n                    <a \n                      href={link.href} \n                      className=\"text-muted-foreground hover:text-foreground transition-colors\"\n                      data-testid={`footer-link-${link.name.toLowerCase().replace(/\\s+/g, '-')}`}\n                    >\n                      {link.name}\n                    </a>\n                  ) : (\n                    <Link \n                      href={link.href}\n                      className=\"text-muted-foreground hover:text-foreground transition-colors\"\n                      data-testid={`footer-link-${link.name.toLowerCase().replace(/\\s+/g, '-')}`}\n                    >\n                      {link.name}\n                    </Link>\n                  )}\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          {/* Support Links */}\n          <div>\n            <h4 className=\"font-semibold text-foreground mb-4\">Support</h4>\n            <ul className=\"space-y-3\">\n              {footerLinks.support.map((link) => (\n                <li key={link.name}>\n                  <a \n                    href={link.href} \n                    className=\"text-muted-foreground hover:text-foreground transition-colors\"\n                    data-testid={`footer-link-${link.name.toLowerCase().replace(/\\s+/g, '-')}`}\n                  >\n                    {link.name}\n                  </a>\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          {/* Connect Section */}\n          <div>\n            <h4 className=\"font-semibold text-foreground mb-4\">Connect</h4>\n            <div className=\"text-muted-foreground\">\n              <span data-testid=\"connect-coming-soon\">Coming Soon</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Copyright */}\n        <div className=\"border-t border-border pt-8 text-center text-muted-foreground\">\n          <p>&copy; 2025 BookingGen. All rights reserved.</p>\n        </div>\n      </div>\n    </footer>\n  );\n}\n","size_bytes":3681},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/modals/email-confirmation-modal.tsx":{"content":"import { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { useToast } from '@/hooks/use-toast';\nimport { useAuth } from '@/hooks/use-auth';\nimport { Mail, CheckCircle, ExternalLink, RefreshCw, Clock } from 'lucide-react';\nimport { useState, useEffect } from 'react';\n\ninterface EmailConfirmationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  email: string;\n}\n\nexport default function EmailConfirmationModal({ isOpen, onClose, email }: EmailConfirmationModalProps) {\n  const { resendConfirmation } = useAuth();\n  const { toast } = useToast();\n  const [resendLoading, setResendLoading] = useState(false);\n  const [resendCooldown, setResendCooldown] = useState(0);\n  const [emailsSent, setEmailsSent] = useState(1);\n\n  // Cooldown timer for resend button\n  useEffect(() => {\n    let interval: NodeJS.Timeout;\n    if (resendCooldown > 0) {\n      interval = setInterval(() => {\n        setResendCooldown(prev => prev - 1);\n      }, 1000);\n    }\n    return () => clearInterval(interval);\n  }, [resendCooldown]);\n\n  const handleOpenEmailClient = () => {\n    // Try to open common email clients\n    const emailDomain = email.split('@')[1]?.toLowerCase();\n    let emailUrl = 'mailto:';\n    \n    // Direct links to popular email providers\n    if (emailDomain?.includes('gmail')) {\n      emailUrl = 'https://mail.google.com';\n    } else if (emailDomain?.includes('outlook') || emailDomain?.includes('hotmail') || emailDomain?.includes('live')) {\n      emailUrl = 'https://outlook.live.com';\n    } else if (emailDomain?.includes('yahoo')) {\n      emailUrl = 'https://mail.yahoo.com';\n    } else if (emailDomain?.includes('icloud')) {\n      emailUrl = 'https://www.icloud.com/mail';\n    }\n    \n    window.open(emailUrl, '_blank');\n  };\n\n  const handleResendEmail = async () => {\n    setResendLoading(true);\n    try {\n      await resendConfirmation(email);\n      setEmailsSent(prev => prev + 1);\n      setResendCooldown(60); // 60 second cooldown\n      toast({\n        title: \"Email sent!\",\n        description: \"We've sent another confirmation email to your inbox.\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Failed to resend email\",\n        description: \"Please try again in a few moments.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setResendLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"glass-prism-card backdrop-blur-xl bg-gradient-to-br from-white/90 via-blue-50/60 to-white/80 dark:from-gray-900/90 dark:via-blue-950/60 dark:to-gray-900/80 border border-blue-200/40 dark:border-blue-800/40 shadow-2xl max-w-lg w-full mx-auto my-8 rounded-3xl overflow-hidden max-h-[90vh] overflow-y-auto\">\n        <div className=\"p-6 sm:p-8 text-center\">\n          {/* Animated Email Icon */}\n          <div className=\"relative mb-6\">\n            <div className=\"w-20 h-20 glass-prism rounded-full flex items-center justify-center mx-auto group animate-fade-in-up\">\n              <Mail className=\"h-10 w-10 text-blue-600 dark:text-blue-400 group-hover:scale-110 transition-transform duration-300\" />\n            </div>\n            <div className=\"absolute -inset-3 bg-gradient-to-r from-blue-400/20 to-blue-600/20 rounded-full blur-xl opacity-0 animate-pulse\"></div>\n          </div>\n\n          <DialogHeader className=\"space-y-4\">\n            <DialogTitle className=\"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent\">\n              Check your email\n            </DialogTitle>\n            <DialogDescription asChild>\n              <div className=\"text-gray-600 dark:text-gray-300 text-base leading-relaxed\">\n                {emailsSent === 1 ? 'We sent' : `We've sent ${emailsSent}`} confirmation {emailsSent === 1 ? 'link' : 'emails'} to{' '}\n                <span className=\"font-semibold text-blue-600 dark:text-blue-400\">\n                  {email}\n                </span>\n              </div>\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"mt-8 space-y-6\">\n            {/* Steps */}\n            <div className=\"glass-prism backdrop-blur-md bg-gradient-to-r from-white/60 via-blue-50/40 to-white/50 dark:from-gray-900/60 dark:via-blue-950/40 dark:to-gray-900/50 border border-blue-200/20 dark:border-blue-800/20 rounded-xl p-4 sm:p-6 text-left shadow-lg\">\n              <h4 className=\"font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center\">\n                <CheckCircle className=\"h-5 w-5 text-green-500 mr-2\" />\n                Next steps:\n              </h4>\n              <ol className=\"text-sm text-gray-600 dark:text-gray-300 space-y-2\">\n                <li className=\"flex items-start\">\n                  <span className=\"text-blue-600 dark:text-blue-400 font-semibold mr-2\">1.</span>\n                  Open your email inbox\n                </li>\n                <li className=\"flex items-start\">\n                  <span className=\"text-blue-600 dark:text-blue-400 font-semibold mr-2\">2.</span>\n                  Click the confirmation link in the email\n                </li>\n                <li className=\"flex items-start\">\n                  <span className=\"text-blue-600 dark:text-blue-400 font-semibold mr-2\">3.</span>\n                  You'll be redirected back to complete your signup\n                </li>\n              </ol>\n            </div>\n\n            {/* Action Buttons */}\n            <div className=\"space-y-3\">\n              <Button\n                onClick={handleOpenEmailClient}\n                className=\"w-full h-12 bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:from-blue-600 hover:via-blue-700 hover:to-blue-800 text-white shadow-lg backdrop-blur-lg flex items-center justify-center border-0 font-semibold transition-all duration-300 hover:scale-105\"\n                data-testid=\"button-open-email\"\n              >\n                <ExternalLink className=\"h-4 w-4 mr-2\" />\n                Open Email App\n              </Button>\n              \n              <Button\n                onClick={handleResendEmail}\n                disabled={resendLoading || resendCooldown > 0}\n                variant=\"outline\"\n                className=\"w-full h-12 glass-prism backdrop-blur-md bg-white/20 dark:bg-gray-800/30 border border-blue-200/40 dark:border-blue-700/40 hover:bg-white/30 dark:hover:bg-gray-800/40 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed text-blue-700 dark:text-blue-300 font-medium\"\n                data-testid=\"button-resend-email\"\n              >\n                {resendLoading ? (\n                  <>\n                    <RefreshCw className=\"h-4 w-4 mr-2 animate-spin\" />\n                    Sending...\n                  </>\n                ) : resendCooldown > 0 ? (\n                  <>\n                    <Clock className=\"h-4 w-4 mr-2\" />\n                    Resend in {resendCooldown}s\n                  </>\n                ) : (\n                  <>\n                    <RefreshCw className=\"h-4 w-4 mr-2\" />\n                    Resend Email\n                  </>\n                )}\n              </Button>\n              \n              <Button\n                variant=\"ghost\"\n                onClick={onClose}\n                className=\"w-full h-12 glass-prism backdrop-blur-md bg-transparent border border-transparent hover:bg-blue-50/50 dark:hover:bg-blue-950/20 transition-all duration-300 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200\"\n                data-testid=\"button-close-modal\"\n              >\n                I'll check later\n              </Button>\n            </div>\n\n            {/* Help Text */}\n            <div className=\"space-y-2\">\n              <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                Didn't receive the email? Check your spam folder first.\n              </p>\n              {emailsSent > 1 && (\n                <p className=\"text-xs text-green-600 dark:text-green-400 flex items-center justify-center\">\n                  <CheckCircle className=\"h-3 w-3 mr-1\" />\n                  Email resent successfully\n                </p>\n              )}\n            </div>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":8366},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":23567},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/modals/billing-modal.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Separator } from '@/components/ui/separator';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { \n  CreditCard, \n  Calendar, \n  AlertTriangle, \n  Download, \n  RefreshCw, \n  CheckCircle,\n  XCircle,\n  Clock,\n  Crown,\n  Loader2\n} from 'lucide-react';\nimport { useAuth } from '@/hooks/use-auth';\nimport { useToast } from '@/hooks/use-toast';\nimport { apiRequest, queryClient } from '@/lib/queryClient';\nimport { useCurrency } from '@/hooks/use-currency';\nimport { useQuery } from '@tanstack/react-query';\n\ninterface BillingModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\ninterface SubscriptionDetails {\n  subscriptionId: string;\n  status: string;\n  planId: string;\n  plan: string;\n  createdAt: string;\n  amount: number;\n  currency: string;\n  nextBillingDate?: string;\n  isTrial?: boolean;\n}\n\ninterface PaymentHistory {\n  id: string;\n  amount: string;\n  status: string;\n  createdAt: string;\n  paymentMethod: string;\n  plan: string;\n}\n\nexport default function BillingModal({ isOpen, onClose }: BillingModalProps) {\n  const { user, profile } = useAuth();\n  const { toast } = useToast();\n  const { formatPrice } = useCurrency();\n  const [cancelLoading, setCancelLoading] = useState(false);\n\n  // Fetch user's subscriptions\n  const { data: subscriptions, isLoading: subscriptionsLoading, refetch: refetchSubscriptions } = useQuery({\n    queryKey: ['/api/subscriptions'],\n    enabled: isOpen && !!user,\n    queryFn: async () => {\n      const response = await apiRequest('GET', '/api/subscriptions');\n      if (!response.ok) throw new Error('Failed to fetch subscriptions');\n      return response.json();\n    }\n  });\n\n  // Fetch payment history\n  const { data: payments, isLoading: paymentsLoading } = useQuery({\n    queryKey: ['/api/payments'],\n    enabled: isOpen && !!user,\n    queryFn: async () => {\n      const response = await apiRequest('GET', '/api/payments');\n      if (!response.ok) throw new Error('Failed to fetch payment history');\n      return response.json();\n    }\n  });\n\n  const activeSubscription = subscriptions?.find((sub: SubscriptionDetails) => {\n    const status = sub.status?.toLowerCase();\n    return status === 'active' || status === 'authenticated' || status === 'created' || sub.isTrial;\n  });\n\n  // Fallback: Create a pseudo-subscription from profile data if user has Pro status but no subscription record\n  // This handles legacy users who upgraded before subscription records were created for one-time payments\n  const displaySubscription = activeSubscription || (profile?.membershipStatus === 'pro' && profile?.membershipExpires ? {\n    subscriptionId: 'legacy',\n    status: 'active',\n    planId: 'pro',\n    plan: 'pro',\n    // Calculate start date: 1 year before the expiration date (or current date if expiration is in the past)\n    createdAt: profile.membershipExpires ? new Date(Math.min(\n      new Date(profile.membershipExpires).getTime() - (365 * 24 * 60 * 60 * 1000),\n      Date.now()\n    )).toISOString() : new Date().toISOString(),\n    amount: 14.99,\n    currency: 'USD',\n    nextBillingDate: profile.membershipExpires\n  } : null);\n\n  const handleCancelSubscription = async () => {\n    setCancelLoading(true);\n    try {\n      const response = await apiRequest('POST', '/api/razorpay/cancel-subscription', {});\n      if (response.ok) {\n        await queryClient.invalidateQueries({ queryKey: ['/api/profile'] });\n        await refetchSubscriptions();\n        toast({\n          title: \"Subscription cancelled\",\n          description: \"Your subscription will remain active until the end of your billing period.\",\n        });\n        onClose();\n      } else {\n        const errorData = await response.json();\n        // If no active subscription found, show a helpful message\n        if (response.status === 404) {\n          toast({\n            title: \"Unable to cancel\",\n            description: \"No active subscription found. Please contact support for assistance.\",\n            variant: \"destructive\",\n          });\n        } else {\n          throw new Error(errorData.error || 'Failed to cancel subscription');\n        }\n      }\n    } catch (error: any) {\n      toast({\n        title: \"Cancellation failed\",\n        description: error.message || \"Failed to cancel subscription. Please contact support.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setCancelLoading(false);\n    }\n  };\n\n  const getStatusBadge = (status: string) => {\n    switch (status.toLowerCase()) {\n      case 'active':\n        return <Badge className=\"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200\"><CheckCircle className=\"h-3 w-3 mr-1\" />Active</Badge>;\n      case 'cancelled':\n        return <Badge className=\"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200\"><XCircle className=\"h-3 w-3 mr-1\" />Cancelled</Badge>;\n      case 'paused':\n        return <Badge className=\"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200\"><Clock className=\"h-3 w-3 mr-1\" />Paused</Badge>;\n      default:\n        return <Badge variant=\"secondary\">{status}</Badge>;\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-2xl max-w-4xl mx-auto rounded-3xl overflow-hidden max-h-[90vh] overflow-y-auto\" data-testid=\"modal-billing\">\n        <DialogHeader className=\"p-6 pb-4\">\n          <DialogTitle className=\"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent flex items-center\">\n            <CreditCard className=\"h-6 w-6 mr-3 text-blue-600 dark:text-blue-400\" />\n            Billing & Subscription Management\n          </DialogTitle>\n          <DialogDescription className=\"text-gray-600 dark:text-gray-400 mt-2\">\n            Manage your subscription, view billing history, and update payment settings\n          </DialogDescription>\n        </DialogHeader>\n        \n        <div className=\"px-6 pb-6\">\n          <Tabs defaultValue=\"overview\" className=\"space-y-6\">\n            <TabsList className=\"grid w-full grid-cols-3 glass-prism backdrop-blur-md bg-white/10 dark:bg-black/10\">\n              <TabsTrigger value=\"overview\" data-testid=\"tab-overview\">Overview</TabsTrigger>\n              <TabsTrigger value=\"history\" data-testid=\"tab-history\">Billing History</TabsTrigger>\n              <TabsTrigger value=\"settings\" data-testid=\"tab-settings\">Settings</TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"overview\" className=\"space-y-6\">\n              {/* Current Plan */}\n              <Card className=\"glass-prism-card backdrop-blur-md bg-white/10 dark:bg-black/10 border border-white/20\">\n                <CardHeader>\n                  <CardTitle className=\"flex items-center text-lg\">\n                    <Crown className=\"h-5 w-5 mr-2 text-yellow-600 dark:text-yellow-400\" />\n                    Current Plan\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {subscriptionsLoading ? (\n                    <div className=\"flex items-center space-x-2\">\n                      <Loader2 className=\"h-4 w-4 animate-spin\" />\n                      <span>Loading subscription details...</span>\n                    </div>\n                  ) : profile?.membershipStatus === 'pro' && displaySubscription ? (\n                    <div className=\"space-y-4\">\n                      <div className=\"flex items-center justify-between\">\n                        <div>\n                          <h3 className=\"text-xl font-semibold\">Pro Plan</h3>\n                          <p className=\"text-gray-600 dark:text-gray-400\">All features unlocked</p>\n                        </div>\n                        <div className=\"text-right\">\n                          {getStatusBadge(displaySubscription.status)}\n                          <p className=\"text-2xl font-bold mt-1\">{formatPrice(displaySubscription.amount)}<span className=\"text-sm font-normal text-gray-500\">/month</span></p>\n                        </div>\n                      </div>\n                      \n                      <Separator />\n                      \n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        {profile?.membershipExpires && (\n                          <div className=\"flex items-center space-x-3\">\n                            <Calendar className=\"h-4 w-4 text-blue-600 dark:text-blue-400\" />\n                            <div>\n                              <p className=\"text-sm text-gray-600 dark:text-gray-400\">Next billing date</p>\n                              <p className=\"font-medium\">{formatDate(profile.membershipExpires)}</p>\n                            </div>\n                          </div>\n                        )}\n                        <div className=\"flex items-center space-x-3\">\n                          <CheckCircle className=\"h-4 w-4 text-green-600 dark:text-green-400\" />\n                          <div>\n                            <p className=\"text-sm text-gray-600 dark:text-gray-400\">Plan started</p>\n                            <p className=\"font-medium\">{displaySubscription.createdAt ? formatDate(displaySubscription.createdAt) : 'N/A'}</p>\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 mt-4\">\n                        {['Unlimited pages', 'Custom branding', 'Analytics', 'Priority support'].map((feature) => (\n                          <div key={feature} className=\"flex items-center\">\n                            <CheckCircle className=\"h-4 w-4 text-green-600 dark:text-green-400 mr-2\" />\n                            <span className=\"text-sm\">{feature}</span>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  ) : (\n                    <div className=\"text-center py-8\">\n                      <Crown className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n                      <h3 className=\"text-lg font-semibold mb-2\">No Active Subscription</h3>\n                      <p className=\"text-gray-600 dark:text-gray-400 mb-4\">You're currently on the free plan</p>\n                      <Button \n                        onClick={() => {\n                          onClose();\n                          // This would open the upgrade modal - you can implement this flow\n                        }}\n                        className=\"glass-prism-button text-white\"\n                        data-testid=\"button-upgrade-now\"\n                      >\n                        <Crown className=\"h-4 w-4 mr-2\" />\n                        Upgrade to Pro\n                      </Button>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"history\" className=\"space-y-6\">\n              <Card className=\"glass-prism-card backdrop-blur-md bg-white/10 dark:bg-black/10 border border-white/20\">\n                <CardHeader>\n                  <CardTitle className=\"flex items-center text-lg\">\n                    <Clock className=\"h-5 w-5 mr-2\" />\n                    Payment History\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {paymentsLoading ? (\n                    <div className=\"flex items-center space-x-2\">\n                      <Loader2 className=\"h-4 w-4 animate-spin\" />\n                      <span>Loading payment history...</span>\n                    </div>\n                  ) : payments && payments.length > 0 ? (\n                    <div className=\"space-y-3\">\n                      {payments.map((payment: PaymentHistory) => (\n                        <div key={payment.id} className=\"flex items-center justify-between p-4 rounded-lg bg-white/5 dark:bg-black/5 border border-white/10\">\n                          <div className=\"flex items-center space-x-3\">\n                            <div className=\"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center\">\n                              <CheckCircle className=\"h-5 w-5 text-green-600 dark:text-green-400\" />\n                            </div>\n                            <div>\n                              <p className=\"font-medium\">{payment.plan.charAt(0).toUpperCase() + payment.plan.slice(1)} Plan Payment</p>\n                              <p className=\"text-sm text-gray-600 dark:text-gray-400\">{formatDate(payment.createdAt)} • {payment.paymentMethod}</p>\n                            </div>\n                          </div>\n                          <div className=\"text-right\">\n                            <p className=\"font-semibold\">${payment.amount}</p>\n                            <div className=\"flex items-center space-x-2\">\n                              {getStatusBadge(payment.status)}\n                              <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                data-testid={`button-download-${payment.id}`}\n                              >\n                                <Download className=\"h-4 w-4\" />\n                              </Button>\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <div className=\"text-center py-8\">\n                      <CreditCard className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n                      <h3 className=\"text-lg font-semibold mb-2\">No Payment History</h3>\n                      <p className=\"text-gray-600 dark:text-gray-400\">Your payment history will appear here once you make a purchase</p>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"settings\" className=\"space-y-6\">\n              <Card className=\"glass-prism-card backdrop-blur-md bg-white/10 dark:bg-black/10 border border-white/20\">\n                <CardHeader>\n                  <CardTitle className=\"flex items-center text-lg\">\n                    <AlertTriangle className=\"h-5 w-5 mr-2 text-red-600 dark:text-red-400\" />\n                    Subscription Management\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-6\">\n                  {profile?.membershipStatus === 'pro' && displaySubscription ? (\n                    <div className=\"space-y-4\">\n                      <div className=\"p-4 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800\">\n                        <h4 className=\"font-semibold text-red-800 dark:text-red-200 mb-2\">Cancel Subscription</h4>\n                        <p className=\"text-sm text-red-700 dark:text-red-300 mb-4\">\n                          Once cancelled, you'll continue to have access to Pro features until the end of your current billing period. \n                          After that, your account will be downgraded to the free plan.\n                        </p>\n                        <Button\n                          variant=\"destructive\"\n                          onClick={handleCancelSubscription}\n                          disabled={cancelLoading}\n                          data-testid=\"button-cancel-subscription-modal\"\n                        >\n                          {cancelLoading ? (\n                            <>\n                              <RefreshCw className=\"h-4 w-4 mr-2 animate-spin\" />\n                              Cancelling...\n                            </>\n                          ) : (\n                            <>\n                              <XCircle className=\"h-4 w-4 mr-2\" />\n                              Cancel Subscription\n                            </>\n                          )}\n                        </Button>\n                      </div>\n                      \n                      <Separator />\n                      \n                      <div className=\"p-4 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800\">\n                        <h4 className=\"font-semibold text-blue-800 dark:text-blue-200 mb-2\">Need Help?</h4>\n                        <p className=\"text-sm text-blue-700 dark:text-blue-300 mb-4\">\n                          If you're experiencing issues with your subscription or have questions about billing, \n                          our support team is here to help.\n                        </p>\n                        <Button\n                          variant=\"outline\"\n                          onClick={() => {\n                            onClose();\n                            window.location.href = '/contact';\n                          }}\n                          data-testid=\"button-contact-support\"\n                        >\n                          Contact Support\n                        </Button>\n                      </div>\n                    </div>\n                  ) : (\n                    <div className=\"text-center py-8\">\n                      <AlertTriangle className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n                      <h3 className=\"text-lg font-semibold mb-2\">No Active Subscription</h3>\n                      <p className=\"text-gray-600 dark:text-gray-400\">Subscribe to Pro to access subscription management features</p>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n          </Tabs>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":18293},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/components/auth/auth-guard.tsx":{"content":"import { useAuth } from '@/hooks/use-auth';\nimport { useLocation } from 'wouter';\nimport { useEffect } from 'react';\n\ninterface AuthGuardProps {\n  children: React.ReactNode;\n}\n\nexport default function AuthGuard({ children }: AuthGuardProps) {\n  const { user, loading } = useAuth();\n  const [, setLocation] = useLocation();\n\n  useEffect(() => {\n    if (!loading && !user) {\n      setLocation('/login');\n    }\n  }, [user, loading, setLocation]);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return null;\n  }\n\n  return <>{children}</>;\n}\n","size_bytes":729},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"var(--background)\",\n        foreground: \"var(--foreground)\",\n        card: {\n          DEFAULT: \"var(--card)\",\n          foreground: \"var(--card-foreground)\",\n        },\n        popover: {\n          DEFAULT: \"var(--popover)\",\n          foreground: \"var(--popover-foreground)\",\n        },\n        primary: {\n          DEFAULT: \"var(--primary)\",\n          foreground: \"var(--primary-foreground)\",\n        },\n        secondary: {\n          DEFAULT: \"var(--secondary)\",\n          foreground: \"var(--secondary-foreground)\",\n        },\n        muted: {\n          DEFAULT: \"var(--muted)\",\n          foreground: \"var(--muted-foreground)\",\n        },\n        accent: {\n          DEFAULT: \"var(--accent)\",\n          foreground: \"var(--accent-foreground)\",\n        },\n        destructive: {\n          DEFAULT: \"var(--destructive)\",\n          foreground: \"var(--destructive-foreground)\",\n        },\n        border: \"var(--border)\",\n        input: \"var(--input)\",\n        ring: \"var(--ring)\",\n        chart: {\n          \"1\": \"var(--chart-1)\",\n          \"2\": \"var(--chart-2)\",\n          \"3\": \"var(--chart-3)\",\n          \"4\": \"var(--chart-4)\",\n          \"5\": \"var(--chart-5)\",\n        },\n        sidebar: {\n          DEFAULT: \"var(--sidebar)\",\n          foreground: \"var(--sidebar-foreground)\",\n          primary: \"var(--sidebar-primary)\",\n          \"primary-foreground\": \"var(--sidebar-primary-foreground)\",\n          accent: \"var(--sidebar-accent)\",\n          \"accent-foreground\": \"var(--sidebar-accent-foreground)\",\n          border: \"var(--sidebar-border)\",\n          ring: \"var(--sidebar-ring)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":2681},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/pages/terms.tsx":{"content":"import Header from '@/components/layout/header';\nimport Footer from '@/components/layout/footer';\nimport SEO from '@/components/seo';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { useLocation } from 'wouter';\nimport { Scale, ArrowLeft, FileText, Shield, AlertTriangle } from 'lucide-react';\n\nexport default function Terms() {\n  const [, setLocation] = useLocation();\n\n  const sections = [\n    {\n      title: \"1. Acceptance of Terms\",\n      content: [\n        \"By accessing and using BookingGen's services, you acknowledge that you have read, understood, and agree to be bound by these Terms and Conditions.\",\n        \"These terms apply to all users of our platform, including visitors, registered users, and paying customers.\",\n        \"If you do not agree with any part of these terms, you must discontinue use of our services immediately.\"\n      ]\n    },\n    {\n      title: \"2. Service Description\",\n      content: [\n        \"BookingGen provides online booking page creation and management services for businesses and professionals.\",\n        \"Our services include custom booking page design, appointment scheduling, and customer management tools.\",\n        \"We reserve the right to modify, suspend, or discontinue any part of our services at any time with reasonable notice.\"\n      ]\n    },\n    {\n      title: \"3. User Accounts and Registration\",\n      content: [\n        \"You must create an account to access certain features of our platform.\",\n        \"You are responsible for maintaining the confidentiality of your account credentials and for all activities that occur under your account.\",\n        \"You must provide accurate, current, and complete information during registration and keep your account information updated.\",\n        \"You may not share your account with others or allow unauthorized access to your account.\"\n      ]\n    },\n    {\n      title: \"4. Acceptable Use Policy\",\n      content: [\n        \"You agree to use BookingGen's services only for lawful purposes and in accordance with these Terms.\",\n        \"Prohibited activities include but are not limited to: violating any laws, infringing intellectual property rights, transmitting harmful content, or attempting to gain unauthorized access to our systems.\",\n        \"You may not use our services to create booking pages for illegal services, adult content, or any activities that could harm our reputation.\",\n        \"We reserve the right to suspend or terminate accounts that violate our acceptable use policy.\"\n      ]\n    },\n    {\n      title: \"5. Payment Terms\",\n      content: [\n        \"Subscription fees are billed in advance on a monthly or annual basis, depending on your chosen plan.\",\n        \"All payments are processed securely through our payment partners and are subject to their terms and conditions.\",\n        \"Fees are non-refundable except as expressly stated in our Refund Policy.\",\n        \"We reserve the right to change our pricing with 30 days' advance notice to existing subscribers.\"\n      ]\n    },\n    {\n      title: \"6. Data and Privacy\",\n      content: [\n        \"Your privacy is important to us. Please review our Privacy Policy to understand how we collect, use, and protect your information.\",\n        \"You retain ownership of all content and data you provide through our platform.\",\n        \"By using our services, you grant us a limited license to use your data to provide and improve our services.\",\n        \"We implement appropriate security measures to protect your data, but cannot guarantee absolute security.\"\n      ]\n    },\n    {\n      title: \"7. Intellectual Property\",\n      content: [\n        \"BookingGen and all related trademarks, logos, and service marks are owned by us or our licensors.\",\n        \"You may not use our intellectual property without our express written permission.\",\n        \"You retain ownership of your custom content, but grant us a license to use it to provide our services.\",\n        \"We respect intellectual property rights and will respond to valid takedown notices.\"\n      ]\n    },\n    {\n      title: \"8. Limitation of Liability\",\n      content: [\n        \"Our services are provided 'as is' without warranties of any kind, either express or implied.\",\n        \"We shall not be liable for any indirect, incidental, special, consequential, or punitive damages.\",\n        \"Our total liability to you for all claims shall not exceed the amount you paid us in the 12 months preceding the claim.\",\n        \"Some jurisdictions do not allow the exclusion of certain warranties or limitations of liability.\"\n      ]\n    },\n    {\n      title: \"9. Service Availability\",\n      content: [\n        \"We strive to maintain high service availability but cannot guarantee uninterrupted service.\",\n        \"Scheduled maintenance will be announced in advance when possible.\",\n        \"We are not responsible for service interruptions due to circumstances beyond our control.\",\n        \"Service level agreements may be available for enterprise customers.\"\n      ]\n    },\n    {\n      title: \"10. Termination\",\n      content: [\n        \"You may terminate your account at any time by following the cancellation process in your account settings.\",\n        \"We may terminate or suspend your account for violation of these terms or for any other reason with reasonable notice.\",\n        \"Upon termination, your right to use our services ceases immediately.\",\n        \"Data retention and deletion policies are outlined in our Privacy Policy.\"\n      ]\n    },\n    {\n      title: \"11. Changes to Terms\",\n      content: [\n        \"We reserve the right to modify these Terms and Conditions at any time.\",\n        \"Significant changes will be communicated to users via email or platform notifications.\",\n        \"Continued use of our services after changes constitutes acceptance of the new terms.\",\n        \"You should review these terms periodically for updates.\"\n      ]\n    },\n    {\n      title: \"12. Governing Law and Disputes\",\n      content: [\n        \"These terms are governed by and construed in accordance with applicable laws.\",\n        \"Any disputes arising from these terms or use of our services will be resolved through binding arbitration.\",\n        \"Class action lawsuits and jury trials are waived.\",\n        \"If any provision of these terms is deemed invalid, the remaining provisions remain in effect.\"\n      ]\n    }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <SEO \n        title=\"Terms & Conditions | BookingGen\" \n        description=\"Read BookingGen's Terms and Conditions. Understand our service terms, user agreements, and legal policies for using our booking platform.\"\n        ogTitle=\"Terms & Conditions - BookingGen\"\n        ogDescription=\"Complete terms and conditions for using BookingGen's booking platform services.\"\n      />\n      <Header />\n      \n      {/* Hero Section */}\n      <section className=\"py-20 bg-muted/30\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            <Button \n              variant=\"ghost\" \n              onClick={() => setLocation('/legal')}\n              className=\"mb-6\"\n              data-testid=\"button-back-to-legal\"\n            >\n              <ArrowLeft className=\"mr-2 h-4 w-4\" />\n              Back to Legal & Support\n            </Button>\n            \n            <div className=\"text-center mb-12\">\n              <div className=\"inline-flex items-center justify-center w-16 h-16 bg-primary/10 rounded-full mb-6\">\n                <Scale className=\"h-8 w-8 text-primary\" />\n              </div>\n              <h1 className=\"text-3xl lg:text-5xl font-bold text-foreground mb-6\">\n                Terms & Conditions\n              </h1>\n              <p className=\"text-xl text-muted-foreground\">\n                Last updated: September 17, 2025\n              </p>\n              <p className=\"text-lg text-muted-foreground mt-4 max-w-2xl mx-auto\">\n                Please read these Terms and Conditions carefully before using BookingGen's services. \n                These terms govern your use of our platform and services.\n              </p>\n            </div>\n\n            {/* Important Notice */}\n            <Card className=\"mb-8 border-orange-200 bg-orange-50 dark:border-orange-800 dark:bg-orange-950/20\">\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-start gap-3\">\n                  <AlertTriangle className=\"h-5 w-5 text-orange-600 mt-1 flex-shrink-0\" />\n                  <div>\n                    <h3 className=\"font-semibold text-orange-900 dark:text-orange-100 mb-2\">\n                      Important Legal Agreement\n                    </h3>\n                    <p className=\"text-orange-800 dark:text-orange-200 text-sm\">\n                      By using BookingGen, you agree to these legally binding terms. If you don't agree \n                      with any part of these terms, please don't use our services. Contact us at \n                      team@bookinggen.xyz if you have questions.\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </section>\n\n      {/* Terms Content */}\n      <section className=\"py-16\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto space-y-8\">\n            {sections.map((section, index) => (\n              <Card key={index} className=\"p-6\">\n                <CardHeader className=\"p-0 mb-4\">\n                  <CardTitle className=\"flex items-center gap-3 text-xl\">\n                    <div className=\"inline-flex items-center justify-center w-8 h-8 bg-primary/10 rounded-lg\">\n                      <FileText className=\"h-4 w-4 text-primary\" />\n                    </div>\n                    {section.title}\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"p-0\">\n                  <div className=\"space-y-3\">\n                    {section.content.map((paragraph, pIndex) => (\n                      <p \n                        key={pIndex} \n                        className=\"text-muted-foreground leading-relaxed\"\n                        data-testid={`text-section-${index}-paragraph-${pIndex}`}\n                      >\n                        {paragraph}\n                      </p>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n\n          {/* Contact Section */}\n          <div className=\"max-w-4xl mx-auto mt-12\">\n            <Card className=\"bg-muted/30 border-primary/20\">\n              <CardContent className=\"p-8 text-center\">\n                <Shield className=\"h-12 w-12 text-primary mx-auto mb-4\" />\n                <h3 className=\"text-xl font-semibold mb-4\">Questions About These Terms?</h3>\n                <p className=\"text-muted-foreground mb-6\">\n                  If you have any questions about these Terms and Conditions, please don't hesitate to contact us.\n                </p>\n                <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n                  <Button \n                    onClick={() => setLocation('/contact')}\n                    data-testid=\"button-contact-us\"\n                  >\n                    Contact Us\n                  </Button>\n                  <Button \n                    variant=\"outline\"\n                    onClick={() => setLocation('/legal')}\n                    data-testid=\"button-legal-center\"\n                  >\n                    Legal Center\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </section>\n\n      <Footer />\n    </div>\n  );\n}","size_bytes":11843},"client/src/components/modals/trial-activation-modal.tsx":{"content":"import { useState } from 'react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Check, Sparkles, Clock, Shield } from 'lucide-react';\nimport { useAuth } from '@/hooks/use-auth';\nimport { useToast } from '@/hooks/use-toast';\nimport { queryClient, apiRequest } from '@/lib/queryClient';\nimport { useCurrency } from '@/hooks/use-currency';\n\ninterface TrialActivationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport default function TrialActivationModal({ isOpen, onClose }: TrialActivationModalProps) {\n  const { user, profile } = useAuth();\n  const { toast } = useToast();\n  const { formatPrice } = useCurrency();\n  const [isActivating, setIsActivating] = useState(false);\n\n  const handleActivateTrial = async () => {\n    try {\n      setIsActivating(true);\n      \n      const response = await apiRequest('POST', '/api/trial/activate', {});\n      \n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || 'Failed to activate trial');\n      }\n\n      const result = await response.json();\n      \n      queryClient.invalidateQueries({ queryKey: ['/api/profile'] });\n      \n      toast({\n        title: \"Free Trial Activated! 🎉\",\n        description: \"Your 7-day free trial has started. Enjoy all Pro features!\",\n      });\n      \n      onClose();\n    } catch (error) {\n      console.error('Trial activation error:', error);\n      toast({\n        title: \"Trial activation failed\",\n        description: error instanceof Error ? error.message : \"There was an error activating your trial. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsActivating(false);\n    }\n  };\n\n  if (!profile || (profile as any).trialStatus !== 'available') {\n    return null;\n  }\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"glass-prism-card backdrop-blur-xl bg-gradient-to-br from-white/95 via-purple-50/80 to-white/90 dark:from-gray-900/95 dark:via-purple-950/80 dark:to-gray-900/90 border border-white/30 dark:border-white/20 shadow-2xl max-w-lg sm:max-w-xl md:max-w-2xl mx-auto rounded-3xl overflow-hidden max-h-[90vh] overflow-y-auto\" data-testid=\"modal-trial-activation\">\n        <div className=\"relative\">\n          {/* Glass prism background decorations */}\n          <div className=\"absolute top-0 right-0 w-40 h-40 glass-prism bg-gradient-to-br from-white/20 via-purple-50/30 to-white/15 rounded-full -translate-y-20 translate-x-20 blur-2xl animate-pulse\"></div>\n          <div className=\"absolute bottom-0 left-0 w-32 h-32 glass-prism bg-gradient-to-br from-purple-50/25 via-white/20 to-purple-50/15 rounded-full translate-y-16 -translate-x-16 blur-2xl animate-pulse\" style={{animationDelay: '1s'}}></div>\n          \n          <div className=\"relative z-10 p-4 sm:p-6 md:p-8\">\n            <DialogHeader className=\"text-center mb-4 sm:mb-6 md:mb-8\">\n              <div className=\"flex justify-center mb-4\">\n                <div className=\"w-16 h-16 glass-prism rounded-full flex items-center justify-center mx-auto group animate-fade-in-up backdrop-blur-md bg-gradient-to-br from-white/60 via-purple-50/40 to-white/50 border border-white/30\">\n                  <Sparkles className=\"h-8 w-8 text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform duration-300\" />\n                </div>\n              </div>\n              <DialogTitle className=\"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-purple-900 to-purple-700 dark:from-purple-100 dark:to-white bg-clip-text text-transparent\">\n                Start Your 7-Day Free Trial\n              </DialogTitle>\n              <DialogDescription className=\"text-gray-600 dark:text-gray-300 mt-2\">\n                No credit card required - Start instantly!\n              </DialogDescription>\n            </DialogHeader>\n        \n            <div className=\"space-y-4 sm:space-y-6 md:space-y-8\">\n              {/* Trial Info Card */}\n              <div className=\"glass-prism-card backdrop-blur-md bg-gradient-to-br from-white/90 via-purple-50/70 to-white/80 dark:from-gray-900/90 dark:via-purple-950/70 dark:to-gray-900/80 border border-white/30 dark:border-white/20 rounded-2xl p-4 sm:p-6 md:p-8 relative overflow-hidden shadow-xl\">\n                <Badge className=\"absolute top-4 right-4 sm:top-6 sm:right-6 glass-prism-button backdrop-blur-md bg-gradient-to-r from-purple-100 via-purple-200 to-purple-300 dark:from-purple-800 dark:via-purple-700 dark:to-purple-600 text-purple-800 dark:text-purple-100 shadow-lg animate-pulse border border-white/30 px-3 py-1 sm:px-4 sm:py-2 font-semibold text-xs sm:text-sm\">\n                  100% FREE\n                </Badge>\n                \n                <div className=\"flex items-center mb-6\">\n                  <div className=\"w-12 h-12 glass-prism rounded-xl flex items-center justify-center mr-4 backdrop-blur-md bg-gradient-to-br from-white/50 via-purple-50/40 to-white/40 border border-white/30\">\n                    <Sparkles className=\"h-6 w-6 text-purple-600 dark:text-purple-400\" />\n                  </div>\n                  <div>\n                    <h3 className=\"text-2xl font-bold bg-gradient-to-r from-purple-900 to-purple-700 dark:from-purple-100 dark:to-white bg-clip-text text-transparent\">7-Day Free Trial</h3>\n                    <p className=\"text-gray-600 dark:text-gray-300\">No credit card required</p>\n                  </div>\n                </div>\n                \n                {/* How it works */}\n                <div className=\"mb-6 space-y-3\">\n                  <div className=\"flex items-start\">\n                    <div className=\"w-8 h-8 glass-prism rounded-lg flex items-center justify-center mr-3 flex-shrink-0 backdrop-blur-md bg-gradient-to-br from-white/60 via-purple-50/50 to-white/40 border border-white/30\">\n                      <Shield className=\"h-4 w-4 text-purple-600 dark:text-purple-400\" />\n                    </div>\n                    <div>\n                      <p className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\">No payment required</p>\n                      <p className=\"text-xs text-gray-600 dark:text-gray-400\">Start your trial instantly without entering any payment information</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-start\">\n                    <div className=\"w-8 h-8 glass-prism rounded-lg flex items-center justify-center mr-3 flex-shrink-0 backdrop-blur-md bg-gradient-to-br from-white/60 via-purple-50/50 to-white/40 border border-white/30\">\n                      <Clock className=\"h-4 w-4 text-purple-600 dark:text-purple-400\" />\n                    </div>\n                    <div>\n                      <p className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\">Full access for 7 days</p>\n                      <p className=\"text-xs text-gray-600 dark:text-gray-400\">Experience all Pro features with no limitations during your trial</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-start\">\n                    <div className=\"w-8 h-8 glass-prism rounded-lg flex items-center justify-center mr-3 flex-shrink-0 backdrop-blur-md bg-gradient-to-br from-white/60 via-purple-50/50 to-white/40 border border-white/30\">\n                      <Check className=\"h-4 w-4 text-purple-600 dark:text-purple-400\" />\n                    </div>\n                    <div>\n                      <p className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\">No automatic billing</p>\n                      <p className=\"text-xs text-gray-600 dark:text-gray-400\">After 7 days, you can choose to upgrade to Pro for {formatPrice(14.99)}/month</p>\n                    </div>\n                  </div>\n                </div>\n                \n                {/* Features included */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                  {[\n                    \"Unlimited booking pages\",\n                    \"Custom branding\",\n                    \"Analytics dashboard\",\n                    \"Priority support\",\n                    \"Full customization\",\n                    \"Mobile optimized\",\n                    \"No usage limits\"\n                  ].map((feature) => (\n                    <div key={feature} className=\"flex items-center\">\n                      <div className=\"w-5 h-5 glass-prism rounded-full flex items-center justify-center mr-3 backdrop-blur-md bg-gradient-to-br from-white/60 via-purple-50/50 to-white/40 border border-white/30\">\n                        <Check className=\"h-3 w-3 text-purple-600 dark:text-purple-400\" />\n                      </div>\n                      <span className=\"text-sm text-gray-700 dark:text-gray-300 font-medium\">{feature}</span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              {/* Action Buttons */}\n              <div className=\"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4\">\n                <Button\n                  variant=\"ghost\"\n                  onClick={onClose}\n                  disabled={isActivating}\n                  className=\"flex-1 h-12 glass-prism backdrop-blur-md bg-gradient-to-r from-white/40 via-purple-50/30 to-white/30 dark:from-gray-800/40 dark:via-purple-950/30 dark:to-gray-800/30 border border-white/30 hover:bg-white/50 dark:hover:bg-gray-800/50 transition-all duration-300 text-purple-700 dark:text-purple-300 font-medium\"\n                  data-testid=\"button-cancel-trial\"\n                >\n                  Maybe Later\n                </Button>\n                <Button\n                  type=\"button\"\n                  size=\"lg\"\n                  onClick={handleActivateTrial}\n                  disabled={isActivating}\n                  className=\"flex-1 h-12 glass-prism-button backdrop-blur-lg bg-gradient-to-r from-purple-100 via-purple-200 to-purple-300 dark:from-purple-800 dark:via-purple-700 dark:to-purple-600 hover:from-purple-200 hover:via-purple-300 hover:to-purple-400 dark:hover:from-purple-700 dark:hover:via-purple-600 dark:hover:to-purple-500 text-purple-800 dark:text-purple-100 shadow-lg hover:scale-105 transition-all duration-300 border border-white/30 font-semibold disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100\"\n                  data-testid=\"button-activate-trial\"\n                >\n                  <Sparkles className=\"h-4 w-4 mr-2\" />\n                  {isActivating ? 'Activating...' : 'Start Free Trial Now'}\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":10826},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport express from 'express';\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\n// Removed PostgreSQL schema imports - using Supabase directly\nimport crypto from \"crypto\";\nimport { createClient } from '@supabase/supabase-js';\nimport { createRazorpayOrder, verifyRazorpayPayment, createRazorpaySubscription, handleRazorpayWebhook, getRazorpaySubscription } from \"./razorpay\";\nimport multer from 'multer';\nimport { Resend } from 'resend';\nimport { insertReviewSchema, insertPageSchema, insertDemoPageSchema, insertServiceSchema } from '@shared/schema';\nimport { generateEmailTemplate, generateBusinessNotificationTemplate, type EmailTemplateData } from './email-templates';\n\n// Supabase setup\nconst supabaseUrl = process.env.SUPABASE_URL;\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n\nlet supabase: any = null;\nif (supabaseUrl && supabaseServiceKey) {\n  try {\n    // Validate URL format before creating client\n    new URL(supabaseUrl); // This will throw if URL is invalid\n    supabase = createClient(supabaseUrl, supabaseServiceKey);\n    console.log(\"Supabase client initialized successfully\");\n    console.log(\"Routes Supabase URL:\", supabaseUrl);\n  } catch (error) {\n    console.warn(\"Failed to initialize Supabase client:\", error instanceof Error ? error.message : error);\n    console.warn(\"Application will continue without Supabase authentication\");\n  }\n} else {\n  console.warn(\"Supabase credentials not found. Application will continue without Supabase authentication\");\n}\n\n\n// Resend setup for email notifications\nlet resend: Resend | null = null;\nif (process.env.RESEND_API_KEY) {\n  resend = new Resend(process.env.RESEND_API_KEY);\n  console.log(\"Resend email service initialized successfully\");\n} else {\n  console.warn(\"RESEND_API_KEY not found. Email notifications will be disabled\");\n}\n\n// Email notification functions with beautiful templates\nasync function sendAppointmentEmail(\n  appointmentId: string,\n  emailType: 'confirmation' | 'approved' | 'rejected' | 'rescheduled',\n  additionalData?: { note?: string; originalDate?: string; originalTime?: string }\n) {\n  if (!resend) {\n    console.warn(\"Email service not available - skipping email notification\");\n    return;\n  }\n\n  try {\n    // Fetch appointment details\n    const appointment = await storage.getAppointmentById(appointmentId);\n    if (!appointment) {\n      console.error(\"Appointment not found:\", appointmentId);\n      return;\n    }\n\n    // Fetch page and service details\n    const page = await storage.getPage(appointment.pageId);\n    const service = appointment.serviceId ? await storage.getServiceById(appointment.serviceId) : null;\n\n    if (!page) {\n      console.error(\"Page not found for appointment:\", appointmentId);\n      return;\n    }\n\n    // Determine status for email template\n    let status: 'pending' | 'accepted' | 'declined' | 'rescheduled' = 'pending';\n    let subject = '';\n    \n    switch (emailType) {\n      case 'confirmation':\n        status = 'pending';\n        subject = `Appointment Request Received - ${page.title}`;\n        break;\n      case 'approved':\n        status = 'accepted';\n        subject = `Appointment Confirmed - ${page.title}`;\n        break;\n      case 'rejected':\n        status = 'declined';\n        subject = `Appointment Update - ${page.title}`;\n        break;\n      case 'rescheduled':\n        status = 'rescheduled';\n        subject = `Appointment Rescheduled - ${page.title}`;\n        break;\n    }\n\n    // Use bookinggen.xyz as the base URL for all email links\n    const baseUrl = 'https://www.bookinggen.xyz';\n\n    // Prepare email template data\n    const emailData: EmailTemplateData = {\n      businessName: page.title,\n      customerName: appointment.customerName,\n      serviceName: service?.name || 'Service',\n      date: appointment.date,\n      time: appointment.time,\n      status,\n      appointmentId: appointment.id,\n      contactEmail: page.contactEmail || undefined,\n      contactPhone: page.contactPhone || undefined,\n      note: additionalData?.note,\n      originalDate: additionalData?.originalDate,\n      originalTime: additionalData?.originalTime,\n      baseUrl,\n    };\n\n    const htmlContent = generateEmailTemplate(emailData);\n\n    await resend.emails.send({\n      from: 'team@bookinggen.xyz',\n      to: appointment.customerEmail,\n      subject,\n      html: htmlContent,\n    });\n\n    console.log(`${emailType} email sent to ${appointment.customerEmail}`);\n  } catch (error) {\n    console.error(`Failed to send ${emailType} email:`, error);\n  }\n}\n\n// Send notification to business owner about new appointment\nasync function sendOwnerNotification(appointmentId: string) {\n  if (!resend) {\n    console.warn(\"Email service not available - skipping email notification\");\n    return;\n  }\n\n  try {\n    const appointment = await storage.getAppointmentById(appointmentId);\n    if (!appointment) {\n      console.error(\"Appointment not found:\", appointmentId);\n      return;\n    }\n\n    const page = await storage.getPage(appointment.pageId);\n    const service = appointment.serviceId ? await storage.getServiceById(appointment.serviceId) : null;\n\n    if (!page) {\n      console.error(\"Page not found for appointment:\", appointmentId);\n      return;\n    }\n\n    // Get owner profile to get their email\n    const owner = await storage.getProfile(page.ownerId);\n    if (!owner || !owner.email) {\n      console.warn(\"Owner email not found for appointment:\", appointmentId);\n      return;\n    }\n\n    // Use bookinggen.xyz as the base URL\n    const baseUrl = 'https://www.bookinggen.xyz';\n\n    // Use the new business notification template\n    const emailData: EmailTemplateData = {\n      businessName: page.title,\n      customerName: appointment.customerName,\n      serviceName: service?.name || 'Service',\n      date: appointment.date,\n      time: appointment.time,\n      status: 'pending',\n      appointmentId: appointment.id,\n      contactEmail: appointment.customerEmail || undefined,\n      contactPhone: appointment.customerPhone || undefined,\n      baseUrl,\n    };\n\n    const htmlContent = generateBusinessNotificationTemplate(emailData);\n\n    await resend.emails.send({\n      from: 'team@bookinggen.xyz',\n      to: owner.email,\n      subject: `New Appointment Request - ${page.title}`,\n      html: htmlContent,\n    });\n\n    console.log(`Owner notification sent to ${owner.email}`);\n  } catch (error) {\n    console.error(\"Failed to send owner notification:\", error);\n  }\n}\n\n// Send notification to business owner about rescheduled appointment\nasync function sendOwnerRescheduleNotification(\n  appointmentId: string, \n  originalDate: string, \n  originalTime: string\n) {\n  if (!resend) {\n    console.warn(\"Email service not available - skipping email notification\");\n    return;\n  }\n\n  try {\n    const appointment = await storage.getAppointmentById(appointmentId);\n    if (!appointment) {\n      console.error(\"Appointment not found:\", appointmentId);\n      return;\n    }\n\n    const page = await storage.getPage(appointment.pageId);\n    const service = appointment.serviceId ? await storage.getServiceById(appointment.serviceId) : null;\n\n    if (!page) {\n      console.error(\"Page not found for appointment:\", appointmentId);\n      return;\n    }\n\n    const owner = await storage.getProfile(page.ownerId);\n    if (!owner || !owner.email) {\n      console.warn(\"Owner email not found for appointment:\", appointmentId);\n      return;\n    }\n\n    // Use bookinggen.xyz as the base URL\n    const baseUrl = 'https://www.bookinggen.xyz';\n\n    // Use the new business notification template for rescheduled appointments\n    const emailData: EmailTemplateData = {\n      businessName: page.title,\n      customerName: appointment.customerName,\n      serviceName: service?.name || 'Service',\n      date: appointment.date,\n      time: appointment.time,\n      status: 'rescheduled',\n      appointmentId: appointment.id,\n      contactEmail: appointment.customerEmail || undefined,\n      contactPhone: appointment.customerPhone || undefined,\n      originalDate,\n      originalTime,\n      baseUrl,\n    };\n\n    const htmlContent = generateBusinessNotificationTemplate(emailData);\n\n    await resend.emails.send({\n      from: 'team@bookinggen.xyz',\n      to: owner.email,\n      subject: `Appointment Rescheduled - ${page.title}`,\n      html: htmlContent,\n    });\n\n    console.log(`Owner reschedule notification sent to ${owner.email}`);\n  } catch (error) {\n    console.error(\"Failed to send owner reschedule notification:\", error);\n  }\n}\n\n// Middleware to verify Supabase JWT\nasync function verifyToken(req: any, res: any, next: any) {\n  const authHeader = req.headers.authorization;\n  \n  if (!supabase) {\n    console.error(\"Supabase not configured\");\n    return res.status(503).json({ message: \"Authentication service unavailable\" });\n  }\n\n  if (!authHeader) {\n    return res.status(401).json({ message: \"No token provided\" });\n  }\n\n  const token = authHeader.split(\" \")[1];\n  try {\n    const { data: { user }, error } = await supabase.auth.getUser(token);\n    if (error || !user) {\n      return res.status(401).json({ message: \"Invalid token\" });\n    }\n    \n    req.user = { userId: user.id, email: user.email };\n    next();\n  } catch (error) {\n    return res.status(401).json({ message: \"Invalid token\" });\n  }\n}\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // File upload route using multer for handling file uploads\n  const upload = multer({ \n    storage: multer.memoryStorage(),\n    limits: { fileSize: 5 * 1024 * 1024 }, // 5MB limit\n    fileFilter: (req: any, file: any, cb: any) => {\n      if (file.mimetype.startsWith('image/')) {\n        cb(null, true);\n      } else {\n        cb(new Error('Only image files are allowed'), false);\n      }\n    }\n  });\n\n  app.post(\"/api/storage/upload\", verifyToken, upload.single('file'), async (req: any, res) => {\n    try {\n      if (!req.file) {\n        return res.status(400).json({ message: \"No file provided\" });\n      }\n\n      if (!supabase) {\n        return res.status(503).json({ message: \"Storage service unavailable\" });\n      }\n\n      const bucket = req.body.bucket || 'logos';\n      const folder = req.body.folder || '';\n      \n      // Security: Only allow specific buckets\n      const allowedBuckets = ['logos', 'gallery-banners', 'gallery-logos', 'gallery-images', 'service-images', 'staff-images'];\n      if (!allowedBuckets.includes(bucket)) {\n        return res.status(400).json({ message: \"Invalid bucket name\" });\n      }\n\n      // Generate unique filename\n      const fileExt = req.file.originalname.split('.').pop();\n      const fileName = `${Date.now()}-${Math.random().toString(36).substring(2)}.${fileExt}`;\n      const filePath = folder ? `${folder}/${fileName}` : fileName;\n\n      // Upload using service role (bypasses RLS)\n      const { data, error } = await supabase.storage\n        .from(bucket)\n        .upload(filePath, req.file.buffer, {\n          contentType: req.file.mimetype,\n          cacheControl: '3600',\n          upsert: false\n        });\n\n      if (error) {\n        console.error(\"Upload error:\", error);\n        return res.status(500).json({ message: \"Failed to upload file\" });\n      }\n\n      // Get the public URL\n      const { data: { publicUrl } } = supabase.storage\n        .from(bucket)\n        .getPublicUrl(filePath);\n\n      res.json({\n        success: true,\n        url: publicUrl,\n        path: filePath\n      });\n\n    } catch (error) {\n      console.error(\"File upload error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  // Storage bucket management route\n  app.post(\"/api/storage/ensure-bucket\", verifyToken, async (req: any, res) => {\n    try {\n      const { bucketName } = req.body;\n      \n      // Security: Only allow specific bucket names\n      const allowedBuckets = ['logos', 'gallery-banners', 'gallery-logos', 'gallery-images', 'service-images', 'staff-images'];\n      if (!bucketName || !allowedBuckets.includes(bucketName)) {\n        return res.status(400).json({ message: \"Invalid bucket name\" });\n      }\n\n      if (!supabase) {\n        return res.status(503).json({ message: \"Storage service unavailable\" });\n      }\n\n      // Check if bucket exists\n      const { data: buckets, error: listError } = await supabase.storage.listBuckets();\n      \n      if (!listError && buckets) {\n        const bucketExists = buckets.some((b: any) => b.name === bucketName);\n        if (bucketExists) {\n          return res.json({ success: true, message: \"Bucket already exists\" });\n        }\n      }\n\n      // Create bucket if it doesn't exist\n      const { data, error } = await supabase.storage.createBucket(bucketName, {\n        public: true,\n        allowedMimeTypes: ['image/*'],\n        fileSizeLimit: 5 * 1024 * 1024 // 5MB in bytes\n      });\n\n      if (error) {\n        // Handle \"bucket already exists\" gracefully\n        if (error.message?.includes('already exists')) {\n          return res.json({ success: true, message: \"Bucket already exists\" });\n        }\n        console.error(\"Failed to create bucket:\", error);\n        return res.status(500).json({ message: \"Failed to create storage bucket\" });\n      }\n\n      console.log(\"Storage bucket created successfully:\", bucketName);\n      res.json({ success: true, message: \"Bucket created successfully\" });\n    } catch (error) {\n      console.error(\"Storage bucket error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  // Profile routes\n  app.post(\"/api/profile\", verifyToken, async (req: any, res) => {\n    try {\n      const { fullName } = req.body;\n      // Use authenticated user ID, not client-provided userId for security\n      const userId = req.user.userId;\n      \n      // Check if profile already exists\n      const existingProfile = await storage.getProfile(userId);\n      if (existingProfile) {\n        return res.json(existingProfile);\n      }\n\n      // Create new profile\n      const profileData = { id: userId, fullName };\n      const profile = await storage.createProfile(profileData);\n      \n      res.json(profile);\n    } catch (error) {\n      console.error(\"Create profile error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  app.get(\"/api/profile\", verifyToken, async (req: any, res) => {\n    try {\n      // Only allow users to access their own profile - ignore userId query parameter\n      let profile = await storage.getProfile(req.user.userId);\n      \n      // If no profile exists, create a default one automatically\n      if (!profile) {\n        console.log(`Creating default profile for user: ${req.user.userId}`);\n        const profileData = { \n          id: req.user.userId, \n          fullName: req.user.email || '' // Use email as fallback if no name\n        };\n        profile = await storage.createProfile(profileData);\n        console.log(`Profile created successfully for user: ${req.user.userId}`);\n      }\n      \n      res.json(profile);\n    } catch (error) {\n      console.error(\"Get profile error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  app.patch(\"/api/profile\", verifyToken, async (req: any, res) => {\n    try {\n      const { fullName, timezone } = req.body;\n      \n      const updates: any = {};\n      if (fullName !== undefined) updates.fullName = fullName;\n      // Add other fields as needed\n      \n      const updatedProfile = await storage.updateProfile(req.user.userId, updates);\n      if (!updatedProfile) {\n        return res.status(404).json({ message: \"Profile not found\" });\n      }\n      \n      res.json(updatedProfile);\n    } catch (error) {\n      console.error(\"Update profile error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  // Pages routes\n  app.post(\"/api/pages\", verifyToken, async (req: any, res) => {\n    try {\n      // Check if user has Pro membership and it hasn't expired\n      const userProfile = await storage.getProfile(req.user.userId);\n      const now = new Date();\n      const membershipExpired = userProfile?.membershipExpires && new Date(userProfile.membershipExpires) <= now;\n      \n      if (!userProfile || userProfile.membershipStatus !== 'pro' || membershipExpired) {\n        return res.status(403).json({ \n          message: \"Active Pro membership required\", \n          details: membershipExpired ? \"Your Pro membership has expired. Please renew to continue creating pages.\" : \"Upgrade to Pro to create booking pages\"\n        });\n      }\n\n      // Extract services from request body and staff from data object before validation\n      const { services, data, ...pageDataFromRequest } = req.body;\n      const staff = data?.staff || [];\n      \n      // Validate page data (without services)\n      const validation = insertPageSchema.safeParse(pageDataFromRequest);\n      if (!validation.success) {\n        return res.status(400).json({ \n          message: \"Validation failed\", \n          errors: validation.error.errors \n        });\n      }\n\n      const pageData = {\n        ...pageDataFromRequest,\n        ownerId: req.user.userId\n      };\n\n      // Check if slug exists\n      const existingPage = await storage.getPageBySlug(pageData.slug);\n      if (existingPage) {\n        return res.status(400).json({ message: \"Slug already exists\" });\n      }\n\n      const page = await storage.createPage(pageData);\n      \n      // Create services if provided\n      if (services && Array.isArray(services)) {\n        for (const service of services) {\n          console.log('Creating service with data:', JSON.stringify(service, null, 2));\n          await storage.createService({\n            ...service,\n            pageId: page.id\n          });\n        }\n      }\n\n      // Create staff members if provided\n      if (staff && Array.isArray(staff)) {\n        for (const staffMember of staff) {\n          await storage.createStaff({\n            ...staffMember,\n            pageId: page.id\n          });\n        }\n      }\n\n      res.json(page);\n    } catch (error) {\n      console.error(\"Create page error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  app.get(\"/api/pages\", verifyToken, async (req: any, res) => {\n    try {\n      const pages = await storage.getPagesByOwner(req.user.userId);\n      res.json(pages);\n    } catch (error) {\n      console.error(\"Get pages error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  // Get page by ID with services and staff (for editing)\n  app.get(\"/api/pages/:id/edit\", verifyToken, async (req: any, res) => {\n    try {\n      const page = await storage.getPage(req.params.id);\n      if (!page || page.ownerId !== req.user.userId) {\n        return res.status(404).json({ message: \"Page not found\" });\n      }\n\n      const services = await storage.getServicesByPageId(page.id);\n      const staff = await storage.getStaffByPageId(page.id);\n      \n      // Include staff in the data object if it exists, otherwise create a new data object\n      const pageData = {\n        ...page,\n        services,\n        data: {\n          ...(page.data || {}),\n          staff\n        }\n      };\n      \n      res.json(pageData);\n    } catch (error) {\n      console.error(\"Get page for edit error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  app.get(\"/api/pages/:slug\", async (req, res) => {\n    try {\n      const page = await storage.getPageBySlug(req.params.slug);\n      if (!page) {\n        return res.status(404).json({ message: \"Page not found\" });\n      }\n\n      const services = await storage.getServicesByPageId(page.id);\n      res.json({ ...page, services });\n    } catch (error) {\n      console.error(\"Get page error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  app.patch(\"/api/pages/:id\", verifyToken, async (req: any, res) => {\n    try {\n      const page = await storage.getPage(req.params.id);\n      if (!page || page.ownerId !== req.user.userId) {\n        return res.status(404).json({ message: \"Page not found\" });\n      }\n\n      // Extract services from request body and staff from data object  \n      const { services, data, ...pageData } = req.body;\n      const staff = data?.staff || [];\n\n      // Update page data\n      const updated = await storage.updatePage(req.params.id, pageData);\n\n      // Handle staff update if provided\n      if (staff && Array.isArray(staff)) {\n        const existingStaff = await storage.getStaffByPageId(req.params.id);\n        const existingStaffIds = existingStaff.map(s => s.id);\n        const submittedStaffIds = staff.filter(s => s.id).map(s => s.id);\n        \n        // Update existing staff and create new ones\n        for (const staffMember of staff) {\n          if (staffMember.id) {\n            // Security check: Only allow updates to staff that belong to this page\n            if (!existingStaffIds.includes(staffMember.id)) {\n              return res.status(400).json({ \n                message: \"Invalid staff ID\", \n                details: \"One or more staff IDs do not belong to this page\" \n              });\n            }\n            // Update existing staff member\n            await storage.updateStaff(staffMember.id, {\n              name: staffMember.name,\n              bio: staffMember.bio,\n              position: staffMember.position,\n              imageUrl: staffMember.imageUrl,\n              email: staffMember.email,\n              phone: staffMember.phone,\n              displayOrder: staffMember.displayOrder,\n              isActive: staffMember.isActive\n            });\n          } else {\n            // Create new staff member\n            await storage.createStaff({\n              ...staffMember,\n              pageId: req.params.id\n            });\n          }\n        }\n        \n        // Handle removed staff\n        const staffToRemove = existingStaffIds.filter(id => !submittedStaffIds.includes(id));\n        for (const staffId of staffToRemove) {\n          await storage.deleteStaff(staffId);\n        }\n      }\n\n      // Handle services update if provided\n      if (services && Array.isArray(services)) {\n        const existingServices = await storage.getServicesByPageId(req.params.id);\n        const existingServiceIds = existingServices.map(s => s.id);\n        const submittedServiceIds = services.filter(s => s.id).map(s => s.id);\n        \n        // Update existing services and create new ones\n        for (const service of services) {\n          if (service.id) {\n            // Security check: Only allow updates to services that belong to this page\n            if (!existingServiceIds.includes(service.id)) {\n              return res.status(400).json({ \n                message: \"Invalid service ID\", \n                details: \"One or more service IDs do not belong to this page\" \n              });\n            }\n            // Update existing service - only allow specific fields to be updated\n            const { id, name, description, durationMinutes, price, imageUrl } = service;\n            console.log('Updating service with imageUrl:', imageUrl);\n            await storage.updateService(id, {\n              name,\n              description, \n              durationMinutes,\n              price,\n              imageUrl\n            });\n          } else {\n            // Create new service\n            await storage.createService({\n              ...service,\n              pageId: req.params.id\n            });\n          }\n        }\n        \n        // Handle removed services\n        const servicesToRemove = existingServiceIds.filter(id => !submittedServiceIds.includes(id));\n        const servicesNotDeleted = [];\n        \n        for (const serviceId of servicesToRemove) {\n          try {\n            await storage.deleteService(serviceId);\n          } catch (error: any) {\n            // If deletion fails due to foreign key constraint (appointments exist),\n            // we'll skip the deletion but track it\n            if (error.code === '23503') {\n              const service = existingServices.find(s => s.id === serviceId);\n              servicesNotDeleted.push({\n                id: serviceId,\n                name: service?.name || 'Unknown Service',\n                reason: 'Service has existing appointments and cannot be deleted'\n              });\n              console.warn(`Cannot delete service ${serviceId} - it has associated appointments`);\n            } else {\n              throw error;\n            }\n          }\n        }\n        \n        // Include information about services that couldn't be deleted in the response\n        const response = { ...updated };\n        if (servicesNotDeleted.length > 0) {\n          response.warnings = {\n            servicesNotDeleted,\n            message: `${servicesNotDeleted.length} service(s) could not be deleted because they have existing appointments`\n          };\n        }\n        \n        res.json(response);\n      } else {\n        res.json(updated);\n      }\n    } catch (error) {\n      console.error(\"Update page error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  app.delete(\"/api/pages/:id\", verifyToken, async (req: any, res) => {\n    try {\n      const page = await storage.getPage(req.params.id);\n      if (!page || page.ownerId !== req.user.userId) {\n        return res.status(404).json({ message: \"Page not found\" });\n      }\n\n      await storage.deletePage(req.params.id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Delete page error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  // Staff routes\n  app.get(\"/api/pages/:pageId/staff\", async (req, res) => {\n    try {\n      const staff = await storage.getStaffByPageId(req.params.pageId);\n      res.json(staff);\n    } catch (error) {\n      console.error(\"Get staff error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  app.post(\"/api/pages/:pageId/staff\", verifyToken, async (req: any, res) => {\n    try {\n      const page = await storage.getPage(req.params.pageId);\n      if (!page || page.ownerId !== req.user.userId) {\n        return res.status(404).json({ message: \"Page not found\" });\n      }\n\n      const staff = await storage.createStaff({\n        ...req.body,\n        pageId: req.params.pageId\n      });\n      res.status(201).json(staff);\n    } catch (error) {\n      console.error(\"Create staff error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  app.put(\"/api/staff/:id\", verifyToken, async (req: any, res) => {\n    try {\n      // First get the staff member to verify ownership\n      const staff = await storage.getStaffById(req.params.id);\n      if (!staff) {\n        return res.status(404).json({ message: \"Staff member not found\" });\n      }\n\n      // Verify the user owns the page this staff member belongs to\n      const page = await storage.getPage(staff.pageId);\n      if (!page || page.ownerId !== req.user.userId) {\n        return res.status(403).json({ message: \"Not authorized to update this staff member\" });\n      }\n\n      const updated = await storage.updateStaff(req.params.id, req.body);\n      res.json(updated);\n    } catch (error) {\n      console.error(\"Update staff error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  app.delete(\"/api/staff/:id\", verifyToken, async (req: any, res) => {\n    try {\n      // First get the staff member to verify ownership\n      const staff = await storage.getStaffById(req.params.id);\n      if (!staff) {\n        return res.status(404).json({ message: \"Staff member not found\" });\n      }\n\n      // Verify the user owns the page this staff member belongs to\n      const page = await storage.getPage(staff.pageId);\n      if (!page || page.ownerId !== req.user.userId) {\n        return res.status(403).json({ message: \"Not authorized to delete this staff member\" });\n      }\n\n      await storage.deleteStaff(req.params.id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Delete staff error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  // Notes routes\n  app.get(\"/api/notes\", verifyToken, async (req: any, res) => {\n    try {\n      const notes = await storage.getNotesByUser(req.user.userId);\n      res.json(notes);\n    } catch (error) {\n      console.error(\"Get notes error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  app.post(\"/api/notes\", verifyToken, async (req: any, res) => {\n    try {\n      const note = await storage.createNote({\n        userId: req.user.userId,\n        title: req.body.title,\n        content: req.body.content,\n        category: req.body.category,\n        tags: req.body.tags,\n        color: req.body.color,\n        isPinned: req.body.isPinned,\n        isArchived: req.body.isArchived\n      });\n      res.status(201).json(note);\n    } catch (error) {\n      console.error(\"Create note error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  app.patch(\"/api/notes/:id\", verifyToken, async (req: any, res) => {\n    try {\n      const note = await storage.getNoteById(req.params.id);\n      if (!note) {\n        return res.status(404).json({ message: \"Note not found\" });\n      }\n\n      if (note.userId !== req.user.userId) {\n        return res.status(403).json({ message: \"Not authorized to update this note\" });\n      }\n\n      const updated = await storage.updateNote(req.params.id, req.body);\n      res.json(updated);\n    } catch (error) {\n      console.error(\"Update note error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  app.delete(\"/api/notes/:id\", verifyToken, async (req: any, res) => {\n    try {\n      const note = await storage.getNoteById(req.params.id);\n      if (!note) {\n        return res.status(404).json({ message: \"Note not found\" });\n      }\n\n      if (note.userId !== req.user.userId) {\n        return res.status(403).json({ message: \"Not authorized to delete this note\" });\n      }\n\n      await storage.deleteNote(req.params.id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Delete note error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  // Demo routes\n  app.post(\"/api/demo\", async (req, res) => {\n    try {\n      // Validate demo data structure\n      const { data: demoData, createDemoUser: shouldCreateDemoUser, email, fullName } = req.body;\n      const validationResult = insertDemoPageSchema.safeParse({ data: demoData });\n      \n      if (!validationResult.success) {\n        return res.status(400).json({ \n          message: \"Invalid demo data\", \n          errors: validationResult.error.flatten().fieldErrors \n        });\n      }\n      \n      let demoUserId = null;\n      let demoUser = null;\n      \n      // Create demo user if requested (for Save Demo functionality)\n      if (shouldCreateDemoUser && email) {\n        try {\n          demoUser = await storage.createDemoUser(email, fullName);\n          demoUserId = demoUser.id;\n        } catch (error) {\n          console.error(\"Failed to create demo user:\", error);\n          return res.status(500).json({ message: \"Failed to create demo user account\" });\n        }\n      }\n      \n      const demo = await storage.createDemoPage(demoData, demoUserId);\n      \n      // Return demo with convert token and user info if created\n      const response: any = {\n        id: demo.id,\n        convertToken: demo.convertToken,\n        expiresAt: demo.expiresAt\n      };\n      \n      if (demoUser) {\n        response.demoUser = {\n          id: demoUser.id,\n          email: email,\n          fullName: demoUser.fullName,\n          membershipStatus: demoUser.membershipStatus,\n          magicLink: demoUser.magicLink\n        };\n      }\n      \n      res.status(201).json(response);\n    } catch (error) {\n      console.error(\"Create demo error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  app.get(\"/api/demo/:id\", async (req, res) => {\n    try {\n      const demo = await storage.getDemoPage(req.params.id);\n      \n      if (!demo) {\n        return res.status(404).json({ message: \"Demo not found\" });\n      }\n      \n      // Check if demo has expired\n      if (new Date(demo.expiresAt) < new Date()) {\n        return res.status(410).json({ message: \"Demo has expired\" });\n      }\n      \n      // Don't expose the convert token in public API\n      const { convertToken, ...publicDemo } = demo;\n      res.json(publicDemo);\n    } catch (error) {\n      console.error(\"Get demo error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  app.post(\"/api/demo/convert\", verifyToken, async (req: any, res) => {\n    try {\n      const { demoId, convertToken } = req.body;\n      \n      if (!demoId || !convertToken) {\n        return res.status(400).json({ message: \"Demo ID and convert token are required\" });\n      }\n      \n      // Check user's membership status first\n      const profile = await storage.getProfile(req.user.userId);\n      \n      if (!profile) {\n        return res.status(404).json({ message: \"User profile not found\" });\n      }\n      \n      // Check if user has Pro subscription and it hasn't expired\n      if (profile.membershipStatus !== 'pro') {\n        return res.status(403).json({ \n          message: \"Upgrade Required\", \n          details: \"You need a Pro subscription to convert demo pages\" \n        });\n      }\n      \n      // Check if Pro membership has expired\n      if (profile.membershipExpires && new Date(profile.membershipExpires) < new Date()) {\n        return res.status(403).json({ \n          message: \"Subscription Expired\", \n          details: \"Your Pro subscription has expired. Please renew to convert demo pages\" \n        });\n      }\n      \n      // Atomically validate and invalidate the demo (prevents race conditions)\n      const demoData = await storage.atomicConvertDemo(demoId, convertToken);\n      \n      if (!demoData) {\n        // Could be: demo not found, wrong token, already used, or expired\n        // Check which specific case for better error message\n        const demo = await storage.getDemoPage(demoId);\n        if (!demo) {\n          return res.status(404).json({ message: \"Demo not found\" });\n        }\n        if (!demo.convertToken) {\n          return res.status(410).json({ message: \"Demo has already been converted\" });\n        }\n        if (new Date(demo.expiresAt) < new Date()) {\n          return res.status(410).json({ message: \"Demo has expired\" });\n        }\n        // Must be wrong token\n        return res.status(403).json({ message: \"Invalid convert token\" });\n      }\n      \n      // Generate a unique slug for the page\n      const baseSlug = demoData.data.businessName ? demoData.data.businessName.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-+|-+$/g, '') : 'booking-page';\n      let slug = baseSlug;\n      let counter = 1;\n      \n      // Check for slug uniqueness using storage abstraction\n      while (true) {\n        const existingPage = await storage.getPageBySlug(slug);\n        if (!existingPage) break;\n        slug = `${baseSlug}-${counter}`;\n        counter++;\n      }\n      \n      // Upload logo if it exists as base64\n      let logoUrl = null;\n      if (demoData.data.logoBase64 && demoData.data.logoBase64.startsWith('data:')) {\n        try {\n          // Extract base64 data and mime type\n          const matches = demoData.data.logoBase64.match(/^data:(.+);base64,(.+)$/);\n          if (matches && supabase) {\n            const mimeType = matches[1];\n            const base64Data = matches[2];\n            const buffer = Buffer.from(base64Data, 'base64');\n            \n            // Generate unique filename\n            const fileExt = mimeType.split('/')[1] || 'jpg';\n            const fileName = `${Date.now()}-${Math.random().toString(36).substring(2)}.${fileExt}`;\n            const filePath = `logos/${fileName}`;\n            \n            // Upload to logos bucket\n            const { data: uploadData, error: uploadError } = await supabase.storage\n              .from('logos')\n              .upload(filePath, buffer, {\n                contentType: mimeType,\n                cacheControl: '3600',\n                upsert: false\n              });\n            \n            if (!uploadError && uploadData) {\n              const { data: { publicUrl } } = supabase.storage\n                .from('logos')\n                .getPublicUrl(filePath);\n              logoUrl = publicUrl;\n            }\n          }\n        } catch (error) {\n          console.error('Error uploading logo:', error);\n        }\n      }\n      \n      // Create the real page from demo data using storage abstraction\n      const pageData = {\n        ownerId: req.user.userId,\n        title: demoData.data.businessName || 'My Booking Page',\n        slug: slug,\n        tagline: demoData.data.tagline || null,\n        logoUrl: logoUrl,\n        primaryColor: demoData.data.primaryColor || '#2563eb',\n        theme: demoData.data.theme || 'Ocean Blue',\n        backgroundType: demoData.data.backgroundType || 'gradient',\n        backgroundValue: demoData.data.backgroundValue || 'blue',\n        fontFamily: demoData.data.fontFamily || 'inter',\n        contactPhone: demoData.data.contactPhone || null,\n        contactEmail: demoData.data.contactEmail || null,\n        businessAddress: demoData.data.businessAddress || null,\n        businessHours: demoData.data.businessHours || {\"monday\":\"9:00-17:00\",\"tuesday\":\"9:00-17:00\",\"wednesday\":\"9:00-17:00\",\"thursday\":\"9:00-17:00\",\"friday\":\"9:00-17:00\",\"saturday\":\"Closed\",\"sunday\":\"Closed\"},\n        data: demoData.data,\n        published: false // Demo conversions start as unpublished\n      };\n      \n      // Validate page data before creation\n      const pageValidation = insertPageSchema.safeParse(pageData);\n      if (!pageValidation.success) {\n        return res.status(400).json({ \n          message: \"Invalid page data from demo\", \n          errors: pageValidation.error.flatten().fieldErrors \n        });\n      }\n      \n      const newPage = await storage.createPage(pageValidation.data);\n      \n      // Create services if they exist in demo data\n      if (demoData.data.services && Array.isArray(demoData.data.services)) {\n        // Ensure service-images bucket exists before uploading\n        if (supabase) {\n          try {\n            const { data: buckets } = await supabase.storage.listBuckets();\n            const bucketExists = buckets?.some((b: any) => b.name === 'service-images');\n            \n            if (!bucketExists) {\n              await supabase.storage.createBucket('service-images', {\n                public: true,\n                allowedMimeTypes: ['image/*'],\n                fileSizeLimit: 5 * 1024 * 1024\n              });\n              console.log('✅ Created service-images bucket');\n            }\n          } catch (bucketError) {\n            console.error('Error ensuring service-images bucket:', bucketError);\n          }\n        }\n        \n        for (const service of demoData.data.services) {\n          let imageUrl = null;\n          \n          // Upload service image if it exists as base64\n          if (service.imageUrl && service.imageUrl.startsWith('data:')) {\n            try {\n              // Extract base64 data and mime type\n              const matches = service.imageUrl.match(/^data:(.+);base64,(.+)$/);\n              if (matches && supabase) {\n                const mimeType = matches[1];\n                const base64Data = matches[2];\n                const buffer = Buffer.from(base64Data, 'base64');\n                \n                // Generate unique filename\n                const fileExt = mimeType.split('/')[1] || 'jpg';\n                const fileName = `${Date.now()}-${Math.random().toString(36).substring(2)}.${fileExt}`;\n                const filePath = `services/${fileName}`;\n                \n                // Upload to service-images bucket\n                const { data: uploadData, error: uploadError } = await supabase.storage\n                  .from('service-images')\n                  .upload(filePath, buffer, {\n                    contentType: mimeType,\n                    cacheControl: '3600',\n                    upsert: false\n                  });\n                \n                if (!uploadError && uploadData) {\n                  const { data: { publicUrl } } = supabase.storage\n                    .from('service-images')\n                    .getPublicUrl(filePath);\n                  imageUrl = publicUrl;\n                  console.log('✅ Uploaded service image:', publicUrl);\n                } else {\n                  console.error('❌ Service image upload error:', uploadError);\n                }\n              }\n            } catch (error) {\n              console.error('Error uploading service image:', error);\n            }\n          } else if (service.imageUrl && !service.imageUrl.startsWith('data:')) {\n            // Use existing URL if it's not base64\n            imageUrl = service.imageUrl;\n          }\n          \n          const serviceData = {\n            pageId: newPage.id,\n            name: service.name,\n            description: service.description || null,\n            imageUrl: imageUrl,\n            durationMinutes: parseInt(service.duration) || 60,\n            price: parseFloat(service.price) || 0,\n            currency: 'USD'\n          };\n          \n          // Validate service data\n          const serviceValidation = insertServiceSchema.safeParse(serviceData);\n          if (serviceValidation.success) {\n            await storage.createService(serviceValidation.data);\n          }\n        }\n      }\n      \n      // Demo is already invalidated atomically by atomicConvertDemo method\n      \n      res.json({ \n        success: true, \n        pageId: newPage.id,\n        slug: newPage.slug,\n        message: \"Demo converted to real page successfully\" \n      });\n    } catch (error) {\n      console.error(\"Convert demo error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  // Get demo pages for dashboard\n  app.get(\"/api/demo-pages\", verifyToken, async (req: any, res) => {\n    try {\n      const demoPages = await storage.getDemoPagesByOwner(req.user.userId);\n      res.json(demoPages);\n    } catch (error) {\n      console.error(\"Get demo pages error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  app.post(\"/api/page/launch\", verifyToken, async (req: any, res) => {\n    try {\n      const { pageId } = req.body;\n      \n      if (!pageId) {\n        return res.status(400).json({ message: \"Page ID is required\" });\n      }\n      \n      // Get the page to verify ownership using storage abstraction\n      const page = await storage.getPage(pageId);\n      \n      if (!page || page.ownerId !== req.user.userId) {\n        return res.status(404).json({ message: \"Page not found\" });\n      }\n      \n      // Get user's profile to check membership status using storage abstraction\n      const profile = await storage.getProfile(req.user.userId);\n      \n      if (!profile) {\n        return res.status(404).json({ message: \"User profile not found\" });\n      }\n      \n      // Check if user has Pro subscription and it hasn't expired\n      if (profile.membershipStatus !== 'pro') {\n        return res.status(403).json({ \n          message: \"Upgrade Required\", \n          details: \"You need a Pro subscription to launch your booking page\" \n        });\n      }\n      \n      // Check if Pro membership has expired\n      if (profile.membershipExpires && new Date(profile.membershipExpires) < new Date()) {\n        return res.status(403).json({ \n          message: \"Subscription Expired\", \n          details: \"Your Pro subscription has expired. Please renew to launch your page\" \n        });\n      }\n      \n      // Set published to true using storage abstraction\n      const updatedPage = await storage.updatePage(pageId, { published: true });\n      \n      if (!updatedPage) {\n        return res.status(500).json({ message: \"Failed to launch page\" });\n      }\n      \n      res.json({ \n        success: true, \n        message: \"Page launched successfully\",\n        page: updatedPage\n      });\n    } catch (error) {\n      console.error(\"Launch page error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  // Reviews routes\n  app.post(\"/api/reviews\", async (req, res) => {\n    try {\n      // Validate request body using Zod schema\n      const validationResult = insertReviewSchema.safeParse(req.body);\n      \n      if (!validationResult.success) {\n        return res.status(400).json({ \n          message: \"Invalid review data\", \n          errors: validationResult.error.flatten().fieldErrors \n        });\n      }\n      \n      const reviewData = validationResult.data;\n      \n      // Server-side rating validation (redundant but safe)\n      if (reviewData.rating < 1 || reviewData.rating > 5) {\n        return res.status(400).json({ message: \"Rating must be between 1 and 5\" });\n      }\n      \n      const review = await storage.createReview({\n        ...reviewData,\n        isApproved: 'pending' // Reviews start as pending approval\n      });\n      \n      res.status(201).json(review);\n    } catch (error) {\n      console.error(\"Create review error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  app.get(\"/api/reviews/:pageId\", async (req, res) => {\n    try {\n      const reviews = await storage.getApprovedReviewsByPageId(req.params.pageId);\n      res.json(reviews);\n    } catch (error) {\n      console.error(\"Get reviews error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  // Get all reviews for user's pages (for dashboard management)\n  app.get(\"/api/user/reviews\", verifyToken, async (req: any, res) => {\n    try {\n      const reviews = await storage.getReviewsByOwner(req.user.userId);\n      res.json(reviews);\n    } catch (error) {\n      console.error(\"Get user reviews error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  // Update review approval status\n  app.patch(\"/api/reviews/:id/status\", verifyToken, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const { isApproved } = req.body;\n\n      if (!['pending', 'approved', 'rejected'].includes(isApproved)) {\n        return res.status(400).json({ message: \"Invalid approval status\" });\n      }\n\n      // Get the review first to verify ownership\n      const reviews = await storage.getReviewsByOwner(req.user.userId);\n      const review = reviews.find(r => r.id === id);\n\n      if (!review) {\n        return res.status(404).json({ message: \"Review not found or you don't have permission\" });\n      }\n\n      const updatedReview = await storage.updateReview(id, { isApproved });\n      res.json(updatedReview);\n    } catch (error) {\n      console.error(\"Update review status error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  // Appointments routes\n  app.post(\"/api/appointments\", async (req, res) => {\n    try {\n      const appointmentData = req.body;\n      const appointment = await storage.createAppointment(appointmentData);\n      \n      // Send email notifications\n      try {\n        // Send confirmation to customer\n        if (appointmentData.customerEmail) {\n          await sendAppointmentEmail(appointment.id, 'confirmation');\n        }\n        \n        // Send notification to business owner\n        await sendOwnerNotification(appointment.id);\n      } catch (emailError) {\n        console.error(\"Failed to send appointment notification emails:\", emailError);\n        // Don't fail the appointment creation if email fails\n      }\n      \n      res.json(appointment);\n    } catch (error) {\n      console.error(\"Create appointment error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  app.get(\"/api/appointments\", verifyToken, async (req: any, res) => {\n    try {\n      const appointments = await storage.getAppointmentsByOwner(req.user.userId);\n      res.json(appointments);\n    } catch (error) {\n      console.error(\"Get appointments error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  app.patch(\"/api/appointments/:id\", verifyToken, async (req: any, res) => {\n    try {\n      // First get the appointment to verify ownership\n      const appointment = await storage.getAppointmentById(req.params.id);\n      if (!appointment) {\n        return res.status(404).json({ message: \"Appointment not found\" });\n      }\n      \n      // Verify the user owns this appointment\n      if (appointment.ownerId !== req.user.userId) {\n        return res.status(403).json({ message: \"Unauthorized to update this appointment\" });\n      }\n      \n      const updated = await storage.updateAppointment(req.params.id, req.body);\n      \n      // Send email notification if status changed to approved or rejected\n      if (req.body.status && appointment.customerEmail) {\n        if (req.body.status === 'accepted') {\n          await sendAppointmentEmail(req.params.id, 'approved');\n        } else if (req.body.status === 'declined') {\n          await sendAppointmentEmail(req.params.id, 'rejected');\n        }\n      }\n      \n      res.json(updated);\n    } catch (error) {\n      console.error(\"Update appointment error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  app.post(\"/api/appointments/:id/reschedule\", verifyToken, async (req: any, res) => {\n    try {\n      // First get the appointment to verify ownership\n      const appointment = await storage.getAppointmentById(req.params.id);\n      if (!appointment) {\n        return res.status(404).json({ message: \"Appointment not found\" });\n      }\n      \n      // Verify the user owns this appointment\n      if (appointment.ownerId !== req.user.userId) {\n        return res.status(403).json({ message: \"Unauthorized to reschedule this appointment\" });\n      }\n\n      const { newDate, newTime, note } = req.body;\n\n      const originalDate = appointment.date;\n      const originalTime = appointment.time;\n\n      // Update the appointment with new date and time\n      const updated = await storage.updateAppointment(req.params.id, {\n        date: newDate,\n        time: newTime,\n        status: 'rescheduled'\n      });\n      \n      // Send email notification to customer about reschedule\n      if (appointment.customerEmail) {\n        await sendAppointmentEmail(req.params.id, 'rescheduled', {\n          note,\n          originalDate,\n          originalTime\n        });\n      }\n      \n      // Send notification to business owner about reschedule\n      await sendOwnerRescheduleNotification(req.params.id, originalDate, originalTime);\n      \n      res.json(updated);\n    } catch (error) {\n      console.error(\"Reschedule appointment error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  // Public API routes (no authentication required)\n  \n  // Get appointment details for public reschedule page\n  app.get(\"/api/public/appointments/:id\", async (req, res) => {\n    try {\n      const appointment = await storage.getAppointmentById(req.params.id);\n      \n      if (!appointment) {\n        return res.status(404).json({ message: \"Appointment not found\" });\n      }\n\n      // Get page and service details\n      const page = await storage.getPage(appointment.pageId);\n      const service = appointment.serviceId ? await storage.getServiceById(appointment.serviceId) : null;\n\n      // Return only necessary public info\n      res.json({\n        id: appointment.id,\n        customerName: appointment.customerName,\n        customerEmail: appointment.customerEmail,\n        date: appointment.date,\n        time: appointment.time,\n        status: appointment.status,\n        serviceName: service?.name || 'Service',\n        businessName: page?.title || 'Business',\n        contactEmail: page?.contactEmail,\n        contactPhone: page?.contactPhone,\n      });\n    } catch (error) {\n      console.error(\"Get public appointment error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  // Public reschedule endpoint (no authentication required)\n  app.post(\"/api/public/appointments/:id/reschedule\", async (req, res) => {\n    try {\n      const appointment = await storage.getAppointmentById(req.params.id);\n      \n      if (!appointment) {\n        return res.status(404).json({ message: \"Appointment not found\" });\n      }\n\n      const { newDate, newTime, note } = req.body;\n\n      if (!newDate || !newTime) {\n        return res.status(400).json({ message: \"New date and time are required\" });\n      }\n\n      const originalDate = appointment.date;\n      const originalTime = appointment.time;\n\n      // Update the appointment\n      const updated = await storage.updateAppointment(req.params.id, {\n        date: newDate,\n        time: newTime,\n        status: 'rescheduled'\n      });\n\n      // Send email notification to customer\n      if (appointment.customerEmail) {\n        await sendAppointmentEmail(req.params.id, 'rescheduled', {\n          note,\n          originalDate,\n          originalTime\n        });\n      }\n      \n      // Send notification to business owner about reschedule\n      await sendOwnerRescheduleNotification(req.params.id, originalDate, originalTime);\n\n      res.json({\n        success: true,\n        message: \"Appointment rescheduled successfully\",\n        appointment: updated\n      });\n    } catch (error) {\n      console.error(\"Public reschedule error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  // Dashboard statistics route\n  app.get(\"/api/dashboard/stats\", verifyToken, async (req: any, res) => {\n    try {\n      const userId = req.user.userId;\n      \n      // Get all pages for this user\n      const pages = await storage.getPagesByOwner(userId);\n      const pagesCount = Math.max(0, pages?.length || 0);\n      \n      // Use Supabase to get appointments with service prices\n      if (!supabase) {\n        throw new Error(\"Supabase not available\");\n      }\n\n      const { data: appointments, error } = await supabase\n        .from('appointments')\n        .select(`\n          *,\n          services(price)\n        `)\n        .eq('owner_id', userId);\n\n      if (error) {\n        console.error(\"Error fetching appointments for stats:\", error);\n        throw error;\n      }\n\n      const validAppointments = appointments || [];\n      const totalAppointments = Math.max(0, validAppointments.length);\n      \n      // Count pending appointments\n      const pendingAppointments = Math.max(0, validAppointments.filter((apt: any) => apt.status === 'pending').length);\n      \n      // Calculate total revenue (from accepted appointments with service prices)\n      const acceptedAppointments = validAppointments.filter((apt: any) => apt.status === 'accepted');\n      const totalRevenue = acceptedAppointments.reduce((sum: number, apt: any) => {\n        const servicePrice = apt.services?.price || 0;\n        return sum + Number(servicePrice);\n      }, 0);\n      \n      // Calculate conversion rate (safe division)\n      const conversionRate = totalAppointments > 0\n        ? Math.round((acceptedAppointments.length / totalAppointments * 100) * 10) / 10\n        : 0;\n      \n      // Average booking value (safe division)\n      const avgBookingValue = acceptedAppointments.length > 0\n        ? Math.round((totalRevenue / acceptedAppointments.length) * 100) / 100\n        : 0;\n      \n      // Ensure all values are valid numbers\n      const response = {\n        pagesCount: Number(pagesCount) || 0,\n        totalAppointments: Number(totalAppointments) || 0,\n        pendingAppointments: Number(pendingAppointments) || 0,\n        totalRevenue: Number(totalRevenue) || 0,\n        conversionRate: Number(conversionRate) || 0,\n        avgBookingValue: Number(avgBookingValue) || 0\n      };\n      \n      res.json(response);\n    } catch (error) {\n      console.error(\"Get dashboard stats error:\", error);\n      res.status(500).json({ \n        message: \"Internal server error\",\n        // Return safe defaults on error\n        pagesCount: 0,\n        totalAppointments: 0,\n        pendingAppointments: 0,\n        totalRevenue: 0,\n        conversionRate: 0,\n        avgBookingValue: 0\n      });\n    }\n  });\n\n  // Recent activity route\n  app.get(\"/api/dashboard/recent-activity\", verifyToken, async (req: any, res) => {\n    try {\n      const userId = req.user.userId;\n      \n      // Get recent appointments (last 10)\n      const appointments = await storage.getAppointmentsByOwner(userId);\n      \n      // Ensure we have a valid array\n      const validAppointments = Array.isArray(appointments) ? appointments : [];\n      \n      // Sort by creation date (most recent first) and take last 10\n      const recentAppointments = validAppointments\n        .filter(apt => apt && apt.id) // Filter out invalid appointments\n        .sort((a, b) => {\n          // Use a fallback date if createdAt doesn't exist\n          const dateA = new Date(a.createdAt || a.id || Date.now()).getTime();\n          const dateB = new Date(b.createdAt || b.id || Date.now()).getTime();\n          return dateB - dateA; // Most recent first\n        })\n        .slice(0, 10) // Limit to 10 items\n        .map(apt => ({\n          id: String(apt.id || ''),\n          type: 'appointment',\n          title: `New appointment from ${apt.customerName || 'Unknown Customer'}`,\n          description: `${apt.serviceName || 'Service'} on ${apt.date || 'TBD'} at ${apt.time || 'TBD'}`,\n          time: apt.createdAt || apt.id || new Date().toISOString(),\n          status: apt.status || 'pending'\n        }));\n      \n      res.json(recentAppointments);\n    } catch (error) {\n      console.error(\"Get recent activity error:\", error);\n      res.status(500).json([]); // Return empty array on error instead of error object\n    }\n  });\n\n  // Analytics chart data route\n  app.get(\"/api/dashboard/analytics-charts\", verifyToken, async (req: any, res) => {\n    try {\n      const userId = req.user.userId;\n      \n      // Get all appointments for this user\n      const appointments = await storage.getAppointmentsByOwner(userId);\n      const validAppointments = Array.isArray(appointments) ? appointments : [];\n      \n      // Get the last 30 days\n      const now = new Date();\n      const thirtyDaysAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);\n      \n      // Initialize daily booking data for the last 30 days\n      const dailyBookings: { [key: string]: number } = {};\n      const dailyRevenue: { [key: string]: number } = {};\n      \n      for (let i = 29; i >= 0; i--) {\n        const date = new Date(now.getTime() - i * 24 * 60 * 60 * 1000);\n        const dateKey = date.toISOString().split('T')[0];\n        dailyBookings[dateKey] = 0;\n        dailyRevenue[dateKey] = 0;\n      }\n      \n      // Count bookings by creation date (last 30 days)\n      validAppointments.forEach(apt => {\n        if (apt.createdAt) {\n          const createdDate = new Date(apt.createdAt);\n          if (createdDate >= thirtyDaysAgo) {\n            const dateKey = createdDate.toISOString().split('T')[0];\n            if (dailyBookings[dateKey] !== undefined) {\n              dailyBookings[dateKey]++;\n              if (apt.status === 'accepted') {\n                dailyRevenue[dateKey] += Number(apt.price) || 0;\n              }\n            }\n          }\n        }\n      });\n      \n      // Format for chart\n      const bookingTrend = Object.keys(dailyBookings)\n        .sort()\n        .map(date => ({\n          date: new Date(date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' }),\n          bookings: dailyBookings[date],\n          revenue: Math.round(dailyRevenue[date] * 100) / 100\n        }));\n      \n      // Status distribution\n      const statusCounts = {\n        pending: 0,\n        accepted: 0,\n        declined: 0,\n        rescheduled: 0\n      };\n      \n      validAppointments.forEach(apt => {\n        const status = apt.status || 'pending';\n        if (status in statusCounts) {\n          statusCounts[status as keyof typeof statusCounts]++;\n        }\n      });\n      \n      const statusDistribution = [\n        { name: 'Pending', value: statusCounts.pending, color: '#f97316' },\n        { name: 'Accepted', value: statusCounts.accepted, color: '#10b981' },\n        { name: 'Declined', value: statusCounts.declined, color: '#ef4444' },\n        { name: 'Rescheduled', value: statusCounts.rescheduled, color: '#3b82f6' }\n      ].filter(item => item.value > 0);\n      \n      // Revenue by status\n      const revenueByStatus = {\n        accepted: 0,\n        pending: 0,\n        rescheduled: 0\n      };\n      \n      validAppointments.forEach(apt => {\n        const revenue = Number(apt.price) || 0;\n        if (apt.status === 'accepted') {\n          revenueByStatus.accepted += revenue;\n        } else if (apt.status === 'pending') {\n          revenueByStatus.pending += revenue;\n        } else if (apt.status === 'rescheduled') {\n          revenueByStatus.rescheduled += revenue;\n        }\n      });\n      \n      const revenueData = [\n        { status: 'Accepted', revenue: Math.round(revenueByStatus.accepted * 100) / 100, color: '#10b981' },\n        { status: 'Pending', revenue: Math.round(revenueByStatus.pending * 100) / 100, color: '#f97316' },\n        { status: 'Rescheduled', revenue: Math.round(revenueByStatus.rescheduled * 100) / 100, color: '#3b82f6' }\n      ].filter(item => item.revenue > 0);\n      \n      res.json({\n        bookingTrend,\n        statusDistribution,\n        revenueData\n      });\n    } catch (error) {\n      console.error(\"Get analytics charts error:\", error);\n      res.status(500).json({ \n        bookingTrend: [],\n        statusDistribution: [],\n        revenueData: []\n      });\n    }\n  });\n\n\n  // Razorpay payment routes (conditionally registered)\n  if (process.env.RAZORPAY_KEY_ID && process.env.RAZORPAY_KEY_SECRET) {\n    app.post(\"/api/razorpay/order\", verifyToken, async (req, res) => {\n      await createRazorpayOrder(req, res);\n    });\n\n    app.post(\"/api/razorpay/verify\", verifyToken, async (req, res) => {\n      await verifyRazorpayPayment(req, res);\n    });\n\n    app.post(\"/api/razorpay/subscriptions\", verifyToken, async (req, res) => {\n      await createRazorpaySubscription(req, res);\n    });\n\n    app.get(\"/api/razorpay/subscriptions/:subscriptionId\", verifyToken, async (req, res) => {\n      await getRazorpaySubscription(req, res);\n    });\n\n    app.post(\"/api/razorpay/cancel-subscription\", verifyToken, async (req, res) => {\n      const { cancelRazorpaySubscription } = await import(\"./razorpay\");\n      await cancelRazorpaySubscription(req, res);\n    });\n\n    // Get user's subscriptions\n    app.get(\"/api/subscriptions\", verifyToken, async (req, res) => {\n      try {\n        const authReq = req as any;\n        if (!authReq.user?.userId) {\n          return res.status(401).json({ error: \"User not authenticated\" });\n        }\n\n        const subscriptions = await storage.getSubscriptionsByUser(authReq.user.userId);\n        res.json(subscriptions);\n      } catch (error) {\n        console.error(\"Failed to get user subscriptions:\", error);\n        res.status(500).json({ error: \"Failed to get subscriptions\" });\n      }\n    });\n\n    // Get user's payment history\n    app.get(\"/api/payments\", verifyToken, async (req, res) => {\n      try {\n        const authReq = req as any;\n        if (!authReq.user?.userId) {\n          return res.status(401).json({ error: \"User not authenticated\" });\n        }\n\n        const payments = await storage.getPaymentsByUser(authReq.user.userId);\n        res.json(payments);\n      } catch (error) {\n        console.error(\"Failed to get user payments:\", error);\n        res.status(500).json({ error: \"Failed to get payment history\" });\n      }\n    });\n\n    // Webhook route moved to server/index.ts for proper middleware ordering\n    // This ensures express.raw() runs BEFORE express.json() for signature verification\n\n    console.log(\"Razorpay payment and subscription routes registered successfully\");\n  } else {\n    console.warn(\"Razorpay credentials not found - Razorpay routes not registered\");\n  }\n\n  // PayPal subscription routes\n  if (process.env.PAYPAL_CLIENT_ID && process.env.PAYPAL_CLIENT_SECRET) {\n    const { \n      createPayPalSubscription, \n      getPayPalSubscription, \n      cancelPayPalSubscription,\n      checkAndActivateSubscription,\n      getPayPalPlanId\n    } = await import(\"./paypal-subscriptions\");\n    \n    const { handlePayPalWebhook } = await import(\"./paypal-webhook\");\n\n    // Get PayPal plan ID (public endpoint to support PayPal SDK button)\n    app.get(\"/api/paypal/plan-id\", async (req, res) => {\n      await getPayPalPlanId(req, res);\n    });\n\n    app.post(\"/api/paypal/subscription\", verifyToken, async (req, res) => {\n      await createPayPalSubscription(req, res);\n    });\n\n    app.get(\"/api/paypal/subscription/:subscriptionId\", verifyToken, async (req, res) => {\n      await getPayPalSubscription(req, res);\n    });\n\n    app.post(\"/api/paypal/subscription/check-activate\", verifyToken, async (req, res) => {\n      await checkAndActivateSubscription(req, res);\n    });\n\n    app.post(\"/api/paypal/subscription/:subscriptionId/cancel\", verifyToken, async (req, res) => {\n      await cancelPayPalSubscription(req, res);\n    });\n\n    console.log(\"PayPal subscription routes registered successfully\");\n  } else {\n    console.warn(\"PayPal credentials not found - PayPal routes not registered\");\n  }\n\n  // Associate anonymous demo with user account\n  app.post(\"/api/demo/associate\", verifyToken, async (req: any, res) => {\n    try {\n      const { demoId, convertToken } = req.body;\n      \n      if (!demoId || !convertToken) {\n        return res.status(400).json({ message: \"Demo ID and convert token are required\" });\n      }\n      \n      // Get the demo to verify it exists and is not expired\n      const demo = await storage.getDemoPage(demoId);\n      \n      if (!demo) {\n        return res.status(404).json({ message: \"Demo not found\" });\n      }\n      \n      if (demo.convertToken !== convertToken) {\n        return res.status(403).json({ message: \"Invalid convert token\" });\n      }\n      \n      if (new Date(demo.expiresAt) < new Date()) {\n        return res.status(410).json({ message: \"Demo has expired\" });\n      }\n      \n      // Associate the demo with the current user\n      const result = await storage.associateDemoWithUser(demoId, req.user.userId);\n      \n      if (result) {\n        res.json({ message: \"Demo successfully associated with your account\" });\n      } else {\n        res.status(500).json({ message: \"Failed to associate demo with account\" });\n      }\n    } catch (error) {\n      console.error(\"Associate demo error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  // Trial activation endpoint (no payment required)\n  app.post(\"/api/trial/activate\", verifyToken, async (req: any, res) => {\n    try {\n      const userId = req.user.userId;\n      \n      const profile = await storage.getProfile(userId);\n      if (!profile) {\n        return res.status(404).json({ message: \"Profile not found\" });\n      }\n\n      if (profile.trialStatus !== 'available') {\n        return res.status(400).json({ \n          message: \"Trial not available\", \n          trialStatus: profile.trialStatus \n        });\n      }\n\n      if (profile.membershipStatus === 'pro') {\n        return res.status(400).json({ \n          message: \"You already have Pro membership\" \n        });\n      }\n\n      const now = new Date();\n      const trialEndsAt = new Date(now.getTime() + 7 * 24 * 60 * 60 * 1000);\n\n      await storage.updateProfile(userId, {\n        membershipStatus: 'pro',\n        membershipExpires: trialEndsAt.toISOString(),\n        trialStatus: 'active',\n        trialStartedAt: now.toISOString(),\n        trialEndsAt: trialEndsAt.toISOString()\n      });\n\n      console.log(`✅ Free trial activated for user ${userId} (no payment), ends at ${trialEndsAt.toISOString()}`);\n\n      res.json({\n        success: true,\n        message: \"Free trial activated successfully\",\n        trialEndsAt: trialEndsAt.toISOString()\n      });\n    } catch (error) {\n      console.error(\"Trial activation error:\", error);\n      res.status(500).json({ message: \"Failed to activate trial\" });\n    }\n  });\n\n  // Admin endpoints for debugging and support\n  app.post(\"/api/admin/validate\", async (req, res) => {\n    try {\n      const adminKey = req.headers['x-admin-key'];\n      \n      if (adminKey !== process.env.ADMIN_KEY) {\n        return res.status(403).json({ message: \"Unauthorized\" });\n      }\n\n      res.json({ message: \"Valid admin key\", authenticated: true });\n    } catch (error) {\n      console.error(\"Admin validation error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  app.get(\"/api/admin/user-status/:userId\", async (req, res) => {\n    try {\n      const adminKey = req.headers['x-admin-key'];\n      \n      if (adminKey !== process.env.ADMIN_KEY) {\n        return res.status(403).json({ message: \"Unauthorized\" });\n      }\n\n      const userId = req.params.userId;\n      \n      // Get user profile\n      const profile = await storage.getProfile(userId);\n      if (!profile) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      // Get user subscriptions\n      const subscriptions = await storage.getSubscriptionsByUser(userId);\n      \n      // Get user payments\n      const payments = await storage.getPaymentsByUser(userId);\n\n      res.json({\n        profile: {\n          id: profile.id,\n          email: profile.email,\n          fullName: profile.fullName,\n          membershipStatus: profile.membershipStatus,\n          membershipExpires: profile.membershipExpires,\n          trialStatus: profile.trialStatus,\n          trialStartedAt: profile.trialStartedAt,\n          trialEndsAt: profile.trialEndsAt,\n        },\n        subscriptions: subscriptions.map(sub => ({\n          id: sub.id,\n          status: sub.status,\n          planName: sub.planName,\n          amount: sub.amount,\n          currency: sub.currency,\n          isTrial: sub.isTrial,\n          trialEndsAt: sub.trialEndsAt,\n          createdAt: sub.createdAt,\n        })),\n        payments: payments.map(payment => ({\n          id: payment.id,\n          amount: payment.amount,\n          currency: payment.currency,\n          status: payment.status,\n          plan: payment.plan,\n          createdAt: payment.createdAt,\n        })),\n      });\n    } catch (error) {\n      console.error(\"Admin user status error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  // Admin endpoint to cancel a subscription\n  app.post(\"/api/admin/cancel-subscription\", async (req, res) => {\n    try {\n      const adminKey = req.headers['x-admin-key'];\n      \n      if (adminKey !== process.env.ADMIN_KEY) {\n        return res.status(403).json({ message: \"Unauthorized\" });\n      }\n\n      const { userId, subscriptionId } = req.body;\n      \n      if (!userId || !subscriptionId) {\n        return res.status(400).json({ message: \"userId and subscriptionId are required\" });\n      }\n\n      // Update subscription status\n      await storage.updateSubscription(subscriptionId, { status: 'cancelled' });\n\n      // Downgrade user to free\n      await storage.updateProfile(userId, {\n        membershipStatus: 'free',\n        membershipExpires: null\n      });\n\n      console.log(`Admin cancelled subscription ${subscriptionId} for user ${userId}`);\n\n      res.json({ \n        success: true, \n        message: \"Subscription cancelled successfully\" \n      });\n    } catch (error) {\n      console.error(\"Admin cancel subscription error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  // Admin endpoint to update membership expiry\n  app.post(\"/api/admin/update-expiry\", async (req, res) => {\n    try {\n      const adminKey = req.headers['x-admin-key'];\n      \n      if (adminKey !== process.env.ADMIN_KEY) {\n        return res.status(403).json({ message: \"Unauthorized\" });\n      }\n\n      const { userId, expiryDate } = req.body;\n      \n      if (!userId || !expiryDate) {\n        return res.status(400).json({ message: \"userId and expiryDate are required\" });\n      }\n\n      // Update membership expiry\n      await storage.updateProfile(userId, {\n        membershipExpires: new Date(expiryDate).toISOString()\n      });\n\n      console.log(`Admin updated expiry for user ${userId} to ${expiryDate}`);\n\n      res.json({ \n        success: true, \n        message: \"Membership expiry updated successfully\" \n      });\n    } catch (error) {\n      console.error(\"Admin update expiry error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  // Admin endpoint to get recent payments for notifications\n  app.get(\"/api/admin/recent-payments\", async (req, res) => {\n    try {\n      const adminKey = req.headers['x-admin-key'];\n      \n      if (adminKey !== process.env.ADMIN_KEY) {\n        return res.status(403).json({ message: \"Unauthorized\" });\n      }\n\n      const limit = parseInt(req.query.limit as string) || 20;\n\n      const allPayments = await storage.getAllRecentPayments(limit);\n\n      const paymentsWithUserDetails = await Promise.all(\n        allPayments.map(async (payment) => {\n          const profile = payment.userId ? await storage.getProfile(payment.userId) : null;\n          return {\n            id: payment.id,\n            userId: payment.userId,\n            userEmail: profile?.email || 'Unknown',\n            userFullName: profile?.fullName || 'Unknown User',\n            amount: payment.amount,\n            currency: payment.currency,\n            status: payment.status,\n            plan: payment.plan,\n            paymentMethod: payment.paymentMethod,\n            createdAt: payment.createdAt,\n          };\n        })\n      );\n\n      res.json({ payments: paymentsWithUserDetails });\n    } catch (error) {\n      console.error(\"Admin recent payments error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  // Admin endpoint to generate login token for a user (for debugging)\n  app.post(\"/api/admin/generate-login-token\", async (req, res) => {\n    try {\n      const adminKey = req.headers['x-admin-key'];\n      \n      if (adminKey !== process.env.ADMIN_KEY) {\n        return res.status(403).json({ message: \"Unauthorized\" });\n      }\n\n      if (!supabase) {\n        return res.status(503).json({ message: \"Supabase not configured\" });\n      }\n\n      const { userId } = req.body;\n      \n      if (!userId) {\n        return res.status(400).json({ message: \"userId is required\" });\n      }\n\n      // Generate a login link for the user\n      const { data, error } = await supabase.auth.admin.generateLink({\n        type: 'magiclink',\n        email: userId, // This should be the user's email, but we're using ID\n      });\n\n      if (error) {\n        console.error(\"Generate login token error:\", error);\n        return res.status(500).json({ message: \"Failed to generate login token\", error: error.message });\n      }\n\n      res.json({\n        message: \"Login token generated successfully\",\n        loginUrl: data.properties?.action_link,\n        note: \"This link can be used to login as the user for debugging purposes\"\n      });\n    } catch (error) {\n      console.error(\"Admin generate token error:\", error);\n      res.status(500).json({ message: \"Internal server error\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":75847},"client/src/hooks/use-currency.tsx":{"content":"import { createContext, useContext, useState, useEffect, ReactNode } from 'react';\n\nexport interface Currency {\n  code: string;\n  symbol: string;\n  name: string;\n  rate: number; // Rate relative to USD\n}\n\nexport const currencies: Currency[] = [\n  { code: 'USD', symbol: '$', name: 'US Dollar', rate: 1 },\n  { code: 'EUR', symbol: '€', name: 'Euro', rate: 0.85 },\n  { code: 'GBP', symbol: '£', name: 'British Pound', rate: 0.73 },\n  { code: 'INR', symbol: '₹', name: 'Indian Rupee', rate: 83.25 },\n  { code: 'BHD', symbol: 'د.ب', name: 'Bahraini Dinar', rate: 0.376 },\n  { code: 'AED', symbol: 'د.إ', name: 'UAE Dirham', rate: 3.67 },\n  { code: 'SAR', symbol: 'ر.س', name: 'Saudi Riyal', rate: 3.75 },\n  { code: 'CAD', symbol: 'C$', name: 'Canadian Dollar', rate: 1.35 },\n  { code: 'AUD', symbol: 'A$', name: 'Australian Dollar', rate: 1.52 },\n];\n\ninterface CurrencyContextType {\n  selectedCurrency: Currency;\n  setSelectedCurrency: (currency: Currency) => void;\n  convertPrice: (usdAmount: number) => number;\n  formatPrice: (usdAmount: number) => string;\n}\n\nconst CurrencyContext = createContext<CurrencyContextType | undefined>(undefined);\n\ninterface CurrencyProviderProps {\n  children: ReactNode;\n}\n\nexport function CurrencyProvider({ children }: CurrencyProviderProps) {\n  const [selectedCurrency, setSelectedCurrency] = useState<Currency>(currencies[0]); // Default to USD\n\n  // Load saved currency from localStorage\n  useEffect(() => {\n    const savedCurrency = localStorage.getItem('bookinggen-currency');\n    if (savedCurrency) {\n      const currency = currencies.find(c => c.code === savedCurrency);\n      if (currency) {\n        setSelectedCurrency(currency);\n      }\n    }\n  }, []);\n\n  // Save currency to localStorage when it changes\n  useEffect(() => {\n    localStorage.setItem('bookinggen-currency', selectedCurrency.code);\n  }, [selectedCurrency]);\n\n  const convertPrice = (usdAmount: number): number => {\n    return Math.round((usdAmount * selectedCurrency.rate) * 100) / 100;\n  };\n\n  const formatPrice = (usdAmount: number): string => {\n    const convertedAmount = convertPrice(usdAmount);\n    \n    // Format based on currency\n    switch (selectedCurrency.code) {\n      case 'INR':\n      case 'BHD':\n      case 'AED':\n      case 'SAR':\n        return `${selectedCurrency.symbol}${convertedAmount.toFixed(2)}`;\n      default:\n        return `${selectedCurrency.symbol}${convertedAmount.toFixed(2)}`;\n    }\n  };\n\n  const handleSetSelectedCurrency = (currency: Currency) => {\n    setSelectedCurrency(currency);\n  };\n\n  return (\n    <CurrencyContext.Provider value={{\n      selectedCurrency,\n      setSelectedCurrency: handleSetSelectedCurrency,\n      convertPrice,\n      formatPrice\n    }}>\n      {children}\n    </CurrencyContext.Provider>\n  );\n}\n\nexport function useCurrency() {\n  const context = useContext(CurrencyContext);\n  if (context === undefined) {\n    throw new Error('useCurrency must be used within a CurrencyProvider');\n  }\n  return context;\n}","size_bytes":2980},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"server/supabase-storage.ts":{"content":"// Load environment variables first\nimport 'dotenv/config';\nimport crypto from 'crypto';\nimport { createClient } from '@supabase/supabase-js';\nimport { IStorage } from './storage';\n\n// Supabase client for server-side operations (admin)\nconst supabaseUrl = process.env.SUPABASE_URL;\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n\nif (!supabaseUrl || !supabaseServiceKey) {\n  throw new Error(\"SUPABASE_URL and SUPABASE_SERVICE_ROLE_KEY are required\");\n}\n\nconst supabase = createClient(supabaseUrl, supabaseServiceKey, {\n  auth: {\n    autoRefreshToken: false,\n    persistSession: false\n  }\n});\n\n// In-memory profile cache to reduce database queries\ninterface CachedProfile {\n  data: any;\n  expiresAt: number;\n}\n\nconst profileCache = new Map<string, CachedProfile>();\nconst PROFILE_CACHE_TTL = 15000; // 15 seconds\n\nexport class SupabaseStorage implements IStorage {\n  // Helper function to convert snake_case to camelCase for consistency with existing code\n  private toCamelCase(obj: any): any {\n    if (obj === null || obj === undefined || typeof obj !== 'object') {\n      return obj;\n    }\n\n    if (Array.isArray(obj)) {\n      return obj.map(item => this.toCamelCase(item));\n    }\n\n    const camelObj: any = {};\n    for (const [key, value] of Object.entries(obj)) {\n      const camelKey = key.replace(/_([a-z])/g, (_, letter) => letter.toUpperCase());\n      camelObj[camelKey] = this.toCamelCase(value);\n    }\n    return camelObj;\n  }\n\n  // Helper function to convert camelCase to snake_case for database operations\n  private toSnakeCase(obj: any): any {\n    if (obj === null || obj === undefined || typeof obj !== 'object') {\n      return obj;\n    }\n\n    if (Array.isArray(obj)) {\n      return obj.map(item => this.toSnakeCase(item));\n    }\n\n    // JSONB fields that should preserve their nested structure without key conversion\n    const jsonbFields = ['data', 'faqs', 'businessHours', 'gallery', 'theme', 'services', 'contact', 'meta'];\n\n    const snakeObj: any = {};\n    for (const [key, value] of Object.entries(obj)) {\n      const snakeKey = key.replace(/[A-Z]/g, letter => `_${letter.toLowerCase()}`);\n      \n      // If this is a JSONB field, preserve its value as-is without recursive conversion\n      if (jsonbFields.includes(key)) {\n        snakeObj[snakeKey] = value;\n      } else {\n        snakeObj[snakeKey] = this.toSnakeCase(value);\n      }\n    }\n    return snakeObj;\n  }\n\n  // Profiles\n  async createProfile(profile: any): Promise<any> {\n    try {\n      const { data, error } = await supabase\n        .from('profiles')\n        .insert(this.toSnakeCase(profile))\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      const result = this.toCamelCase(data);\n      \n      // Cache the newly created profile\n      const now = Date.now();\n      profileCache.set(result.id, {\n        data: result,\n        expiresAt: now + PROFILE_CACHE_TTL\n      });\n      \n      return result;\n    } catch (error) {\n      console.error(\"Create profile error:\", error);\n      throw error;\n    }\n  }\n\n  async getProfile(userId: string): Promise<any | undefined> {\n    try {\n      // Check cache first\n      const cached = profileCache.get(userId);\n      const now = Date.now();\n      \n      if (cached && cached.expiresAt > now) {\n        return cached.data;\n      }\n\n      const { data, error } = await supabase\n        .from('profiles')\n        .select('*')\n        .eq('id', userId)\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error; // PGRST116 is \"not found\"\n      \n      const result = data ? this.toCamelCase(data) : undefined;\n      \n      // Cache the result\n      if (result) {\n        profileCache.set(userId, {\n          data: result,\n          expiresAt: now + PROFILE_CACHE_TTL\n        });\n      }\n      \n      return result;\n    } catch (error) {\n      console.error(\"Get profile error:\", error);\n      return undefined;\n    }\n  }\n\n  async updateProfile(userId: string, updates: any): Promise<any | undefined> {\n    try {\n      const { data, error } = await supabase\n        .from('profiles')\n        .update(this.toSnakeCase(updates))\n        .eq('id', userId)\n        .select()\n        .single();\n\n      if (error) throw error;\n      \n      const result = this.toCamelCase(data);\n      \n      // Invalidate cache on update\n      profileCache.delete(userId);\n      \n      return result;\n    } catch (error) {\n      console.error(\"Update profile error:\", error);\n      throw error;\n    }\n  }\n\n  // Pages\n  async createPage(page: any): Promise<any> {\n    try {\n      const pageData = this.toSnakeCase({ \n        ...page, \n        created_at: new Date().toISOString(), \n        updated_at: new Date().toISOString() \n      });\n      \n      const { data, error } = await supabase\n        .from('pages')\n        .insert(pageData)\n        .select()\n        .single();\n\n      if (error) throw error;\n      return this.toCamelCase(data);\n    } catch (error) {\n      console.error(\"Create page error:\", error);\n      throw error;\n    }\n  }\n\n  async getPage(id: string): Promise<any | undefined> {\n    try {\n      const { data, error } = await supabase\n        .from('pages')\n        .select('*')\n        .eq('id', id)\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      return data ? this.toCamelCase(data) : undefined;\n    } catch (error) {\n      console.error(\"Get page error:\", error);\n      return undefined;\n    }\n  }\n\n  async getPageBySlug(slug: string): Promise<any | undefined> {\n    try {\n      const { data, error } = await supabase\n        .from('pages')\n        .select('*')\n        .eq('slug', slug)\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      return data ? this.toCamelCase(data) : undefined;\n    } catch (error) {\n      console.error(\"Get page by slug error:\", error);\n      return undefined;\n    }\n  }\n\n  async getPagesByOwner(ownerId: string): Promise<any[]> {\n    try {\n      const { data, error } = await supabase\n        .from('pages')\n        .select('*')\n        .eq('owner_id', ownerId);\n\n      if (error) throw error;\n      return (data || []).map(item => this.toCamelCase(item));\n    } catch (error) {\n      console.error(\"Get pages error:\", error);\n      return [];\n    }\n  }\n\n  async updatePage(id: string, updates: any): Promise<any | undefined> {\n    try {\n      const updateData = this.toSnakeCase({ \n        ...updates, \n        updated_at: new Date().toISOString() \n      });\n      \n      const { data, error } = await supabase\n        .from('pages')\n        .update(updateData)\n        .eq('id', id)\n        .select()\n        .single();\n\n      if (error) throw error;\n      return this.toCamelCase(data);\n    } catch (error) {\n      console.error(\"Update page error:\", error);\n      throw error;\n    }\n  }\n\n  async deletePage(id: string): Promise<boolean> {\n    try {\n      const { error } = await supabase\n        .from('pages')\n        .delete()\n        .eq('id', id);\n\n      if (error) throw error;\n      return true;\n    } catch (error) {\n      console.error(\"Delete page error:\", error);\n      return false;\n    }\n  }\n\n  // Services\n  async createService(service: any): Promise<any> {\n    try {\n      const serviceData = this.toSnakeCase({ \n        ...service, \n        created_at: new Date().toISOString() \n      });\n      \n      const { data, error } = await supabase\n        .from('services')\n        .insert(serviceData)\n        .select()\n        .single();\n\n      if (error) throw error;\n      return this.toCamelCase(data);\n    } catch (error) {\n      console.error(\"Create service error:\", error);\n      throw error;\n    }\n  }\n\n  async getServiceById(id: string): Promise<any | undefined> {\n    try {\n      const { data, error } = await supabase\n        .from('services')\n        .select('*')\n        .eq('id', id)\n        .single();\n\n      if (error) throw error;\n      return this.toCamelCase(data);\n    } catch (error) {\n      console.error(\"Get service by ID error:\", error);\n      return undefined;\n    }\n  }\n\n  async getServicesByPageId(pageId: string): Promise<any[]> {\n    try {\n      const { data, error } = await supabase\n        .from('services')\n        .select('*')\n        .eq('page_id', pageId);\n\n      if (error) throw error;\n      return (data || []).map(item => this.toCamelCase(item));\n    } catch (error) {\n      console.error(\"Get services by page ID error:\", error);\n      return [];\n    }\n  }\n\n  async updateService(id: string, updates: any): Promise<any | undefined> {\n    try {\n      const { data, error } = await supabase\n        .from('services')\n        .update(this.toSnakeCase(updates))\n        .eq('id', id)\n        .select()\n        .single();\n\n      if (error) throw error;\n      return this.toCamelCase(data);\n    } catch (error) {\n      console.error(\"Update service error:\", error);\n      throw error;\n    }\n  }\n\n  async deleteService(id: string): Promise<boolean> {\n    try {\n      const { error } = await supabase\n        .from('services')\n        .delete()\n        .eq('id', id);\n\n      if (error) throw error;\n      return true;\n    } catch (error) {\n      console.error(\"Delete service error:\", error);\n      return false;\n    }\n  }\n\n  // Staff methods\n  async createStaff(staff: any): Promise<any> {\n    try {\n      const staffData = this.toSnakeCase({ \n        ...staff, \n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n      });\n      \n      const { data, error } = await supabase\n        .from('staff')\n        .insert(staffData)\n        .select()\n        .single();\n\n      if (error) throw error;\n      return this.toCamelCase(data);\n    } catch (error) {\n      console.error(\"Create staff error:\", error);\n      throw error;\n    }\n  }\n\n  async getStaffById(id: string): Promise<any | undefined> {\n    try {\n      const { data, error } = await supabase\n        .from('staff')\n        .select('*')\n        .eq('id', id)\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      return data ? this.toCamelCase(data) : undefined;\n    } catch (error) {\n      console.error(\"Get staff by ID error:\", error);\n      return undefined;\n    }\n  }\n\n  async getStaffByPageId(pageId: string): Promise<any[]> {\n    try {\n      const { data, error } = await supabase\n        .from('staff')\n        .select('*')\n        .eq('page_id', pageId)\n        .eq('is_active', true)\n        .order('display_order', { ascending: true });\n\n      if (error) throw error;\n      return (data || []).map(item => this.toCamelCase(item));\n    } catch (error) {\n      console.error(\"Get staff by page ID error:\", error);\n      return [];\n    }\n  }\n\n  async updateStaff(id: string, updates: any): Promise<any | undefined> {\n    try {\n      const updateData = this.toSnakeCase({ \n        ...updates, \n        updated_at: new Date().toISOString() \n      });\n      \n      const { data, error } = await supabase\n        .from('staff')\n        .update(updateData)\n        .eq('id', id)\n        .select()\n        .single();\n\n      if (error) throw error;\n      return this.toCamelCase(data);\n    } catch (error) {\n      console.error(\"Update staff error:\", error);\n      throw error;\n    }\n  }\n\n  async deleteStaff(id: string): Promise<boolean> {\n    try {\n      const { error } = await supabase\n        .from('staff')\n        .delete()\n        .eq('id', id);\n\n      if (error) throw error;\n      return true;\n    } catch (error) {\n      console.error(\"Delete staff error:\", error);\n      return false;\n    }\n  }\n\n  // Appointments\n  async createAppointment(appointment: any): Promise<any> {\n    try {\n      const appointmentData = this.toSnakeCase({ \n        ...appointment, \n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n      });\n      \n      const { data, error } = await supabase\n        .from('appointments')\n        .insert(appointmentData)\n        .select()\n        .single();\n\n      if (error) throw error;\n      return this.toCamelCase(data);\n    } catch (error) {\n      console.error(\"Create appointment error:\", error);\n      throw error;\n    }\n  }\n\n  async getAppointmentById(id: string): Promise<any | undefined> {\n    try {\n      const { data, error } = await supabase\n        .from('appointments')\n        .select('*')\n        .eq('id', id)\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      return data ? this.toCamelCase(data) : undefined;\n    } catch (error) {\n      console.error(\"Get appointment by ID error:\", error);\n      return undefined;\n    }\n  }\n\n  async getAppointmentsByOwner(ownerId: string): Promise<any[]> {\n    try {\n      const { data, error } = await supabase\n        .from('appointments')\n        .select('*')\n        .eq('owner_id', ownerId)\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      return (data || []).map(item => this.toCamelCase(item));\n    } catch (error) {\n      console.error(\"Get appointments by owner error:\", error);\n      return [];\n    }\n  }\n\n  async updateAppointment(id: string, updates: any): Promise<any | undefined> {\n    try {\n      const updateData = this.toSnakeCase({ \n        ...updates, \n        updated_at: new Date().toISOString() \n      });\n      \n      const { data, error } = await supabase\n        .from('appointments')\n        .update(updateData)\n        .eq('id', id)\n        .select()\n        .single();\n\n      if (error) throw error;\n      return this.toCamelCase(data);\n    } catch (error) {\n      console.error(\"Update appointment error:\", error);\n      throw error;\n    }\n  }\n\n  // Payments\n  async createPayment(payment: any): Promise<any> {\n    try {\n      const paymentData = this.toSnakeCase({ \n        ...payment, \n        created_at: new Date().toISOString() \n      });\n      \n      const { data, error } = await supabase\n        .from('payments_demo')\n        .insert(paymentData)\n        .select()\n        .single();\n\n      if (error) throw error;\n      return this.toCamelCase(data);\n    } catch (error) {\n      console.error(\"Create payment error:\", error);\n      throw error;\n    }\n  }\n\n  async getPaymentsByUser(userId: string): Promise<any[]> {\n    try {\n      const { data, error } = await supabase\n        .from('payments_demo')\n        .select('*')\n        .eq('user_id', userId)\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      return (data || []).map(item => this.toCamelCase(item));\n    } catch (error) {\n      console.error(\"Get payments by user error:\", error);\n      return [];\n    }\n  }\n\n  async getAllRecentPayments(limit: number): Promise<any[]> {\n    try {\n      const { data, error } = await supabase\n        .from('payments_demo')\n        .select('*')\n        .order('created_at', { ascending: false })\n        .limit(limit);\n\n      if (error) throw error;\n      return (data || []).map(item => this.toCamelCase(item));\n    } catch (error) {\n      console.error(\"Get all recent payments error:\", error);\n      return [];\n    }\n  }\n\n  // Reviews\n  async createReview(review: any): Promise<any> {\n    try {\n      const reviewData = this.toSnakeCase({ \n        ...review, \n        created_at: new Date().toISOString() \n      });\n      \n      const { data, error } = await supabase\n        .from('reviews')\n        .insert(reviewData)\n        .select()\n        .single();\n\n      if (error) throw error;\n      return this.toCamelCase(data);\n    } catch (error) {\n      console.error(\"Create review error:\", error);\n      throw error;\n    }\n  }\n\n  async getReviewsByPageId(pageId: string): Promise<any[]> {\n    try {\n      const { data, error } = await supabase\n        .from('reviews')\n        .select('*')\n        .eq('page_id', pageId)\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      return (data || []).map(item => this.toCamelCase(item));\n    } catch (error) {\n      console.error(\"Get reviews by page ID error:\", error);\n      return [];\n    }\n  }\n\n  async getApprovedReviewsByPageId(pageId: string): Promise<any[]> {\n    try {\n      const { data, error } = await supabase\n        .from('reviews')\n        .select('*')\n        .eq('page_id', pageId)\n        .eq('is_approved', 'approved')\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      return (data || []).map(item => this.toCamelCase(item));\n    } catch (error) {\n      console.error(\"Get approved reviews by page ID error:\", error);\n      return [];\n    }\n  }\n\n  async getReviewsByOwner(ownerId: string): Promise<any[]> {\n    try {\n      const { data, error } = await supabase\n        .from('reviews')\n        .select(`\n          *,\n          pages!inner(\n            id,\n            title,\n            slug,\n            owner_id\n          )\n        `)\n        .eq('pages.owner_id', ownerId)\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      return (data || []).map(item => this.toCamelCase(item));\n    } catch (error) {\n      console.error(\"Get reviews by owner error:\", error);\n      return [];\n    }\n  }\n\n  async updateReview(id: string, updates: any): Promise<any | undefined> {\n    try {\n      const { data, error } = await supabase\n        .from('reviews')\n        .update(this.toSnakeCase(updates))\n        .eq('id', id)\n        .select()\n        .single();\n\n      if (error) throw error;\n      return this.toCamelCase(data);\n    } catch (error) {\n      console.error(\"Update review error:\", error);\n      throw error;\n    }\n  }\n\n  // Subscriptions\n  async createSubscription(subscription: any): Promise<any> {\n    try {\n      const subscriptionData = this.toSnakeCase({ \n        ...subscription, \n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n      });\n      \n      const { data, error } = await supabase\n        .from('subscriptions')\n        .insert(subscriptionData)\n        .select()\n        .single();\n\n      if (error) throw error;\n      return this.toCamelCase(data);\n    } catch (error) {\n      console.error(\"Create subscription error:\", error);\n      throw error;\n    }\n  }\n\n  async getSubscription(id: string): Promise<any | undefined> {\n    try {\n      const { data, error } = await supabase\n        .from('subscriptions')\n        .select('*')\n        .eq('id', id)\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      return data ? this.toCamelCase(data) : undefined;\n    } catch (error) {\n      console.error(\"Get subscription error:\", error);\n      return undefined;\n    }\n  }\n\n  async getSubscriptionsByUser(userId: string): Promise<any[]> {\n    try {\n      const { data, error } = await supabase\n        .from('subscriptions')\n        .select('*')\n        .eq('user_id', userId)\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      return (data || []).map(item => this.toCamelCase(item));\n    } catch (error) {\n      console.error(\"Get subscriptions by user error:\", error);\n      return [];\n    }\n  }\n\n  async updateSubscription(id: string, updates: any): Promise<any | undefined> {\n    try {\n      const updateData = this.toSnakeCase({ \n        ...updates, \n        updated_at: new Date().toISOString() \n      });\n      \n      const { data, error } = await supabase\n        .from('subscriptions')\n        .update(updateData)\n        .eq('id', id)\n        .select()\n        .single();\n\n      if (error) throw error;\n      return this.toCamelCase(data);\n    } catch (error) {\n      console.error(\"Update subscription error:\", error);\n      throw error;\n    }\n  }\n\n  async cancelSubscription(id: string): Promise<boolean> {\n    try {\n      const { error } = await supabase\n        .from('subscriptions')\n        .update({ \n          status: 'CANCELLED', \n          updated_at: new Date().toISOString() \n        })\n        .eq('id', id);\n\n      if (error) throw error;\n      return true;\n    } catch (error) {\n      console.error(\"Cancel subscription error:\", error);\n      return false;\n    }\n  }\n\n  // Demo Pages\n  async createDemoPage(demoData: any, ownerId?: string): Promise<any> {\n    try {\n      const convertToken = crypto.randomBytes(32).toString('hex');\n      const expiresAt = new Date();\n      expiresAt.setDate(expiresAt.getDate() + 7); // 7 days from now\n      \n      const demoPageData = {\n        owner_id: ownerId || null,\n        data: demoData,\n        convert_token: convertToken,\n        created_at: new Date().toISOString(),\n        expires_at: expiresAt.toISOString()\n      };\n      \n      const { data, error } = await supabase\n        .from('demo_pages')\n        .insert(demoPageData)\n        .select()\n        .single();\n\n      if (error) throw error;\n      return this.toCamelCase(data);\n    } catch (error) {\n      console.error(\"Create demo page error:\", error);\n      throw error;\n    }\n  }\n\n  async getDemoPage(id: string): Promise<any | undefined> {\n    try {\n      const { data, error } = await supabase\n        .from('demo_pages')\n        .select('*')\n        .eq('id', id)\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      return data ? this.toCamelCase(data) : undefined;\n    } catch (error) {\n      console.error(\"Get demo page error:\", error);\n      return undefined;\n    }\n  }\n\n  async getDemoPagesByOwner(ownerId: string): Promise<any[]> {\n    try {\n      const { data, error } = await supabase\n        .from('demo_pages')\n        .select('*')\n        .eq('owner_id', ownerId)\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      return (data || []).map(item => this.toCamelCase(item));\n    } catch (error) {\n      console.error(\"Get demo pages by owner error:\", error);\n      return [];\n    }\n  }\n\n  async deleteDemoPage(id: string): Promise<boolean> {\n    try {\n      const { error } = await supabase\n        .from('demo_pages')\n        .delete()\n        .eq('id', id);\n\n      if (error) throw error;\n      return true;\n    } catch (error) {\n      console.error(\"Delete demo page error:\", error);\n      return false;\n    }\n  }\n\n  async atomicConvertDemo(demoId: string, convertToken: string): Promise<any | null> {\n    try {\n      // First check if token is valid and not already used\n      const { data: demoPage, error: fetchError } = await supabase\n        .from('demo_pages')\n        .select('*')\n        .eq('id', demoId)\n        .eq('convert_token', convertToken)\n        .single();\n      \n      if (fetchError || !demoPage) {\n        return null; // Invalid token or already used\n      }\n      \n      // Check if not expired\n      const now = new Date();\n      if (demoPage.expires_at && now > new Date(demoPage.expires_at)) {\n        return null; // Expired\n      }\n      \n      // Mark token as used by setting it to null\n      const { data: updatedDemo, error: updateError } = await supabase\n        .from('demo_pages')\n        .update({ convert_token: null })\n        .eq('id', demoId)\n        .eq('convert_token', convertToken)\n        .select()\n        .single();\n      \n      if (updateError) throw updateError;\n      \n      return updatedDemo ? this.toCamelCase(updatedDemo) : null;\n    } catch (error) {\n      console.error(\"Atomic convert demo error:\", error);\n      return null;\n    }\n  }\n\n  async associateDemoWithUser(demoId: string, userId: string): Promise<boolean> {\n    try {\n      const { error } = await supabase\n        .from('demo_pages')\n        .update({ owner_id: userId })\n        .eq('id', demoId);\n\n      if (error) throw error;\n      return true;\n    } catch (error) {\n      console.error(\"Associate demo with user error:\", error);\n      return false;\n    }\n  }\n\n  async createDemoUser(email: string, fullName?: string): Promise<any> {\n    try {\n      // Generate a UUID for demo user\n      const demoUserId = crypto.randomUUID();\n      \n      const profileData = {\n        id: demoUserId,\n        email,\n        full_name: fullName || 'Demo User',\n        membership_status: 'demo',\n        created_at: new Date().toISOString()\n      };\n      \n      const { data, error } = await supabase\n        .from('profiles')\n        .insert(profileData)\n        .select()\n        .single();\n\n      if (error) throw error;\n      return this.toCamelCase(data);\n    } catch (error) {\n      console.error(\"Create demo user error:\", error);\n      throw error;\n    }\n  }\n\n  // Orders (for Razorpay payment verification)\n  // Store order data temporarily in memory with database backup for persistence\n  private orderCache = new Map<string, any>();\n\n  async createOrder(order: any): Promise<any> {\n    try {\n      const orderData = {\n        ...order,\n        createdAt: new Date().toISOString()\n      };\n      \n      // Store in memory cache for quick verification\n      this.orderCache.set(order.orderId, orderData);\n      \n      // Also store as backup in payments table for persistence\n      await this.createPayment({\n        userId: order.userId,\n        plan: order.plan,\n        amount: order.amount.toString(),\n        status: \"pending_verification\",\n        paymentId: order.orderId,\n        paymentMethod: \"razorpay_order\",\n        meta: {\n          orderId: order.orderId,\n          isOrderVerification: true,\n          used: false,\n          currency: order.currency,\n          createdAt: orderData.createdAt\n        }\n      });\n      \n      return orderData;\n    } catch (error) {\n      console.error(\"Create order error:\", error);\n      throw error;\n    }\n  }\n\n  async getOrder(id: string): Promise<any | undefined> {\n    try {\n      // First try memory cache\n      const cached = this.orderCache.get(id);\n      if (cached) return cached;\n      \n      // Fallback to database backup\n      const { data, error } = await supabase\n        .from('payments_demo')\n        .select('*')\n        .eq('payment_id', id)\n        .eq('status', 'pending_verification')\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      \n      if (data && data.meta && data.meta.isOrderVerification) {\n        const orderData = {\n          orderId: data.payment_id,\n          userId: data.user_id,\n          plan: data.plan,\n          amount: parseFloat(data.amount),\n          currency: data.meta.currency || 'USD',\n          createdAt: data.meta.createdAt,\n          used: data.status === 'used' || data.meta.used || false\n        };\n        \n        // Only cache non-used orders to avoid replay\n        if (!orderData.used) {\n          this.orderCache.set(id, orderData);\n        }\n        return orderData;\n      }\n      \n      return undefined;\n    } catch (error) {\n      console.error(\"Get order error:\", error);\n      return undefined;\n    }\n  }\n\n  async updateOrder(id: string, updates: any): Promise<any | undefined> {\n    try {\n      // Update memory cache\n      const cached = this.orderCache.get(id);\n      if (cached) {\n        const updated = { ...cached, ...updates };\n        this.orderCache.set(id, updated);\n        \n        // CRITICAL: Also persist to database to prevent replay attacks after restart\n        if (updates.used) {\n          // Fetch existing record to merge meta data\n          const { data: existingRecord } = await supabase\n            .from('payments_demo')\n            .select('meta')\n            .eq('payment_id', id)\n            .eq('status', 'pending_verification')\n            .single();\n          \n          // Merge existing meta with used flag\n          const updatedMeta = {\n            ...(existingRecord?.meta || {}),\n            used: true,\n            usedAt: new Date().toISOString()\n          };\n          \n          // Mark order as used in database backup\n          const { data, error } = await supabase\n            .from('payments_demo')\n            .update({\n              status: 'used',\n              meta: updatedMeta\n            })\n            .eq('payment_id', id)\n            .eq('status', 'pending_verification')\n            .select('id');\n          \n          if (error || !data || data.length !== 1) {\n            console.error('Failed to persist order used flag:', error || 'No rows affected');\n            throw new Error('Failed to prevent payment replay - security risk');\n          }\n          \n          // Clean up cache after successful DB update\n          setTimeout(() => this.orderCache.delete(id), 2000);\n        }\n        \n        return updated;\n      }\n      \n      return undefined;\n    } catch (error) {\n      console.error(\"Update order error:\", error);\n      return undefined;\n    }\n  }\n\n  // ============= NOTES =============\n  \n  async createNote(note: any): Promise<any> {\n    try {\n      const { data, error } = await supabase\n        .from('notes')\n        .insert([{\n          user_id: note.userId,\n          title: note.title,\n          content: note.content || '',\n          category: note.category || 'General',\n          tags: note.tags || '',\n          color: note.color || 'blue',\n          is_pinned: note.isPinned || false,\n          is_archived: note.isArchived || false,\n        }])\n        .select()\n        .single();\n\n      if (error) throw error;\n      return this.toCamelCase(data);\n    } catch (error) {\n      console.error('Create note error:', error);\n      throw error;\n    }\n  }\n\n  async getNoteById(id: string): Promise<any | undefined> {\n    try {\n      const { data, error } = await supabase\n        .from('notes')\n        .select('*')\n        .eq('id', id)\n        .single();\n\n      if (error) throw error;\n      return data ? this.toCamelCase(data) : undefined;\n    } catch (error) {\n      console.error('Get note by ID error:', error);\n      return undefined;\n    }\n  }\n\n  async getNotesByUser(userId: string): Promise<any[]> {\n    try {\n      const { data, error } = await supabase\n        .from('notes')\n        .select('*')\n        .eq('user_id', userId)\n        .order('updated_at', { ascending: false });\n\n      if (error) throw error;\n      return data ? data.map(note => this.toCamelCase(note)) : [];\n    } catch (error) {\n      console.error('Get notes by user error:', error);\n      return [];\n    }\n  }\n\n  async updateNote(id: string, updates: any): Promise<any | undefined> {\n    try {\n      const updateData: any = {\n        updated_at: new Date().toISOString()\n      };\n\n      if (updates.title !== undefined) updateData.title = updates.title;\n      if (updates.content !== undefined) updateData.content = updates.content;\n      if (updates.category !== undefined) updateData.category = updates.category;\n      if (updates.tags !== undefined) updateData.tags = updates.tags;\n      if (updates.color !== undefined) updateData.color = updates.color;\n      if (updates.isPinned !== undefined) updateData.is_pinned = updates.isPinned;\n      if (updates.isArchived !== undefined) updateData.is_archived = updates.isArchived;\n\n      const { data, error } = await supabase\n        .from('notes')\n        .update(updateData)\n        .eq('id', id)\n        .select()\n        .single();\n\n      if (error) throw error;\n      return data ? this.toCamelCase(data) : undefined;\n    } catch (error) {\n      console.error('Update note error:', error);\n      return undefined;\n    }\n  }\n\n  async deleteNote(id: string): Promise<boolean> {\n    try {\n      const { error } = await supabase\n        .from('notes')\n        .delete()\n        .eq('id', id);\n\n      if (error) throw error;\n      return true;\n    } catch (error) {\n      console.error('Delete note error:', error);\n      return false;\n    }\n  }\n}\n\nconsole.log(\"✅ SupabaseStorage class ready\");","size_bytes":31359},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/modals/create-page-modal.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useMutation, useQueryClient, useQuery } from '@tanstack/react-query';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Drawer, DrawerContent, DrawerHeader, DrawerTitle } from '@/components/ui/drawer';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Card, CardContent, CardHeader } from '@/components/ui/card';\nimport { Progress } from '@/components/ui/progress';\nimport { useToast } from '@/hooks/use-toast';\nimport { apiRequest } from '@/lib/queryClient';\nimport { CloudUpload, Plus, X, Palette, Image, FileText, Settings, HelpCircle, MapPin, Calendar, Trash2, ArrowLeft, ArrowRight, Check, Edit, Users, Info as InfoIcon } from 'lucide-react';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { uploadFile } from '@/lib/supabase';\nimport { useIsMobile } from '@/hooks/use-mobile';\n\ninterface CreatePageModalProps {\n  open: boolean;\n  onClose: () => void;\n  editingPage?: any | null;\n}\n\nexport default function CreatePageModal({ open, onClose, editingPage }: CreatePageModalProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const isEditing = !!editingPage;\n  const [formData, setFormData] = useState({\n    title: '',\n    slug: '',\n    tagline: '',\n    description: '',\n    primaryColor: '#2563eb',\n    calendarLink: '',\n    locationLink: '',\n    logoUrl: '',\n    theme: 'Ocean Blue',\n    backgroundType: 'gradient',\n    backgroundValue: 'blue',\n    fontFamily: 'inter',\n    acceptReviews: 'true',\n    faqs: [{ question: '', answer: '' }],\n    businessHours: {\n      monday: '9:00-17:00',\n      tuesday: '9:00-17:00',\n      wednesday: '9:00-17:00',\n      thursday: '9:00-17:00',\n      friday: '9:00-17:00',\n      saturday: 'Closed',\n      sunday: 'Closed'\n    },\n    contactPhone: '',\n    contactEmail: '',\n    businessAddress: '',\n    cancellationPolicy: '',\n    showBusinessHours: 'true',\n    showContactInfo: 'true',\n    services: [{ name: '', description: '', durationMinutes: 60, price: '0', currency: 'USD', imageUrl: '' }],\n    staff: [] as Array<{ name: string; position: string; bio: string; email: string; phone: string; imageUrl: string }>,\n    visitInfo: {\n      parking: true,\n      wheelchairAccessible: true,\n      professionalAtmosphere: true,\n      customInfo: [] as string[]\n    },\n    gallery: [] as string[],\n    businessInfo: {\n      businessType: '',\n      walkInsAccepted: '',\n      parking: '',\n      amenities: '',\n      spokenLanguages: '',\n      kidFriendly: '',\n      appointmentCancellationPolicy: ''\n    }\n  });\n  \n  const [logoFile, setLogoFile] = useState<File | null>(null);\n  const [logoPreview, setLogoPreview] = useState<string>('');\n  const [uploadingLogo, setUploadingLogo] = useState(false);\n  const [currentStep, setCurrentStep] = useState(1);\n  const [slugManuallyEdited, setSlugManuallyEdited] = useState(false);\n  \n  // Gallery state\n  const [uploadingGallery, setUploadingGallery] = useState(false);\n  \n  // Service image upload state\n  const [uploadingServiceIndex, setUploadingServiceIndex] = useState<number | null>(null);\n  \n  // Staff image upload state\n  const [uploadingStaffIndex, setUploadingStaffIndex] = useState<number | null>(null);\n\n  // Fetch page data for editing\n  const { data: editingPageData } = useQuery({\n    queryKey: ['/api/pages/edit', editingPage?.id],\n    enabled: !!(isEditing && editingPage?.id),\n    queryFn: async () => {\n      const response = await apiRequest('GET', `/api/pages/${editingPage.id}/edit`);\n      return response.json();\n    },\n  });\n\n  // Beautiful color themes for booking pages\n  const colorThemes = [\n    { name: 'Ocean Blue', primary: '#2563eb', secondary: '#1e40af', accent: '#3b82f6', gradient: 'from-blue-500 to-blue-600' },\n    { name: 'Forest Green', primary: '#059669', secondary: '#047857', accent: '#10b981', gradient: 'from-emerald-500 to-emerald-600' },\n    { name: 'Sunset Orange', primary: '#ea580c', secondary: '#c2410c', accent: '#fb923c', gradient: 'from-orange-500 to-red-500' },\n    { name: 'Royal Purple', primary: '#7c3aed', secondary: '#6d28d9', accent: '#8b5cf6', gradient: 'from-violet-500 to-purple-600' },\n    { name: 'Rose Gold', primary: '#e11d48', secondary: '#be185d', accent: '#f43f5e', gradient: 'from-rose-500 to-pink-500' },\n    { name: 'Midnight', primary: '#1f2937', secondary: '#111827', accent: '#374151', gradient: 'from-gray-800 to-gray-900' },\n    \n    // New vibrant themes\n    { name: 'Electric Teal', primary: '#14b8a6', secondary: '#0d9488', accent: '#2dd4bf', gradient: 'from-teal-500 to-cyan-500' },\n    { name: 'Coral Sunset', primary: '#f97316', secondary: '#ea580c', accent: '#fb923c', gradient: 'from-orange-400 to-rose-500' },\n    { name: 'Lavender Dreams', primary: '#a855f7', secondary: '#9333ea', accent: '#c084fc', gradient: 'from-purple-400 to-pink-400' },\n    { name: 'Golden Hour', primary: '#f59e0b', secondary: '#d97706', accent: '#fbbf24', gradient: 'from-amber-400 to-orange-500' },\n    { name: 'Arctic Blue', primary: '#0ea5e9', secondary: '#0284c7', accent: '#38bdf8', gradient: 'from-sky-400 to-blue-500' },\n    { name: 'Cherry Blossom', primary: '#ec4899', secondary: '#db2777', accent: '#f472b6', gradient: 'from-pink-400 to-rose-500' },\n    \n    // Professional themes\n    { name: 'Corporate Navy', primary: '#1e3a8a', secondary: '#1e40af', accent: '#3b82f6', gradient: 'from-blue-700 to-indigo-800' },\n    { name: 'Sage Green', primary: '#65a30d', secondary: '#4d7c0f', accent: '#84cc16', gradient: 'from-lime-500 to-green-600' },\n    { name: 'Warm Terracotta', primary: '#dc2626', secondary: '#b91c1c', accent: '#ef4444', gradient: 'from-red-500 to-orange-600' },\n    { name: 'Deep Indigo', primary: '#4338ca', secondary: '#3730a3', accent: '#6366f1', gradient: 'from-indigo-500 to-purple-600' },\n    \n    // Modern minimalist themes  \n    { name: 'Soft Mint', primary: '#10b981', secondary: '#059669', accent: '#34d399', gradient: 'from-emerald-400 to-teal-500' },\n    { name: 'Dusty Rose', primary: '#be123c', secondary: '#9f1239', accent: '#f43f5e', gradient: 'from-rose-400 to-pink-500' },\n    { name: 'Stone Gray', primary: '#57534e', secondary: '#44403c', accent: '#78716c', gradient: 'from-stone-500 to-gray-600' },\n    { name: 'Slate Blue', primary: '#475569', secondary: '#334155', accent: '#64748b', gradient: 'from-slate-500 to-slate-600' },\n    \n    // Creative & vibrant themes\n    { name: 'Tropical Paradise', primary: '#06b6d4', secondary: '#0891b2', accent: '#22d3ee', gradient: 'from-cyan-400 to-teal-500' },\n    { name: 'Sunset Magenta', primary: '#c026d3', secondary: '#a21caf', accent: '#d946ef', gradient: 'from-fuchsia-400 to-pink-500' },\n    { name: 'Ocean Breeze', primary: '#0369a1', secondary: '#075985', accent: '#0284c7', gradient: 'from-sky-500 to-blue-600' },\n    { name: 'Autumn Spice', primary: '#c2410c', secondary: '#9a3412', accent: '#ea580c', gradient: 'from-orange-500 to-red-500' }\n  ];\n\n  const backgroundOptions = [\n    // Gradient backgrounds\n    { type: 'gradient', name: 'Blue Gradient', value: 'blue', class: 'bg-gradient-to-br from-blue-100 to-blue-200' },\n    { type: 'gradient', name: 'Green Gradient', value: 'green', class: 'bg-gradient-to-br from-emerald-100 to-emerald-200' },\n    { type: 'gradient', name: 'Purple Gradient', value: 'purple', class: 'bg-gradient-to-br from-violet-100 to-violet-200' },\n    { type: 'gradient', name: 'Rose Gradient', value: 'rose', class: 'bg-gradient-to-br from-rose-100 to-rose-200' },\n    { type: 'gradient', name: 'Teal Gradient', value: 'teal', class: 'bg-gradient-to-br from-teal-100 to-teal-200' },\n    { type: 'gradient', name: 'Orange Gradient', value: 'orange', class: 'bg-gradient-to-br from-orange-100 to-orange-200' },\n    { type: 'gradient', name: 'Indigo Gradient', value: 'indigo', class: 'bg-gradient-to-br from-indigo-100 to-indigo-200' },\n    { type: 'gradient', name: 'Amber Gradient', value: 'amber', class: 'bg-gradient-to-br from-amber-100 to-amber-200' },\n    \n    // Diagonal gradients\n    { type: 'gradient', name: 'Ocean Waves', value: 'ocean', class: 'bg-gradient-to-r from-cyan-100 to-blue-200' },\n    { type: 'gradient', name: 'Sunset Sky', value: 'sunset', class: 'bg-gradient-to-r from-orange-100 to-pink-200' },\n    { type: 'gradient', name: 'Forest Mist', value: 'forest', class: 'bg-gradient-to-r from-green-100 to-emerald-200' },\n    { type: 'gradient', name: 'Lavender Fields', value: 'lavender', class: 'bg-gradient-to-r from-purple-100 to-pink-200' },\n    \n    // Multi-color gradients\n    { type: 'gradient', name: 'Rainbow Light', value: 'rainbow', class: 'bg-gradient-to-r from-red-100 via-yellow-100 to-green-100' },\n    { type: 'gradient', name: 'Tropical Breeze', value: 'tropical', class: 'bg-gradient-to-br from-teal-100 via-cyan-100 to-blue-100' },\n    { type: 'gradient', name: 'Warm Sunset', value: 'warm-sunset', class: 'bg-gradient-to-br from-yellow-100 via-orange-100 to-red-100' },\n    { type: 'gradient', name: 'Cool Mint', value: 'cool-mint', class: 'bg-gradient-to-br from-green-100 via-teal-100 to-blue-100' },\n    \n    // Solid backgrounds\n    { type: 'solid', name: 'Clean White', value: 'white', class: 'bg-white' },\n    { type: 'solid', name: 'Soft Gray', value: 'gray', class: 'bg-gray-50' },\n    { type: 'solid', name: 'Warm Cream', value: 'cream', class: 'bg-amber-50' },\n    { type: 'solid', name: 'Cool Ice', value: 'ice', class: 'bg-blue-50' },\n    { type: 'solid', name: 'Soft Mint', value: 'soft-mint', class: 'bg-green-50' },\n    { type: 'solid', name: 'Light Lavender', value: 'light-lavender', class: 'bg-purple-50' },\n    \n    // Subtle patterns (using gradients with opacity for pattern-like effects)\n    { type: 'pattern', name: 'Subtle Dots', value: 'dots', class: 'bg-gray-50 bg-dots-pattern' },\n    { type: 'pattern', name: 'Soft Lines', value: 'lines', class: 'bg-gray-50 bg-lines-pattern' },\n    { type: 'pattern', name: 'Light Mesh', value: 'mesh', class: 'bg-gray-50 bg-mesh-pattern' },\n    { type: 'pattern', name: 'Paper Texture', value: 'paper', class: 'bg-stone-50 bg-paper-pattern' }\n  ];\n\n  const fontOptions = [\n    { name: 'Inter (Modern)', value: 'inter', class: 'font-inter' },\n    { name: 'Playfair (Elegant)', value: 'playfair', class: 'font-playfair' },\n    { name: 'Roboto (Clean)', value: 'roboto', class: 'font-roboto' },\n    { name: 'Open Sans (Friendly)', value: 'opensans', class: 'font-opensans' }\n  ];\n\n  const currencyOptions = [\n    { code: 'USD', symbol: '$', name: 'US Dollar' },\n    { code: 'EUR', symbol: '€', name: 'Euro' },\n    { code: 'GBP', symbol: '£', name: 'British Pound' },\n    { code: 'CAD', symbol: 'C$', name: 'Canadian Dollar' },\n    { code: 'AUD', symbol: 'A$', name: 'Australian Dollar' },\n    { code: 'JPY', symbol: '¥', name: 'Japanese Yen' },\n    { code: 'CHF', symbol: 'CHF', name: 'Swiss Franc' },\n    { code: 'CNY', symbol: '¥', name: 'Chinese Yuan' },\n    { code: 'INR', symbol: '₹', name: 'Indian Rupee' },\n    { code: 'KRW', symbol: '₩', name: 'South Korean Won' },\n    { code: 'SEK', symbol: 'kr', name: 'Swedish Krona' },\n    { code: 'NOK', symbol: 'kr', name: 'Norwegian Krone' },\n    { code: 'DKK', symbol: 'kr', name: 'Danish Krone' },\n    { code: 'PLN', symbol: 'zł', name: 'Polish Złoty' },\n    { code: 'BRL', symbol: 'R$', name: 'Brazilian Real' },\n    { code: 'MXN', symbol: '$', name: 'Mexican Peso' },\n    { code: 'SGD', symbol: 'S$', name: 'Singapore Dollar' },\n    { code: 'HKD', symbol: 'HK$', name: 'Hong Kong Dollar' },\n    { code: 'NZD', symbol: 'NZ$', name: 'New Zealand Dollar' },\n    { code: 'ZAR', symbol: 'R', name: 'South African Rand' }\n  ];\n\n  const createPageMutation = useMutation({\n    mutationFn: async (data: any) => {\n      if (isEditing) {\n        const response = await apiRequest('PATCH', `/api/pages/${editingPage.id}`, data);\n        return response.json();\n      } else {\n        const response = await apiRequest('POST', '/api/pages', data);\n        return response.json();\n      }\n    },\n    onSuccess: (data) => {\n      queryClient.refetchQueries({ queryKey: ['/api/pages'] });\n      queryClient.refetchQueries({ queryKey: ['/api/dashboard/stats'] });\n      queryClient.refetchQueries({ queryKey: ['/api/dashboard/analytics-charts'] });\n      queryClient.refetchQueries({ queryKey: ['/api/dashboard/recent-activity'] });\n      \n      // Check if there are warnings about services that couldn't be deleted\n      if (data.warnings?.servicesNotDeleted?.length > 0) {\n        toast({\n          title: isEditing ? \"Page updated with warnings\" : \"Page created!\",\n          description: isEditing \n            ? `Page updated, but ${data.warnings.servicesNotDeleted.length} service(s) with existing appointments couldn't be removed.`\n            : \"Your booking page has been created successfully.\",\n          variant: \"default\",\n        });\n      } else {\n        toast({\n          title: isEditing ? \"Page updated!\" : \"Page created!\",\n          description: isEditing ? \"Your booking page has been updated successfully.\" : \"Your booking page has been created successfully.\",\n        });\n      }\n      \n      onClose();\n      resetForm();\n    },\n    onError: (error: any) => {\n      toast({\n        title: isEditing ? \"Error updating page\" : \"Error creating page\",\n        description: error.message || \"Something went wrong. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const resetForm = () => {\n    const defaultFormData = {\n      title: '',\n      slug: '',\n      tagline: '',\n      description: '',\n      primaryColor: '#2563eb',\n      calendarLink: '',\n      locationLink: '',\n      logoUrl: '',\n      theme: 'Ocean Blue',\n      backgroundType: 'gradient',\n      backgroundValue: 'blue',\n      fontFamily: 'inter',\n      acceptReviews: 'true',\n      faqs: [{ question: '', answer: '' }],\n      businessHours: {\n        monday: '9:00-17:00',\n        tuesday: '9:00-17:00',\n        wednesday: '9:00-17:00',\n        thursday: '9:00-17:00',\n        friday: '9:00-17:00',\n        saturday: 'Closed',\n        sunday: 'Closed'\n      },\n      contactPhone: '',\n      contactEmail: '',\n      businessAddress: '',\n      cancellationPolicy: '',\n      showBusinessHours: 'true',\n      showContactInfo: 'true',\n      services: [{ name: '', description: '', durationMinutes: 60, price: '0', currency: 'USD', imageUrl: '' }],\n      staff: [] as Array<{ name: string; position: string; bio: string; email: string; phone: string; imageUrl: string }>,\n      visitInfo: {\n        parking: true,\n        wheelchairAccessible: true,\n        professionalAtmosphere: true,\n        customInfo: [] as string[]\n      },\n      gallery: [] as string[],\n      businessInfo: {\n        businessType: '',\n        walkInsAccepted: '',\n        parking: '',\n        amenities: '',\n        spokenLanguages: '',\n        kidFriendly: '',\n        appointmentCancellationPolicy: ''\n      }\n    };\n    setFormData(defaultFormData);\n    setLogoFile(null);\n    setLogoPreview('');\n    setUploadingGallery(false);\n  };\n\n  // Pre-populate form when editing\n  useEffect(() => {\n    if (isEditing && editingPageData) {\n      const services = editingPageData.services || [];\n      const formattedServices = services.length > 0 \n        ? services.map((service: any) => ({\n            id: service.id, // Preserve service ID for editing\n            name: service.name || '',\n            description: service.description || '',\n            durationMinutes: service.durationMinutes || 60,\n            price: service.price?.toString() || '0',\n            currency: service.currency || 'USD',\n            imageUrl: service.imageUrl || ''\n          }))\n        : [{ name: '', description: '', durationMinutes: 60, price: '0', currency: 'USD', imageUrl: '' }];\n\n      setFormData({\n        title: editingPageData.title || '',\n        slug: editingPageData.slug || '',\n        tagline: editingPageData.tagline || '',\n        description: editingPageData.data?.description || editingPageData.description || '',\n        primaryColor: editingPageData.primaryColor || '#2563eb',\n        calendarLink: editingPageData.calendarLink || '',\n        locationLink: editingPageData.locationLink || editingPageData.location_link || '',\n        logoUrl: editingPageData.logoUrl || '',\n        theme: editingPageData.theme || 'Ocean Blue',\n        backgroundType: editingPageData.backgroundType || 'gradient',\n        backgroundValue: editingPageData.backgroundValue || 'blue',\n        fontFamily: editingPageData.fontFamily || 'inter',\n        acceptReviews: editingPageData.acceptReviews || 'true',\n        faqs: editingPageData.faqs || [{ question: '', answer: '' }],\n        businessHours: editingPageData.businessHours || {\n          monday: '9:00-17:00',\n          tuesday: '9:00-17:00',\n          wednesday: '9:00-17:00',\n          thursday: '9:00-17:00',\n          friday: '9:00-17:00',\n          saturday: 'Closed',\n          sunday: 'Closed'\n        },\n        contactPhone: editingPageData.contactPhone || '',\n        contactEmail: editingPageData.contactEmail || '',\n        businessAddress: editingPageData.businessAddress || '',\n        cancellationPolicy: editingPageData.cancellationPolicy || '',\n        showBusinessHours: editingPageData.showBusinessHours || 'true',\n        showContactInfo: editingPageData.showContactInfo || 'true',\n        services: formattedServices,\n        staff: editingPageData.data?.staff || [],\n        visitInfo: editingPageData.data?.visitInfo || {\n          parking: true,\n          wheelchairAccessible: true,\n          professionalAtmosphere: true,\n          customInfo: [] as string[]\n        },\n        gallery: (() => {\n          const rawGallery = editingPageData.data?.gallery || editingPageData.gallery || [];\n          // Normalize legacy gallery object structure to simple array\n          if (Array.isArray(rawGallery)) {\n            return rawGallery;\n          }\n          // Handle legacy {banners, logos, images} structure\n          if (typeof rawGallery === 'object' && rawGallery !== null) {\n            const legacy = rawGallery as any;\n            const allImages = [\n              ...(legacy.banners || []),\n              ...(legacy.logos || []),\n              ...(legacy.images || [])\n            ];\n            // Extract URLs from objects or use strings directly\n            return allImages.map((item: any) => \n              typeof item === 'string' ? item : item?.url || ''\n            ).filter((url: string) => url.length > 0);\n          }\n          return [];\n        })(),\n        businessInfo: editingPageData.data?.businessInfo || {\n          businessType: '',\n          walkInsAccepted: '',\n          parking: '',\n          amenities: '',\n          spokenLanguages: '',\n          kidFriendly: '',\n          appointmentCancellationPolicy: ''\n        }\n      });\n      \n      // Set logo preview if there's a logoUrl\n      if (editingPageData.logoUrl) {\n        setLogoPreview(editingPageData.logoUrl);\n      }\n    } else if (!isEditing) {\n      resetForm();\n    }\n  }, [isEditing, editingPageData]);\n\n  const selectColorTheme = (theme: any) => {\n    setFormData(prev => ({\n      ...prev,\n      primaryColor: theme.primary,\n      theme: theme.name\n    }));\n  };\n\n  const handleLogoUpload = async (file: File) => {\n    setUploadingLogo(true);\n    try {\n      // Create preview\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setLogoPreview(e.target?.result as string);\n      };\n      reader.readAsDataURL(file);\n\n      // Upload to Supabase\n      const result = await uploadFile(file, 'logos');\n      \n      if (result.success && result.url) {\n        setFormData(prev => ({ ...prev, logoUrl: result.url || '' }));\n        setLogoFile(file);\n        toast({\n          title: \"Logo uploaded!\",\n          description: \"Your logo has been uploaded successfully.\",\n        });\n      } else {\n        toast({\n          title: \"Upload failed\",\n          description: result.error || \"Failed to upload logo. Please try again.\",\n          variant: \"destructive\",\n        });\n      }\n    } catch (error) {\n      toast({\n        title: \"Upload error\",\n        description: \"Something went wrong while uploading your logo.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setUploadingLogo(false);\n    }\n  };\n\n  const handleServiceImageUpload = async (serviceIndex: number, file: File) => {\n    setUploadingServiceIndex(serviceIndex);\n    try {\n      // Validate file size\n      if (file.size > 5 * 1024 * 1024) {\n        toast({\n          title: \"File too large\",\n          description: \"Image must be less than 5MB\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      // Validate file type\n      if (!file.type.startsWith('image/')) {\n        toast({\n          title: \"Invalid file type\",\n          description: \"Please select an image file\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      // Upload to Supabase\n      const result = await uploadFile(file, 'service-images');\n      \n      if (result.success && result.url) {\n        updateService(serviceIndex, 'imageUrl', result.url);\n        toast({\n          title: \"Image uploaded!\",\n          description: \"Service image has been uploaded successfully.\",\n        });\n      } else {\n        toast({\n          title: \"Upload failed\",\n          description: result.error || \"Failed to upload image. Please try again.\",\n          variant: \"destructive\",\n        });\n      }\n    } catch (error) {\n      toast({\n        title: \"Upload error\",\n        description: \"Something went wrong while uploading the image.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setUploadingServiceIndex(null);\n    }\n  };\n\n  const handleStaffImageUpload = async (staffIndex: number, file: File) => {\n    setUploadingStaffIndex(staffIndex);\n    try {\n      // Validate file size\n      if (file.size > 5 * 1024 * 1024) {\n        toast({\n          title: \"File too large\",\n          description: \"Image must be less than 5MB\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      // Validate file type\n      if (!file.type.startsWith('image/')) {\n        toast({\n          title: \"Invalid file type\",\n          description: \"Please select an image file\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      // Upload to Supabase\n      const result = await uploadFile(file, 'staff-images');\n      \n      if (result.success && result.url) {\n        updateStaffMember(staffIndex, 'imageUrl', result.url);\n        toast({\n          title: \"Image uploaded!\",\n          description: \"Profile picture has been uploaded successfully.\",\n        });\n      } else {\n        toast({\n          title: \"Upload failed\",\n          description: result.error || \"Failed to upload image. Please try again.\",\n          variant: \"destructive\",\n        });\n      }\n    } catch (error) {\n      toast({\n        title: \"Upload error\",\n        description: \"Something went wrong while uploading the image.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setUploadingStaffIndex(null);\n    }\n  };\n\n  const generateSlug = (title: string) => {\n    return title\n      .toLowerCase()\n      .trim()\n      .replace(/[^a-z0-9\\s-]/g, '')\n      .replace(/\\s+/g, '-')\n      .slice(0, 50);\n  };\n\n  const handleTitleChange = (value: string) => {\n    setFormData(prev => ({\n      ...prev,\n      title: value,\n      slug: !slugManuallyEdited ? generateSlug(value) : prev.slug\n    }));\n  };\n\n  const handleSlugChange = (value: string) => {\n    setSlugManuallyEdited(true);\n    setFormData(prev => ({ ...prev, slug: value }));\n  };\n\n  // Step definitions\n  const steps = [\n    {\n      number: 1,\n      title: \"Basic Details\",\n      description: \"Set up your booking page name, web address, tagline and description\",\n      icon: Edit,\n      fields: ['title', 'slug', 'tagline', 'description']\n    },\n    {\n      number: 2,\n      title: \"Team & Staff\",\n      description: \"Add your team members and their information\",\n      icon: Users,\n      fields: ['staff']\n    },\n    {\n      number: 3, \n      title: \"Services & Pricing\",\n      description: \"Add your services, set pricing and duration for each offering\",\n      icon: FileText,\n      fields: ['services']\n    },\n    {\n      number: 4,\n      title: \"Style & Branding\", \n      description: \"Customize colors, themes, and upload your logo\",\n      icon: Palette,\n      fields: ['theme', 'primaryColor', 'backgroundType', 'backgroundValue', 'fontFamily', 'logoUrl']\n    },\n    {\n      number: 5,\n      title: \"Business Information\",\n      description: \"Add contact details, business hours, location and visit information\",\n      icon: Settings,\n      fields: ['contactPhone', 'contactEmail', 'businessAddress', 'businessHours', 'locationLink', 'cancellationPolicy', 'visitInfo']\n    },\n    {\n      number: 6,\n      title: \"Information\",\n      description: \"Add business details like type, parking, amenities and policies\",\n      icon: InfoIcon,\n      fields: ['businessInfo']\n    },\n    {\n      number: 7,\n      title: \"Review & Publish\",\n      description: \"Review your booking page and publish it to the world\",\n      icon: Check,\n      fields: []\n    }\n  ];\n\n  // Calculate progress percentage\n  const getProgress = () => {\n    return ((currentStep - 1) / (steps.length - 1)) * 100;\n  };\n\n  const validateStep = (step: number) => {\n    switch (step) {\n      case 1:\n        return formData.title.trim() && formData.slug.trim() && formData.description.trim();\n      case 2:\n        return true; // Staff is optional\n      case 3:\n        return formData.services.some(service => service.name.trim() && service.price);\n      case 4:\n        return true; // Styling is optional\n      case 5:\n        return true; // Business info is optional  \n      case 6:\n        return formData.contactPhone.trim(); // Phone is mandatory for Information step\n      case 7:\n        return true; // Review step\n      default:\n        return false;\n    }\n  };\n\n  const nextStep = () => {\n    if (validateStep(currentStep)) {\n      setCurrentStep(prev => Math.min(prev + 1, steps.length));\n    } else {\n      toast({\n        title: \"Please complete required fields\",\n        description: \"Fill in the required information before proceeding to the next step.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const prevStep = () => {\n    setCurrentStep(prev => Math.max(prev - 1, 1));\n  };\n\n  const addService = () => {\n    setFormData(prev => ({\n      ...prev,\n      services: [...prev.services, { name: '', description: '', durationMinutes: 60, price: '0', currency: 'USD', imageUrl: '' }]\n    }));\n  };\n\n  const removeService = (index: number) => {\n    if (formData.services.length > 1) {\n      setFormData(prev => ({\n        ...prev,\n        services: prev.services.filter((_, i) => i !== index)\n      }));\n    }\n  };\n\n  const addStaffMember = () => {\n    setFormData(prev => ({\n      ...prev,\n      staff: [...prev.staff, { name: '', position: '', bio: '', email: '', phone: '', imageUrl: '' }]\n    }));\n  };\n\n  const removeStaffMember = (index: number) => {\n    if (formData.staff.length > 1) {\n      setFormData(prev => ({\n        ...prev,\n        staff: prev.staff.filter((_, i) => i !== index)\n      }));\n    }\n  };\n\n  const updateStaffMember = (index: number, field: string, value: string) => {\n    setFormData(prev => ({\n      ...prev,\n      staff: prev.staff.map((member, i) => \n        i === index ? { ...member, [field]: value } : member\n      )\n    }));\n  };\n\n  const addCustomVisitInfo = () => {\n    setFormData(prev => ({\n      ...prev,\n      visitInfo: {\n        ...prev.visitInfo,\n        customInfo: [...prev.visitInfo.customInfo, '']\n      }\n    }));\n  };\n\n  const removeCustomVisitInfo = (index: number) => {\n    setFormData(prev => ({\n      ...prev,\n      visitInfo: {\n        ...prev.visitInfo,\n        customInfo: prev.visitInfo.customInfo.filter((_, i) => i !== index)\n      }\n    }));\n  };\n\n  const updateCustomVisitInfo = (index: number, value: string) => {\n    setFormData(prev => ({\n      ...prev,\n      visitInfo: {\n        ...prev.visitInfo,\n        customInfo: prev.visitInfo.customInfo.map((info, i) => \n          i === index ? value : info\n        )\n      }\n    }));\n  };\n\n  const updateService = (index: number, field: string, value: any) => {\n    setFormData(prev => ({\n      ...prev,\n      services: prev.services.map((service, i) =>\n        i === index ? { ...service, [field]: value } : service\n      )\n    }));\n  };\n\n  const addFaq = () => {\n    setFormData(prev => ({\n      ...prev,\n      faqs: [...prev.faqs, { question: '', answer: '' }]\n    }));\n  };\n\n  const removeFaq = (index: number) => {\n    if (formData.faqs.length > 1) {\n      setFormData(prev => ({\n        ...prev,\n        faqs: prev.faqs.filter((_, i) => i !== index)\n      }));\n    }\n  };\n\n  const updateFaq = (index: number, field: string, value: string) => {\n    setFormData(prev => ({\n      ...prev,\n      faqs: prev.faqs.map((faq, i) =>\n        i === index ? { ...faq, [field]: value } : faq\n      )\n    }));\n  };\n\n  // Gallery functions\n  const handleGalleryUpload = async (files: FileList) => {\n    if (files.length === 0) return;\n    \n    setUploadingGallery(true);\n    try {\n      const uploadPromises = Array.from(files).map(file => uploadFile(file, 'gallery-images'));\n      const results = await Promise.all(uploadPromises);\n      \n      const successfulUploads = results.filter(r => r.success && r.url).map(r => r.url as string);\n      \n      if (successfulUploads.length > 0) {\n        setFormData(prev => ({\n          ...prev,\n          gallery: [...prev.gallery, ...successfulUploads]\n        }));\n        toast({\n          title: \"Images uploaded!\",\n          description: `Successfully uploaded ${successfulUploads.length} image${successfulUploads.length > 1 ? 's' : ''}.`,\n        });\n      } else {\n        toast({\n          title: \"Upload failed\",\n          description: \"Failed to upload images. Please try again.\",\n          variant: \"destructive\",\n        });\n      }\n    } catch (error) {\n      console.error('Error uploading gallery images:', error);\n      toast({\n        title: \"Upload error\",\n        description: \"Something went wrong while uploading images.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setUploadingGallery(false);\n    }\n  };\n  \n  const removeGalleryImage = (index: number) => {\n    setFormData(prev => ({\n      ...prev,\n      gallery: prev.gallery.filter((_, i) => i !== index)\n    }));\n    toast({\n      title: \"Image removed\",\n      description: \"The image has been removed from your gallery.\",\n    });\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!formData.title || !formData.slug) {\n      toast({\n        title: \"Missing fields\",\n        description: \"Please fill in the title and slug.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    // For editing, don't check slug uniqueness\n    if (isEditing && editingPage && formData.slug !== editingPage.slug) {\n      // If slug is being changed during edit, we still need to validate it\n      // This will be handled by the backend\n    }\n\n    const servicesWithNumbers = formData.services.map(service => ({\n      ...service,\n      price: parseFloat(service.price) || 0,\n      durationMinutes: parseInt(service.durationMinutes.toString()) || 60\n    }));\n\n    // Filter out empty FAQs\n    const validFaqs = formData.faqs.filter(faq => faq.question.trim() && faq.answer.trim());\n    \n    // Filter out staff members without names\n    const validStaff = formData.staff.filter(member => member.name.trim());\n\n    // Transform gallery array to object format expected by database\n    const galleryObject = {\n      logos: [],\n      banners: [],\n      images: formData.gallery\n    };\n\n    // Destructure to exclude fields that should go in data\n    const { description, staff, visitInfo, gallery, businessInfo, services, faqs, ...pageFields } = formData;\n    \n    createPageMutation.mutate({\n      ...pageFields,\n      gallery: galleryObject,\n      services: servicesWithNumbers,\n      faqs: validFaqs,\n      data: {\n        description: formData.description,\n        staff: validStaff,\n        visitInfo: formData.visitInfo,\n        businessInfo: formData.businessInfo\n      }\n    });\n  };\n\n  const renderStepContent = () => {\n    switch (currentStep) {\n      case 1:\n        return (\n          <div className=\"space-y-6\">\n            <Card className=\"glass-prism-card border-none shadow-lg\">\n              <CardHeader>\n                <h3 className=\"text-lg font-semibold text-blue-gradient flex items-center gap-2\">\n                  <Edit className=\"h-5 w-5\" />\n                  Basic Information\n                </h3>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"grid md:grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"title\" className=\"text-base font-medium\">Page Title *</Label>\n                    <Input\n                      id=\"title\"\n                      placeholder=\"e.g., Personal Training\"\n                      value={formData.title}\n                      onChange={(e) => handleTitleChange(e.target.value)}\n                      className=\"glass-effect border-border/50 mt-2\"\n                      required\n                      data-testid=\"input-page-title\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"slug\" className=\"text-base font-medium\">URL Slug *</Label>\n                    <div className=\"flex mt-2\">\n                      <span className=\"inline-flex items-center px-3 rounded-l-xl border border-r-0 border-border/50 glass-effect text-muted-foreground text-sm\">\n                        bookinggen.xyz/\n                      </span>\n                      <Input\n                        id=\"slug\"\n                        placeholder=\"personal-training\"\n                        value={formData.slug}\n                        onChange={(e) => handleSlugChange(e.target.value)}\n                        className=\"rounded-l-none glass-effect border-border/50\"\n                        required\n                        data-testid=\"input-page-slug\"\n                      />\n                    </div>\n                  </div>\n                </div>\n                \n                <div>\n                  <Label htmlFor=\"tagline\" className=\"text-base font-medium\">Tagline</Label>\n                  <Input\n                    id=\"tagline\"\n                    placeholder=\"Transform your fitness journey with personalized training\"\n                    value={formData.tagline}\n                    onChange={(e) => setFormData(prev => ({ ...prev, tagline: e.target.value }))}\n                    className=\"glass-effect border-border/50 mt-2\"\n                    data-testid=\"input-tagline\"\n                  />\n                  <p className=\"text-sm text-muted-foreground mt-2\">\n                    A catchy subtitle that describes what you offer\n                  </p>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"description\" className=\"text-base font-medium\">Business Description *</Label>\n                  <textarea\n                    id=\"description\"\n                    placeholder=\"Describe your business, services, and what makes you unique. This will appear in the About section of your booking page...\"\n                    value={formData.description}\n                    onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n                    className=\"w-full min-h-[120px] px-3 py-2 glass-effect border-border/50 mt-2 rounded-xl resize-vertical\"\n                    required\n                    data-testid=\"textarea-description\"\n                  />\n                  <p className=\"text-sm text-muted-foreground mt-2\">\n                    Tell potential clients about your expertise, experience, and approach\n                  </p>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        );\n\n      case 2:\n        return (\n          <div className=\"space-y-6\">\n            <Card className=\"glass-prism-card border-none shadow-lg\">\n              <CardHeader>\n                <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0\">\n                  <h3 className=\"text-lg font-semibold text-blue-gradient flex items-center gap-2\">\n                    <Users className=\"h-5 w-5\" />\n                    Team & Staff\n                  </h3>\n                  <Button \n                    type=\"button\" \n                    onClick={addStaffMember} \n                    className=\"bg-blue-600 hover:bg-blue-700 text-white font-medium px-3 sm:px-4 py-2 rounded-xl transition-all duration-200 hover:scale-105 shadow-lg min-touch-target w-full sm:w-auto\" \n                    size=\"sm\"\n                    data-testid=\"button-add-staff\"\n                  >\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Add Staff Member\n                  </Button>\n                </div>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                {formData.staff.length === 0 ? (\n                  <div className=\"text-center py-8\">\n                    <Users className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n                    <h4 className=\"text-lg font-medium mb-2\">No Staff Members Added</h4>\n                    <p className=\"text-sm text-muted-foreground mb-4\">\n                      Add your team members to build trust with potential clients. Staff information will appear in the Staff section of your booking page.\n                    </p>\n                  </div>\n                ) : (\n                  formData.staff.map((member, index) => (\n                    <Card key={index} className=\"glass-effect border-border/50 shadow-sm\">\n                      <CardHeader className=\"pb-3\">\n                        <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-2 sm:gap-0\">\n                          <h4 className=\"text-sm font-medium\">Staff Member #{index + 1}</h4>\n                          <div className=\"flex items-center gap-2\">\n                            <Button\n                              type=\"button\"\n                              onClick={addStaffMember}\n                              size=\"sm\"\n                              className=\"glass-effect hover-lift rounded-xl min-touch-target flex-1 sm:flex-none\"\n                            >\n                              <Plus className=\"h-4 w-4 mr-2\" />\n                              Add Another\n                            </Button>\n                            <Button\n                              type=\"button\"\n                              variant=\"ghost\"\n                              size=\"sm\"\n                              onClick={() => removeStaffMember(index)}\n                              className=\"hover-lift min-touch-target\"\n                            >\n                              <Trash2 className=\"h-4 w-4\" />\n                            </Button>\n                          </div>\n                        </div>\n                      </CardHeader>\n                      <CardContent className=\"pt-0 space-y-4\">\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                          <div>\n                            <Label className=\"text-base font-medium\">Name</Label>\n                            <Input\n                              placeholder=\"e.g., John Smith\"\n                              value={member.name}\n                              onChange={(e) => updateStaffMember(index, 'name', e.target.value)}\n                              className=\"glass-effect border-border/50 mt-2\"\n                              data-testid={`input-staff-name-${index}`}\n                            />\n                          </div>\n                          \n                          <div>\n                            <Label className=\"text-base font-medium\">Position/Title</Label>\n                            <Input\n                              placeholder=\"e.g., Senior Trainer, Massage Therapist\"\n                              value={member.position}\n                              onChange={(e) => updateStaffMember(index, 'position', e.target.value)}\n                              className=\"glass-effect border-border/50 mt-2\"\n                              data-testid={`input-staff-position-${index}`}\n                            />\n                          </div>\n                        </div>\n\n                        <div>\n                          <Label className=\"text-base font-medium\">Bio</Label>\n                          <textarea\n                            placeholder=\"Brief description of experience, specialties, and qualifications...\"\n                            value={member.bio}\n                            onChange={(e) => updateStaffMember(index, 'bio', e.target.value)}\n                            rows={3}\n                            className=\"w-full px-3 py-2 glass-effect border-border/50 mt-2 rounded-xl resize-vertical\"\n                            data-testid={`textarea-staff-bio-${index}`}\n                          />\n                        </div>\n\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                          <div>\n                            <Label className=\"text-base font-medium\">Email</Label>\n                            <Input\n                              type=\"email\"\n                              placeholder=\"john@example.com\"\n                              value={member.email}\n                              onChange={(e) => updateStaffMember(index, 'email', e.target.value)}\n                              className=\"glass-effect border-border/50 mt-2\"\n                              data-testid={`input-staff-email-${index}`}\n                            />\n                          </div>\n                          \n                          <div>\n                            <Label className=\"text-base font-medium\">Phone</Label>\n                            <Input\n                              type=\"tel\"\n                              placeholder=\"(555) 123-4567\"\n                              value={member.phone}\n                              onChange={(e) => updateStaffMember(index, 'phone', e.target.value)}\n                              className=\"glass-effect border-border/50 mt-2\"\n                              data-testid={`input-staff-phone-${index}`}\n                            />\n                          </div>\n                        </div>\n\n                        {/* Staff Profile Image Upload */}\n                        <div className=\"pt-4 border-t border-border/30\">\n                          <Label className=\"text-base font-medium flex items-center gap-2 mb-3\">\n                            <Image className=\"h-4 w-4\" />\n                            Profile Picture (Optional)\n                          </Label>\n                          <div className=\"flex items-center gap-4\">\n                            {member.imageUrl && (\n                              <div className=\"w-20 h-20 rounded-full border border-border/50 overflow-hidden flex-shrink-0 glass-effect\">\n                                <img\n                                  src={member.imageUrl}\n                                  alt={`${member.name} profile`}\n                                  className=\"w-full h-full object-cover\"\n                                  data-testid={`img-staff-preview-${index}`}\n                                />\n                              </div>\n                            )}\n                            \n                            <div className=\"flex-1\">\n                              <input\n                                type=\"file\"\n                                accept=\"image/*\"\n                                onChange={(e) => {\n                                  const file = e.target.files?.[0];\n                                  if (file) handleStaffImageUpload(index, file);\n                                }}\n                                className=\"hidden\"\n                                id={`staff-image-upload-${index}`}\n                                data-testid={`input-staff-image-${index}`}\n                              />\n                              <div className=\"flex gap-2 flex-wrap\">\n                                <Button\n                                  type=\"button\"\n                                  variant=\"outline\"\n                                  size=\"sm\"\n                                  onClick={() => document.getElementById(`staff-image-upload-${index}`)?.click()}\n                                  disabled={uploadingStaffIndex === index}\n                                  data-testid={`button-upload-staff-image-${index}`}\n                                  className=\"glass-effect border-border/50\"\n                                >\n                                  <CloudUpload className=\"w-4 h-4 mr-2\" />\n                                  {uploadingStaffIndex === index ? 'Uploading...' : member.imageUrl ? 'Change Picture' : 'Upload Picture'}\n                                </Button>\n                                {member.imageUrl && (\n                                  <Button\n                                    type=\"button\"\n                                    variant=\"ghost\"\n                                    size=\"sm\"\n                                    onClick={() => updateStaffMember(index, 'imageUrl', '')}\n                                    data-testid={`button-remove-staff-image-${index}`}\n                                  >\n                                    <X className=\"w-4 h-4 mr-1\" />\n                                    Remove\n                                  </Button>\n                                )}\n                              </div>\n                              <p className=\"text-xs text-muted-foreground mt-2\">\n                                Recommended: Square image, max 5MB\n                              </p>\n                            </div>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))\n                )}\n              </CardContent>\n            </Card>\n          </div>\n        );\n\n      case 3:\n        return (\n          <div className=\"space-y-6\">\n            <Card className=\"glass-prism-card border-none shadow-lg\">\n              <CardHeader>\n                <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0\">\n                  <h3 className=\"text-lg font-semibold text-blue-gradient flex items-center gap-2\">\n                    <FileText className=\"h-5 w-5\" />\n                    Your Services\n                  </h3>\n                  <Button \n                    type=\"button\" \n                    onClick={addService} \n                    className=\"bg-blue-600 hover:bg-blue-700 text-white font-medium px-3 sm:px-4 py-2 rounded-xl transition-all duration-200 hover:scale-105 shadow-lg min-touch-target w-full sm:w-auto\" \n                    size=\"sm\"\n                    data-testid=\"button-add-service\"\n                  >\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Add Service\n                  </Button>\n                </div>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                {formData.services.map((service, index) => (\n                  <Card key={index} className=\"glass-effect border-border/50 shadow-sm\">\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-3\">\n                      <h4 className=\"text-sm font-medium\">Service #{index + 1}</h4>\n                      {formData.services.length > 1 && (\n                        <Button\n                          type=\"button\"\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => removeService(index)}\n                          className=\"hover-lift\"\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      )}\n                    </CardHeader>\n                    <CardContent className=\"pt-0 space-y-4\">\n                      <div>\n                        <Label className=\"text-base font-medium\">Service Name *</Label>\n                        <Input\n                          placeholder=\"e.g., 60-minute consultation\"\n                          value={service.name}\n                          onChange={(e) => updateService(index, 'name', e.target.value)}\n                          className=\"glass-effect border-border/50 mt-2\"\n                        />\n                      </div>\n                      \n                      <div>\n                        <Label className=\"text-base font-medium\">Description</Label>\n                        <textarea\n                          placeholder=\"Describe what's included in this service...\"\n                          value={service.description}\n                          onChange={(e) => updateService(index, 'description', e.target.value)}\n                          rows={2}\n                          className=\"w-full px-3 py-2 glass-effect border-border/50 mt-2 rounded-xl resize-vertical\"\n                        />\n                      </div>\n\n                      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                        <div>\n                          <Label className=\"text-base font-medium\">Duration (minutes)</Label>\n                          <Input\n                            type=\"number\"\n                            placeholder=\"60\"\n                            value={service.durationMinutes}\n                            onChange={(e) => updateService(index, 'durationMinutes', parseInt(e.target.value) || 60)}\n                            className=\"glass-effect border-border/50 mt-2 min-touch-target\"\n                          />\n                        </div>\n                        \n                        <div>\n                          <Label className=\"text-base font-medium\">Price *</Label>\n                          <div className=\"flex gap-2 mt-2\">\n                            <Select\n                              value={service.currency || 'USD'}\n                              onValueChange={(value) => updateService(index, 'currency', value)}\n                            >\n                              <SelectTrigger className=\"w-20 sm:w-24 glass-effect border-border/50 min-touch-target\">\n                                <SelectValue>\n                                  {currencyOptions.find(c => c.code === (service.currency || 'USD'))?.symbol || '$'}\n                                </SelectValue>\n                              </SelectTrigger>\n                              <SelectContent>\n                                {currencyOptions.map((currency) => (\n                                  <SelectItem key={currency.code} value={currency.code}>\n                                    {currency.symbol} {currency.code}\n                                  </SelectItem>\n                                ))}\n                              </SelectContent>\n                            </Select>\n                            <Input\n                              type=\"number\"\n                              step=\"0.01\"\n                              placeholder=\"99.00\"\n                              value={service.price}\n                              onChange={(e) => updateService(index, 'price', e.target.value)}\n                              className=\"flex-1 glass-effect border-border/50 min-touch-target\"\n                            />\n                          </div>\n                        </div>\n                      </div>\n\n                      {/* Service Image Upload */}\n                      <div className=\"pt-4 border-t border-border/30\">\n                        <Label className=\"text-base font-medium flex items-center gap-2 mb-3\">\n                          <Image className=\"h-4 w-4\" />\n                          Service Image (Optional)\n                        </Label>\n                        <div className=\"flex items-center gap-4\">\n                          {service.imageUrl && (\n                            <div className=\"w-20 h-20 rounded-lg border border-border/50 overflow-hidden flex-shrink-0 glass-effect\">\n                              <img\n                                src={service.imageUrl}\n                                alt={`${service.name} preview`}\n                                className=\"w-full h-full object-cover\"\n                                data-testid={`img-service-preview-${index}`}\n                              />\n                            </div>\n                          )}\n                          \n                          <div className=\"flex-1\">\n                            <input\n                              type=\"file\"\n                              accept=\"image/*\"\n                              onChange={(e) => {\n                                const file = e.target.files?.[0];\n                                if (file) handleServiceImageUpload(index, file);\n                              }}\n                              className=\"hidden\"\n                              id={`service-image-upload-${index}`}\n                              data-testid={`input-service-image-${index}`}\n                            />\n                            <div className=\"flex gap-2 flex-wrap\">\n                              <Button\n                                type=\"button\"\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={() => document.getElementById(`service-image-upload-${index}`)?.click()}\n                                disabled={uploadingServiceIndex === index}\n                                data-testid={`button-upload-service-image-${index}`}\n                                className=\"glass-effect border-border/50\"\n                              >\n                                <CloudUpload className=\"w-4 h-4 mr-2\" />\n                                {uploadingServiceIndex === index ? 'Uploading...' : service.imageUrl ? 'Change Image' : 'Upload Image'}\n                              </Button>\n                              {service.imageUrl && (\n                                <Button\n                                  type=\"button\"\n                                  variant=\"ghost\"\n                                  size=\"sm\"\n                                  onClick={() => updateService(index, 'imageUrl', '')}\n                                  data-testid={`button-remove-service-image-${index}`}\n                                >\n                                  <X className=\"w-4 h-4 mr-1\" />\n                                  Remove\n                                </Button>\n                              )}\n                            </div>\n                            <p className=\"text-xs text-muted-foreground mt-2\">\n                              Recommended: 16:9 or square image, max 5MB\n                            </p>\n                          </div>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </CardContent>\n            </Card>\n          </div>\n        );\n\n      case 4:\n        return (\n          <div className=\"space-y-6\">\n            <Card className=\"glass-prism-card border-none shadow-lg\">\n              <CardHeader>\n                <h3 className=\"text-lg font-semibold text-blue-gradient flex items-center gap-2\">\n                  <Palette className=\"h-5 w-5\" />\n                  Style & Branding\n                </h3>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div>\n                  <Label className=\"text-base font-medium mb-4 block\">Color Theme</Label>\n                  <div className=\"max-h-64 overflow-y-auto glass-effect rounded-xl p-2 sm:p-3 border border-border/50\">\n                    <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-3\">\n                      {colorThemes.map((theme, index) => (\n                        <button\n                          key={index}\n                          type=\"button\"\n                          onClick={() => selectColorTheme(theme)}\n                          className={`p-2 sm:p-3 rounded-xl border-2 transition-all hover:scale-105 hover-lift glass-effect min-touch-target ${\n                            formData.theme === theme.name \n                              ? 'border-blue-500 shadow-lg ring-2 ring-blue-200 bg-blue-50/50' \n                              : 'border-border/50 hover:border-border'\n                          }`}\n                        >\n                          <div className={`w-full h-6 sm:h-8 rounded mb-1 sm:mb-2 bg-gradient-to-r ${theme.gradient}`}></div>\n                          <span className=\"text-xs sm:text-sm font-medium break-words\">{theme.name}</span>\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n\n                <div>\n                  <Label className=\"text-base font-medium mb-4 block\">Upload Logo (Optional)</Label>\n                  <div className=\"border-2 border-dashed border-border/50 rounded-xl p-6 text-center glass-effect\">\n                    {logoPreview ? (\n                      <div className=\"space-y-4\">\n                        <img src={logoPreview} alt=\"Logo preview\" className=\"w-20 h-20 object-contain mx-auto rounded-lg border border-border/20\" />\n                        <div className=\"flex gap-2 justify-center\">\n                          <Button\n                            type=\"button\"\n                            onClick={() => document.getElementById('logo-upload')?.click()}\n                            disabled={uploadingLogo}\n                            variant=\"outline\"\n                            className=\"glass-effect hover-lift rounded-xl\"\n                            data-testid=\"button-change-logo\"\n                          >\n                            Change Logo\n                          </Button>\n                          <Button\n                            type=\"button\"\n                            onClick={() => {\n                              setLogoPreview('');\n                              setLogoFile(null);\n                              setFormData(prev => ({ ...prev, logoUrl: '' }));\n                            }}\n                            variant=\"destructive\"\n                            className=\"hover-lift rounded-xl\"\n                            data-testid=\"button-remove-logo\"\n                          >\n                            Remove Logo\n                          </Button>\n                        </div>\n                      </div>\n                    ) : (\n                      <div className=\"space-y-4\">\n                        <CloudUpload className=\"h-12 w-12 text-muted-foreground mx-auto\" />\n                        <Button\n                          type=\"button\"\n                          onClick={() => document.getElementById('logo-upload')?.click()}\n                          disabled={uploadingLogo}\n                          className=\"bg-blue-600 hover:bg-blue-700 text-white font-medium px-6 py-2 rounded-xl transition-all duration-200 hover:scale-105 shadow-lg\"\n                          data-testid=\"button-upload-logo\"\n                        >\n                          {uploadingLogo ? 'Uploading...' : 'Upload Logo'}\n                        </Button>\n                        <p className=\"text-sm text-muted-foreground\">PNG, JPG up to 5MB</p>\n                      </div>\n                    )}\n                    <input\n                      id=\"logo-upload\"\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={(e) => e.target.files?.[0] && handleLogoUpload(e.target.files[0])}\n                      className=\"hidden\"\n                    />\n                  </div>\n                </div>\n\n                {/* Photo Gallery */}\n                <div>\n                  <Label className=\"text-base font-medium mb-4 block\">Photo Gallery (Optional)</Label>\n                  <div className=\"border-2 border-dashed border-border/50 rounded-xl p-6 glass-effect\">\n                    <div className=\"text-center space-y-4 mb-4\">\n                      <CloudUpload className=\"h-12 w-12 text-muted-foreground mx-auto\" />\n                      <div>\n                        <Button\n                          type=\"button\"\n                          onClick={() => document.getElementById('gallery-upload')?.click()}\n                          disabled={uploadingGallery}\n                          className=\"bg-blue-600 hover:bg-blue-700 text-white font-medium px-6 py-2 rounded-xl transition-all duration-200 hover:scale-105 shadow-lg\"\n                          data-testid=\"button-upload-gallery\"\n                        >\n                          {uploadingGallery ? 'Uploading...' : 'Upload Images'}\n                        </Button>\n                        <input\n                          id=\"gallery-upload\"\n                          type=\"file\"\n                          accept=\"image/*\"\n                          multiple\n                          onChange={(e) => e.target.files && handleGalleryUpload(e.target.files)}\n                          className=\"hidden\"\n                        />\n                      </div>\n                      <p className=\"text-sm text-muted-foreground\">\n                        Upload multiple images to showcase your business. PNG, JPG up to 5MB each\n                      </p>\n                    </div>\n\n                    {/* Gallery Preview */}\n                    {formData.gallery.length > 0 && (\n                      <div className=\"mt-4 pt-4 border-t border-border/30\">\n                        <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3\">\n                          {formData.gallery.map((imageUrl, index) => (\n                            <div key={index} className=\"relative group aspect-square rounded-lg overflow-hidden border border-border/30\">\n                              <img \n                                src={imageUrl} \n                                alt={`Gallery ${index + 1}`} \n                                className=\"w-full h-full object-cover\"\n                              />\n                              <div className=\"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center\">\n                                <Button\n                                  type=\"button\"\n                                  size=\"sm\"\n                                  variant=\"destructive\"\n                                  onClick={() => removeGalleryImage(index)}\n                                  className=\"rounded-full\"\n                                  data-testid={`button-remove-gallery-${index}`}\n                                >\n                                  <X className=\"h-4 w-4\" />\n                                </Button>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                        <p className=\"text-sm text-muted-foreground mt-3\">\n                          {formData.gallery.length} image{formData.gallery.length > 1 ? 's' : ''} uploaded\n                        </p>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        );\n\n      case 5:\n        return (\n          <div className=\"space-y-6\">\n            <Card className=\"glass-prism-card border-none shadow-lg\">\n              <CardHeader>\n                <h3 className=\"text-lg font-semibold text-blue-gradient flex items-center gap-2\">\n                  <Settings className=\"h-5 w-5\" />\n                  Business Information\n                </h3>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div className=\"grid md:grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"contactPhone\" className=\"text-base font-medium\">Phone Number</Label>\n                    <Input\n                      id=\"contactPhone\"\n                      type=\"tel\"\n                      placeholder=\"+1 (555) 123-4567\"\n                      value={formData.contactPhone}\n                      onChange={(e) => setFormData(prev => ({ ...prev, contactPhone: e.target.value }))}\n                      className=\"glass-effect border-border/50 mt-2\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"contactEmail\" className=\"text-base font-medium\">Email Address</Label>\n                    <Input\n                      id=\"contactEmail\"\n                      type=\"email\"\n                      placeholder=\"contact@yourbusiness.com\"\n                      value={formData.contactEmail}\n                      onChange={(e) => setFormData(prev => ({ ...prev, contactEmail: e.target.value }))}\n                      className=\"glass-effect border-border/50 mt-2\"\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"businessAddress\" className=\"text-base font-medium\">Business Address</Label>\n                  <Textarea\n                    id=\"businessAddress\"\n                    placeholder=\"123 Main Street, City, State 12345\"\n                    value={formData.businessAddress}\n                    onChange={(e) => setFormData(prev => ({ ...prev, businessAddress: e.target.value }))}\n                    rows={2}\n                    className=\"glass-effect border-border/50 mt-2\"\n                  />\n                </div>\n\n                <div className=\"glass-effect rounded-xl p-4 border border-border/50\">\n                  <Label htmlFor=\"locationLink\" className=\"text-base font-medium flex items-center gap-2\">\n                    <MapPin className=\"h-4 w-4\" />\n                    Google Maps Link\n                  </Label>\n                  <Input\n                    id=\"locationLink\"\n                    type=\"url\"\n                    placeholder=\"https://maps.google.com/...\"\n                    value={formData.locationLink}\n                    onChange={(e) => setFormData(prev => ({ ...prev, locationLink: e.target.value }))}\n                    className=\"glass-effect border-border/50 mt-2\"\n                    data-testid=\"input-location-link\"\n                  />\n                  <p className=\"text-sm text-muted-foreground mt-2\">\n                    Add your Google Maps link so customers can easily find you\n                  </p>\n                </div>\n\n                <div>\n                  <Label className=\"text-base font-medium mb-4 block flex items-center gap-2\">\n                    <Calendar className=\"h-4 w-4\" />\n                    Business Hours\n                  </Label>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    {Object.entries(formData.businessHours).map(([day, hours]) => (\n                      <div key={day} className=\"flex items-center space-x-2\">\n                        <Label className=\"w-20 capitalize text-sm\">{day}:</Label>\n                        <Input\n                          placeholder=\"9:00-17:00 or Closed\"\n                          value={hours}\n                          onChange={(e) => setFormData(prev => ({ \n                            ...prev, \n                            businessHours: { ...prev.businessHours, [day]: e.target.value }\n                          }))}\n                          className=\"flex-1 glass-effect border-border/50\"\n                        />\n                      </div>\n                    ))}\n                  </div>\n                </div>\n\n                <Card className=\"glass-prism-card border-none shadow-lg\">\n                  <CardHeader>\n                    <h4 className=\"text-lg font-semibold text-blue-gradient flex items-center gap-2\">\n                      <MapPin className=\"h-5 w-5\" />\n                      Visit Information\n                    </h4>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    <div className=\"space-y-3\">\n                      <div className=\"flex items-center space-x-2\">\n                        <input\n                          type=\"checkbox\"\n                          id=\"parking\"\n                          checked={formData.visitInfo.parking}\n                          onChange={(e) => setFormData(prev => ({\n                            ...prev,\n                            visitInfo: { ...prev.visitInfo, parking: e.target.checked }\n                          }))}\n                          className=\"rounded border-border/50\"\n                          data-testid=\"checkbox-parking\"\n                        />\n                        <Label htmlFor=\"parking\" className=\"text-base\">Easy parking available</Label>\n                      </div>\n                      \n                      <div className=\"flex items-center space-x-2\">\n                        <input\n                          type=\"checkbox\"\n                          id=\"wheelchair\"\n                          checked={formData.visitInfo.wheelchairAccessible}\n                          onChange={(e) => setFormData(prev => ({\n                            ...prev,\n                            visitInfo: { ...prev.visitInfo, wheelchairAccessible: e.target.checked }\n                          }))}\n                          className=\"rounded border-border/50\"\n                          data-testid=\"checkbox-wheelchair\"\n                        />\n                        <Label htmlFor=\"wheelchair\" className=\"text-base\">Wheelchair accessible</Label>\n                      </div>\n                      \n                      <div className=\"flex items-center space-x-2\">\n                        <input\n                          type=\"checkbox\"\n                          id=\"professional\"\n                          checked={formData.visitInfo.professionalAtmosphere}\n                          onChange={(e) => setFormData(prev => ({\n                            ...prev,\n                            visitInfo: { ...prev.visitInfo, professionalAtmosphere: e.target.checked }\n                          }))}\n                          className=\"rounded border-border/50\"\n                          data-testid=\"checkbox-professional\"\n                        />\n                        <Label htmlFor=\"professional\" className=\"text-base\">Professional atmosphere</Label>\n                      </div>\n                    </div>\n\n                    <div className=\"space-y-3\">\n                      <div className=\"flex items-center justify-between\">\n                        <Label className=\"text-base font-medium\">Custom Visit Information</Label>\n                        <Button \n                          type=\"button\" \n                          onClick={addCustomVisitInfo} \n                          size=\"sm\" \n                          className=\"bg-blue-600 hover:bg-blue-700 text-white font-medium px-3 py-1 rounded-lg transition-all duration-200 hover:scale-105 shadow-md\"\n                          data-testid=\"button-add-visit-info\"\n                        >\n                          <Plus className=\"h-4 w-4 mr-2\" />\n                          Add Info\n                        </Button>\n                      </div>\n                      \n                      {formData.visitInfo.customInfo.map((info, index) => (\n                        <div key={index} className=\"flex items-center space-x-2\">\n                          <Input\n                            placeholder=\"e.g., Free Wi-Fi, Complimentary beverages\"\n                            value={info}\n                            onChange={(e) => updateCustomVisitInfo(index, e.target.value)}\n                            className=\"flex-1 glass-effect border-border/50\"\n                            data-testid={`input-custom-visit-${index}`}\n                          />\n                          <Button\n                            type=\"button\"\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => removeCustomVisitInfo(index)}\n                            className=\"hover-lift\"\n                          >\n                            <X className=\"h-4 w-4\" />\n                          </Button>\n                        </div>\n                      ))}\n                      \n                      {formData.visitInfo.customInfo.length === 0 && (\n                        <p className=\"text-sm text-muted-foreground text-center py-2\">\n                          Add custom information about visiting your business\n                        </p>\n                      )}\n                    </div>\n                  </CardContent>\n                </Card>\n              </CardContent>\n            </Card>\n          </div>\n        );\n\n      case 6:\n        return (\n          <div className=\"space-y-6\">\n            <Card className=\"glass-prism-card border-none shadow-lg\">\n              <CardHeader>\n                <h3 className=\"text-lg font-semibold text-blue-gradient flex items-center gap-2\">\n                  <InfoIcon className=\"h-5 w-5\" />\n                  Business Information\n                </h3>\n                <p className=\"text-sm text-muted-foreground mt-2\">\n                  Add detailed information about your business. Phone number is required, all other fields are optional.\n                </p>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div className=\"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-lg\">\n                  <div className=\"flex\">\n                    <div className=\"flex-shrink-0\">\n                      <InfoIcon className=\"h-5 w-5 text-yellow-400\" />\n                    </div>\n                    <div className=\"ml-3\">\n                      <p className=\"text-sm text-yellow-700\">\n                        <strong>Phone number is required</strong> for the Information section to appear on your booking page.\n                      </p>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"grid md:grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"businessType\" className=\"text-base font-medium\">Business Type</Label>\n                    <Input\n                      id=\"businessType\"\n                      placeholder=\"e.g., Hair Salon, Personal Training, Consulting\"\n                      value={formData.businessInfo.businessType}\n                      onChange={(e) => setFormData(prev => ({ \n                        ...prev, \n                        businessInfo: { ...prev.businessInfo, businessType: e.target.value }\n                      }))}\n                      className=\"glass-effect border-border/50 mt-2\"\n                      data-testid=\"input-business-type\"\n                    />\n                  </div>\n\n                  <div>\n                    <Label htmlFor=\"walkInsAccepted\" className=\"text-base font-medium\">Walk-ins</Label>\n                    <Select\n                      value={formData.businessInfo.walkInsAccepted || undefined}\n                      onValueChange={(value) => setFormData(prev => ({ \n                        ...prev, \n                        businessInfo: { ...prev.businessInfo, walkInsAccepted: value }\n                      }))}\n                    >\n                      <SelectTrigger className=\"glass-effect border-border/50 mt-2\" data-testid=\"select-walk-ins\">\n                        <SelectValue placeholder=\"Select walk-in policy\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"accepted\">Walk-ins accepted</SelectItem>\n                        <SelectItem value=\"declined\">Walk-ins declined</SelectItem>\n                        <SelectItem value=\"by-appointment-preferred\">By appointment preferred</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n\n                <div className=\"grid md:grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"parking\" className=\"text-base font-medium\">Parking</Label>\n                    <Input\n                      id=\"parking\"\n                      placeholder=\"e.g., Metered parking, Free parking, Parking garage\"\n                      value={formData.businessInfo.parking}\n                      onChange={(e) => setFormData(prev => ({ \n                        ...prev, \n                        businessInfo: { ...prev.businessInfo, parking: e.target.value }\n                      }))}\n                      className=\"glass-effect border-border/50 mt-2\"\n                      data-testid=\"input-parking\"\n                    />\n                  </div>\n\n                  <div>\n                    <Label htmlFor=\"kidFriendly\" className=\"text-base font-medium\">Kid Friendly</Label>\n                    <Select\n                      value={formData.businessInfo.kidFriendly || undefined}\n                      onValueChange={(value) => setFormData(prev => ({ \n                        ...prev, \n                        businessInfo: { ...prev.businessInfo, kidFriendly: value }\n                      }))}\n                    >\n                      <SelectTrigger className=\"glass-effect border-border/50 mt-2\" data-testid=\"select-kid-friendly\">\n                        <SelectValue placeholder=\"Select kid-friendly policy\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"yes\">Yes</SelectItem>\n                        <SelectItem value=\"no\">No</SelectItem>\n                        <SelectItem value=\"family-focused\">Family-focused business</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"amenities\" className=\"text-base font-medium\">Amenities</Label>\n                  <Input\n                    id=\"amenities\"\n                    placeholder=\"e.g., WiFi, Snack bar, TV, Disabled Access\"\n                    value={formData.businessInfo.amenities}\n                    onChange={(e) => setFormData(prev => ({ \n                      ...prev, \n                      businessInfo: { ...prev.businessInfo, amenities: e.target.value }\n                    }))}\n                    className=\"glass-effect border-border/50 mt-2\"\n                    data-testid=\"input-amenities\"\n                  />\n                  <p className=\"text-sm text-muted-foreground mt-2\">\n                    List amenities separated by commas\n                  </p>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"spokenLanguages\" className=\"text-base font-medium\">Spoken Languages</Label>\n                  <Input\n                    id=\"spokenLanguages\"\n                    placeholder=\"e.g., English, Spanish, Chinese, French, Arabic\"\n                    value={formData.businessInfo.spokenLanguages}\n                    onChange={(e) => setFormData(prev => ({ \n                      ...prev, \n                      businessInfo: { ...prev.businessInfo, spokenLanguages: e.target.value }\n                    }))}\n                    className=\"glass-effect border-border/50 mt-2\"\n                    data-testid=\"input-spoken-languages\"\n                  />\n                  <p className=\"text-sm text-muted-foreground mt-2\">\n                    List languages separated by commas\n                  </p>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"appointmentCancellationPolicy\" className=\"text-base font-medium\">Appointment Cancellation Policy</Label>\n                  <Textarea\n                    id=\"appointmentCancellationPolicy\"\n                    placeholder=\"Please understand that when you forget or cancel your appointment without giving enough notice, we miss the opportunity to fill that appointment time...\"\n                    value={formData.businessInfo.appointmentCancellationPolicy}\n                    onChange={(e) => setFormData(prev => ({ \n                      ...prev, \n                      businessInfo: { ...prev.businessInfo, appointmentCancellationPolicy: e.target.value }\n                    }))}\n                    rows={4}\n                    className=\"glass-effect border-border/50 mt-2\"\n                    data-testid=\"textarea-cancellation-policy\"\n                  />\n                  <p className=\"text-sm text-muted-foreground mt-2\">\n                    Explain your cancellation policy and any fees that may apply\n                  </p>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        );\n\n      case 7:\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"text-center mb-8 glass-prism-card p-6 rounded-2xl border-none shadow-lg animate-fade-in-up\">\n              <div className=\"flex items-center justify-center mb-4\">\n                <div className=\"w-12 h-12 rounded-xl glass-prism flex items-center justify-center\">\n                  <span className=\"text-2xl\">🚀</span>\n                </div>\n              </div>\n              <h3 className=\"text-2xl font-bold text-blue-gradient mb-2\">Ready to Launch!</h3>\n              <p className=\"text-muted-foreground\">\n                Review your booking page details below and publish when you're ready\n              </p>\n            </div>\n            \n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <Card className=\"glass-prism-card border-none shadow-lg hover-lift\">\n                <CardHeader>\n                  <h4 className=\"font-medium flex items-center text-blue-gradient\">\n                    <Edit className=\"h-4 w-4 mr-2\" />\n                    Basic Information\n                  </h4>\n                </CardHeader>\n                <CardContent className=\"glass-effect rounded-lg p-4\">\n                  <div className=\"space-y-2 text-sm\">\n                    <p><strong>Title:</strong> {formData.title || 'Not set'}</p>\n                    <p><strong>URL:</strong> bookinggen.xyz/{formData.slug || 'not-set'}</p>\n                    <p><strong>Tagline:</strong> {formData.tagline || 'None'}</p>\n                    <p><strong>Description:</strong> {formData.description ? formData.description.substring(0, 100) + (formData.description.length > 100 ? '...' : '') : 'Not set'}</p>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"glass-prism-card border-none shadow-lg hover-lift\">\n                <CardHeader>\n                  <h4 className=\"font-medium flex items-center text-blue-gradient\">\n                    <Users className=\"h-4 w-4 mr-2\" />\n                    Staff Members\n                  </h4>\n                </CardHeader>\n                <CardContent className=\"glass-effect rounded-lg p-4\">\n                  <div className=\"space-y-2 text-sm\">\n                    {formData.staff.filter(s => s.name.trim()).map((member, index) => (\n                      <p key={index}>\n                        <strong>{member.name}</strong> - {member.position || 'No position set'}\n                      </p>\n                    ))}\n                    {formData.staff.filter(s => s.name.trim()).length === 0 && (\n                      <p className=\"text-muted-foreground\">No staff members added</p>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"glass-prism-card border-none shadow-lg hover-lift\">\n                <CardHeader>\n                  <h4 className=\"font-medium flex items-center text-blue-gradient\">\n                    <FileText className=\"h-4 w-4 mr-2\" />\n                    Services\n                  </h4>\n                </CardHeader>\n                <CardContent className=\"glass-effect rounded-lg p-4\">\n                  <div className=\"space-y-2 text-sm\">\n                    {formData.services.filter(s => s.name.trim()).map((service, index) => {\n                      const currency = currencyOptions.find(c => c.code === (service.currency || 'USD'));\n                      return (\n                        <p key={index}>\n                          <strong>{service.name}</strong> - {currency?.symbol || '$'}{service.price} {service.currency || 'USD'} ({service.durationMinutes || 60} min)\n                        </p>\n                      );\n                    })}\n                    {formData.services.filter(s => s.name.trim()).length === 0 && (\n                      <p className=\"text-muted-foreground\">No services added</p>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"glass-prism-card border-none shadow-lg hover-lift\">\n                <CardHeader>\n                  <h4 className=\"font-medium flex items-center text-blue-gradient\">\n                    <Palette className=\"h-4 w-4 mr-2\" />\n                    Styling\n                  </h4>\n                </CardHeader>\n                <CardContent className=\"glass-effect rounded-lg p-4\">\n                  <div className=\"space-y-2 text-sm\">\n                    <p><strong>Theme:</strong> {formData.theme}</p>\n                    <p><strong>Logo:</strong> {formData.logoUrl ? 'Uploaded' : 'None'}</p>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"glass-prism-card border-none shadow-lg hover-lift\">\n                <CardHeader>\n                  <h4 className=\"font-medium flex items-center text-blue-gradient\">\n                    <MapPin className=\"h-4 w-4 mr-2\" />\n                    Visit Information\n                  </h4>\n                </CardHeader>\n                <CardContent className=\"glass-effect rounded-lg p-4\">\n                  <div className=\"space-y-2 text-sm\">\n                    {formData.visitInfo.parking && <p>✓ Easy parking available</p>}\n                    {formData.visitInfo.wheelchairAccessible && <p>✓ Wheelchair accessible</p>}\n                    {formData.visitInfo.professionalAtmosphere && <p>✓ Professional atmosphere</p>}\n                    {formData.visitInfo.customInfo.filter(info => info.trim()).map((info, index) => (\n                      <p key={index}>✓ {info}</p>\n                    ))}\n                    {!formData.visitInfo.parking && !formData.visitInfo.wheelchairAccessible && \n                     !formData.visitInfo.professionalAtmosphere && formData.visitInfo.customInfo.length === 0 && (\n                      <p className=\"text-muted-foreground\">No visit information added</p>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"glass-prism-card border-none shadow-lg hover-lift\">\n                <CardHeader>\n                  <h4 className=\"font-medium flex items-center text-blue-gradient\">\n                    <Settings className=\"h-4 w-4 mr-2\" />\n                    Contact Info\n                  </h4>\n                </CardHeader>\n                <CardContent className=\"glass-effect rounded-lg p-4\">\n                  <div className=\"space-y-2 text-sm\">\n                    <p><strong>Phone:</strong> {formData.contactPhone || 'Not set'}</p>\n                    <p><strong>Email:</strong> {formData.contactEmail || 'Not set'}</p>\n                    <p><strong>Address:</strong> {formData.businessAddress || 'Not set'}</p>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n        );\n\n      default:\n        return null;\n    }\n  };\n\n  const isMobile = useIsMobile();\n\n  const modalTitle = isEditing ? 'Edit Booking Page' : 'Create Booking Page';\n\n  const modalHeader = (\n    <div className=\"flex-shrink-0 relative z-10 animate-fade-in-up\">\n      <div className=\"flex items-center justify-between mb-4 sm:mb-6\">\n        <div className=\"flex items-center gap-2 sm:gap-3\">\n          <div className=\"w-8 h-8 sm:w-10 sm:h-10 rounded-xl glass-prism flex items-center justify-center\">\n            <svg className=\"w-5 h-5 sm:w-6 sm:h-6\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path d=\"M12 2L3 7L12 12L21 7L12 2Z\" fill=\"currentColor\" opacity=\"0.3\"/>\n              <path d=\"M21 16L12 21L3 16\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n              <path d=\"M21 12L12 17L3 12\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n            </svg>\n          </div>\n          <h3 className=\"text-lg sm:text-2xl font-bold text-blue-gradient\">\n            {modalTitle}\n          </h3>\n        </div>\n      </div>\n      \n      {/* Mobile-friendly Progress Bar */}\n      <div className=\"space-y-3 sm:space-y-4\">\n        <Progress value={getProgress()} className=\"w-full h-2 sm:h-3 glass-effect\" />\n        \n        {/* Mobile: Show current step info only */}\n        <div className=\"sm:hidden\">\n          <div className=\"flex items-center justify-between text-sm\">\n            <span className=\"text-muted-foreground\">\n              Step {currentStep} of {steps.length}\n            </span>\n            <span className=\"font-medium text-primary\">\n              {steps[currentStep - 1]?.title}\n            </span>\n          </div>\n        </div>\n        \n        {/* Desktop: Show all steps */}\n        <div className=\"hidden sm:flex justify-between text-sm text-muted-foreground\">\n          {steps.map((step) => (\n            <div \n              key={step.number} \n              className={`flex flex-col items-center transition-all duration-300 ${\n                currentStep === step.number ? 'text-primary font-medium scale-105' : \n                currentStep > step.number ? 'text-green-600' : ''\n              }`}\n            >\n              <div className={`w-8 h-8 rounded-full flex items-center justify-center mb-1 transition-all duration-300 ${\n                currentStep === step.number \n                  ? 'glass-prism text-primary shadow-lg' \n                  : currentStep > step.number\n                  ? 'bg-green-500 text-white'\n                  : 'bg-muted text-muted-foreground'\n              }`}>\n                {currentStep > step.number ? (\n                  <Check className=\"h-4 w-4\" />\n                ) : (\n                  <span className=\"text-xs font-bold\">{step.number}</span>\n                )}\n              </div>\n              <span className=\"text-xs text-center leading-tight\">{step.title}</span>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n\n  const modalContent = (\n    <div className=\"flex-1 overflow-y-auto relative z-10\">\n      <div className=\"p-4 sm:p-6\">\n        <div className=\"text-center mb-4 sm:mb-6\">\n          <div className=\"flex items-center justify-center mb-3 sm:mb-4\">\n            <div className=\"w-10 h-10 sm:w-12 sm:h-12 rounded-xl glass-prism flex items-center justify-center text-blue-gradient shadow-lg\">\n              {steps[currentStep - 1] && (() => {\n                const StepIcon = steps[currentStep - 1].icon;\n                return <StepIcon className=\"h-5 w-5 sm:h-6 sm:w-6\" />;\n              })()}\n            </div>\n          </div>\n          <h2 className=\"text-xl sm:text-2xl font-bold text-blue-gradient\">\n            {steps[currentStep - 1]?.title}\n          </h2>\n          <p className=\"text-sm sm:text-base text-muted-foreground mt-1\">\n            {steps[currentStep - 1]?.description}\n          </p>\n        </div>\n        \n        <form onSubmit={handleSubmit} className=\"space-y-4 sm:space-y-6\">\n          <div className=\"glass-effect rounded-xl p-4 sm:p-6\">\n            {renderStepContent()}\n          </div>\n\n          {/* Navigation Buttons */}\n          <div className=\"flex justify-between pt-4 sm:pt-6 border-t border-border/20 sticky bottom-0 bg-background/95 backdrop-blur-sm -mx-4 sm:-mx-6 px-4 sm:px-6 pb-4 sm:pb-6 safe-area-bottom\">\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={prevStep}\n              disabled={currentStep === 1}\n              className=\"glass-effect hover-lift rounded-xl min-touch-target\"\n              data-testid=\"button-prev-step\"\n            >\n              <ArrowLeft className=\"h-4 w-4 sm:mr-2\" />\n              <span className=\"hidden sm:inline\">Previous</span>\n            </Button>\n\n            {currentStep < steps.length ? (\n              <Button\n                type=\"button\"\n                onClick={nextStep}\n                disabled={!validateStep(currentStep)}\n                className=\"glass-prism-button hover-lift rounded-xl min-touch-target\"\n                data-testid=\"button-next-step\"\n              >\n                <span className=\"hidden sm:inline\">Next</span>\n                <ArrowRight className=\"h-4 w-4 sm:ml-2\" />\n              </Button>\n            ) : (\n              <Button\n                type=\"submit\"\n                disabled={createPageMutation.isPending}\n                className=\"glass-prism-button hover-lift rounded-xl min-touch-target\"\n                data-testid=\"button-submit-page\"\n              >\n                {createPageMutation.isPending ? 'Publishing...' : isEditing ? 'Update Page' : 'Create Page'}\n                <Check className=\"h-4 w-4 ml-2\" />\n              </Button>\n            )}\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n\n  if (isMobile) {\n    return (\n      <Drawer open={open} onOpenChange={onClose}>\n        <DrawerContent className=\"h-[95vh] flex flex-col glass-prism-card border-none shadow-2xl\">\n          <DrawerHeader className=\"px-4 pt-4\">\n            <DrawerTitle className=\"sr-only\">{modalTitle}</DrawerTitle>\n            {modalHeader}\n          </DrawerHeader>\n          {modalContent}\n        </DrawerContent>\n      </Drawer>\n    );\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-full sm:max-w-4xl h-[95vh] sm:h-[90vh] flex flex-col glass-prism-card border-none shadow-2xl animate-scale-in p-0\">\n        {/* Glass Prism Background Elements - Hidden on mobile */}\n        <div className=\"hidden sm:block absolute inset-0 overflow-hidden pointer-events-none\">\n          <div className=\"absolute top-10 left-10 w-32 h-32 glass-prism rounded-full opacity-20 animate-float bg-overlay\"></div>\n          <div className=\"absolute top-20 right-20 w-40 h-40 glass-prism rounded-full opacity-20 animate-float bg-overlay\" style={{animationDelay: '1.5s'}}></div>\n          <div className=\"absolute bottom-20 left-1/3 w-24 h-24 glass-prism rounded-full opacity-25 animate-float bg-overlay\" style={{animationDelay: '3s'}}></div>\n        </div>\n        \n        <DialogHeader className=\"px-4 sm:px-6 pt-4 sm:pt-6\">\n          <DialogTitle className=\"sr-only\">{modalTitle}</DialogTitle>\n          {modalHeader}\n        </DialogHeader>\n        {modalContent}\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":95942},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/lib/supabase.ts":{"content":"import { createClient } from '@supabase/supabase-js';\n\nconst SUPABASE_URL = import.meta.env.VITE_SUPABASE_URL;\nconst SUPABASE_ANON_KEY = import.meta.env.VITE_SUPABASE_ANON_KEY;\n\n// Create Supabase client for authentication and storage\nexport const supabase = (() => {\n  if (!SUPABASE_URL || !SUPABASE_ANON_KEY) {\n    console.warn('Missing Supabase environment variables. Some features may not work properly.');\n    // Return a stub client to prevent runtime errors\n    return {\n      auth: {\n        getUser: () => Promise.resolve({ data: { user: null }, error: null }),\n        getSession: () => Promise.resolve({ data: { session: null }, error: null }),\n        signInWithPassword: () => Promise.resolve({ data: { user: null, session: null }, error: new Error('Supabase not configured') }),\n        signUp: () => Promise.resolve({ data: { user: null, session: null }, error: new Error('Supabase not configured') }),\n        signInWithOAuth: () => Promise.resolve({ data: { url: null, provider: null }, error: new Error('Supabase not configured') }),\n        signOut: () => Promise.resolve({ error: null }),\n        resetPasswordForEmail: () => Promise.resolve({ data: {}, error: new Error('Supabase not configured') }),\n        resend: () => Promise.resolve({ data: {}, error: new Error('Supabase not configured') }),\n        onAuthStateChange: () => ({ \n          data: { \n            subscription: {\n              unsubscribe: () => {}\n            }\n          }, \n          error: null \n        })\n      },\n      storage: {\n        from: () => ({\n          upload: () => Promise.resolve({ data: null, error: new Error('Supabase not configured') }),\n          getPublicUrl: () => ({ data: { publicUrl: '' } })\n        })\n      }\n    } as any;\n  }\n  \n  return createClient(SUPABASE_URL, SUPABASE_ANON_KEY, {\n    auth: {\n      autoRefreshToken: true,\n      persistSession: true,\n      detectSessionInUrl: true\n    }\n  });\n})();\n\n// File upload utility\nexport const uploadFile = async (file: File, bucket: string = 'logos', folder: string = '') => {\n  try {\n    // First ensure bucket exists on server-side\n    const bucketResponse = await fetch('/api/storage/ensure-bucket', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\n      },\n      body: JSON.stringify({ bucketName: bucket })\n    });\n\n    if (!bucketResponse.ok) {\n      const errorData = await bucketResponse.json();\n      throw new Error(errorData.message || 'Failed to ensure bucket exists');\n    }\n\n    // Upload file using server-side endpoint (bypasses RLS issues)\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('bucket', bucket);\n    formData.append('folder', folder);\n\n    const uploadResponse = await fetch('/api/storage/upload', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\n      },\n      body: formData\n    });\n\n    if (!uploadResponse.ok) {\n      const errorData = await uploadResponse.json();\n      throw new Error(errorData.message || 'Upload failed');\n    }\n\n    const result = await uploadResponse.json();\n    return result;\n\n  } catch (error) {\n    console.error('Error uploading file:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Upload failed'\n    };\n  }\n};\n","size_bytes":3402},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/demo/steps/AppearanceStep.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Label } from '@/components/ui/label';\nimport { Button } from '@/components/ui/button';\nimport { Switch } from '@/components/ui/switch';\nimport { Palette } from 'lucide-react';\n\ninterface DemoData {\n  theme: string;\n  primaryColor: string;\n  fontSize: 'small' | 'medium' | 'large';\n  showLogo: boolean;\n  showPhone: boolean;\n}\n\ninterface AppearanceStepProps {\n  data: DemoData;\n  updateData: (updates: Partial<DemoData>) => void;\n}\n\nconst colorThemes = [\n  { name: 'Ocean Blue', primary: '#2563eb', gradient: 'from-blue-500 to-blue-600' },\n  { name: 'Forest Green', primary: '#059669', gradient: 'from-emerald-500 to-emerald-600' },\n  { name: 'Sunset Orange', primary: '#ea580c', gradient: 'from-orange-500 to-orange-600' },\n  { name: 'Royal Purple', primary: '#9333ea', gradient: 'from-purple-500 to-purple-600' },\n  { name: 'Cherry Red', primary: '#dc2626', gradient: 'from-red-500 to-red-600' },\n  { name: 'Midnight Black', primary: '#1f2937', gradient: 'from-gray-800 to-gray-900' }\n];\n\nconst fontSizes = [\n  { value: 'small', label: 'Small', description: 'Compact and minimal' },\n  { value: 'medium', label: 'Medium', description: 'Balanced and readable' },\n  { value: 'large', label: 'Large', description: 'Bold and prominent' }\n];\n\nexport default function AppearanceStep({ data, updateData }: AppearanceStepProps) {\n  return (\n    <div className=\"space-y-6\">\n      {/* Color Themes */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            🎨 Color Theme\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n            {colorThemes.map((theme) => (\n              <button\n                key={theme.name}\n                onClick={() => updateData({ \n                  theme: theme.name, \n                  primaryColor: theme.primary \n                })}\n                data-testid={`button-theme-${theme.name.toLowerCase().replace(/\\s+/g, '-')}`}\n                className={`p-4 rounded-lg border-2 transition-all ${\n                  data.theme === theme.name\n                    ? 'border-primary bg-primary/10' \n                    : 'border-border hover:border-primary/50'\n                }`}\n              >\n                <div \n                  className={`w-full h-12 rounded-md bg-gradient-to-r ${theme.gradient} mb-2`}\n                />\n                <div className=\"text-sm font-medium text-center\">\n                  {theme.name}\n                </div>\n              </button>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Font Size */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            📝 Font Size\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            {fontSizes.map((size) => (\n              <button\n                key={size.value}\n                onClick={() => updateData({ fontSize: size.value as 'small' | 'medium' | 'large' })}\n                data-testid={`button-font-size-${size.value}`}\n                className={`p-4 rounded-lg border-2 text-left transition-all ${\n                  data.fontSize === size.value\n                    ? 'border-primary bg-primary/10' \n                    : 'border-border hover:border-primary/50'\n                }`}\n              >\n                <div className={`font-medium mb-1 ${\n                  size.value === 'small' ? 'text-sm' : \n                  size.value === 'medium' ? 'text-base' : 'text-lg'\n                }`}>\n                  {size.label}\n                </div>\n                <div className=\"text-sm text-muted-foreground\">\n                  {size.description}\n                </div>\n              </button>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Display Options */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            👁️ Display Options\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          {/* Show Logo */}\n          <div className=\"flex items-center justify-between\">\n            <div className=\"space-y-1\">\n              <Label htmlFor=\"show-logo\" data-testid=\"label-show-logo\">\n                Show Logo\n              </Label>\n              <p className=\"text-sm text-muted-foreground\">\n                Display your uploaded logo on the booking page\n              </p>\n            </div>\n            <Switch\n              id=\"show-logo\"\n              data-testid=\"switch-show-logo\"\n              checked={data.showLogo}\n              onCheckedChange={(checked) => updateData({ showLogo: checked })}\n            />\n          </div>\n\n          {/* Show Phone */}\n          <div className=\"flex items-center justify-between\">\n            <div className=\"space-y-1\">\n              <Label htmlFor=\"show-phone\" data-testid=\"label-show-phone\">\n                Show Phone Number\n              </Label>\n              <p className=\"text-sm text-muted-foreground\">\n                Display your phone number on the booking page\n              </p>\n            </div>\n            <Switch\n              id=\"show-phone\"\n              data-testid=\"switch-show-phone\"\n              checked={data.showPhone}\n              onCheckedChange={(checked) => updateData({ showPhone: checked })}\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Preview */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            👀 Live Preview\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div \n            className=\"p-6 rounded-lg border-2 border-dashed border-muted\"\n            style={{ \n              backgroundColor: `${data.primaryColor}10`,\n              borderColor: `${data.primaryColor}40`\n            }}\n          >\n            <div className=\"text-center space-y-4\">\n              <div \n                className={`font-bold ${\n                  data.fontSize === 'small' ? 'text-lg' : \n                  data.fontSize === 'medium' ? 'text-xl' : 'text-2xl'\n                }`}\n                style={{ color: data.primaryColor }}\n              >\n                {data.theme} Theme Preview\n              </div>\n              <div className={`${\n                data.fontSize === 'small' ? 'text-sm' : \n                data.fontSize === 'medium' ? 'text-base' : 'text-lg'\n              }`}>\n                Your booking page will use this color scheme and font size\n              </div>\n              <Button \n                style={{ backgroundColor: data.primaryColor }}\n                className=\"text-white\"\n                data-testid=\"button-preview-cta\"\n              >\n                Book Now\n              </Button>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":7091},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/pages/public-booking.tsx":{"content":"import { useState, useEffect, useRef, useMemo } from 'react';\nimport { useParams } from 'wouter';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from '@/components/ui/accordion';\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { useToast } from '@/hooks/use-toast';\nimport { apiRequest } from '@/lib/queryClient';\nimport { getCurrencyByCode } from '@/lib/currencies';\nimport { getPublicPageBySlug, getPublicServicesByPageId, getPublicReviewsByPageId } from '@/lib/supabase-queries';\nimport BookingModal from '@/components/modals/booking-modal';\nimport { Phone, Calendar, ArrowLeft, Clock, DollarSign, HelpCircle, MapPin, Mail, Clock3, Image, Star, MessageSquare, Sparkles, ChevronLeft, ChevronRight, ChevronDown, ChevronUp, Scissors, Coffee, Heart, User, Monitor, Camera, Palette, Zap, Target, Shield, Briefcase, Wrench, Headphones, Music, BookOpen, Rocket, Leaf, CheckCircle, AlertCircle, Copy, Check, ExternalLink, FileText, TrendingUp, Award, Users, Timer, Loader2, Info, Calendar as CalendarIcon } from 'lucide-react';\nimport { Carousel, CarouselContent, CarouselItem, CarouselNext, CarouselPrevious } from '@/components/ui/carousel';\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@/components/ui/tooltip';\nimport { Dialog, DialogContent, DialogTitle, DialogDescription } from '@/components/ui/dialog';\n\n// Image Gallery Slideshow Component\nfunction ImageGallerySlideshow({ images, primaryColor }: { images: string[], primaryColor: string }) {\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  const goToPrevious = () => {\n    setCurrentIndex((prev) => (prev === 0 ? images.length - 1 : prev - 1));\n  };\n\n  const goToNext = () => {\n    setCurrentIndex((prev) => (prev === images.length - 1 ? 0 : prev + 1));\n  };\n\n  if (images.length === 0) return null;\n\n  return (\n    <div className=\"relative w-full rounded-2xl overflow-hidden shadow-2xl border border-border/20 bg-black/5\">\n      {/* Main Image Display */}\n      <div className=\"relative aspect-video w-full bg-black/5\">\n        <img \n          src={images[currentIndex]} \n          alt={`Gallery image ${currentIndex + 1}`}\n          className=\"w-full h-full object-cover\"\n          data-testid={`gallery-image-${currentIndex}`}\n        />\n        \n        {/* Image Counter */}\n        <div \n          className=\"absolute bottom-4 right-4 px-4 py-2 rounded-full backdrop-blur-md text-white text-sm font-semibold shadow-lg\"\n          style={{ backgroundColor: `${primaryColor}cc` }}\n        >\n          {currentIndex + 1} / {images.length}\n        </div>\n      </div>\n\n      {/* Navigation Arrows - Only show if more than 1 image */}\n      {images.length > 1 && (\n        <>\n          {/* Previous Button */}\n          <button\n            onClick={goToPrevious}\n            className=\"absolute left-2 sm:left-4 top-1/2 -translate-y-1/2 w-10 h-10 sm:w-12 sm:h-12 rounded-full backdrop-blur-md flex items-center justify-center transition-all duration-300 hover:scale-110 active:scale-95 shadow-xl border border-white/20\"\n            style={{ backgroundColor: `${primaryColor}ee` }}\n            data-testid=\"button-gallery-prev\"\n            aria-label=\"Previous image\"\n          >\n            <ChevronLeft className=\"h-6 w-6 sm:h-7 sm:w-7 text-white\" />\n          </button>\n\n          {/* Next Button */}\n          <button\n            onClick={goToNext}\n            className=\"absolute right-2 sm:right-4 top-1/2 -translate-y-1/2 w-10 h-10 sm:w-12 sm:h-12 rounded-full backdrop-blur-md flex items-center justify-center transition-all duration-300 hover:scale-110 active:scale-95 shadow-xl border border-white/20\"\n            style={{ backgroundColor: `${primaryColor}ee` }}\n            data-testid=\"button-gallery-next\"\n            aria-label=\"Next image\"\n          >\n            <ChevronRight className=\"h-6 w-6 sm:h-7 sm:w-7 text-white\" />\n          </button>\n\n          {/* Dot Indicators */}\n          <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2\">\n            {images.map((_, index) => (\n              <button\n                key={index}\n                onClick={() => setCurrentIndex(index)}\n                className={`transition-all duration-300 rounded-full ${\n                  index === currentIndex \n                    ? 'w-8 h-2' \n                    : 'w-2 h-2 hover:scale-125'\n                }`}\n                style={{ \n                  backgroundColor: index === currentIndex \n                    ? 'white' \n                    : `${primaryColor}88` \n                }}\n                data-testid={`gallery-dot-${index}`}\n                aria-label={`Go to image ${index + 1}`}\n              />\n            ))}\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default function PublicBooking() {\n  const { slug } = useParams();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [showBookingModal, setShowBookingModal] = useState(false);\n  const [showBusinessHours, setShowBusinessHours] = useState(false);\n  const [showReviews, setShowReviews] = useState(false);\n  const [reviewFormData, setReviewFormData] = useState({\n    reviewerName: '',\n    reviewerEmail: '',\n    rating: 0,\n    reviewText: ''\n  });\n  const [validationErrors, setValidationErrors] = useState<{[key: string]: string}>({});\n  const [copiedField, setCopiedField] = useState<string | null>(null);\n  \n  // State for image viewer modal\n  const [selectedImage, setSelectedImage] = useState<string | null>(null);\n  const [isImageModalOpen, setIsImageModalOpen] = useState(false);\n  \n  // State for contact dialogs\n  const [showPhoneDialog, setShowPhoneDialog] = useState(false);\n  const [showEmailDialog, setShowEmailDialog] = useState(false);\n  const [copiedPhone, setCopiedPhone] = useState(false);\n  const [copiedEmail, setCopiedEmail] = useState(false);\n  \n  // State for tabbed interface\n  const [activeTab, setActiveTab] = useState('about');\n  const heroRef = useRef<HTMLElement>(null);\n\n  // Use direct Supabase client for public page data\n  const { data: pageData, isLoading, error } = useQuery<any>({\n    queryKey: [`public-page-${slug}`],\n    queryFn: () => getPublicPageBySlug(slug!),\n    enabled: !!slug,\n  });\n\n  // Fetch services and reviews for this page using direct Supabase client\n  const { data: pageServices = [] } = useQuery<any[]>({\n    queryKey: [`public-services-${pageData?.id}`],\n    queryFn: () => getPublicServicesByPageId(pageData?.id),\n    enabled: !!pageData?.id,\n  });\n\n  const { data: reviews = [] } = useQuery<any[]>({\n    queryKey: [`public-reviews-${pageData?.id}`],\n    queryFn: () => getPublicReviewsByPageId(pageData?.id),\n    enabled: !!pageData?.id,\n  });\n\n  const { data: pageStaff = [] } = useQuery<any[]>({\n    queryKey: ['/api/pages', pageData?.id, 'staff'],\n    enabled: !!pageData?.id,\n  });\n\n  // Normalize boolean values (handle both string and boolean types from database)\n  const normalizedBooleans = useMemo(() => {\n    const normalize = (value: any) => value === true || value === 'true';\n    return {\n      acceptReviews: normalize(pageData?.acceptReviews),\n      showBusinessHours: normalize(pageData?.show_business_hours),\n      showContactInfo: normalize(pageData?.show_contact_info)\n    };\n  }, [pageData]);\n\n  // Optimize reviews computation with useMemo\n  const { approvedReviews, approvedCount, avgRating } = useMemo(() => {\n    const approved = reviews.filter((review: any) => review.isApproved === 'approved');\n    const count = approved.length;\n    const average = count > 0 ? approved.reduce((sum: number, review: any) => sum + review.rating, 0) / count : 0;\n    return { approvedReviews: approved, approvedCount: count, avgRating: average };\n  }, [reviews]);\n\n  // Review submission mutation\n  const submitReviewMutation = useMutation({\n    mutationFn: async (reviewData: any) => {\n      const response = await apiRequest('POST', '/api/reviews', reviewData);\n      return response.json();\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Review submitted!\",\n        description: \"Thank you for your feedback. Your review is pending approval.\",\n      });\n      setReviewFormData({\n        reviewerName: '',\n        reviewerEmail: '',\n        rating: 0,\n        reviewText: ''\n      });\n      queryClient.invalidateQueries({ queryKey: [`public-reviews-${pageData?.id}`] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error submitting review\",\n        description: error.message || \"Something went wrong. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Tab items for the interface\n  const tabItems = [\n    { id: 'about', label: 'About', icon: Info },\n    { id: 'services', label: 'Services', icon: Sparkles },\n    { id: 'staff', label: 'Staff', icon: Users },\n  ];\n\n  // Create dynamic styles based on page theme data\n  const getThemeStyles = (page: any) => {\n    const primaryColor = page.primaryColor || '#2563eb';\n    const backgroundType = page.backgroundType || 'gradient';\n    const backgroundValue = page.backgroundValue || 'blue';\n    const fontFamily = page.fontFamily || 'inter';\n    \n    // Background style mapping\n    const backgroundClasses = {\n      // Original gradients\n      'blue': backgroundType === 'gradient' ? 'bg-gradient-to-br from-blue-50 to-blue-100' : 'bg-blue-50',\n      'green': backgroundType === 'gradient' ? 'bg-gradient-to-br from-emerald-50 to-emerald-100' : 'bg-emerald-50',\n      'purple': backgroundType === 'gradient' ? 'bg-gradient-to-br from-violet-50 to-violet-100' : 'bg-violet-50',\n      'rose': backgroundType === 'gradient' ? 'bg-gradient-to-br from-rose-50 to-rose-100' : 'bg-rose-50',\n      'white': 'bg-white',\n      'gray': 'bg-gray-50',\n      \n      // New gradient backgrounds\n      'teal': backgroundType === 'gradient' ? 'bg-gradient-to-br from-teal-50 to-teal-100' : 'bg-teal-50',\n      'orange': backgroundType === 'gradient' ? 'bg-gradient-to-br from-orange-50 to-orange-100' : 'bg-orange-50',\n      'indigo': backgroundType === 'gradient' ? 'bg-gradient-to-br from-indigo-50 to-indigo-100' : 'bg-indigo-50',\n      'amber': backgroundType === 'gradient' ? 'bg-gradient-to-br from-amber-50 to-amber-100' : 'bg-amber-50',\n      \n      // Diagonal gradients  \n      'ocean': 'bg-gradient-to-r from-cyan-50 to-blue-100',\n      'sunset': 'bg-gradient-to-r from-orange-50 to-pink-100',\n      'forest': 'bg-gradient-to-r from-green-50 to-emerald-100',\n      'lavender': 'bg-gradient-to-r from-purple-50 to-pink-100',\n      \n      // Multi-color gradients\n      'rainbow': 'bg-gradient-to-r from-red-50 via-yellow-50 to-green-50',\n      'tropical': 'bg-gradient-to-br from-teal-50 via-cyan-50 to-blue-50',\n      'warm-sunset': 'bg-gradient-to-br from-yellow-50 via-orange-50 to-red-50',\n      'cool-mint': 'bg-gradient-to-br from-green-50 via-teal-50 to-blue-50',\n      \n      // Solid backgrounds\n      'cream': 'bg-amber-50',\n      'ice': 'bg-blue-50',\n      'soft-mint': 'bg-green-50',\n      'light-lavender': 'bg-purple-50',\n      \n      // Pattern backgrounds (simplified for now - patterns would need CSS)\n      'dots': 'bg-gray-50',\n      'lines': 'bg-gray-50', \n      'mesh': 'bg-gray-50',\n      'paper': 'bg-stone-50'\n    };\n    \n    // Font family mapping\n    const fontClasses = {\n      'inter': 'font-inter',\n      'playfair': 'font-playfair',\n      'roboto': 'font-roboto',\n      'opensans': 'font-opensans'\n    };\n    \n    return {\n      backgroundColor: backgroundClasses[backgroundValue as keyof typeof backgroundClasses] || backgroundClasses.blue,\n      fontClass: fontClasses[fontFamily as keyof typeof fontClasses] || fontClasses.inter,\n      primaryColor,\n      cssVariables: {\n        '--theme-primary': primaryColor,\n        '--theme-primary-rgb': hexToRgb(primaryColor)\n      } as React.CSSProperties\n    };\n  };\n  \n  // Helper function to convert hex to RGB\n  const hexToRgb = (hex: string) => {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result \n      ? `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}`\n      : '37, 99, 235'; // fallback to blue\n  };\n  \n  // Smart icon assignment based on service name\n  const getServiceIcon = (serviceName: string) => {\n    const name = serviceName.toLowerCase();\n    \n    if (name.includes('cut') || name.includes('hair') || name.includes('style')) return Scissors;\n    if (name.includes('coffee') || name.includes('café') || name.includes('cafe')) return Coffee;\n    if (name.includes('massage') || name.includes('spa') || name.includes('relax')) return Heart;\n    if (name.includes('consult') || name.includes('meeting') || name.includes('session')) return User;\n    if (name.includes('design') || name.includes('web') || name.includes('digital')) return Monitor;\n    if (name.includes('photo') || name.includes('picture') || name.includes('shoot')) return Camera;\n    if (name.includes('art') || name.includes('paint') || name.includes('creative')) return Palette;\n    if (name.includes('fitness') || name.includes('training') || name.includes('workout')) return Zap;\n    if (name.includes('coaching') || name.includes('mentor') || name.includes('goal')) return Target;\n    if (name.includes('security') || name.includes('protect') || name.includes('safe')) return Shield;\n    if (name.includes('business') || name.includes('corporate') || name.includes('professional')) return Briefcase;\n    if (name.includes('repair') || name.includes('fix') || name.includes('service')) return Wrench;\n    if (name.includes('audio') || name.includes('sound') || name.includes('podcast')) return Headphones;\n    if (name.includes('music') || name.includes('lesson') || name.includes('instrument')) return Music;\n    if (name.includes('education') || name.includes('tutor') || name.includes('learn')) return BookOpen;\n    if (name.includes('marketing') || name.includes('growth') || name.includes('launch')) return Rocket;\n    if (name.includes('wellness') || name.includes('health') || name.includes('therapy')) return Leaf;\n    \n    // Default fallback\n    return Calendar;\n  };\n\n  // Enhanced validation function\n  const validateField = (field: string, value: any) => {\n    const errors: {[key: string]: string} = {};\n    \n    switch (field) {\n      case 'reviewerName':\n        if (!value.trim()) errors.reviewerName = 'Name is required';\n        else if (value.trim().length < 2) errors.reviewerName = 'Name must be at least 2 characters';\n        break;\n      case 'reviewerEmail':\n        if (value && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value)) {\n          errors.reviewerEmail = 'Please enter a valid email address';\n        }\n        break;\n      case 'rating':\n        if (value === 0) errors.rating = 'Please select a rating';\n        break;\n      case 'reviewText':\n        if (value && value.length > 500) errors.reviewText = 'Review must be under 500 characters';\n        break;\n    }\n    \n    setValidationErrors(prev => ({ ...prev, ...errors }));\n    return Object.keys(errors).length === 0;\n  };\n\n  // Copy to clipboard function\n  const copyToClipboard = async (text: string, label: string) => {\n    try {\n      await navigator.clipboard.writeText(text);\n      setCopiedField(label);\n      toast({\n        title: \"Copied!\",\n        description: `${label} copied to clipboard`,\n      });\n      setTimeout(() => setCopiedField(null), 2000);\n    } catch (err) {\n      toast({\n        title: \"Copy failed\",\n        description: \"Unable to copy to clipboard\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  // Copy phone number\n  const handleCopyPhone = async () => {\n    if (page.contact_phone || page.contactPhone) {\n      try {\n        await navigator.clipboard.writeText(page.contact_phone || page.contactPhone);\n        setCopiedPhone(true);\n        toast({\n          title: \"Copied!\",\n          description: \"Phone number copied to clipboard\",\n        });\n        setTimeout(() => setCopiedPhone(false), 2000);\n      } catch (err) {\n        toast({\n          title: \"Copy failed\",\n          description: \"Unable to copy phone number\",\n          variant: \"destructive\",\n        });\n      }\n    }\n  };\n\n  // Copy email\n  const handleCopyEmail = async () => {\n    if (page.contact_email || page.contactEmail) {\n      try {\n        await navigator.clipboard.writeText(page.contact_email || page.contactEmail);\n        setCopiedEmail(true);\n        toast({\n          title: \"Copied!\",\n          description: \"Email copied to clipboard\",\n        });\n        setTimeout(() => setCopiedEmail(false), 2000);\n      } catch (err) {\n        toast({\n          title: \"Copy failed\",\n          description: \"Unable to copy email\",\n          variant: \"destructive\",\n        });\n      }\n    }\n  };\n\n  // Review form handlers\n  const handleReviewSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Validate all fields\n    const nameValid = validateField('reviewerName', reviewFormData.reviewerName);\n    const emailValid = validateField('reviewerEmail', reviewFormData.reviewerEmail);\n    const ratingValid = validateField('rating', reviewFormData.rating);\n    const textValid = validateField('reviewText', reviewFormData.reviewText);\n    \n    if (!nameValid || !emailValid || !ratingValid || !textValid) {\n      toast({\n        title: \"Please check your inputs\",\n        description: \"Some fields need attention before submitting.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    submitReviewMutation.mutate({\n      pageId: pageData.id,\n      reviewerName: reviewFormData.reviewerName,\n      reviewerEmail: reviewFormData.reviewerEmail,\n      rating: reviewFormData.rating,\n      reviewText: reviewFormData.reviewText\n    });\n  };\n\n  // Handle input changes with real-time validation\n  const handleInputChange = (field: string, value: any) => {\n    setReviewFormData(prev => ({ ...prev, [field]: value }));\n    \n    // Clear validation error when user starts typing\n    if (validationErrors[field]) {\n      setValidationErrors(prev => ({ ...prev, [field]: '' }));\n    }\n    \n    // Validate on blur (after a slight delay)\n    setTimeout(() => validateField(field, value), 300);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  if (error || !pageData) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <Card className=\"max-w-md mx-4\">\n          <CardContent className=\"p-4 sm:p-6 lg:p-8 text-center\">\n            <div className=\"text-4xl text-muted-foreground mb-4\">😕</div>\n            <h1 className=\"text-2xl font-bold text-foreground mb-2\">Page Not Found</h1>\n            <p className=\"text-muted-foreground mb-6\">\n              The booking page you're looking for doesn't exist or has been removed.\n            </p>\n            <Button onClick={() => window.history.back()}>\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Go Back\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  const page = pageData;\n  const services = pageServices;\n  const faqs = pageData.faqs || [];\n  \n  // Normalize gallery data to handle both legacy array format and new object format\n  const gallery = (() => {\n    const rawGallery = pageData?.gallery ?? pageData?.data?.gallery ?? null;\n    \n    // If it's already an object with the expected structure, use it\n    if (rawGallery && typeof rawGallery === 'object' && !Array.isArray(rawGallery)) {\n      return {\n        logos: rawGallery.logos || [],\n        banners: rawGallery.banners || [],\n        images: rawGallery.images || []\n      };\n    }\n    \n    // If it's a legacy array format, convert to new format\n    if (Array.isArray(rawGallery)) {\n      return {\n        logos: [],\n        banners: [],\n        images: rawGallery\n      };\n    }\n    \n    // Default empty gallery\n    return { logos: [], banners: [], images: [] };\n  })();\n  \n  const themeStyles = page ? getThemeStyles(page) : null;\n\n  // Helper function to get business data from either new format (top-level) or old format (nested under businessInfo)\n  const getBusinessData = (key: string) => {\n    // Try new format first (top-level in data)\n    if (page.data?.[key]) return page.data[key];\n    // Try old format (nested under businessInfo - after camelCase conversion)\n    if (page.data?.businessInfo?.[key]) return page.data.businessInfo[key];\n    // Try old format with snake_case (in case conversion didn't happen)\n    const snakeKey = key.replace(/[A-Z]/g, letter => `_${letter.toLowerCase()}`);\n    if (page.data?.business_info?.[snakeKey]) return page.data.business_info[snakeKey];\n    return null;\n  };\n\n  // Extract business data once to avoid repeated lookups\n  const businessData = {\n    businessName: getBusinessData('businessName'),\n    businessType: getBusinessData('businessType'),\n    walkInsAccepted: getBusinessData('walkInsAccepted'),\n    parking: getBusinessData('parking'),\n    amenities: getBusinessData('amenities'),\n    spokenLanguages: getBusinessData('spokenLanguages'),\n    kidFriendly: getBusinessData('kidFriendly'),\n    appointmentCancellationPolicy: getBusinessData('appointmentCancellationPolicy'),\n  };\n\n  return (\n    <div \n      className={`min-h-screen ${themeStyles?.backgroundColor || 'bg-background'} ${themeStyles?.fontClass || 'font-inter'} scroll-smooth`}\n      style={themeStyles?.cssVariables}\n    >\n      {/* Sleek Gradient Header */}\n      <div className=\"pt-3 sm:pt-4 px-3 sm:px-6 lg:px-8 pb-0\">\n        <header className=\"container mx-auto rounded-t-xl sm:rounded-t-2xl border-x border-t border-border/10 backdrop-blur-2xl shadow-lg overflow-hidden\"\n          style={{\n            background: themeStyles \n              ? `linear-gradient(135deg, rgba(${hexToRgb(themeStyles.primaryColor)}, 0.03) 0%, rgba(${hexToRgb(themeStyles.primaryColor)}, 0.08) 100%)`\n              : 'linear-gradient(135deg, rgba(37, 99, 235, 0.03) 0%, rgba(37, 99, 235, 0.08) 100%)',\n            boxShadow: `0 4px 16px -2px ${themeStyles?.primaryColor || '#2563eb'}15`\n          }}\n        >\n          <div className=\"px-3 sm:px-4 lg:px-6 py-2 sm:py-3\">\n            <div className=\"flex items-center gap-2 sm:gap-3\">\n              <div className=\"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1\">\n                <div \n                  className=\"w-10 h-10 sm:w-12 sm:h-12 rounded-lg sm:rounded-xl flex items-center justify-center shadow-lg flex-shrink-0 transition-transform hover:scale-105 overflow-hidden\"\n                  style={{\n                    background: page.logoUrl ? 'transparent' : (themeStyles ? `linear-gradient(135deg, ${themeStyles.primaryColor} 0%, ${themeStyles.primaryColor}dd 100%)` : 'linear-gradient(135deg, #2563eb 0%, #2563ebdd 100%)'),\n                    boxShadow: `0 4px 16px -2px ${themeStyles?.primaryColor || '#2563eb'}40`\n                  }}\n                  data-testid=\"header-logo\"\n                >\n                  {page.logoUrl ? (\n                    <img \n                      src={page.logoUrl} \n                      alt={`${page.title} logo`}\n                      className=\"w-full h-full object-cover\"\n                    />\n                  ) : (\n                    <span className=\"text-base sm:text-xl font-black text-white\">\n                      {page.title?.charAt(0) || 'B'}\n                    </span>\n                  )}\n                </div>\n                <div className=\"min-w-0 flex-1\">\n                  <span className=\"text-base sm:text-xl lg:text-2xl font-bold text-foreground truncate block\">{page.title}</span>\n                  {page.tagline && (\n                    <p className=\"text-xs sm:text-sm text-muted-foreground mt-0.5 truncate\">{page.tagline}</p>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        </header>\n      </div>\n\n      {/* Mobile-First Hero Section with Glass Prism Effects */}\n      <section \n        ref={heroRef}\n        className=\"relative overflow-hidden min-h-[80vh] sm:min-h-[85vh] lg:min-h-[90vh] flex items-center px-4 sm:px-6 lg:px-8 -mt-1\"\n      >\n        {/* Dynamic layered background */}\n        <div className=\"absolute inset-0\">\n          {/* Primary gradient background */}\n          <div \n            className=\"absolute inset-0\"\n            style={{\n              background: themeStyles \n                ? `radial-gradient(ellipse at 50% 0%, rgba(${hexToRgb(themeStyles.primaryColor)}, 0.15) 0%, rgba(${hexToRgb(themeStyles.primaryColor)}, 0.05) 25%, transparent 60%), linear-gradient(135deg, rgba(${hexToRgb(themeStyles.primaryColor)}, 0.08) 0%, rgba(${hexToRgb(themeStyles.primaryColor)}, 0.02) 50%, rgba(${hexToRgb(themeStyles.primaryColor)}, 0.08) 100%)`\n                : 'radial-gradient(ellipse at 50% 0%, rgba(37, 99, 235, 0.15) 0%, rgba(37, 99, 235, 0.05) 25%, transparent 60%), linear-gradient(135deg, rgba(37, 99, 235, 0.08) 0%, rgba(37, 99, 235, 0.02) 50%, rgba(37, 99, 235, 0.08) 100%)'\n            }}\n          ></div>\n          \n          {/* Enhanced animated elements */}\n          <div className=\"absolute inset-0 overflow-hidden\">\n            <div \n              className=\"absolute top-20 -right-20 w-96 h-96 rounded-full blur-3xl opacity-70 animate-pulse\"\n              style={{\n                background: themeStyles \n                  ? `radial-gradient(circle, rgba(${hexToRgb(themeStyles.primaryColor)}, 0.1) 0%, transparent 70%)`\n                  : 'radial-gradient(circle, rgba(37, 99, 235, 0.1) 0%, transparent 70%)',\n                animationDuration: '4s'\n              }}\n            ></div>\n            <div \n              className=\"absolute -bottom-20 -left-20 w-80 h-80 rounded-full blur-3xl opacity-60 animate-pulse\"\n              style={{\n                background: themeStyles \n                  ? `radial-gradient(circle, rgba(${hexToRgb(themeStyles.primaryColor)}, 0.08) 0%, transparent 70%)`\n                  : 'radial-gradient(circle, rgba(37, 99, 235, 0.08) 0%, transparent 70%)',\n                animationDuration: '6s',\n                animationDelay: '1s'\n              }}\n            ></div>\n            <div \n              className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[600px] rounded-full blur-3xl opacity-30 animate-pulse\"\n              style={{\n                background: themeStyles \n                  ? `radial-gradient(ellipse, rgba(${hexToRgb(themeStyles.primaryColor)}, 0.04) 0%, transparent 70%)`\n                  : 'radial-gradient(ellipse, rgba(37, 99, 235, 0.04) 0%, transparent 70%)',\n                animationDuration: '8s',\n                animationDelay: '2s'\n              }}\n            ></div>\n          </div>\n          \n        </div>\n        \n        {/* Main content */}\n        <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10\">\n          <div className=\"max-w-6xl mx-auto text-center\">\n            {/* Professional badge */}\n            <div className=\"mt-8 sm:mt-12 mb-8 sm:mb-12 lg:mb-16\">\n              <div \n                className=\"inline-flex items-center px-4 sm:px-6 lg:px-8 py-2 sm:py-3 lg:py-4 rounded-full text-xs sm:text-sm font-semibold backdrop-blur-md shadow-xl border border-white/20 transform hover:scale-105 transition-all duration-300\"\n                style={{\n                  background: themeStyles \n                    ? `linear-gradient(135deg, rgba(${hexToRgb(themeStyles.primaryColor)}, 0.15) 0%, rgba(${hexToRgb(themeStyles.primaryColor)}, 0.08) 100%)`\n                    : 'linear-gradient(135deg, rgba(37, 99, 235, 0.15) 0%, rgba(37, 99, 235, 0.08) 100%)',\n                  color: themeStyles?.primaryColor || '#2563eb'\n                }}\n                data-testid=\"hero-professional-badge\"\n              >\n                <div \n                  className=\"w-2 h-2 rounded-full mr-3 animate-pulse\"\n                  style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                ></div>\n                ✨ Premium Professional Services\n              </div>\n            </div>\n            \n            {/* Enhanced main heading with better mobile typography */}\n            <div className=\"mb-6 sm:mb-10 lg:mb-16\">\n              {/* Large decorative background text */}\n              <div className=\"relative\">\n                <div \n                  className=\"absolute inset-0 flex items-center justify-center opacity-[0.03] pointer-events-none overflow-hidden\"\n                  style={{ color: themeStyles?.primaryColor || '#2563eb' }}\n                >\n                  <span className=\"text-8xl sm:text-9xl font-black transform rotate-[-5deg] select-none\">\n                    {page.title?.charAt(0) || 'B'}\n                  </span>\n                </div>\n                \n                <h1 className=\"relative text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl font-black text-foreground mb-3 sm:mb-6 leading-[0.9] tracking-tight\">\n                  <span className=\"block bg-gradient-to-r from-foreground to-foreground/80 bg-clip-text text-transparent\">\n                    {page.title}\n                  </span>\n                </h1>\n              </div>\n              \n              {page.tagline && (\n                <div className=\"relative\">\n                  <p className=\"text-lg sm:text-xl md:text-2xl lg:text-3xl text-muted-foreground max-w-4xl mx-auto font-medium leading-relaxed opacity-95 px-4\">\n                    {page.tagline}\n                  </p>\n                </div>\n              )}\n            </div>\n            \n            {/* Enhanced CTA section with improved mobile layout */}\n            <div className=\"mb-6 sm:mb-10 lg:mb-16\">\n              <div className=\"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center items-stretch sm:items-center mb-4 sm:mb-6 max-w-md sm:max-w-none mx-auto\">\n                <Button \n                  onClick={() => setShowBookingModal(true)}\n                  className=\"group relative overflow-hidden px-4 sm:px-8 lg:px-12 py-3 sm:py-4 lg:py-6 rounded-xl sm:rounded-2xl text-sm sm:text-base lg:text-xl h-auto font-semibold sm:font-bold shadow-2xl hover:shadow-3xl transition-all duration-500 hover:scale-105 border-0\"\n                  style={{\n                    backgroundColor: themeStyles?.primaryColor || '#2563eb',\n                    color: 'white',\n                    willChange: 'transform'\n                  }}\n                  data-testid=\"button-book-appointment\"\n                >\n                  <div className=\"absolute inset-0 bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500\"></div>\n                  <div className=\"absolute -inset-1 bg-gradient-to-r from-white/0 via-white/30 to-white/0 opacity-0 group-hover:opacity-100 blur-sm transition-opacity duration-500\"></div>\n                  <div className=\"relative flex items-center justify-center gap-2 sm:gap-3\">\n                    <Calendar className=\"h-4 w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6 group-hover:scale-110 group-hover:rotate-12 transition-all duration-300\" />\n                    <span className=\"font-bold tracking-wide\">Book Appointment</span>\n                    <Sparkles className=\"h-3 w-3 sm:h-4 sm:w-4 opacity-0 group-hover:opacity-100 group-hover:rotate-180 transition-all duration-500\" />\n                  </div>\n                </Button>\n                \n                {page.calendarLink && (\n                  <Button\n                    variant=\"outline\"\n                    className=\"group px-4 sm:px-6 py-3 sm:py-4 rounded-xl sm:rounded-2xl text-sm sm:text-base h-auto font-medium sm:font-semibold border-2 hover:shadow-lg transition-all duration-300 hover:scale-105 backdrop-blur-sm\"\n                    style={{\n                      borderColor: themeStyles?.primaryColor || '#2563eb',\n                      color: themeStyles?.primaryColor || '#2563eb',\n                      willChange: 'transform'\n                    }}\n                    asChild\n                    data-testid=\"button-visit-calendar\"\n                  >\n                    <a href={page.calendarLink} target=\"_blank\" rel=\"noopener noreferrer\">\n                      <Calendar className=\"h-4 w-4 sm:h-5 sm:w-5 mr-2 group-hover:rotate-12 transition-transform duration-300\" />\n                      View Calendar\n                    </a>\n                  </Button>\n                )}\n              </div>\n              \n              {/* Enhanced Trust indicators with better mobile design */}\n              <TooltipProvider delayDuration={200}>\n                <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 max-w-4xl mx-auto mb-8\">\n                  <Tooltip>\n                    <TooltipTrigger asChild>\n                      <div className=\"group flex flex-col items-center justify-center p-4 sm:p-5 rounded-2xl bg-card/50 backdrop-blur-sm border border-border/30 hover:border-border/50 transition-all duration-300 hover:shadow-lg hover:scale-105\" style={{ willChange: 'transform' }}>\n                        <div \n                          className=\"w-12 h-12 rounded-full mb-3 flex items-center justify-center shadow-lg group-hover:rotate-12 transition-transform duration-300\"\n                          style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb', willChange: 'transform' }}\n                        >\n                          <Award className=\"w-6 h-6 text-white\" />\n                        </div>\n                        <span className=\"font-semibold text-foreground text-xs sm:text-sm text-center\">Professional</span>\n                        <span className=\"text-xs text-muted-foreground text-center\">Expert quality</span>\n                      </div>\n                    </TooltipTrigger>\n                    <TooltipContent>\n                      <p>Certified and experienced professionals</p>\n                    </TooltipContent>\n                  </Tooltip>\n\n                  <Tooltip>\n                    <TooltipTrigger asChild>\n                      <div className=\"group flex flex-col items-center justify-center p-4 sm:p-5 rounded-2xl bg-card/50 backdrop-blur-sm border border-border/30 hover:border-border/50 transition-all duration-300 hover:shadow-lg hover:scale-105\" style={{ willChange: 'transform' }}>\n                        <div \n                          className=\"w-12 h-12 rounded-full mb-3 flex items-center justify-center shadow-lg group-hover:rotate-12 transition-transform duration-300\"\n                          style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb', willChange: 'transform' }}\n                        >\n                          <Shield className=\"w-6 h-6 text-white\" />\n                        </div>\n                        <span className=\"font-semibold text-foreground text-xs sm:text-sm text-center\">Secure</span>\n                        <span className=\"text-xs text-muted-foreground text-center\">Safe & protected</span>\n                      </div>\n                    </TooltipTrigger>\n                    <TooltipContent>\n                      <p>Your data is safe and secure</p>\n                    </TooltipContent>\n                  </Tooltip>\n\n                  <Tooltip>\n                    <TooltipTrigger asChild>\n                      <div className=\"group flex flex-col items-center justify-center p-4 sm:p-5 rounded-2xl bg-card/50 backdrop-blur-sm border border-border/30 hover:border-border/50 transition-all duration-300 hover:shadow-lg hover:scale-105\" style={{ willChange: 'transform' }}>\n                        <div \n                          className=\"w-12 h-12 rounded-full mb-3 flex items-center justify-center shadow-lg group-hover:rotate-12 transition-transform duration-300\"\n                          style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb', willChange: 'transform' }}\n                        >\n                          <Sparkles className=\"w-6 h-6 text-white\" />\n                        </div>\n                        <span className=\"font-semibold text-foreground text-xs sm:text-sm text-center\">\n                          {pageServices.length > 0 ? `${pageServices.length} ${pageServices.length === 1 ? 'Service' : 'Services'}` : 'Services'}\n                        </span>\n                        <span className=\"text-xs text-muted-foreground text-center\">Available</span>\n                      </div>\n                    </TooltipTrigger>\n                    <TooltipContent>\n                      <p>Multiple services to choose from</p>\n                    </TooltipContent>\n                  </Tooltip>\n\n                  <Tooltip>\n                    <TooltipTrigger asChild>\n                      <div className=\"group flex flex-col items-center justify-center p-4 sm:p-5 rounded-2xl bg-card/50 backdrop-blur-sm border border-border/30 hover:border-border/50 transition-all duration-300 hover:shadow-lg hover:scale-105\" style={{ willChange: 'transform' }}>\n                        <div \n                          className=\"w-12 h-12 rounded-full mb-3 flex items-center justify-center shadow-lg group-hover:rotate-12 transition-transform duration-300\"\n                          style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb', willChange: 'transform' }}\n                        >\n                          <Users className=\"w-6 h-6 text-white\" />\n                        </div>\n                        <span className=\"font-semibold text-foreground text-xs sm:text-sm text-center\">Expert Team</span>\n                        <span className=\"text-xs text-muted-foreground text-center\">\n                          {pageStaff.filter((s: any) => s.isActive !== false).length > 0 \n                            ? `${pageStaff.filter((s: any) => s.isActive !== false).length} ${pageStaff.filter((s: any) => s.isActive !== false).length === 1 ? 'member' : 'members'}`\n                            : 'Ready to serve'}\n                        </span>\n                      </div>\n                    </TooltipTrigger>\n                    <TooltipContent>\n                      <p>Professional team ready to serve you</p>\n                    </TooltipContent>\n                  </Tooltip>\n                </div>\n              </TooltipProvider>\n\n              {/* Quick Contact Buttons */}\n              {(page.contactPhone || page.contactEmail) && (\n                <div className=\"flex flex-wrap gap-3 justify-center max-w-2xl mx-auto\">\n                  {page.contactPhone && (\n                    <Button\n                      onClick={() => setShowPhoneDialog(true)}\n                      className=\"group inline-flex items-center px-6 py-3 rounded-full text-white font-semibold shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\"\n                      style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                      data-testid=\"button-call\"\n                    >\n                      <Phone className=\"w-4 h-4 mr-2 group-hover:rotate-12 transition-transform\" />\n                      <span className=\"text-sm\">Call</span>\n                    </Button>\n                  )}\n                  {page.contactEmail && (\n                    <Button\n                      onClick={() => setShowEmailDialog(true)}\n                      className=\"group inline-flex items-center px-6 py-3 rounded-full text-white font-semibold shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\"\n                      style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                      data-testid=\"button-email\"\n                    >\n                      <Mail className=\"w-4 h-4 mr-2 group-hover:rotate-12 transition-transform\" />\n                      <span className=\"text-sm\">Email</span>\n                    </Button>\n                  )}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Tabbed Interface Section - Enhanced Modern Design */}\n      <section className=\"py-8 sm:py-12 lg:py-16 relative overflow-hidden\">\n        <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\n          <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n            {/* Modern Tab Navigation - Premium Design for PC & Mobile */}\n            <div className=\"flex justify-center mb-8 sm:mb-12 overflow-x-auto scrollbar-hide px-2\">\n              <div \n                className=\"inline-flex items-center gap-2 sm:gap-3 p-2 sm:p-2.5 rounded-2xl backdrop-blur-xl border border-border/30 shadow-2xl transition-all duration-300 min-w-fit\"\n                style={{\n                  background: themeStyles \n                    ? `linear-gradient(135deg, rgba(${hexToRgb(themeStyles.primaryColor)}, 0.08) 0%, rgba(${hexToRgb(themeStyles.primaryColor)}, 0.03) 100%), rgba(255, 255, 255, 0.7)`\n                    : 'linear-gradient(135deg, rgba(37, 99, 235, 0.08) 0%, rgba(37, 99, 235, 0.03) 100%), rgba(255, 255, 255, 0.7)'\n                }}\n              >\n                <TabsList className=\"flex items-center gap-2 sm:gap-3 bg-transparent\">\n                  {tabItems.map((item, index) => {\n                    const IconComponent = item.icon;\n                    const isActive = activeTab === item.id;\n                    return (\n                      <TabsTrigger \n                        key={item.id} \n                        value={item.id}\n                        className=\"group relative flex items-center gap-2 sm:gap-2.5 md:gap-3 px-4 sm:px-5 md:px-7 lg:px-9 py-3 sm:py-3.5 md:py-4 text-xs sm:text-sm md:text-base font-bold rounded-xl transition-all duration-300 ease-out whitespace-nowrap data-[state=active]:shadow-xl border-0\"\n                        style={{\n                          color: isActive ? 'white' : themeStyles?.primaryColor || '#2563eb',\n                          background: isActive \n                            ? themeStyles \n                              ? `linear-gradient(135deg, ${themeStyles.primaryColor} 0%, ${themeStyles.primaryColor}dd 100%)`\n                              : 'linear-gradient(135deg, #2563eb 0%, #2563ebdd 100%)'\n                            : 'transparent',\n                          boxShadow: isActive ? `0 10px 30px -6px ${themeStyles?.primaryColor || '#2563eb'}50` : 'none',\n                          transform: isActive ? 'translateY(-2px)' : 'none'\n                        }}\n                        onMouseEnter={(e) => {\n                          if (!isActive) {\n                            e.currentTarget.style.background = themeStyles \n                              ? `linear-gradient(135deg, rgba(${hexToRgb(themeStyles.primaryColor)}, 0.12) 0%, rgba(${hexToRgb(themeStyles.primaryColor)}, 0.08) 100%)`\n                              : 'linear-gradient(135deg, rgba(37, 99, 235, 0.12) 0%, rgba(37, 99, 235, 0.08) 100%)';\n                            e.currentTarget.style.transform = 'translateY(-1px)';\n                          }\n                        }}\n                        onMouseLeave={(e) => {\n                          if (!isActive) {\n                            e.currentTarget.style.background = 'transparent';\n                            e.currentTarget.style.transform = 'none';\n                          }\n                        }}\n                        data-testid={`tab-${item.id}`}\n                      >\n                        {/* Icon with animated background */}\n                        <div className={`relative flex items-center justify-center transition-all duration-300 ${isActive ? 'scale-110' : 'group-hover:scale-110'}`}>\n                          <div \n                            className={`absolute inset-0 rounded-full blur-sm transition-opacity duration-300 ${isActive ? 'opacity-40' : 'opacity-0 group-hover:opacity-25'}`}\n                            style={{ \n                              backgroundColor: isActive ? 'white' : themeStyles?.primaryColor || '#2563eb'\n                            }}\n                          ></div>\n                          <IconComponent className={`relative h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 transition-all duration-300 ${isActive ? 'drop-shadow-lg' : ''}`} />\n                        </div>\n                        \n                        {/* Label - Now visible on all screen sizes with better typography */}\n                        <span className=\"relative font-bold tracking-wide transition-all duration-300 leading-none\">\n                          {item.label}\n                        </span>\n                      </TabsTrigger>\n                    );\n                  })}\n                </TabsList>\n              </div>\n            </div>\n\n            <TabsContent value=\"about\">\n              <div className=\"py-6 sm:py-8 lg:py-10 px-4 sm:px-6 lg:px-8 rounded-3xl shadow-2xl border border-border/10 transition-all duration-500 hover:shadow-3xl\" \n                style={{\n                  background: themeStyles \n                    ? `linear-gradient(135deg, rgba(${hexToRgb(themeStyles.primaryColor)}, 0.03) 0%, rgba(${hexToRgb(themeStyles.primaryColor)}, 0.01) 100%), rgba(255, 255, 255, 0.5)`\n                    : 'linear-gradient(135deg, rgba(37, 99, 235, 0.03) 0%, rgba(37, 99, 235, 0.01) 100%), rgba(255, 255, 255, 0.5)',\n                  backdropFilter: 'blur(20px)'\n                }}\n              >\n                <div className=\"max-w-6xl mx-auto\">\n                  <div className=\"text-center mb-8\">\n                    <h3 className=\"text-3xl font-bold text-foreground mb-4\">About {page.title}</h3>\n                    {page.tagline && (\n                      <p className=\"text-lg text-muted-foreground mb-6\">{page.tagline}</p>\n                    )}\n                  </div>\n\n                  {/* Image Gallery Slideshow with Photos Header */}\n                  {gallery?.images && Array.isArray(gallery.images) && gallery.images.length > 0 && (\n                    <div className=\"mb-8\">\n                      <h4 className=\"text-xl sm:text-2xl font-bold text-foreground mb-4 flex items-center\">\n                        <Image className=\"h-5 w-5 sm:h-6 sm:w-6 mr-2\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n                        Photos\n                      </h4>\n                      <ImageGallerySlideshow \n                        images={gallery.images} \n                        primaryColor={themeStyles?.primaryColor || '#2563eb'} \n                      />\n                    </div>\n                  )}\n\n                  <div className=\"grid lg:grid-cols-2 gap-6 lg:gap-8 mb-8\">\n                    {/* Left Column - Description */}\n                    <div className=\"space-y-6\">\n                      <div>\n                        <h4 className=\"text-xl sm:text-2xl font-bold text-foreground mb-4 flex items-center\">\n                          <Info className=\"h-5 w-5 sm:h-6 sm:w-6 mr-2\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n                          Description\n                        </h4>\n                        <div className=\"bg-background/50 rounded-xl p-6 border border-border/20\">\n                          <p className=\"text-muted-foreground leading-relaxed text-sm sm:text-base\">\n                            {page.data?.description || page.cancellationPolicy || `Welcome to ${page.title}! We are pleased to inform you that ${page.title?.split(' ')[0]} will be providing you with exceptional professional services. Our team is dedicated to delivering high-quality service and ensuring your satisfaction. We look forward to serving you and exceeding your expectations.`}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Right Column - Features */}\n                    <div className=\"space-y-6\">\n                      <div>\n                        <h4 className=\"text-xl sm:text-2xl font-bold text-foreground mb-4 flex items-center\">\n                          <Sparkles className=\"h-5 w-5 sm:h-6 sm:w-6 mr-2\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n                          What We Offer\n                        </h4>\n                        <div className=\"grid gap-3\">\n                          {services.length > 0 && (\n                            <div className=\"bg-background/50 rounded-lg p-4 border border-border/20 flex items-center hover:border-border/40 transition-colors\">\n                              <CheckCircle className=\"h-5 w-5 mr-3 text-green-500 flex-shrink-0\" />\n                              <span className=\"text-muted-foreground text-sm sm:text-base\">{services.length} Professional Service{services.length > 1 ? 's' : ''} Available</span>\n                            </div>\n                          )}\n                          {pageStaff.length > 0 && (\n                            <div className=\"bg-background/50 rounded-lg p-4 border border-border/20 flex items-center hover:border-border/40 transition-colors\">\n                              <CheckCircle className=\"h-5 w-5 mr-3 text-green-500 flex-shrink-0\" />\n                              <span className=\"text-muted-foreground text-sm sm:text-base\">Expert Team of {pageStaff.length} Professional{pageStaff.length > 1 ? 's' : ''}</span>\n                            </div>\n                          )}\n                          {normalizedBooleans.acceptReviews && (\n                            <div className=\"bg-background/50 rounded-lg p-4 border border-border/20 flex items-center hover:border-border/40 transition-colors\">\n                              <CheckCircle className=\"h-5 w-5 mr-3 text-green-500 flex-shrink-0\" />\n                              <span className=\"text-muted-foreground text-sm sm:text-base\">Customer Reviews & Ratings</span>\n                            </div>\n                          )}\n                          {page.calendarLink && (\n                            <div className=\"bg-background/50 rounded-lg p-4 border border-border/20 flex items-center hover:border-border/40 transition-colors\">\n                              <CheckCircle className=\"h-5 w-5 mr-3 text-green-500 flex-shrink-0\" />\n                              <span className=\"text-muted-foreground text-sm sm:text-base\">Online Booking Available</span>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Information Section - Show if we have contact phone or business data */}\n                  {(page.contactPhone || businessData.businessType || businessData.businessName) && (\n                    <div>\n                          <h4 className=\"text-xl font-semibold text-foreground mb-4 flex items-center\">\n                            <Info className=\"h-5 w-5 mr-2\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n                            Information\n                          </h4>\n                          <div className=\"bg-background/50 rounded-lg p-6 border border-border/20\">\n                            <div className=\"grid gap-4 sm:grid-cols-2\">\n                              {/* Business Name */}\n                              {businessData.businessName && (\n                                <div className=\"flex items-start space-x-3\">\n                                  <div \n                                    className=\"w-5 h-5 rounded-full flex items-center justify-center mt-0.5 flex-shrink-0\"\n                                    style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                                  >\n                                    <Briefcase className=\"h-3 w-3 text-white\" />\n                                  </div>\n                                  <div>\n                                    <p className=\"text-sm font-medium text-foreground\">Business Name</p>\n                                    <p className=\"text-sm text-muted-foreground\" data-testid=\"text-business-name\">\n                                      {businessData.businessName}\n                                    </p>\n                                  </div>\n                                </div>\n                              )}\n\n                              {/* Phone */}\n                              {page.contactPhone && (\n                                <div className=\"flex items-start space-x-3\">\n                                  <div \n                                    className=\"w-5 h-5 rounded-full flex items-center justify-center mt-0.5 flex-shrink-0\"\n                                    style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                                  >\n                                    <Phone className=\"h-3 w-3 text-white\" />\n                                  </div>\n                                  <div>\n                                    <p className=\"text-sm font-medium text-foreground\">Phone</p>\n                                    <a \n                                      href={`tel:${page.contactPhone}`} \n                                      className=\"text-sm text-muted-foreground hover:underline\"\n                                      data-testid=\"link-phone-info\"\n                                    >\n                                      {page.contactPhone}\n                                    </a>\n                                  </div>\n                                </div>\n                              )}\n\n                              {/* Business Type */}\n                              {businessData.businessType && (\n                                <div className=\"flex items-start space-x-3\">\n                                  <div \n                                    className=\"w-5 h-5 rounded-full flex items-center justify-center mt-0.5 flex-shrink-0\"\n                                    style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                                  >\n                                    <Briefcase className=\"h-3 w-3 text-white\" />\n                                  </div>\n                                  <div>\n                                    <p className=\"text-sm font-medium text-foreground\">Business Type</p>\n                                    <p className=\"text-sm text-muted-foreground\" data-testid=\"text-business-type\">\n                                      {businessData.businessType.charAt(0).toUpperCase() + businessData.businessType.slice(1)}\n                                    </p>\n                                  </div>\n                                </div>\n                              )}\n\n                              {/* Walk-ins */}\n                              {businessData.walkInsAccepted && (\n                                <div className=\"flex items-start space-x-3\">\n                                  <div \n                                    className=\"w-5 h-5 rounded-full flex items-center justify-center mt-0.5 flex-shrink-0\"\n                                    style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                                  >\n                                    <Clock className=\"h-3 w-3 text-white\" />\n                                  </div>\n                                  <div>\n                                    <p className=\"text-sm font-medium text-foreground\">Walk-ins</p>\n                                    <p className=\"text-sm text-muted-foreground\" data-testid=\"text-walk-ins\">\n                                      {businessData.walkInsAccepted === 'accepted' ? 'Walk-ins accepted' :\n                                       businessData.walkInsAccepted === 'declined' ? 'Walk-ins declined' :\n                                       businessData.walkInsAccepted === 'by-appointment-preferred' ? 'By appointment preferred' :\n                                       businessData.walkInsAccepted}\n                                    </p>\n                                  </div>\n                                </div>\n                              )}\n\n                              {/* Parking */}\n                              {businessData.parking && (\n                                <div className=\"flex items-start space-x-3\">\n                                  <div \n                                    className=\"w-5 h-5 rounded-full flex items-center justify-center mt-0.5 flex-shrink-0\"\n                                    style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                                  >\n                                    <MapPin className=\"h-3 w-3 text-white\" />\n                                  </div>\n                                  <div>\n                                    <p className=\"text-sm font-medium text-foreground\">Parking</p>\n                                    <p className=\"text-sm text-muted-foreground\" data-testid=\"text-parking\">\n                                      {businessData.parking}\n                                    </p>\n                                  </div>\n                                </div>\n                              )}\n\n                              {/* Amenities */}\n                              {businessData.amenities && (\n                                <div className=\"flex items-start space-x-3\">\n                                  <div \n                                    className=\"w-5 h-5 rounded-full flex items-center justify-center mt-0.5 flex-shrink-0\"\n                                    style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                                  >\n                                    <Sparkles className=\"h-3 w-3 text-white\" />\n                                  </div>\n                                  <div>\n                                    <p className=\"text-sm font-medium text-foreground\">Amenities</p>\n                                    <p className=\"text-sm text-muted-foreground\" data-testid=\"text-amenities\">\n                                      {businessData.amenities}\n                                    </p>\n                                  </div>\n                                </div>\n                              )}\n\n                              {/* Spoken Languages */}\n                              {businessData.spokenLanguages && (\n                                <div className=\"flex items-start space-x-3\">\n                                  <div \n                                    className=\"w-5 h-5 rounded-full flex items-center justify-center mt-0.5 flex-shrink-0\"\n                                    style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                                  >\n                                    <MessageSquare className=\"h-3 w-3 text-white\" />\n                                  </div>\n                                  <div>\n                                    <p className=\"text-sm font-medium text-foreground\">Spoken Languages</p>\n                                    <p className=\"text-sm text-muted-foreground\" data-testid=\"text-spoken-languages\">\n                                      {businessData.spokenLanguages}\n                                    </p>\n                                  </div>\n                                </div>\n                              )}\n\n                              {/* Kid Friendly */}\n                              {businessData.kidFriendly && (\n                                <div className=\"flex items-start space-x-3\">\n                                  <div \n                                    className=\"w-5 h-5 rounded-full flex items-center justify-center mt-0.5 flex-shrink-0\"\n                                    style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                                  >\n                                    <Heart className=\"h-3 w-3 text-white\" />\n                                  </div>\n                                  <div>\n                                    <p className=\"text-sm font-medium text-foreground\">Kid Friendly</p>\n                                    <p className=\"text-sm text-muted-foreground\" data-testid=\"text-kid-friendly\">\n                                      {businessData.kidFriendly === 'yes' ? 'Yes' :\n                                       businessData.kidFriendly === 'no' ? 'No' :\n                                       businessData.kidFriendly === 'family-focused' ? 'Family-focused business' :\n                                       businessData.kidFriendly}\n                                    </p>\n                                  </div>\n                                </div>\n                              )}\n                            </div>\n\n                            {/* Appointment Cancellation Policy - Full width if exists */}\n                            {businessData.appointmentCancellationPolicy && (\n                              <div className=\"mt-6 pt-6 border-t border-border/20\">\n                                <div className=\"flex items-start space-x-3\">\n                                  <div \n                                    className=\"w-5 h-5 rounded-full flex items-center justify-center mt-0.5 flex-shrink-0\"\n                                    style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                                  >\n                                    <FileText className=\"h-3 w-3 text-white\" />\n                                  </div>\n                                  <div className=\"flex-1\">\n                                    <p className=\"text-sm font-medium text-foreground mb-2\">Appointment Cancellation Policy</p>\n                                    <p className=\"text-sm text-muted-foreground leading-relaxed\" data-testid=\"text-cancellation-policy\">\n                                      {businessData.appointmentCancellationPolicy}\n                                    </p>\n                                  </div>\n                                </div>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      )}\n\n                  {/* Reviews Section - Always Visible */}\n                  <div className=\"mt-8 pt-8 border-t border-border/20\">\n                    <h4 className=\"text-xl font-semibold text-foreground mb-6 flex items-center\">\n                      <Star className=\"h-5 w-5 mr-2\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n                      Customer Reviews\n                    </h4>\n                      \n                      {approvedReviews.length > 0 ? (\n                        <>\n                          {/* Reviews Summary */}\n                          <div className=\"mb-6\">\n                            <div className=\"bg-background/50 rounded-lg p-6 border border-border/20\">\n                              <div className=\"flex flex-col sm:flex-row items-center justify-between\">\n                                <div className=\"text-center sm:text-left mb-4 sm:mb-0\">\n                                  <div className=\"flex items-center justify-center sm:justify-start mb-2\">\n                                    <div className=\"text-3xl font-bold text-foreground mr-2\">\n                                      {avgRating.toFixed(1)}\n                                    </div>\n                                    <div className=\"flex space-x-1\">\n                                      {[1, 2, 3, 4, 5].map((star) => (\n                                        <Star \n                                          key={star} \n                                          className={`h-5 w-5 ${\n                                            star <= Math.round(avgRating)\n                                              ? 'text-yellow-400 fill-current' \n                                              : 'text-gray-300'\n                                          }`}\n                                        />\n                                      ))}\n                                    </div>\n                                  </div>\n                                  <p className=\"text-muted-foreground\">\n                                    Based on {approvedCount} review{approvedCount !== 1 ? 's' : ''}\n                                  </p>\n                                </div>\n                                <Button \n                                  onClick={() => setShowReviews(!showReviews)}\n                                  className=\"px-6 py-2\"\n                                  style={{\n                                    backgroundColor: themeStyles?.primaryColor || '#2563eb',\n                                    color: 'white'\n                                  }}\n                                  data-testid=\"button-write-review\"\n                                >\n                                  <MessageSquare className=\"h-4 w-4 mr-2\" />\n                                  Write a Review\n                                </Button>\n                              </div>\n                            </div>\n                          </div>\n\n                          {/* Recent Reviews Grid */}\n                          <div className=\"grid gap-4 md:grid-cols-2\">\n                            {approvedReviews\n                              .sort((a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime())\n                              .slice(0, 4)\n                              .map((review: any) => (\n                                <div key={review.id} className=\"bg-background/50 rounded-lg p-4 border border-border/20\" data-testid={`card-review-${review.id}`}>\n                                  <div className=\"flex items-start space-x-3\">\n                                    <div \n                                      className=\"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0\"\n                                      style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                                    >\n                                      <User className=\"h-4 w-4 text-white\" />\n                                    </div>\n                                    <div className=\"flex-1 min-w-0\">\n                                      <div className=\"flex items-center justify-between mb-1\">\n                                        <h5 className=\"font-semibold text-foreground text-sm truncate\">\n                                          {review.reviewerName}\n                                        </h5>\n                                        <div className=\"flex space-x-1\">\n                                          {[1, 2, 3, 4, 5].map((star) => (\n                                            <Star \n                                              key={star} \n                                              className={`h-3 w-3 ${\n                                                star <= review.rating \n                                                  ? 'text-yellow-400 fill-current' \n                                                  : 'text-gray-300'\n                                              }`}\n                                            />\n                                          ))}\n                                        </div>\n                                      </div>\n                                      {review.reviewText && (\n                                        <p className=\"text-muted-foreground text-xs leading-relaxed mb-1\">\n                                          {review.reviewText.length > 100 ? `${review.reviewText.slice(0, 100)}...` : review.reviewText}\n                                        </p>\n                                      )}\n                                      <p className=\"text-xs text-muted-foreground\">\n                                        {new Date(review.createdAt).toLocaleDateString('en-US', { \n                                          year: 'numeric', \n                                          month: 'short', \n                                          day: 'numeric' \n                                        })}\n                                      </p>\n                                    </div>\n                                  </div>\n                                </div>\n                              ))}\n                          </div>\n                        </>\n                      ) : (\n                        /* Empty Reviews State */\n                        <div className=\"text-center py-12\">\n                          <div className=\"bg-background/50 rounded-lg p-8 border border-border/20\">\n                            <div \n                              className=\"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center\"\n                              style={{ backgroundColor: `${themeStyles?.primaryColor || '#2563eb'}20` }}\n                            >\n                              <Star className=\"h-8 w-8\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n                            </div>\n                            <h4 className=\"text-xl font-semibold text-foreground mb-2\">No Reviews Yet</h4>\n                            <p className=\"text-muted-foreground max-w-md mx-auto mb-6\">\n                              Be the first to share your experience with {page.title}. Your feedback helps others make informed decisions.\n                            </p>\n                            <Button \n                              onClick={() => setShowReviews(true)}\n                              className=\"px-6 py-3\"\n                              style={{\n                                backgroundColor: themeStyles?.primaryColor || '#2563eb',\n                                color: 'white'\n                              }}\n                              data-testid=\"button-first-review\"\n                            >\n                              <MessageSquare className=\"h-4 w-4 mr-2\" />\n                              Write the First Review\n                            </Button>\n                          </div>\n                        </div>\n                      )}\n                      \n                      {/* Review Submission Form - Only show if reviews are accepted */}\n                      {normalizedBooleans.acceptReviews && (\n                        <Collapsible open={showReviews} onOpenChange={setShowReviews}>\n                          <CollapsibleContent className=\"space-y-4 mt-6\">\n                            <div className=\"bg-background/50 rounded-lg p-4 sm:p-6 border border-border/20 max-w-2xl mx-auto\">\n                              <h5 className=\"text-lg font-semibold text-foreground mb-6 flex items-center\">\n                                <MessageSquare className=\"h-5 w-5 mr-2\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n                                Share Your Experience\n                              </h5>\n                              \n                              <form onSubmit={handleReviewSubmit} className=\"space-y-6\">\n                                <div className=\"grid sm:grid-cols-2 gap-4\">\n                                  <div>\n                                    <Label htmlFor=\"reviewerName\" className=\"text-sm font-medium text-foreground\">\n                                      Your Name *\n                                    </Label>\n                                    <Input\n                                      id=\"reviewerName\"\n                                      type=\"text\"\n                                      value={reviewFormData.reviewerName}\n                                      onChange={(e) => handleInputChange('reviewerName', e.target.value)}\n                                      className={`mt-1 w-full ${validationErrors.reviewerName ? 'border-red-500' : ''}`}\n                                      placeholder=\"Enter your full name\"\n                                      data-testid=\"input-review-name\"\n                                    />\n                                    {validationErrors.reviewerName && (\n                                      <p className=\"text-red-500 text-xs mt-1\">{validationErrors.reviewerName}</p>\n                                    )}\n                                  </div>\n                                  \n                                  <div>\n                                    <Label htmlFor=\"reviewerEmail\" className=\"text-sm font-medium text-foreground\">\n                                      Email (Optional)\n                                    </Label>\n                                    <Input\n                                      id=\"reviewerEmail\"\n                                      type=\"email\"\n                                      value={reviewFormData.reviewerEmail}\n                                      onChange={(e) => handleInputChange('reviewerEmail', e.target.value)}\n                                      className={`mt-1 w-full ${validationErrors.reviewerEmail ? 'border-red-500' : ''}`}\n                                      placeholder=\"your.email@example.com\"\n                                      data-testid=\"input-review-email\"\n                                    />\n                                    {validationErrors.reviewerEmail && (\n                                      <p className=\"text-red-500 text-xs mt-1\">{validationErrors.reviewerEmail}</p>\n                                    )}\n                                  </div>\n                                </div>\n\n                                <div>\n                                  <Label className=\"text-sm font-medium text-foreground\">\n                                    Rating *\n                                  </Label>\n                                  <div className=\"flex items-center space-x-2 mt-2\">\n                                    {[1, 2, 3, 4, 5].map((star) => (\n                                      <button\n                                        key={star}\n                                        type=\"button\"\n                                        onClick={() => handleInputChange('rating', star)}\n                                        className=\"focus:outline-none\"\n                                        data-testid={`button-rating-${star}`}\n                                      >\n                                        <Star \n                                          className={`h-6 w-6 sm:h-8 sm:w-8 transition-colors ${\n                                            star <= reviewFormData.rating \n                                              ? 'text-yellow-400 fill-current' \n                                              : 'text-gray-300 hover:text-yellow-200'\n                                          }`}\n                                        />\n                                      </button>\n                                    ))}\n                                    <span className=\"text-muted-foreground text-sm ml-2\">\n                                      {reviewFormData.rating > 0 && `${reviewFormData.rating} star${reviewFormData.rating !== 1 ? 's' : ''}`}\n                                    </span>\n                                  </div>\n                                  {validationErrors.rating && (\n                                    <p className=\"text-red-500 text-xs mt-1\">{validationErrors.rating}</p>\n                                  )}\n                                </div>\n\n                                <div>\n                                  <Label htmlFor=\"reviewText\" className=\"text-sm font-medium text-foreground\">\n                                    Your Review (Optional)\n                                  </Label>\n                                  <Textarea\n                                    id=\"reviewText\"\n                                    value={reviewFormData.reviewText}\n                                    onChange={(e) => handleInputChange('reviewText', e.target.value)}\n                                    className={`mt-1 min-h-[120px] w-full ${validationErrors.reviewText ? 'border-red-500' : ''}`}\n                                    placeholder=\"Tell us about your experience...\"\n                                    maxLength={500}\n                                    data-testid=\"textarea-review-text\"\n                                  />\n                                  <div className=\"flex justify-between items-center mt-1\">\n                                    {validationErrors.reviewText && (\n                                      <p className=\"text-red-500 text-xs\">{validationErrors.reviewText}</p>\n                                    )}\n                                    <p className=\"text-xs text-muted-foreground ml-auto\">\n                                      {reviewFormData.reviewText.length}/500 characters\n                                    </p>\n                                  </div>\n                                </div>\n\n                                <div className=\"flex flex-col sm:flex-row gap-3 pt-4 border-t border-border/20\">\n                                  <Button \n                                    type=\"submit\"\n                                    disabled={submitReviewMutation.isPending}\n                                    className=\"flex-1 sm:flex-none px-6 py-2\"\n                                    style={{\n                                      backgroundColor: themeStyles?.primaryColor || '#2563eb',\n                                      color: 'white'\n                                    }}\n                                    data-testid=\"button-submit-review\"\n                                  >\n                                    {submitReviewMutation.isPending ? (\n                                      <>\n                                        <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                                        Submitting...\n                                      </>\n                                    ) : (\n                                      <>\n                                        <MessageSquare className=\"h-4 w-4 mr-2\" />\n                                        Submit Review\n                                      </>\n                                    )}\n                                  </Button>\n                                  <Button \n                                    type=\"button\"\n                                    variant=\"outline\"\n                                    onClick={() => setShowReviews(false)}\n                                    className=\"flex-1 sm:flex-none px-6 py-2\"\n                                    data-testid=\"button-cancel-review\"\n                                  >\n                                    Cancel\n                                  </Button>\n                                </div>\n                              </form>\n                            </div>\n                          </CollapsibleContent>\n                        </Collapsible>\n                      )}\n                    </div>\n\n                  {/* Combined Location and Hours Section */}\n                  {(page.business_address || (normalizedBooleans.showBusinessHours && page.business_hours) || (normalizedBooleans.showContactInfo && (page.contact_phone || page.contact_email))) && (\n                    <div className=\"mt-8 pt-8 border-t border-border/20\">\n                      <div className=\"bg-background/50 rounded-xl border border-border/20 overflow-hidden shadow-lg\">\n                        <div className=\"grid lg:grid-cols-2 gap-0\">\n                          {/* Left Side - Map and Address */}\n                          {page.business_address && (\n                            <div className=\"relative\">\n                              {/* Location Button - Redirects to Google Maps */}\n                              <div className=\"relative aspect-[4/3] lg:aspect-[3/2] bg-gradient-to-br from-primary/5 to-primary/10 dark:from-primary/10 dark:to-primary/5 flex items-center justify-center\">\n                                <Button\n                                  asChild\n                                  className=\"flex-col h-auto p-8 bg-background/80 hover:bg-background border-border/30 shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105\"\n                                  variant=\"outline\"\n                                  data-testid=\"button-google-maps-location\"\n                                >\n                                  <a\n                                    href={page.location_link || page.locationLink || `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(page.business_address)}`}\n                                    target=\"_blank\"\n                                    rel=\"noopener noreferrer\"\n                                  >\n                                    <div \n                                      className=\"w-16 h-16 rounded-full flex items-center justify-center mb-4 shadow-lg\"\n                                      style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                                    >\n                                      <MapPin className=\"h-8 w-8 text-white\" />\n                                    </div>\n                                    <div className=\"text-center\">\n                                      <p className=\"text-lg font-semibold text-foreground mb-2\">View Location</p>\n                                      <p className=\"text-sm text-muted-foreground\">Open in Google Maps</p>\n                                    </div>\n                                    <ExternalLink className=\"h-4 w-4 mt-2 text-muted-foreground\" />\n                                  </a>\n                                </Button>\n                              </div>\n                              \n                              {/* Address Information */}\n                              <div className=\"p-6 border-t border-border/20 bg-background/30\">\n                                <div className=\"flex items-start space-x-3 mb-4\">\n                                  <div \n                                    className=\"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 shadow-sm\"\n                                    style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                                  >\n                                    <MapPin className=\"h-4 w-4 text-white\" />\n                                  </div>\n                                  <div className=\"flex-1\">\n                                    <p className=\"text-xs text-muted-foreground mb-1\">Address</p>\n                                    <p className=\"font-medium text-foreground text-sm\">{page.business_address}</p>\n                                  </div>\n                                </div>\n                                \n                                {/* Action Buttons */}\n                                {normalizedBooleans.showContactInfo && (page.contact_phone || page.contact_email) && (\n                                  <div className=\"flex gap-2 mt-4\">\n                                    {page.contact_phone && (\n                                      <Button\n                                        variant=\"outline\"\n                                        onClick={() => setShowPhoneDialog(true)}\n                                        className=\"flex-1 h-auto py-3 border-border/40 hover:border-primary/50 transition-all\"\n                                        data-testid=\"button-call\"\n                                      >\n                                        <div className=\"flex flex-col items-center gap-1\">\n                                          <Phone className=\"h-5 w-5\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n                                          <span className=\"text-xs font-medium\">Call</span>\n                                        </div>\n                                      </Button>\n                                    )}\n                                    {page.contact_email && (\n                                      <Button\n                                        variant=\"outline\"\n                                        onClick={() => setShowEmailDialog(true)}\n                                        className=\"flex-1 h-auto py-3 border-border/40 hover:border-primary/50 transition-all\"\n                                        data-testid=\"button-message\"\n                                      >\n                                        <div className=\"flex flex-col items-center gap-1\">\n                                          <Mail className=\"h-5 w-5\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n                                          <span className=\"text-xs font-medium\">Message</span>\n                                        </div>\n                                      </Button>\n                                    )}\n                                  </div>\n                                )}\n                              </div>\n                            </div>\n                          )}\n                          \n                          {/* Right Side - Business Hours */}\n                          {normalizedBooleans.showBusinessHours && page.business_hours && (\n                            <div className={`p-6 ${page.business_address ? 'lg:border-l border-t lg:border-t-0 border-border/20' : ''} bg-background/30`}>\n                              <h4 className=\"text-lg font-semibold text-foreground mb-6 flex items-center gap-2\">\n                                <Clock className=\"h-5 w-5\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n                                Business Hours\n                              </h4>\n                              <div className=\"space-y-3\">\n                                {page.business_hours && (() => {\n                                  const dayOrder = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];\n                                  return Object.entries(page.business_hours)\n                                    .sort(([dayA], [dayB]) => {\n                                      const indexA = dayOrder.indexOf(dayA.toLowerCase());\n                                      const indexB = dayOrder.indexOf(dayB.toLowerCase());\n                                      // Unknown days (-1) go to the end\n                                      if (indexA === -1 && indexB === -1) return 0;\n                                      if (indexA === -1) return 1;\n                                      if (indexB === -1) return -1;\n                                      return indexA - indexB;\n                                    })\n                                    .map(([day, hours]: [string, any]) => {\n                                      const isToday = day.toLowerCase() === new Date().toLocaleDateString('en-US', { weekday: 'long' }).toLowerCase();\n                                      const displayHours = hours === \"Closed\" ? \"Closed\" : String(hours);\n                                      const isClosed = hours === \"Closed\";\n                                      \n                                      return (\n                                        <div \n                                          key={day} \n                                          className={`flex justify-between items-center py-2 px-3 rounded-lg transition-colors ${\n                                            isToday ? 'bg-primary/10 border border-primary/20' : 'hover:bg-background/50'\n                                          }`}\n                                          data-testid={`hours-${day.toLowerCase()}`}\n                                        >\n                                          <span className={`font-medium capitalize text-sm ${\n                                            isToday ? 'font-semibold' : ''\n                                          }`} style={isToday ? { color: themeStyles?.primaryColor || '#2563eb' } : {}}>\n                                            {day}\n                                          </span>\n                                          <span className={`text-sm font-medium ${\n                                            isClosed ? 'text-muted-foreground' : isToday ? 'font-semibold' : 'text-foreground'\n                                          }`} style={isToday && !isClosed ? { color: themeStyles?.primaryColor || '#2563eb' } : {}}>\n                                            {displayHours}\n                                          </span>\n                                        </div>\n                                      );\n                                    });\n                                })()}\n                              </div>\n                            </div>\n                          )}\n                        </div>\n                        \n                        {/* Fallback for when only contact info exists */}\n                        {!page.business_address && !(normalizedBooleans.showBusinessHours && page.business_hours) && normalizedBooleans.showContactInfo && (page.contact_phone || page.contact_email) && (\n                          <div className=\"p-6\">\n                            <h4 className=\"text-lg font-semibold text-foreground mb-4\">Contact Information</h4>\n                            <div className=\"flex gap-3\">\n                              {page.contact_phone && (\n                                <Button\n                                  variant=\"outline\"\n                                  onClick={() => setShowPhoneDialog(true)}\n                                  className=\"flex-1 h-auto py-4 border-border/40 hover:border-primary/50 transition-all\"\n                                  data-testid=\"button-call\"\n                                >\n                                  <div className=\"flex flex-col items-center gap-2\">\n                                    <Phone className=\"h-6 w-6\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n                                    <span className=\"text-sm font-semibold\">Call</span>\n                                  </div>\n                                </Button>\n                              )}\n                              {page.contact_email && (\n                                <Button\n                                  variant=\"outline\"\n                                  onClick={() => setShowEmailDialog(true)}\n                                  className=\"flex-1 h-auto py-4 border-border/40 hover:border-primary/50 transition-all\"\n                                  data-testid=\"button-email\"\n                                >\n                                  <div className=\"flex flex-col items-center gap-2\">\n                                    <Mail className=\"h-6 w-6\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n                                    <span className=\"text-sm font-semibold\">Email</span>\n                                  </div>\n                                </Button>\n                              )}\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Gallery Section */}\n                  {gallery.images && gallery.images.length > 0 && (\n                    <div className=\"mt-8 pt-8 border-t border-border/20\">\n                      <h4 className=\"text-xl font-semibold text-foreground mb-6 flex items-center\">\n                        <Image className=\"h-5 w-5 mr-2\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n                        Gallery\n                      </h4>\n                      <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4\">\n                        {gallery.images.slice(0, 8).map((image: any, index: number) => (\n                          <div \n                            key={index} \n                            className=\"relative aspect-square rounded-lg overflow-hidden bg-background/50 border border-border/20 hover:border-primary/50 transition-all duration-300 hover:shadow-lg group cursor-pointer\"\n                            data-testid={`gallery-thumb-${index}`}\n                            onClick={() => {\n                              setSelectedImage(image.url || image);\n                              setIsImageModalOpen(true);\n                            }}\n                          >\n                            <img \n                              src={image.url || image} \n                              alt={`${page.title} - Gallery ${index + 1}`}\n                              className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300\"\n                              loading=\"lazy\"\n                              width=\"200\"\n                              height=\"200\"\n                            />\n                            <div className=\"absolute inset-0 bg-background/0 group-hover:bg-background/20 transition-colors duration-300\" />\n                            <div className=\"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\n                              <div \n                                className=\"w-8 h-8 rounded-full flex items-center justify-center shadow-lg\"\n                                style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                              >\n                                <Image className=\"h-4 w-4 text-white\" />\n                              </div>\n                            </div>\n                          </div>\n                        ))}\n                        \n                        {gallery.images.length > 8 && (\n                          <div className=\"relative aspect-square rounded-lg overflow-hidden bg-background/80 border border-border/20 flex items-center justify-center text-center p-4\">\n                            <div>\n                              <div \n                                className=\"w-8 h-8 rounded-full mx-auto mb-2 flex items-center justify-center\"\n                                style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                              >\n                                <Image className=\"h-4 w-4 text-white\" />\n                              </div>\n                              <p className=\"text-xs font-medium text-foreground\">\n                                +{gallery.images.length - 8} more\n                              </p>\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  )}\n\n                </div>\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"services\">\n              <div className=\"py-6 sm:py-8 lg:py-10 px-4 sm:px-6 lg:px-8 rounded-3xl shadow-2xl border border-border/10 transition-all duration-500 hover:shadow-3xl\" \n                style={{\n                  background: themeStyles \n                    ? `linear-gradient(135deg, rgba(${hexToRgb(themeStyles.primaryColor)}, 0.03) 0%, rgba(${hexToRgb(themeStyles.primaryColor)}, 0.01) 100%), rgba(255, 255, 255, 0.5)`\n                    : 'linear-gradient(135deg, rgba(37, 99, 235, 0.03) 0%, rgba(37, 99, 235, 0.01) 100%), rgba(255, 255, 255, 0.5)',\n                  backdropFilter: 'blur(20px)'\n                }}\n              >\n                <div className=\"max-w-6xl mx-auto\">\n                  <div className=\"text-center mb-8\">\n                    <h3 className=\"text-3xl font-bold text-foreground mb-4\">Our Services</h3>\n                    <p className=\"text-lg text-muted-foreground mb-6\">\n                      Discover our range of professional services designed to meet your needs\n                    </p>\n                  </div>\n\n                  {services.length > 0 ? (\n                    <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n                      {services.map((service: any, index: number) => {\n                        const ServiceIcon = getServiceIcon(service.name);\n                        const currency = getCurrencyByCode(service.currency || 'USD');\n                        \n                        return (\n                          <Card key={service.id} className=\"group hover:shadow-2xl hover:border-border/40 transition-all duration-500 border-border/15 bg-background/60 backdrop-blur-md overflow-hidden hover:-translate-y-1\" data-testid={`card-service-${service.id}`}>\n                            {service.imageUrl && (\n                              <div className=\"relative w-full h-48 overflow-hidden\">\n                                <img\n                                  src={service.imageUrl}\n                                  alt={service.name}\n                                  className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500\"\n                                  data-testid={`img-service-${service.id}`}\n                                />\n                                <div className=\"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent\"></div>\n                              </div>\n                            )}\n                            <CardContent className=\"p-5 sm:p-6 lg:p-7\">\n                              <div className=\"flex flex-col sm:flex-row items-start gap-4 sm:space-x-4\">\n                                {!service.imageUrl && (\n                                  <div \n                                    className=\"w-14 h-14 sm:w-16 sm:h-16 rounded-2xl flex items-center justify-center group-hover:scale-110 group-hover:rotate-3 transition-all duration-500 flex-shrink-0 shadow-lg\"\n                                    style={{ \n                                      backgroundColor: themeStyles?.primaryColor || '#2563eb',\n                                      boxShadow: `0 8px 20px -4px ${themeStyles?.primaryColor || '#2563eb'}40`\n                                    }}\n                                  >\n                                    <ServiceIcon className=\"h-7 w-7 sm:h-8 sm:w-8 text-white\" />\n                                  </div>\n                                )}\n                                <div className=\"flex-1 min-w-0 w-full\">\n                                  <div className=\"flex flex-col sm:flex-row sm:items-start sm:justify-between mb-3 gap-2\">\n                                    <h4 className=\"text-lg sm:text-xl font-bold text-foreground group-hover:text-primary transition-colors leading-tight\">\n                                      {service.name}\n                                    </h4>\n                                  </div>\n                                  \n                                  {service.description && (\n                                    <p className=\"text-muted-foreground text-sm mb-4 leading-relaxed\">\n                                      {service.description}\n                                    </p>\n                                  )}\n                                  \n                                  <div className=\"flex items-center justify-between\">\n                                    <div className=\"flex items-center space-x-4\">\n                                      <div className=\"flex items-center text-sm text-muted-foreground\">\n                                        <Clock className=\"h-4 w-4 mr-1\" />\n                                        <span>{service.durationMinutes} min</span>\n                                      </div>\n                                      <div className=\"flex items-center text-sm font-semibold\">\n                                        <DollarSign className=\"h-4 w-4 mr-1\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n                                        <span style={{ color: themeStyles?.primaryColor || '#2563eb' }}>\n                                          {currency?.symbol || '$'}{parseFloat(service.price).toFixed(2)}\n                                        </span>\n                                      </div>\n                                    </div>\n                                    <Button \n                                      size=\"sm\" \n                                      onClick={() => setShowBookingModal(true)}\n                                      className=\"h-8 px-3 text-xs font-medium\"\n                                      style={{\n                                        backgroundColor: themeStyles?.primaryColor || '#2563eb',\n                                        color: 'white'\n                                      }}\n                                      data-testid={`button-book-${service.id}`}\n                                    >\n                                      Book\n                                    </Button>\n                                  </div>\n                                </div>\n                              </div>\n                            </CardContent>\n                          </Card>\n                        );\n                      })}\n                    </div>\n                  ) : (\n                    <div className=\"text-center py-12\">\n                      <div \n                        className=\"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center\"\n                        style={{ backgroundColor: `${themeStyles?.primaryColor || '#2563eb'}20` }}\n                      >\n                        <Sparkles className=\"h-8 w-8\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n                      </div>\n                      <h4 className=\"text-xl font-semibold text-foreground mb-2\">No Services Listed</h4>\n                      <p className=\"text-muted-foreground max-w-md mx-auto\">\n                        Services are currently being updated. Please contact us directly for information about available services.\n                      </p>\n                      {(page.contactPhone || page.contactEmail) && (\n                        <div className=\"flex flex-col sm:flex-row gap-3 justify-center mt-6\">\n                          {page.contactPhone && (\n                            <Button variant=\"outline\" asChild data-testid=\"button-call-no-services\">\n                              <a href={`tel:${page.contactPhone}`} className=\"flex items-center\">\n                                <Phone className=\"h-4 w-4 mr-2\" />\n                                Call Us\n                              </a>\n                            </Button>\n                          )}\n                          {page.contactEmail && (\n                            <Button variant=\"outline\" asChild data-testid=\"button-email-no-services\">\n                              <a href={`mailto:${page.contactEmail}`} className=\"flex items-center\">\n                                <Mail className=\"h-4 w-4 mr-2\" />\n                                Email Us\n                              </a>\n                            </Button>\n                          )}\n                        </div>\n                      )}\n                    </div>\n                  )}\n\n                  {/* Service Categories or Additional Info */}\n                  {services.length > 0 && (\n                    <div className=\"mt-8 pt-8 border-t border-border/20\">\n                      <div className=\"text-center\">\n                        <p className=\"text-muted-foreground mb-4\">\n                          Need something specific? We offer customized services to meet your unique requirements.\n                        </p>\n                        <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\n                          <Button \n                            onClick={() => setShowBookingModal(true)}\n                            className=\"px-6 py-2\"\n                            style={{\n                              backgroundColor: themeStyles?.primaryColor || '#2563eb',\n                              color: 'white'\n                            }}\n                            data-testid=\"button-book-custom\"\n                          >\n                            <Calendar className=\"h-4 w-4 mr-2\" />\n                            Book Appointment\n                          </Button>\n                          {page.contactPhone && (\n                            <Button variant=\"outline\" asChild data-testid=\"button-call-custom\">\n                              <a href={`tel:${page.contactPhone}`} className=\"flex items-center px-6 py-2\">\n                                <Phone className=\"h-4 w-4 mr-2\" />\n                                Ask About Custom Services\n                              </a>\n                            </Button>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"staff\">\n              <div className=\"py-6 sm:py-8 lg:py-10 px-4 sm:px-6 lg:px-8 rounded-3xl shadow-2xl border border-border/10 transition-all duration-500 hover:shadow-3xl\" \n                style={{\n                  background: themeStyles \n                    ? `linear-gradient(135deg, rgba(${hexToRgb(themeStyles.primaryColor)}, 0.03) 0%, rgba(${hexToRgb(themeStyles.primaryColor)}, 0.01) 100%), rgba(255, 255, 255, 0.5)`\n                    : 'linear-gradient(135deg, rgba(37, 99, 235, 0.03) 0%, rgba(37, 99, 235, 0.01) 100%), rgba(255, 255, 255, 0.5)',\n                  backdropFilter: 'blur(20px)'\n                }}\n              >\n                <div className=\"max-w-6xl mx-auto\">\n                  <div className=\"text-center mb-8\">\n                    <h3 className=\"text-3xl font-bold text-foreground mb-4\">Meet Our Team</h3>\n                    <p className=\"text-lg text-muted-foreground mb-6\">\n                      Our experienced professionals are here to provide you with exceptional service\n                    </p>\n                  </div>\n\n                  {pageStaff.filter((staff: any) => staff.isActive !== false).length > 0 ? (\n                    <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\n                      {pageStaff\n                        .filter((staff: any) => staff.isActive !== false)\n                        .sort((a: any, b: any) => (a.displayOrder || 0) - (b.displayOrder || 0))\n                        .map((staff: any) => (\n                          <Card key={staff.id} className=\"group hover:shadow-2xl hover:border-border/40 transition-all duration-500 border-border/15 bg-background/60 backdrop-blur-md overflow-hidden hover:-translate-y-1\" data-testid={`card-staff-${staff.id}`}>\n                            <CardContent className=\"p-6 sm:p-7 lg:p-8 text-center\">\n                              <div className=\"relative mb-6\">\n                                {staff.imageUrl ? (\n                                  <div className=\"relative w-28 h-28 sm:w-32 sm:h-32 mx-auto mb-4\">\n                                    <img \n                                      src={staff.imageUrl} \n                                      alt={staff.name}\n                                      className=\"w-full h-full rounded-full object-cover border-4 border-background shadow-2xl group-hover:scale-110 group-hover:rotate-3 transition-all duration-500\"\n                                      style={{\n                                        boxShadow: `0 8px 24px -4px ${themeStyles?.primaryColor || '#2563eb'}30`\n                                      }}\n                                    />\n                                  </div>\n                                ) : (\n                                  <div \n                                    className=\"w-28 h-28 sm:w-32 sm:h-32 mx-auto mb-4 rounded-full flex items-center justify-center shadow-2xl group-hover:scale-110 group-hover:rotate-3 transition-all duration-500\"\n                                    style={{ \n                                      backgroundColor: themeStyles?.primaryColor || '#2563eb',\n                                      boxShadow: `0 8px 24px -4px ${themeStyles?.primaryColor || '#2563eb'}40`\n                                    }}\n                                  >\n                                    <User className=\"h-14 w-14 sm:h-16 sm:w-16 text-white\" />\n                                  </div>\n                                )}\n                              </div>\n\n                              <div className=\"space-y-2 mb-4\">\n                                <h4 className=\"text-xl sm:text-2xl font-bold text-foreground group-hover:text-primary transition-colors\">\n                                  {staff.name}\n                                </h4>\n                                {staff.position && (\n                                  <p className=\"text-sm font-medium\" style={{ color: themeStyles?.primaryColor || '#2563eb' }}>\n                                    {staff.position}\n                                  </p>\n                                )}\n                              </div>\n\n                              {staff.bio && (\n                                <p className=\"text-muted-foreground text-sm leading-relaxed mb-4\">\n                                  {staff.bio}\n                                </p>\n                              )}\n\n                              {/* Contact Information */}\n                              {(staff.email || staff.phone) && (\n                                <div className=\"flex flex-col space-y-2 pt-4 border-t border-border/20\">\n                                  {staff.email && (\n                                    <Button \n                                      variant=\"ghost\" \n                                      size=\"sm\" \n                                      asChild\n                                      className=\"text-xs justify-center hover:bg-background/50\"\n                                      data-testid={`button-email-${staff.id}`}\n                                    >\n                                      <a href={`mailto:${staff.email}`} className=\"flex items-center\">\n                                        <Mail className=\"h-3 w-3 mr-1\" />\n                                        {staff.email}\n                                      </a>\n                                    </Button>\n                                  )}\n                                  {staff.phone && (\n                                    <Button \n                                      variant=\"ghost\" \n                                      size=\"sm\" \n                                      asChild\n                                      className=\"text-xs justify-center hover:bg-background/50\"\n                                      data-testid={`button-phone-${staff.id}`}\n                                    >\n                                      <a href={`tel:${staff.phone}`} className=\"flex items-center\">\n                                        <Phone className=\"h-3 w-3 mr-1\" />\n                                        {staff.phone}\n                                      </a>\n                                    </Button>\n                                  )}\n                                </div>\n                              )}\n\n                              {/* Book with this staff member */}\n                              <div className=\"pt-4\">\n                                <Button \n                                  size=\"sm\" \n                                  onClick={() => setShowBookingModal(true)}\n                                  className=\"w-full text-xs font-medium\"\n                                  style={{\n                                    backgroundColor: themeStyles?.primaryColor || '#2563eb',\n                                    color: 'white'\n                                  }}\n                                  data-testid={`button-book-staff-${staff.id}`}\n                                >\n                                  <Calendar className=\"h-3 w-3 mr-1\" />\n                                  Book with {staff.name.split(' ')[0]}\n                                </Button>\n                              </div>\n                            </CardContent>\n                          </Card>\n                        ))}\n                    </div>\n                  ) : (\n                    <div className=\"text-center py-12\">\n                      <div \n                        className=\"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center\"\n                        style={{ backgroundColor: `${themeStyles?.primaryColor || '#2563eb'}20` }}\n                      >\n                        <Users className=\"h-8 w-8\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n                      </div>\n                      <h4 className=\"text-xl font-semibold text-foreground mb-2\">Team Information Coming Soon</h4>\n                      <p className=\"text-muted-foreground max-w-md mx-auto\">\n                        We're updating our team profiles. In the meantime, feel free to book an appointment and we'll match you with the perfect professional.\n                      </p>\n                      <div className=\"flex flex-col sm:flex-row gap-3 justify-center mt-6\">\n                        <Button \n                          onClick={() => setShowBookingModal(true)}\n                          className=\"px-6 py-2\"\n                          style={{\n                            backgroundColor: themeStyles?.primaryColor || '#2563eb',\n                            color: 'white'\n                          }}\n                          data-testid=\"button-book-any-staff\"\n                        >\n                          <Calendar className=\"h-4 w-4 mr-2\" />\n                          Book Appointment\n                        </Button>\n                        {page.contactPhone && (\n                          <Button variant=\"outline\" asChild data-testid=\"button-call-about-staff\">\n                            <a href={`tel:${page.contactPhone}`} className=\"flex items-center px-6 py-2\">\n                              <Phone className=\"h-4 w-4 mr-2\" />\n                              Call for Team Info\n                            </a>\n                          </Button>\n                        )}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Team Stats or Additional Info */}\n                  {pageStaff.filter((staff: any) => staff.isActive !== false).length > 0 && (\n                    <div className=\"mt-8 pt-8 border-t border-border/20\">\n                      <div className=\"grid sm:grid-cols-2 lg:grid-cols-3 gap-6\">\n                        <div className=\"text-center\">\n                          <div \n                            className=\"w-12 h-12 rounded-full mx-auto mb-3 flex items-center justify-center\"\n                            style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                          >\n                            <Award className=\"h-6 w-6 text-white\" />\n                          </div>\n                          <h5 className=\"font-semibold text-foreground mb-1\">Professional Team</h5>\n                          <p className=\"text-sm text-muted-foreground\">Certified and experienced professionals ready to serve you</p>\n                        </div>\n                        <div className=\"text-center\">\n                          <div \n                            className=\"w-12 h-12 rounded-full mx-auto mb-3 flex items-center justify-center\"\n                            style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                          >\n                            <Users className=\"h-6 w-6 text-white\" />\n                          </div>\n                          <h5 className=\"font-semibold text-foreground mb-1\">Team of {pageStaff.filter((staff: any) => staff.isActive !== false).length}</h5>\n                          <p className=\"text-sm text-muted-foreground\">Dedicated professionals working together for your satisfaction</p>\n                        </div>\n                        <div className=\"text-center sm:col-span-2 lg:col-span-1\">\n                          <div \n                            className=\"w-12 h-12 rounded-full mx-auto mb-3 flex items-center justify-center\"\n                            style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                          >\n                            <Shield className=\"h-6 w-6 text-white\" />\n                          </div>\n                          <h5 className=\"font-semibold text-foreground mb-1\">Quality Assured</h5>\n                          <p className=\"text-sm text-muted-foreground\">Every team member is committed to delivering exceptional results</p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </TabsContent>\n\n\n            <TabsContent value=\"hours\">\n              <div className=\"py-8 rounded-2xl glass-prism-card\">\n                <div className=\"max-w-6xl mx-auto\">\n                  <div className=\"text-center mb-8\">\n                    <h3 className=\"text-3xl font-bold text-foreground mb-4\">Hours & Contact</h3>\n                    <p className=\"text-lg text-muted-foreground mb-6\">\n                      Find us here and get in touch\n                    </p>\n                  </div>\n\n                  <div className=\"grid lg:grid-cols-2 gap-8\">\n                    {/* Business Hours & Contact Info */}\n                    <div className=\"space-y-6\">\n                      {/* Business Hours */}\n                      {page.showBusinessHours === \"true\" && page.businessHours && (\n                        <Card className=\"bg-background/50 border-border/20 backdrop-blur-sm\">\n                          <CardContent className=\"p-6\">\n                            <h4 className=\"text-xl font-semibold text-foreground mb-4 flex items-center\">\n                              <Clock className=\"h-5 w-5 mr-2\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n                              Business Hours\n                            </h4>\n                            <div className=\"space-y-3\">\n                              {(() => {\n                                const dayOrder = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];\n                                return Object.entries(page.businessHours)\n                                  .sort(([dayA], [dayB]) => {\n                                    const indexA = dayOrder.indexOf(dayA.toLowerCase());\n                                    const indexB = dayOrder.indexOf(dayB.toLowerCase());\n                                    // Unknown days (-1) go to the end\n                                    if (indexA === -1 && indexB === -1) return 0;\n                                    if (indexA === -1) return 1;\n                                    if (indexB === -1) return -1;\n                                    return indexA - indexB;\n                                  })\n                                  .map(([day, hours]: [string, any]) => {\n                                    const isToday = day.toLowerCase() === new Date().toLocaleDateString('en-US', { weekday: 'long' }).toLowerCase();\n                                    const displayHours = hours === \"Closed\" ? \"Closed\" : String(hours);\n                                    \n                                    return (\n                                      <div \n                                        key={day} \n                                        className={`flex justify-between items-center p-3 rounded-lg transition-colors ${\n                                          isToday \n                                            ? 'bg-primary/10 border border-primary/20' \n                                            : 'bg-background/30 hover:bg-background/50'\n                                        }`}\n                                        data-testid={`hours-${day.toLowerCase()}`}\n                                      >\n                                        <span className={`font-medium capitalize ${isToday ? 'text-primary' : 'text-foreground'}`}>\n                                          {day}{isToday && ' (Today)'}\n                                        </span>\n                                        <span className={`text-sm ${hours === \"Closed\" ? 'text-muted-foreground' : isToday ? 'text-primary font-medium' : 'text-foreground'}`}>\n                                          {displayHours}\n                                        </span>\n                                      </div>\n                                    );\n                                  });\n                              })()}\n                            </div>\n                          </CardContent>\n                        </Card>\n                      )}\n\n                      {/* Contact Information */}\n                      {page.showContactInfo === \"true\" && (page.contactPhone || page.contactEmail || page.businessAddress) && (\n                        <Card className=\"bg-background/50 border-border/20 backdrop-blur-sm\">\n                          <CardContent className=\"p-6\">\n                            <h4 className=\"text-xl font-semibold text-foreground mb-4 flex items-center\">\n                              <Phone className=\"h-5 w-5 mr-2\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n                              Contact Information\n                            </h4>\n                            <div className=\"space-y-4\">\n                              {page.contactPhone && (\n                                <div className=\"flex items-center space-x-4 p-3 rounded-lg bg-background/30 hover:bg-background/50 transition-colors group\">\n                                  <div \n                                    className=\"w-10 h-10 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform\"\n                                    style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                                  >\n                                    <Phone className=\"h-5 w-5 text-white\" />\n                                  </div>\n                                  <div className=\"flex-1\">\n                                    <p className=\"text-sm text-muted-foreground\">Phone</p>\n                                    <a \n                                      href={`tel:${page.contactPhone}`} \n                                      className=\"font-medium text-foreground hover:text-primary transition-colors\"\n                                      data-testid=\"link-phone\"\n                                    >\n                                      {page.contactPhone}\n                                    </a>\n                                  </div>\n                                  <div className=\"flex space-x-2\">\n                                    <Button \n                                      size=\"sm\" \n                                      asChild\n                                      className=\"h-8 px-3 text-xs\"\n                                      style={{\n                                        backgroundColor: themeStyles?.primaryColor || '#2563eb',\n                                        color: 'white'\n                                      }}\n                                      data-testid=\"button-call\"\n                                    >\n                                      <a href={`tel:${page.contactPhone}`}>\n                                        <Phone className=\"h-3 w-3 mr-1\" />\n                                        Call\n                                      </a>\n                                    </Button>\n                                  </div>\n                                </div>\n                              )}\n\n                              {page.contactEmail && (\n                                <div className=\"flex items-center space-x-4 p-3 rounded-lg bg-background/30 hover:bg-background/50 transition-colors group\">\n                                  <div \n                                    className=\"w-10 h-10 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform\"\n                                    style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                                  >\n                                    <Mail className=\"h-5 w-5 text-white\" />\n                                  </div>\n                                  <div className=\"flex-1\">\n                                    <p className=\"text-sm text-muted-foreground\">Email</p>\n                                    <a \n                                      href={`mailto:${page.contactEmail}`} \n                                      className=\"font-medium text-foreground hover:text-primary transition-colors\"\n                                      data-testid=\"link-email\"\n                                    >\n                                      {page.contactEmail}\n                                    </a>\n                                  </div>\n                                  <div className=\"flex space-x-2\">\n                                    <Button \n                                      size=\"sm\" \n                                      asChild\n                                      className=\"h-8 px-3 text-xs\"\n                                      style={{\n                                        backgroundColor: themeStyles?.primaryColor || '#2563eb',\n                                        color: 'white'\n                                      }}\n                                      data-testid=\"button-message\"\n                                    >\n                                      <a href={`mailto:${page.contactEmail}`}>\n                                        <MessageSquare className=\"h-3 w-3 mr-1\" />\n                                        Message\n                                      </a>\n                                    </Button>\n                                  </div>\n                                </div>\n                              )}\n\n                              {page.businessAddress && (\n                                <div className=\"flex items-center space-x-4 p-3 rounded-lg bg-background/30 hover:bg-background/50 transition-colors group\">\n                                  <div \n                                    className=\"w-10 h-10 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform\"\n                                    style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                                  >\n                                    <MapPin className=\"h-5 w-5 text-white\" />\n                                  </div>\n                                  <div className=\"flex-1\">\n                                    <p className=\"text-sm text-muted-foreground\">Address</p>\n                                    <p className=\"font-medium text-foreground\">{page.businessAddress}</p>\n                                  </div>\n                                  <div className=\"flex space-x-2\">\n                                    <Button \n                                      size=\"sm\" \n                                      asChild\n                                      className=\"h-8 px-3 text-xs\"\n                                      style={{\n                                        backgroundColor: themeStyles?.primaryColor || '#2563eb',\n                                        color: 'white'\n                                      }}\n                                      data-testid=\"button-directions\"\n                                    >\n                                      <a \n                                        href={`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(page.business_address || page.businessAddress || '')}`}\n                                        target=\"_blank\"\n                                        rel=\"noopener noreferrer\"\n                                      >\n                                        <ExternalLink className=\"h-3 w-3 mr-1\" />\n                                        Directions\n                                      </a>\n                                    </Button>\n                                  </div>\n                                </div>\n                              )}\n                            </div>\n                          </CardContent>\n                        </Card>\n                      )}\n\n                      {/* Quick Actions */}\n                      <Card className=\"bg-background/50 border-border/20 backdrop-blur-sm\">\n                        <CardContent className=\"p-6\">\n                          <h4 className=\"text-xl font-semibold text-foreground mb-4 flex items-center\">\n                            <Calendar className=\"h-5 w-5 mr-2\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n                            Quick Actions\n                          </h4>\n                          <div className=\"grid sm:grid-cols-2 gap-3\">\n                            <Button \n                              onClick={() => setShowBookingModal(true)}\n                              className=\"w-full justify-start h-12\"\n                              style={{\n                                backgroundColor: themeStyles?.primaryColor || '#2563eb',\n                                color: 'white'\n                              }}\n                              data-testid=\"button-book-quick\"\n                            >\n                              <Calendar className=\"h-4 w-4 mr-2\" />\n                              Book Appointment\n                            </Button>\n                            \n                            {page.calendarLink && (\n                              <Button \n                                variant=\"outline\" \n                                asChild\n                                className=\"w-full justify-start h-12\"\n                                data-testid=\"button-calendar-quick\"\n                              >\n                                <a href={page.calendarLink} target=\"_blank\" rel=\"noopener noreferrer\">\n                                  <ExternalLink className=\"h-4 w-4 mr-2\" />\n                                  View Calendar\n                                </a>\n                              </Button>\n                            )}\n                          </div>\n                        </CardContent>\n                      </Card>\n                    </div>\n\n                    {/* Map Integration */}\n                    <div className=\"space-y-6\">\n                      {page.businessAddress ? (\n                        <Card className=\"bg-background/50 border-border/20 backdrop-blur-sm overflow-hidden\">\n                          <CardContent className=\"p-0\">\n                            <div className=\"p-6 pb-4\">\n                              <h4 className=\"text-xl font-semibold text-foreground mb-2 flex items-center\">\n                                <MapPin className=\"h-5 w-5 mr-2\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n                                Find Us Here\n                              </h4>\n                              <p className=\"text-muted-foreground text-sm\">{page.businessAddress}</p>\n                            </div>\n                            <div className=\"relative bg-background/30 h-64 rounded-lg flex items-center justify-center border border-border/20\">\n                              <Button\n                                asChild\n                                className=\"flex-col h-auto p-6 bg-background/50 hover:bg-background/70 border border-border/20 shadow-lg hover:shadow-xl transition-all duration-300\"\n                                variant=\"outline\"\n                                data-testid=\"button-secondary-maps-location\"\n                              >\n                                <a\n                                  href={`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(page.business_address || page.businessAddress || '')}`}\n                                  target=\"_blank\"\n                                  rel=\"noopener noreferrer\"\n                                >\n                                  <div \n                                    className=\"w-12 h-12 rounded-full flex items-center justify-center mb-3\"\n                                    style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                                  >\n                                    <MapPin className=\"h-6 w-6 text-white\" />\n                                  </div>\n                                  <div className=\"text-center\">\n                                    <p className=\"text-base font-semibold text-foreground mb-1\">Open Location</p>\n                                    <p className=\"text-xs text-muted-foreground\">View in Google Maps</p>\n                                  </div>\n                                  <ExternalLink className=\"h-3 w-3 mt-1 text-muted-foreground\" />\n                                </a>\n                              </Button>\n                            </div>\n                            <div className=\"p-4 bg-background/30\">\n                              <div className=\"flex flex-col sm:flex-row gap-2\">\n                                <Button \n                                  asChild \n                                  className=\"flex-1 text-xs\"\n                                  style={{\n                                    backgroundColor: themeStyles?.primaryColor || '#2563eb',\n                                    color: 'white'\n                                  }}\n                                  data-testid=\"button-open-maps\"\n                                >\n                                  <a \n                                    href={`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(page.business_address || page.businessAddress || '')}`}\n                                    target=\"_blank\"\n                                    rel=\"noopener noreferrer\"\n                                  >\n                                    <ExternalLink className=\"h-3 w-3 mr-1\" />\n                                    Open in Maps\n                                  </a>\n                                </Button>\n                                <Button \n                                  variant=\"outline\" \n                                  onClick={() => copyToClipboard(page.businessAddress, 'Address')}\n                                  className=\"flex-1 text-xs\"\n                                  data-testid=\"button-copy-address\"\n                                >\n                                  {copiedField === 'Address' ? (\n                                    <>\n                                      <CheckCircle className=\"h-3 w-3 mr-1\" />\n                                      Copied\n                                    </>\n                                  ) : (\n                                    <>\n                                      <Copy className=\"h-3 w-3 mr-1\" />\n                                      Copy Address\n                                    </>\n                                  )}\n                                </Button>\n                              </div>\n                            </div>\n                          </CardContent>\n                        </Card>\n                      ) : (\n                        <Card className=\"bg-background/50 border-border/20 backdrop-blur-sm\">\n                          <CardContent className=\"p-6 text-center\">\n                            <div \n                              className=\"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center\"\n                              style={{ backgroundColor: `${themeStyles?.primaryColor || '#2563eb'}20` }}\n                            >\n                              <MapPin className=\"h-8 w-8\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n                            </div>\n                            <h4 className=\"text-xl font-semibold text-foreground mb-2\">Location Coming Soon</h4>\n                            <p className=\"text-muted-foreground\">\n                              We're updating our location information. Contact us for directions.\n                            </p>\n                          </CardContent>\n                        </Card>\n                      )}\n\n                      {/* Additional Information */}\n                      <Card className=\"bg-background/50 border-border/20 backdrop-blur-sm\">\n                        <CardContent className=\"p-6\">\n                          <h4 className=\"text-xl font-semibold text-foreground mb-4 flex items-center\">\n                            <Info className=\"h-5 w-5 mr-2\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n                            Visit Information\n                          </h4>\n                          <div className=\"space-y-3 text-sm\">\n                            <div className=\"flex items-start space-x-3\">\n                              <CheckCircle className=\"h-4 w-4 mt-0.5 text-green-500 flex-shrink-0\" />\n                              <span className=\"text-muted-foreground\">Easy parking available</span>\n                            </div>\n                            <div className=\"flex items-start space-x-3\">\n                              <CheckCircle className=\"h-4 w-4 mt-0.5 text-green-500 flex-shrink-0\" />\n                              <span className=\"text-muted-foreground\">Wheelchair accessible</span>\n                            </div>\n                            <div className=\"flex items-start space-x-3\">\n                              <CheckCircle className=\"h-4 w-4 mt-0.5 text-green-500 flex-shrink-0\" />\n                              <span className=\"text-muted-foreground\">Professional atmosphere</span>\n                            </div>\n                            {page.contactPhone && (\n                              <div className=\"pt-3 border-t border-border/20\">\n                                <p className=\"text-muted-foreground\">\n                                  <strong>Need directions?</strong> Call us at {' '}\n                                  <a \n                                    href={`tel:${page.contactPhone}`} \n                                    className=\"text-primary hover:underline font-medium\"\n                                    data-testid=\"link-directions-phone\"\n                                  >\n                                    {page.contactPhone}\n                                  </a>\n                                  {' '} and we'll guide you here.\n                                </p>\n                              </div>\n                            )}\n                          </div>\n                        </CardContent>\n                      </Card>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"gallery\">\n              <div className=\"py-8 rounded-2xl glass-prism-card\">\n                <div className=\"max-w-6xl mx-auto\">\n                  <div className=\"text-center mb-8\">\n                    <h3 className=\"text-3xl font-bold text-foreground mb-4\">Gallery</h3>\n                    <p className=\"text-lg text-muted-foreground mb-6\">\n                      Take a look at our work and facilities\n                    </p>\n                  </div>\n\n                  {gallery.images && gallery.images.length > 0 ? (\n                    <div className=\"space-y-8\">\n                      {/* Featured Image Carousel */}\n                      <div className=\"mb-8\">\n                        <Carousel className=\"w-full max-w-4xl mx-auto\">\n                          <CarouselContent>\n                            {gallery.images.map((image: any, index: number) => (\n                              <CarouselItem key={index}>\n                                <div className=\"relative aspect-video rounded-xl overflow-hidden bg-background/50 border border-border/20\">\n                                  <img \n                                    src={image.url || image} \n                                    alt={`${page.title} - Gallery ${index + 1}`}\n                                    className=\"w-full h-full object-cover\"\n                                    data-testid={`gallery-main-${index}`}\n                                  />\n                                  <div className=\"absolute inset-0 bg-gradient-to-t from-background/60 via-transparent to-transparent\" />\n                                  <div className=\"absolute bottom-4 left-4 right-4\">\n                                    <div className=\"flex items-center justify-between\">\n                                      <div>\n                                        <h4 className=\"text-white font-semibold mb-1\">\n                                          {image.title || `${page.title} Gallery`}\n                                        </h4>\n                                        <p className=\"text-white/80 text-sm\">\n                                          {image.description || `Professional workspace and service environment`}\n                                        </p>\n                                      </div>\n                                      <div className=\"text-white/60 text-sm\">\n                                        {index + 1} / {gallery.images.length}\n                                      </div>\n                                    </div>\n                                  </div>\n                                </div>\n                              </CarouselItem>\n                            ))}\n                          </CarouselContent>\n                          <CarouselPrevious className=\"left-4\" />\n                          <CarouselNext className=\"right-4\" />\n                        </Carousel>\n                      </div>\n\n                      {/* Thumbnail Grid */}\n                      <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4\">\n                        {gallery.images.slice(0, 12).map((image: any, index: number) => (\n                          <div \n                            key={index} \n                            className=\"relative aspect-square rounded-lg overflow-hidden bg-background/50 border border-border/20 hover:border-primary/50 transition-all duration-300 hover:shadow-lg group cursor-pointer\"\n                            data-testid={`gallery-thumb-${index}`}\n                          >\n                            <img \n                              src={image.url || image} \n                              alt={`${page.title} - Thumbnail ${index + 1}`}\n                              className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300\"\n                            />\n                            <div className=\"absolute inset-0 bg-background/0 group-hover:bg-background/20 transition-colors duration-300\" />\n                            <div className=\"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\n                              <div \n                                className=\"w-8 h-8 rounded-full flex items-center justify-center shadow-lg\"\n                                style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                              >\n                                <Image className=\"h-4 w-4 text-white\" />\n                              </div>\n                            </div>\n                          </div>\n                        ))}\n                        \n                        {gallery.images.length > 12 && (\n                          <div className=\"relative aspect-square rounded-lg overflow-hidden bg-background/80 border border-border/20 flex items-center justify-center text-center p-4\">\n                            <div>\n                              <div \n                                className=\"w-8 h-8 rounded-full mx-auto mb-2 flex items-center justify-center\"\n                                style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                              >\n                                <Image className=\"h-4 w-4 text-white\" />\n                              </div>\n                              <p className=\"text-xs font-medium text-foreground\">\n                                +{gallery.images.length - 12} more\n                              </p>\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  ) : (\n                    <div className=\"text-center py-16\">\n                      <div \n                        className=\"w-20 h-20 rounded-full mx-auto mb-6 flex items-center justify-center\"\n                        style={{ backgroundColor: `${themeStyles?.primaryColor || '#2563eb'}20` }}\n                      >\n                        <Image className=\"h-10 w-10\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n                      </div>\n                      <h4 className=\"text-2xl font-semibold text-foreground mb-4\">Gallery Coming Soon</h4>\n                      <p className=\"text-muted-foreground max-w-md mx-auto mb-8\">\n                        We're currently updating our photo gallery. Check back soon to see our beautiful work and facilities.\n                      </p>\n                      \n                      {/* Placeholder Gallery Cards */}\n                      <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-4 max-w-2xl mx-auto mb-8\">\n                        {[1, 2, 3].map((item) => (\n                          <div \n                            key={item} \n                            className=\"aspect-square rounded-lg bg-background/30 border border-border/20 flex items-center justify-center\"\n                          >\n                            <Image className=\"h-8 w-8 text-muted-foreground/50\" />\n                          </div>\n                        ))}\n                      </div>\n\n                      <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\n                        <Button \n                          onClick={() => setShowBookingModal(true)}\n                          className=\"px-6 py-2\"\n                          style={{\n                            backgroundColor: themeStyles?.primaryColor || '#2563eb',\n                            color: 'white'\n                          }}\n                          data-testid=\"button-book-gallery\"\n                        >\n                          <Calendar className=\"h-4 w-4 mr-2\" />\n                          Book to See Our Work\n                        </Button>\n                        {page.contactPhone && (\n                          <Button variant=\"outline\" asChild data-testid=\"button-call-gallery\">\n                            <a href={`tel:${page.contactPhone}`} className=\"flex items-center px-6 py-2\">\n                              <Phone className=\"h-4 w-4 mr-2\" />\n                              Call for Portfolio\n                            </a>\n                          </Button>\n                        )}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Gallery Features */}\n                  {gallery.images && gallery.images.length > 0 && (\n                    <div className=\"mt-8 pt-8 border-t border-border/20\">\n                      <div className=\"grid sm:grid-cols-3 gap-6 text-center\">\n                        <div>\n                          <div \n                            className=\"w-12 h-12 rounded-full mx-auto mb-3 flex items-center justify-center\"\n                            style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                          >\n                            <Camera className=\"h-6 w-6 text-white\" />\n                          </div>\n                          <h5 className=\"font-semibold text-foreground mb-1\">Professional Quality</h5>\n                          <p className=\"text-sm text-muted-foreground\">High-resolution photos showcasing our professional standards</p>\n                        </div>\n                        <div>\n                          <div \n                            className=\"w-12 h-12 rounded-full mx-auto mb-3 flex items-center justify-center\"\n                            style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                          >\n                            <Sparkles className=\"h-6 w-6 text-white\" />\n                          </div>\n                          <h5 className=\"font-semibold text-foreground mb-1\">Our Work</h5>\n                          <p className=\"text-sm text-muted-foreground\">Examples of our best work and satisfied customers</p>\n                        </div>\n                        <div>\n                          <div \n                            className=\"w-12 h-12 rounded-full mx-auto mb-3 flex items-center justify-center\"\n                            style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                          >\n                            <MapPin className=\"h-6 w-6 text-white\" />\n                          </div>\n                          <h5 className=\"font-semibold text-foreground mb-1\">Our Space</h5>\n                          <p className=\"text-sm text-muted-foreground\">Take a virtual tour of our clean, professional environment</p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </TabsContent>\n\n          </Tabs>\n        </div>\n      </section>\n\n      {/* Booking Modal */}\n      <BookingModal \n        open={showBookingModal} \n        onClose={() => setShowBookingModal(false)}\n        page={page}\n        services={services}\n      />\n\n      {/* Image Viewer Modal */}\n      <Dialog open={isImageModalOpen} onOpenChange={setIsImageModalOpen}>\n        <DialogContent className=\"max-w-7xl w-full p-0 overflow-hidden bg-background/95 backdrop-blur-lg border-border/50\">\n          <DialogTitle className=\"sr-only\">Gallery Image</DialogTitle>\n          <div className=\"relative w-full max-h-[90vh] flex items-center justify-center p-4\">\n            {selectedImage && (\n              <img \n                src={selectedImage} \n                alt=\"Gallery image full size\" \n                className=\"max-w-full max-h-[85vh] object-contain rounded-lg\"\n                data-testid=\"image-viewer-full\"\n              />\n            )}\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Phone Dialog */}\n      <Dialog open={showPhoneDialog} onOpenChange={setShowPhoneDialog}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogTitle className=\"text-xl font-semibold flex items-center gap-2\">\n            <Phone className=\"h-5 w-5\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n            Call Us\n          </DialogTitle>\n          <DialogDescription className=\"sr-only\">\n            View and copy the phone number or call directly\n          </DialogDescription>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"bg-muted/50 rounded-lg p-4 border border-border/50\">\n              <p className=\"text-sm text-muted-foreground mb-2\">Phone Number</p>\n              <p className=\"text-2xl font-semibold text-foreground\" data-testid=\"text-phone-number\">\n                {page.contact_phone || page.contactPhone}\n              </p>\n            </div>\n            <div className=\"flex gap-2\">\n              <Button\n                onClick={handleCopyPhone}\n                className=\"flex-1\"\n                style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                data-testid=\"button-copy-phone\"\n              >\n                {copiedPhone ? (\n                  <>\n                    <Check className=\"h-4 w-4 mr-2\" />\n                    Copied!\n                  </>\n                ) : (\n                  <>\n                    <Copy className=\"h-4 w-4 mr-2\" />\n                    Copy Number\n                  </>\n                )}\n              </Button>\n              <Button\n                asChild\n                variant=\"outline\"\n                className=\"flex-1\"\n                data-testid=\"button-call-now\"\n              >\n                <a href={`tel:${page.contact_phone || page.contactPhone}`}>\n                  <Phone className=\"h-4 w-4 mr-2\" />\n                  Call Now\n                </a>\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Email Dialog */}\n      <Dialog open={showEmailDialog} onOpenChange={setShowEmailDialog}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogTitle className=\"text-xl font-semibold flex items-center gap-2\">\n            <Mail className=\"h-5 w-5\" style={{ color: themeStyles?.primaryColor || '#2563eb' }} />\n            Send Message\n          </DialogTitle>\n          <DialogDescription className=\"sr-only\">\n            View and copy the email address or send an email directly\n          </DialogDescription>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"bg-muted/50 rounded-lg p-4 border border-border/50\">\n              <p className=\"text-sm text-muted-foreground mb-2\">Email Address</p>\n              <p className=\"text-lg font-semibold text-foreground break-all\" data-testid=\"text-email-address\">\n                {page.contact_email || page.contactEmail}\n              </p>\n            </div>\n            <div className=\"flex gap-2\">\n              <Button\n                onClick={handleCopyEmail}\n                className=\"flex-1\"\n                style={{ backgroundColor: themeStyles?.primaryColor || '#2563eb' }}\n                data-testid=\"button-copy-email\"\n              >\n                {copiedEmail ? (\n                  <>\n                    <Check className=\"h-4 w-4 mr-2\" />\n                    Copied!\n                  </>\n                ) : (\n                  <>\n                    <Copy className=\"h-4 w-4 mr-2\" />\n                    Copy Email\n                  </>\n                )}\n              </Button>\n              <Button\n                asChild\n                variant=\"outline\"\n                className=\"flex-1\"\n                data-testid=\"button-send-email\"\n              >\n                <a href={`mailto:${page.contact_email || page.contactEmail}`}>\n                  <Mail className=\"h-4 w-4 mr-2\" />\n                  Send Email\n                </a>\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":155827},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1901},"client/src/components/dashboard/reschedule-modal.tsx":{"content":"import { useState } from 'react';\nimport { useMutation } from '@tanstack/react-query';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Calendar, Clock, MessageSquare, Send, X } from 'lucide-react';\nimport { apiRequest, queryClient } from '@/lib/queryClient';\nimport { useToast } from '@/hooks/use-toast';\nimport { useAuth } from '@/hooks/use-auth';\n\ninterface RescheduleModalProps {\n  open: boolean;\n  onClose: () => void;\n  appointment: any;\n}\n\nexport default function RescheduleModal({ open, onClose, appointment }: RescheduleModalProps) {\n  const { toast } = useToast();\n  const { user } = useAuth();\n  const [formData, setFormData] = useState({\n    date: '',\n    time: '',\n    note: ''\n  });\n\n  const rescheduleAppointmentMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await apiRequest('POST', `/api/appointments/${appointment.id}/reschedule`, data);\n      return response.json();\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Appointment Rescheduled\",\n        description: \"The customer has been notified of the new date and time.\",\n      });\n      queryClient.invalidateQueries({ queryKey: [`user-appointments-${user?.id}`] });\n      onClose();\n      resetForm();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error rescheduling appointment\",\n        description: error.message || \"Something went wrong. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      date: '',\n      time: '',\n      note: ''\n    });\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!formData.date || !formData.time) {\n      toast({\n        title: \"Missing required fields\",\n        description: \"Please provide both date and time for the reschedule.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    rescheduleAppointmentMutation.mutate({\n      newDate: formData.date,\n      newTime: formData.time,\n      note: formData.note,\n      customerName: appointment.customerName,\n      customerEmail: appointment.customerEmail,\n      originalDate: appointment.date,\n      originalTime: appointment.time,\n      serviceName: appointment.serviceName\n    });\n  };\n\n  if (!appointment) return null;\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-lg sm:max-w-xl max-h-[90vh] sm:max-h-[85vh] overflow-y-auto p-0 border-0 bg-gradient-to-br from-background/95 to-background/90 backdrop-blur-xl shadow-2xl\">\n        <div className=\"p-4 sm:p-6\">\n          <DialogHeader className=\"text-center space-y-2 sm:space-y-3 mb-4 sm:mb-6\">\n            <div className=\"mx-auto w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-blue-500/20 to-blue-600/10 rounded-xl sm:rounded-2xl flex items-center justify-center mb-2 sm:mb-3\">\n              <Calendar className=\"h-6 w-6 sm:h-7 sm:w-7 text-blue-600\" />\n            </div>\n            <DialogTitle className=\"text-xl sm:text-2xl font-bold bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent\">\n              Reschedule Appointment\n            </DialogTitle>\n            <p className=\"text-sm sm:text-base text-muted-foreground px-2\">\n              Send new date and time to {appointment.customerName}\n            </p>\n          </DialogHeader>\n\n          {/* Current Appointment Info */}\n          <Card className=\"border-0 shadow-md bg-card/50 backdrop-blur-sm mb-4 sm:mb-6\">\n            <CardContent className=\"p-3 sm:p-4\">\n              <div className=\"flex items-center space-x-2 mb-3\">\n                <div className=\"w-8 h-8 bg-gradient-to-br from-gray-500/20 to-gray-600/10 rounded-lg flex items-center justify-center\">\n                  <Clock className=\"h-4 w-4 text-gray-600\" />\n                </div>\n                <h3 className=\"text-base sm:text-lg font-semibold text-foreground\">Current Appointment</h3>\n              </div>\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3 text-sm\">\n                <div>\n                  <p className=\"text-xs text-muted-foreground\">Customer</p>\n                  <p className=\"font-medium\">{appointment.customerName}</p>\n                </div>\n                <div>\n                  <p className=\"text-xs text-muted-foreground\">Service</p>\n                  <p className=\"font-medium\">{appointment.serviceName}</p>\n                </div>\n                <div>\n                  <p className=\"text-xs text-muted-foreground\">Current Date</p>\n                  <p className=\"font-medium\">{appointment.date}</p>\n                </div>\n                <div>\n                  <p className=\"text-xs text-muted-foreground\">Current Time</p>\n                  <p className=\"font-medium\">{appointment.time}</p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <form onSubmit={handleSubmit} className=\"space-y-4 sm:space-y-5\">\n            {/* New Date & Time Section */}\n            <Card className=\"border-0 shadow-md bg-card/50 backdrop-blur-sm\">\n              <CardContent className=\"p-3 sm:p-4\">\n                <div className=\"flex items-center space-x-2 mb-3 sm:mb-4\">\n                  <div className=\"w-8 h-8 bg-gradient-to-br from-green-500/20 to-green-600/10 rounded-lg flex items-center justify-center\">\n                    <Calendar className=\"h-4 w-4 text-green-600\" />\n                  </div>\n                  <h3 className=\"text-base sm:text-lg font-semibold text-foreground\">New Date & Time</h3>\n                </div>\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4\">\n                  <div className=\"space-y-1.5\">\n                    <Label htmlFor=\"newDate\" className=\"text-xs sm:text-sm font-medium text-foreground flex items-center space-x-1\">\n                      <span>New Date</span>\n                      <span className=\"text-red-500\">*</span>\n                    </Label>\n                    <Input\n                      id=\"newDate\"\n                      type=\"date\"\n                      value={formData.date}\n                      onChange={(e) => setFormData(prev => ({ ...prev, date: e.target.value }))}\n                      required\n                      className=\"h-10 sm:h-11 border-0 bg-background/80 backdrop-blur-sm shadow-sm focus:shadow-md transition-all duration-200\"\n                      data-testid=\"input-reschedule-date\"\n                    />\n                  </div>\n                  <div className=\"space-y-1.5\">\n                    <Label htmlFor=\"newTime\" className=\"text-xs sm:text-sm font-medium text-foreground flex items-center space-x-1\">\n                      <span>New Time</span>\n                      <span className=\"text-red-500\">*</span>\n                    </Label>\n                    <Input\n                      id=\"newTime\"\n                      type=\"time\"\n                      value={formData.time}\n                      onChange={(e) => setFormData(prev => ({ ...prev, time: e.target.value }))}\n                      required\n                      className=\"h-10 sm:h-11 border-0 bg-background/80 backdrop-blur-sm shadow-sm focus:shadow-md transition-all duration-200\"\n                      data-testid=\"input-reschedule-time\"\n                    />\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Additional Note Section */}\n            <Card className=\"border-0 shadow-md bg-card/50 backdrop-blur-sm\">\n              <CardContent className=\"p-3 sm:p-4\">\n                <div className=\"flex items-center space-x-2 mb-3 sm:mb-4\">\n                  <div className=\"w-8 h-8 bg-gradient-to-br from-purple-500/20 to-purple-600/10 rounded-lg flex items-center justify-center\">\n                    <MessageSquare className=\"h-4 w-4 text-purple-600\" />\n                  </div>\n                  <h3 className=\"text-base sm:text-lg font-semibold text-foreground\">Additional Note</h3>\n                </div>\n                <div className=\"space-y-1.5\">\n                  <Label htmlFor=\"rescheduleNote\" className=\"text-xs sm:text-sm font-medium text-foreground\">\n                    Message to Customer (Optional)\n                  </Label>\n                  <Textarea\n                    id=\"rescheduleNote\"\n                    placeholder=\"Add any additional information for the customer about this reschedule...\"\n                    value={formData.note}\n                    onChange={(e) => setFormData(prev => ({ ...prev, note: e.target.value }))}\n                    rows={3}\n                    className=\"border-0 bg-background/80 backdrop-blur-sm shadow-sm focus:shadow-md transition-all duration-200 resize-none text-sm\"\n                    data-testid=\"textarea-reschedule-note\"\n                  />\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Action Buttons */}\n            <div className=\"flex flex-col-reverse sm:flex-row justify-end gap-2 sm:gap-3 pt-2\">\n              <Button \n                type=\"button\" \n                variant=\"outline\" \n                onClick={onClose}\n                className=\"w-full sm:w-auto px-6 py-2.5 glass-prism backdrop-blur-md bg-white/10 dark:bg-black/10 border border-white/20 hover:bg-white/20 dark:hover:bg-black/20\"\n                data-testid=\"button-cancel-reschedule\"\n                disabled={rescheduleAppointmentMutation.isPending}\n              >\n                Cancel\n              </Button>\n              <Button \n                type=\"submit\"\n                className=\"w-full sm:w-auto px-6 py-2.5 glass-prism-button text-white shadow-lg backdrop-blur-lg\"\n                data-testid=\"button-send-reschedule\"\n                disabled={rescheduleAppointmentMutation.isPending}\n              >\n                {rescheduleAppointmentMutation.isPending ? (\n                  <div className=\"flex items-center justify-center space-x-2\">\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                    <span>Sending...</span>\n                  </div>\n                ) : (\n                  <div className=\"flex items-center justify-center space-x-2\">\n                    <Send className=\"h-4 w-4\" />\n                    <span>Send Reschedule</span>\n                  </div>\n                )}\n              </Button>\n            </div>\n          </form>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":10775},"client/src/pages/login.tsx":{"content":"import { useState } from 'react';\nimport { useLocation } from 'wouter';\nimport { useAuth } from '@/hooks/use-auth';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { useToast } from '@/hooks/use-toast';\nimport { CalendarDays, Home, Eye, EyeOff } from 'lucide-react';\n\nexport default function Login() {\n  const [, setLocation] = useLocation();\n  const { login, signInWithGoogle, resetPassword } = useAuth();\n  const { toast } = useToast();\n  const [loading, setLoading] = useState(false);\n  const [resetLoading, setResetLoading] = useState(false);\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n    remember: false\n  });\n  const [showPassword, setShowPassword] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n\n    try {\n      await login(formData.email, formData.password, '/dashboard');\n      toast({\n        title: \"Welcome back!\",\n        description: \"You have been successfully logged in.\",\n      });\n      // Redirect is now handled by the auth context\n    } catch (error) {\n      toast({\n        title: \"Login failed\",\n        description: \"Invalid email or password. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleGoogleSignIn = async () => {\n    try {\n      await signInWithGoogle();\n      // Note: Supabase OAuth will handle the redirect, so no need to manually redirect\n    } catch (error) {\n      toast({\n        title: \"Google Sign In failed\",\n        description: \"Failed to sign in with Google. Please try again.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleForgotPassword = async () => {\n    if (!formData.email) {\n      toast({\n        title: \"Email required\",\n        description: \"Please enter your email address first.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setResetLoading(true);\n    try {\n      await resetPassword(formData.email);\n      toast({\n        title: \"Reset email sent!\",\n        description: \"Check your email for password reset instructions.\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Reset failed\",\n        description: \"Failed to send reset email. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setResetLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen page-gradient relative overflow-hidden\">\n      {/* Glass Prism Background Elements */}\n      <div className=\"absolute inset-0 bg-gradient-to-br from-blue-50/80 via-white to-blue-50/80 bg-overlay\"></div>\n      <div className=\"absolute top-10 left-10 w-72 h-72 glass-prism rounded-full opacity-30 animate-float bg-overlay\"></div>\n      <div className=\"absolute top-32 right-20 w-96 h-96 glass-prism rounded-full opacity-20 animate-float bg-overlay\" style={{animationDelay: '1.5s'}}></div>\n      <div className=\"absolute bottom-20 left-1/3 w-48 h-48 glass-prism rounded-full opacity-25 animate-float bg-overlay\" style={{animationDelay: '3s'}}></div>\n      \n      <div className=\"relative flex items-center justify-center min-h-screen p-6 content-layer\">\n        <div className=\"w-full max-w-md glass-prism-card rounded-3xl p-8 hover-lift animate-fade-in-up\">\n          <div className=\"flex justify-start mb-4\">\n            <Button \n              variant=\"ghost\" \n              size=\"sm\"\n              onClick={() => setLocation('/')}\n              className=\"flex items-center space-x-2 text-muted-foreground hover:text-foreground bg-white/10 backdrop-blur-sm border border-white/20 hover:bg-white/20 transition-all duration-300 rounded-lg\"\n              data-testid=\"button-back-home\"\n            >\n              <Home className=\"h-4 w-4\" />\n              <span>Back to Homepage</span>\n            </Button>\n          </div>\n          \n          <div className=\"text-center mb-8\">\n            <div className=\"flex items-center justify-center space-x-3 mb-4\">\n              <div className=\"w-10 h-10 glass-prism rounded-lg flex items-center justify-center\">\n                <CalendarDays className=\"h-6 w-6 text-primary\" />\n              </div>\n              <span className=\"text-xl font-bold text-foreground\">BookingGen</span>\n            </div>\n            <h1 className=\"text-2xl font-bold text-foreground mb-2\">Welcome back</h1>\n            <p className=\"text-muted-foreground\">Sign in to your BookingGen account</p>\n          </div>\n          \n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <div>\n              <Label htmlFor=\"email\" className=\"text-foreground font-medium\">Email</Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                placeholder=\"Enter your email\"\n                value={formData.email}\n                onChange={(e) => setFormData(prev => ({ ...prev, email: e.target.value }))}\n                required\n                data-testid=\"input-email\"\n                className=\"glass-input mt-2\"\n              />\n            </div>\n            \n            <div>\n              <Label htmlFor=\"password\" className=\"text-foreground font-medium\">Password</Label>\n              <div className=\"relative mt-2\">\n                <Input\n                  id=\"password\"\n                  type={showPassword ? \"text\" : \"password\"}\n                  placeholder=\"Enter your password\"\n                  value={formData.password}\n                  onChange={(e) => setFormData(prev => ({ ...prev, password: e.target.value }))}\n                  required\n                  data-testid=\"input-password\"\n                  className=\"glass-input pr-10\"\n                />\n                <Button\n                  type=\"button\"\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  data-testid=\"button-toggle-password\"\n                >\n                  {showPassword ? (\n                    <EyeOff className=\"h-4 w-4 text-muted-foreground\" />\n                  ) : (\n                    <Eye className=\"h-4 w-4 text-muted-foreground\" />\n                  )}\n                </Button>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-2\">\n                <Checkbox \n                  id=\"remember\"\n                  checked={formData.remember}\n                  onCheckedChange={(checked) => setFormData(prev => ({ ...prev, remember: !!checked }))}\n                  data-testid=\"checkbox-remember\"\n                />\n                <Label htmlFor=\"remember\" className=\"text-sm text-foreground\">Remember me</Label>\n              </div>\n              <Button \n                type=\"button\"\n                variant=\"link\" \n                className=\"text-sm p-0 text-primary hover:text-primary/80\"\n                onClick={handleForgotPassword}\n                disabled={resetLoading}\n                data-testid=\"button-forgot-password\"\n              >\n                {resetLoading ? \"Sending...\" : \"Forgot password?\"}\n              </Button>\n            </div>\n            \n            <Button \n              type=\"submit\" \n              size=\"lg\"\n              className=\"w-full h-12 glass-prism-button px-6 py-2 rounded-full font-semibold text-[15px] shadow-md\"\n              disabled={loading}\n              data-testid=\"button-sign-in\"\n            >\n              {loading ? \"Signing in...\" : \"Sign In\"}\n            </Button>\n            \n            <div className=\"relative\">\n              <div className=\"absolute inset-0 flex items-center\">\n                <div className=\"w-full border-t border-white/20\"></div>\n              </div>\n              <div className=\"relative flex justify-center text-sm\">\n                <span className=\"px-4 bg-white/5 backdrop-blur-sm text-muted-foreground rounded-full\">Or continue with</span>\n              </div>\n            </div>\n            \n            <Button \n              type=\"button\" \n              variant=\"outline\" \n              size=\"lg\"\n              className=\"w-full h-12 bg-white/10 backdrop-blur-sm border border-white/20 hover:bg-white/20 transition-all duration-300 rounded-full\"\n              onClick={handleGoogleSignIn}\n              data-testid=\"button-google-signin\"\n            >\n              <svg className=\"mr-2 h-4 w-4\" viewBox=\"0 0 24 24\">\n                <path fill=\"currentColor\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\n                <path fill=\"currentColor\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\n                <path fill=\"currentColor\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\n                <path fill=\"currentColor\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\n              </svg>\n              Sign in with Google\n            </Button>\n          </form>\n          \n          <div className=\"text-center mt-6\">\n            <p className=\"text-muted-foreground\">\n              Don't have an account?{' '}\n              <Button \n                variant=\"link\" \n                className=\"p-0 text-primary hover:text-primary/80 font-medium\"\n                onClick={() => setLocation('/signup')}\n                data-testid=\"link-signup\"\n              >\n                Sign up\n              </Button>\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":9984},"server/razorpay.ts":{"content":"import Razorpay from 'razorpay';\nimport { Request, Response } from 'express';\nimport { storage } from './storage';\nimport crypto from 'crypto';\n\nconst { RAZORPAY_KEY_ID, RAZORPAY_KEY_SECRET } = process.env;\n\n// Server-side price configuration - only these prices are valid\nconst PLAN_PRICING: Record<string, { amount: number; currency: string; duration: number }> = {\n  'pro': { amount: 14.99, currency: 'USD', duration: 30 }, // 30 days\n};\n\nlet razorpay: Razorpay | null = null;\n\nif (RAZORPAY_KEY_ID && RAZORPAY_KEY_SECRET) {\n  razorpay = new Razorpay({\n    key_id: RAZORPAY_KEY_ID,\n    key_secret: RAZORPAY_KEY_SECRET,\n  });\n} else {\n  console.warn('Razorpay credentials not found - Razorpay payments will be unavailable');\n}\n\n// Storage now handled by Supabase via storage.ts interface\n\n// Cache for subscription plans\nlet subscriptionPlans: Map<string, string> = new Map();\n\n// Create subscription plan if it doesn't exist\nexport async function createSubscriptionPlan(planName: string, amount: number, currency: string): Promise<string> {\n  if (!razorpay) {\n    throw new Error('Razorpay not initialized');\n  }\n\n  try {\n    // Check if plan already exists\n    if (subscriptionPlans.has(planName)) {\n      return subscriptionPlans.get(planName)!;\n    }\n\n    const plan = await razorpay.plans.create({\n      period: 'monthly',\n      interval: 1,\n      item: {\n        name: `${planName.charAt(0).toUpperCase() + planName.slice(1)} Plan`,\n        description: `Monthly ${planName} subscription`,\n        amount: Math.round(amount * 100), // Convert to smallest unit\n        currency: currency\n      },\n      notes: {\n        plan: planName,\n        type: 'subscription'\n      }\n    });\n\n    subscriptionPlans.set(planName, plan.id);\n    console.log(`✅ Razorpay subscription plan created: ${plan.id} for ${planName}`);\n    return plan.id;\n  } catch (error) {\n    console.error('Failed to create Razorpay subscription plan:', error);\n    throw error;\n  }\n}\n\n// Create subscription\nexport async function createRazorpaySubscription(req: Request, res: Response) {\n  try {\n    if (!razorpay) {\n      return res.status(503).json({ error: \"Razorpay service not available\" });\n    }\n\n    const { plan = 'pro', isTrial = false } = req.body;\n    const authReq = req as any;\n    \n    if (!authReq.user || !authReq.user.userId) {\n      return res.status(401).json({ error: \"User not authenticated\" });\n    }\n\n    // Check trial status\n    const profile = await storage.getProfile(authReq.user.userId);\n    if (!profile) {\n      return res.status(400).json({ error: \"User profile not found\" });\n    }\n\n    // If requesting trial, verify it's available\n    if (isTrial && profile.trialStatus !== 'available') {\n      return res.status(400).json({ \n        error: \"Trial not available for this account\",\n        details: profile.trialStatus === 'used' ? \"You've already used your free trial\" : \"Trial not available\"\n      });\n    }\n\n    // Server-side pricing\n    const planConfig = PLAN_PRICING[plan];\n    if (!planConfig) {\n      return res.status(400).json({ error: \"Invalid plan\" });\n    }\n\n    // Create subscription plan if needed\n    const planId = await createSubscriptionPlan(plan, planConfig.amount, planConfig.currency);\n\n    // Calculate trial dates if trial is requested\n    const now = new Date();\n    const trialEndsAt = isTrial ? new Date(now.getTime() + 7 * 24 * 60 * 60 * 1000) : null;\n    const startAtTimestamp = trialEndsAt ? Math.floor(trialEndsAt.getTime() / 1000) : undefined;\n\n    // Create subscription with trial period if applicable\n    const subscriptionParams: any = {\n      plan_id: planId,\n      customer_notify: 1,\n      quantity: 1,\n      total_count: 120, // 120 monthly payments (10 years)\n      notes: {\n        userId: authReq.user.userId,\n        plan: plan,\n        serverAmount: planConfig.amount.toString(),\n        isTrial: isTrial.toString()\n      }\n    };\n\n    if (isTrial && startAtTimestamp) {\n      subscriptionParams.start_at = startAtTimestamp;\n    }\n\n    const subscription = await razorpay.subscriptions.create(subscriptionParams) as any;\n\n    // Store subscription details in Supabase (with trial info but don't activate yet)\n    await storage.createSubscription({\n      id: subscription.id,\n      userId: authReq.user.userId,\n      planId: planId,\n      planName: plan,\n      status: subscription.status,\n      currency: planConfig.currency,\n      amount: planConfig.amount,\n      isTrial: isTrial,\n      trialEndsAt: trialEndsAt?.toISOString()\n    });\n\n    // DO NOT activate trial here - it will be activated when subscription is authenticated via webhook\n    console.log(`✅ Razorpay subscription created: ${subscription.id} for user ${authReq.user.userId} ${isTrial ? '(pending trial activation after checkout)' : ''}`);\n    \n    res.json({\n      subscriptionId: subscription.id,\n      planId: planId,\n      status: subscription.status,\n      short_url: subscription.short_url,\n      key: RAZORPAY_KEY_ID,\n      isTrial: isTrial,\n      trialEndsAt: trialEndsAt?.toISOString()\n    });\n  } catch (error) {\n    console.error(\"Failed to create Razorpay subscription:\", error);\n    res.status(500).json({ error: \"Failed to create subscription.\" });\n  }\n}\n\nexport async function createRazorpayOrder(req: Request, res: Response) {\n  try {\n    if (!razorpay) {\n      return res.status(503).json({ error: \"Razorpay service not available\" });\n    }\n\n    const { plan = 'pro' } = req.body;\n    const authReq = req as any;\n    \n    if (!authReq.user || !authReq.user.userId) {\n      return res.status(401).json({ error: \"User not authenticated\" });\n    }\n\n    // Server-side pricing - ignore any client-provided amount\n    const planConfig = PLAN_PRICING[plan];\n    if (!planConfig) {\n      return res.status(400).json({ error: \"Invalid plan\" });\n    }\n\n    // Convert amount to smallest currency unit (cents for USD)\n    const amountInSmallestUnit = Math.round(planConfig.amount * 100);\n\n    // Generate short receipt (max 40 chars) - use timestamp + short user ID hash\n    const shortUserId = authReq.user.userId.substring(0, 8);\n    const timestamp = Date.now();\n    const receipt = `rcpt_${timestamp}_${shortUserId}`;\n    \n    const options = {\n      amount: amountInSmallestUnit,\n      currency: planConfig.currency,\n      receipt: receipt,\n      notes: {\n        plan: plan,\n        userId: authReq.user.userId,\n        serverAmount: planConfig.amount.toString(),\n        timestamp: new Date().toISOString(),\n        subscriptionType: 'monthly'\n      }\n    };\n\n    const order = await razorpay.orders.create(options);\n    \n    // Store order details in Supabase storage\n    await storage.createOrder({\n      orderId: order.id,\n      userId: authReq.user.userId,\n      plan: plan,\n      amount: planConfig.amount,\n      currency: planConfig.currency,\n      used: false\n    });\n    \n    res.json({\n      orderId: order.id,\n      amount: order.amount,\n      currency: order.currency,\n      key: RAZORPAY_KEY_ID\n    });\n  } catch (error) {\n    console.error(\"Failed to create Razorpay order:\", error);\n    res.status(500).json({ error: \"Failed to create order.\" });\n  }\n}\n\n// Get subscription status\nexport async function getRazorpaySubscription(req: Request, res: Response) {\n  try {\n    if (!razorpay) {\n      return res.status(503).json({ error: \"Razorpay service not available\" });\n    }\n\n    const { subscriptionId } = req.params;\n    const authReq = req as any;\n    \n    if (!authReq.user || !authReq.user.userId) {\n      return res.status(401).json({ error: \"User not authenticated\" });\n    }\n\n    // Check if subscription belongs to user\n    const storedSub = await storage.getSubscription(subscriptionId);\n    if (!storedSub || storedSub.userId !== authReq.user.userId) {\n      return res.status(404).json({ error: \"Subscription not found\" });\n    }\n\n    // Fetch current status from Razorpay\n    const subscription = await razorpay.subscriptions.fetch(subscriptionId);\n    \n    console.log(`📋 Subscription status check: ${subscriptionId} - Status: ${subscription.status} for user ${authReq.user.userId}`);\n    \n    // Update subscription status in database\n    await storage.updateSubscription(subscriptionId, {\n      status: subscription.status\n    });\n\n    // Check if subscription has been paid (even if status is still \"created\")\n    // This handles cases where payment succeeds but webhook hasn't fired yet\n    let hasBeenPaid = false;\n    if (subscription.status === 'created' && subscription.paid_count > 0) {\n      hasBeenPaid = true;\n      console.log(`💳 Subscription ${subscriptionId} has been paid (paid_count: ${subscription.paid_count}) - activating even though status is \"created\"`);\n    }\n\n    // If subscription is authenticated, active, or has been paid, activate user membership\n    if (subscription.status === 'authenticated' || subscription.status === 'active' || hasBeenPaid) {\n      const profile = await storage.getProfile(authReq.user.userId);\n      if (profile) {\n        console.log(`👤 User profile: membershipStatus=${profile.membershipStatus}, trialStatus=${profile.trialStatus}, isTrial=${storedSub.isTrial}`);\n        \n        // Check if this is a trial subscription\n        if (storedSub.isTrial && profile.trialStatus === 'available') {\n          // Activate trial\n          const now = new Date();\n          const trialEndsAt = storedSub.trialEndsAt ? new Date(storedSub.trialEndsAt) : new Date(now.getTime() + 7 * 24 * 60 * 60 * 1000);\n\n          await storage.updateProfile(authReq.user.userId, {\n            membershipStatus: 'pro',\n            membershipExpires: trialEndsAt.toISOString(),\n            trialStatus: 'active',\n            trialStartedAt: now.toISOString(),\n            trialEndsAt: trialEndsAt.toISOString()\n          });\n\n          console.log(`✅ Trial activated for user ${authReq.user.userId} via subscription check, ends at ${trialEndsAt.toISOString()}`);\n        } else if (!storedSub.isTrial) {\n          // Regular subscription activation - ALWAYS update expiry even if already Pro\n          const planConfig = PLAN_PRICING[storedSub.planName];\n          const expiresAt = new Date();\n          expiresAt.setDate(expiresAt.getDate() + planConfig.duration);\n\n          await storage.updateProfile(authReq.user.userId, {\n            membershipStatus: 'pro',\n            membershipExpires: expiresAt.toISOString()\n          });\n\n          console.log(`✅ Updated user ${authReq.user.userId} to Pro via subscription check (expires: ${expiresAt.toISOString()})`);\n        } else {\n          console.warn(`⚠️ Subscription not activated - isTrial=${storedSub.isTrial}, trialStatus=${profile.trialStatus}`);\n        }\n      }\n    } else {\n      console.log(`⏳ Subscription ${subscriptionId} not yet active (status: ${subscription.status}, paid_count: ${subscription.paid_count || 0})`);\n    }\n\n    res.json({\n      subscriptionId: subscription.id,\n      status: subscription.status,\n      planId: storedSub.planId,\n      plan: storedSub.planName\n    });\n  } catch (error) {\n    console.error('Failed to get Razorpay subscription:', error);\n    res.status(500).json({ error: 'Failed to get subscription status' });\n  }\n}\n\n// Handle subscription webhook\nexport async function handleRazorpayWebhook(req: Request, res: Response) {\n  try {\n    const webhookSignature = req.headers['x-razorpay-signature'] as string;\n    const webhookSecret = process.env.RAZORPAY_WEBHOOK_SECRET;\n\n    if (!webhookSecret) {\n      console.warn('Razorpay webhook secret not configured');\n      return res.status(400).json({ error: 'Webhook secret not configured' });\n    }\n\n    // Verify webhook signature using raw body (Buffer from express.raw)\n    const expectedSignature = crypto.createHmac('sha256', webhookSecret)\n      .update(req.body)\n      .digest('hex');\n\n    if (expectedSignature !== webhookSignature) {\n      console.warn('Invalid webhook signature received');\n      return res.status(400).json({ error: 'Invalid webhook signature' });\n    }\n\n    // Parse JSON after signature verification\n    const event = JSON.parse(req.body.toString());\n\n    console.log('Razorpay webhook received:', event.event);\n\n    // Handle subscription events\n    switch (event.event) {\n      case 'subscription.authenticated':\n        await handleSubscriptionAuthenticated(event.payload.subscription.entity);\n        break;\n      case 'subscription.activated':\n        await handleSubscriptionAuthenticated(event.payload.subscription.entity);\n        break;\n      case 'subscription.charged':\n        await handleSubscriptionCharged(event.payload.subscription.entity, event.payload.payment.entity);\n        break;\n      case 'subscription.completed':\n        await handleSubscriptionCompleted(event.payload.subscription.entity);\n        break;\n      case 'subscription.cancelled':\n        await handleSubscriptionCancelled(event.payload.subscription.entity);\n        break;\n      case 'subscription.paused':\n        await handleSubscriptionPaused(event.payload.subscription.entity);\n        break;\n    }\n\n    res.json({ status: 'ok' });\n  } catch (error) {\n    console.error('Razorpay webhook error:', error);\n    res.status(500).json({ error: 'Webhook processing failed' });\n  }\n}\n\n// Webhook event handlers\nasync function handleSubscriptionAuthenticated(subscription: any) {\n  try {\n    const storedSub = await storage.getSubscription(subscription.id);\n    if (!storedSub) {\n      console.warn(`Subscription ${subscription.id} not found in database`);\n      return;\n    }\n\n    // CRITICAL: Only activate if subscription status is 'authenticated' or 'active'\n    // This prevents activation when user abandons checkout\n    if (subscription.status !== 'authenticated' && subscription.status !== 'active') {\n      console.log(`Subscription ${subscription.id} status is ${subscription.status}, not activating yet`);\n      await storage.updateSubscription(subscription.id, {\n        status: subscription.status\n      });\n      return;\n    }\n\n    const profile = await storage.getProfile(storedSub.userId);\n    if (!profile) {\n      console.warn(`Profile not found for user ${storedSub.userId}`);\n      return;\n    }\n\n    // Check if this is a trial subscription\n    if (storedSub.isTrial) {\n      // Only activate trial if user hasn't used it already\n      if (profile.trialStatus !== 'available') {\n        console.warn(`Trial not available for user ${storedSub.userId}, current status: ${profile.trialStatus}`);\n        return;\n      }\n\n      // Calculate trial dates\n      const now = new Date();\n      const trialEndsAt = storedSub.trialEndsAt ? new Date(storedSub.trialEndsAt) : new Date(now.getTime() + 7 * 24 * 60 * 60 * 1000);\n\n      // Activate trial\n      await storage.updateProfile(storedSub.userId, {\n        membershipStatus: 'pro',\n        membershipExpires: trialEndsAt.toISOString(),\n        trialStatus: 'active',\n        trialStartedAt: now.toISOString(),\n        trialEndsAt: trialEndsAt.toISOString()\n      });\n\n      console.log(`✅ Free trial activated for user ${storedSub.userId}, ends at ${trialEndsAt.toISOString()}`);\n    } else {\n      // Regular subscription (non-trial) - ALWAYS update expiry even if already Pro\n      const planConfig = PLAN_PRICING[storedSub.planName];\n      const expiresAt = new Date();\n      expiresAt.setDate(expiresAt.getDate() + planConfig.duration);\n\n      // Check if user has an active trial and mark it as used since they're now on a paid subscription\n      const updateData: any = {\n        membershipStatus: 'pro',\n        membershipExpires: expiresAt.toISOString()\n      };\n\n      if (profile.trialStatus === 'active') {\n        updateData.trialStatus = 'used';\n        console.log(`✅ User ${storedSub.userId} upgraded from trial to paid subscription`);\n      }\n\n      await storage.updateProfile(storedSub.userId, updateData);\n\n      console.log(`✅ Subscription activated for user ${storedSub.userId} (expires: ${expiresAt.toISOString()})`);\n    }\n\n    // Update subscription status in database\n    await storage.updateSubscription(subscription.id, {\n      status: subscription.status\n    });\n  } catch (error) {\n    console.error('Failed to handle subscription authentication:', error);\n  }\n}\n\nasync function handleSubscriptionCharged(subscription: any, payment: any) {\n  try {\n    const storedSub = await storage.getSubscription(subscription.id);\n    if (!storedSub) {\n      console.warn(`Subscription ${subscription.id} not found in database`);\n      return;\n    }\n\n    // Update user membership\n    const planConfig = PLAN_PRICING[storedSub.planName];\n    const expiresAt = new Date();\n    expiresAt.setDate(expiresAt.getDate() + planConfig.duration);\n\n    await storage.createPayment({\n      userId: storedSub.userId,\n      plan: storedSub.planName,\n      amount: (payment.amount / 100).toString(), // Convert from smallest unit\n      currency: planConfig.currency,\n      status: \"completed\",\n      paymentId: payment.id,\n      paymentMethod: \"razorpay_subscription\",\n      meta: {\n        razorpay_subscription_id: subscription.id,\n        razorpay_payment_id: payment.id,\n        subscription_status: subscription.status,\n        completedAt: new Date().toISOString()\n      }\n    });\n\n    // Check if user is on trial and mark it as used\n    const profile = await storage.getProfile(storedSub.userId);\n    const updateData: any = {\n      membershipStatus: 'pro',\n      membershipExpires: expiresAt.toISOString()\n    };\n\n    if (profile && profile.trialStatus === 'active') {\n      updateData.trialStatus = 'used';\n      console.log(`✅ Trial ended and converted to paid subscription for user ${storedSub.userId}`);\n    }\n\n    await storage.updateProfile(storedSub.userId, updateData);\n\n    // Update subscription status in database\n    await storage.updateSubscription(subscription.id, {\n      status: subscription.status\n    });\n\n    console.log(`✅ Subscription payment processed for user ${storedSub.userId}`);\n  } catch (error) {\n    console.error('Failed to process subscription charge:', error);\n  }\n}\n\nasync function handleSubscriptionCompleted(subscription: any) {\n  console.log(`Subscription completed: ${subscription.id}`);\n}\n\nasync function handleSubscriptionCancelled(subscription: any) {\n  try {\n    const storedSub = await storage.getSubscription(subscription.id);\n    if (storedSub) {\n      // Update subscription status to cancelled\n      await storage.updateSubscription(subscription.id, {\n        status: 'cancelled'\n      });\n\n      // Downgrade user to free when subscription is actually cancelled\n      const profile = await storage.getProfile(storedSub.userId);\n      if (profile) {\n        await storage.updateProfile(storedSub.userId, {\n          membershipStatus: 'free',\n          membershipPlan: null,\n          membershipExpires: null // Clear expiry since they're now on free plan\n        });\n      }\n      \n      console.log(`✅ Subscription cancelled and user ${storedSub.userId} downgraded to free: ${subscription.id}`);\n    }\n  } catch (error) {\n    console.error('Failed to handle subscription cancellation:', error);\n  }\n}\n\nasync function handleSubscriptionPaused(subscription: any) {\n  try {\n    const storedSub = await storage.getSubscription(subscription.id);\n    if (storedSub) {\n      await storage.updateSubscription(subscription.id, {\n        status: 'paused'\n      });\n      console.log(`Subscription paused: ${subscription.id}`);\n    }\n  } catch (error) {\n    console.error('Failed to handle subscription pause:', error);\n  }\n}\n\nexport async function verifyRazorpayPayment(req: Request, res: Response) {\n  try {\n    if (!razorpay) {\n      return res.status(503).json({ error: \"Razorpay service not available\" });\n    }\n\n    const { razorpayOrderId, razorpayPaymentId, razorpaySignature } = req.body;\n    const authReq = req as any;\n\n    if (!authReq.user || !authReq.user.userId) {\n      return res.status(401).json({ error: \"User not authenticated\" });\n    }\n\n    if (!razorpayOrderId || !razorpayPaymentId || !razorpaySignature) {\n      return res.status(400).json({\n        error: \"Missing payment verification parameters\"\n      });\n    }\n\n    // Verify the signature using proper crypto import\n    const body = razorpayOrderId + \"|\" + razorpayPaymentId;\n    const expectedSignature = crypto\n      .createHmac('sha256', RAZORPAY_KEY_SECRET!)\n      .update(body.toString())\n      .digest('hex');\n\n    if (expectedSignature !== razorpaySignature) {\n      return res.status(400).json({ error: \"Invalid payment signature\" });\n    }\n\n    // Check if order exists and belongs to this user\n    const storedOrder = await storage.getOrder(razorpayOrderId);\n    if (!storedOrder) {\n      return res.status(404).json({ error: \"Order not found\" });\n    }\n\n    if (storedOrder.userId !== authReq.user.userId) {\n      return res.status(403).json({ error: \"Order does not belong to user\" });\n    }\n\n    if (storedOrder.used) {\n      return res.status(400).json({ error: \"Order already used\" });\n    }\n\n    // Fetch payment details from Razorpay for verification\n    const payment = await razorpay.payments.fetch(razorpayPaymentId);\n    const razorpayOrder = await razorpay.orders.fetch(razorpayOrderId);\n    \n    if (payment.status !== 'captured') {\n      return res.status(400).json({ error: \"Payment not captured\" });\n    }\n\n    // Verify payment amount matches server-side pricing\n    const planConfig = PLAN_PRICING[storedOrder.plan];\n    const expectedAmountInSmallestUnit = Math.round(planConfig.amount * 100);\n    \n    if (payment.amount !== expectedAmountInSmallestUnit) {\n      return res.status(400).json({ error: \"Payment amount mismatch\" });\n    }\n\n    if (payment.currency !== planConfig.currency) {\n      return res.status(400).json({ error: \"Payment currency mismatch\" });\n    }\n\n    if (razorpayOrder.status !== 'paid') {\n      return res.status(400).json({ error: \"Order not paid\" });\n    }\n\n    // Mark order as used\n    await storage.updateOrder(razorpayOrderId, { used: true });\n\n    // Store payment record using trusted values from Razorpay and server config\n    await storage.createPayment({\n      userId: authReq.user.userId,\n      plan: storedOrder.plan,\n      amount: planConfig.amount.toString(),\n      currency: planConfig.currency,\n      status: \"completed\",\n      paymentId: razorpayPaymentId,\n      paymentMethod: \"razorpay\",\n      meta: {\n        razorpay_order_id: razorpayOrderId,\n        razorpay_payment_id: razorpayPaymentId,\n        razorpay_signature: razorpaySignature,\n        amount_verified: payment.amount,\n        currency_verified: payment.currency,\n        completedAt: new Date().toISOString()\n      }\n    });\n\n    // Update user membership using server-side configuration\n    const expiresAt = new Date();\n    expiresAt.setDate(expiresAt.getDate() + planConfig.duration);\n\n    // Get user profile to check trial status\n    const profile = await storage.getProfile(authReq.user.userId);\n    const updateData: any = {\n      membershipStatus: 'pro',\n      membershipExpires: expiresAt.toISOString()\n    };\n\n    // If user has an active trial, mark it as used when they upgrade to paid\n    if (profile && profile.trialStatus === 'active') {\n      updateData.trialStatus = 'used';\n      console.log(`✅ Trial ended and converted to paid subscription for user ${authReq.user.userId}`);\n    }\n\n    await storage.updateProfile(authReq.user.userId, updateData);\n\n    // Create subscription record for tracking purposes (even for one-time payments)\n    // This ensures the billing panel can display subscription information\n    const subscriptionId = `sub_onetime_${razorpayPaymentId}`;\n    await storage.createSubscription({\n      id: subscriptionId,\n      userId: authReq.user.userId,\n      planId: 'one_time_payment',\n      planName: storedOrder.plan,\n      status: 'active',\n      currency: planConfig.currency,\n      amount: planConfig.amount\n    });\n\n    console.log(`Successfully upgraded user ${authReq.user.userId} to ${storedOrder.plan} via Razorpay payment ${razorpayPaymentId}`);\n\n    res.json({\n      success: true,\n      paymentId: razorpayPaymentId,\n      orderId: razorpayOrderId,\n      membershipStatus: 'pro',\n      membershipExpires: expiresAt.toISOString()\n    });\n\n  } catch (error) {\n    console.error(\"Razorpay payment verification failed:\", error);\n    res.status(500).json({ error: \"Payment verification failed.\" });\n  }\n}\n\n// Cancel subscription\nexport async function cancelRazorpaySubscription(req: Request, res: Response) {\n  try {\n    if (!razorpay) {\n      return res.status(503).json({ error: \"Razorpay service not available\" });\n    }\n\n    const authReq = req as any;\n    \n    if (!authReq.user || !authReq.user.userId) {\n      return res.status(401).json({ error: \"User not authenticated\" });\n    }\n\n    // Get user's active subscriptions (including trials)\n    const userSubscriptions = await storage.getSubscriptionsByUser(authReq.user.userId);\n    console.log('User subscriptions:', JSON.stringify(userSubscriptions, null, 2));\n    \n    // Find subscription that's active, authenticated, created, or on trial\n    // \"created\" status means user started checkout but may not have completed it yet\n    const activeSubscription = userSubscriptions.find(sub => {\n      const status = sub.status?.toLowerCase();\n      return status === 'active' || status === 'authenticated' || status === 'created' || sub.isTrial;\n    });\n\n    if (!activeSubscription) {\n      console.log('No active subscription found. Available subscriptions:', userSubscriptions.map(s => ({ id: s.id, status: s.status, isTrial: s.isTrial })));\n      return res.status(404).json({ error: \"No active subscription found\" });\n    }\n\n    // Check if subscription is already cancelled or scheduled for cancellation\n    if (activeSubscription.status === 'cancelled' || activeSubscription.status === 'CANCELLED') {\n      return res.status(409).json({ \n        error: \"Subscription is already cancelled\",\n        message: \"Your subscription has already been cancelled.\"\n      });\n    }\n\n    // Check if this is a trial subscription\n    if (activeSubscription.isTrial) {\n      // For trials, cancel the subscription but keep access until trial ends\n      \n      // Cancel with Razorpay\n      await razorpay.subscriptions.cancel(activeSubscription.id);\n\n      // Update subscription status\n      await storage.updateSubscription(activeSubscription.id, {\n        status: 'cancelled'\n      });\n\n      // Get user profile\n      const profile = await storage.getProfile(authReq.user.userId);\n      \n      // Mark trial as cancelled but keep Pro access until trial end date\n      // The user keeps access until trialEndsAt, then the system will downgrade them\n      await storage.updateProfile(authReq.user.userId, {\n        trialStatus: 'cancelled' // Mark as cancelled, not \"used\"\n        // Keep membershipStatus as 'pro', membershipExpires as is - user has access until trial ends\n      });\n\n      console.log(`✅ Trial subscription cancelled: ${activeSubscription.id} for user ${authReq.user.userId} - access continues until ${profile?.trialEndsAt}`);\n      \n      return res.json({\n        success: true,\n        message: \"Your free trial has been cancelled. You'll continue to have Pro access until your trial ends.\",\n        subscriptionId: activeSubscription.id\n      });\n    }\n\n    // Check if this is a one-time payment subscription (not a recurring Razorpay subscription)\n    const isOneTimePayment = activeSubscription.planId === 'one_time_payment' || \n                            activeSubscription.id?.startsWith('sub_onetime_');\n\n    if (isOneTimePayment) {\n      // For one-time payments, simply update the subscription status and profile\n      // No need to call Razorpay API since this wasn't a recurring subscription\n      await storage.updateSubscription(activeSubscription.id, {\n        status: 'cancelled'\n      });\n\n      // Downgrade user immediately since one-time payments don't have billing cycles\n      await storage.updateProfile(authReq.user.userId, {\n        membershipStatus: 'free',\n        membershipPlan: null,\n        membershipExpires: null\n      });\n\n      console.log(`✅ One-time payment subscription cancelled: ${activeSubscription.id} for user ${authReq.user.userId}`);\n      \n      return res.json({\n        success: true,\n        message: \"Your Pro membership has been cancelled.\",\n        subscriptionId: activeSubscription.id\n      });\n    }\n\n    // Cancel with Razorpay - cancel at end of billing cycle (for recurring subscriptions)\n    await razorpay.subscriptions.cancel(activeSubscription.id, {\n      cancel_at_cycle_end: true\n    } as any);\n\n    // Do NOT update subscription status or user profile here\n    // Let the webhook handle the final cancellation when the period ends\n    // The subscription should remain 'active' until Razorpay sends the cancellation webhook\n\n    console.log(`✅ Subscription cancelled: ${activeSubscription.id} for user ${authReq.user.userId}`);\n    \n    res.json({\n      success: true,\n      message: \"Subscription cancelled successfully. You'll continue to have access until the end of your billing period.\",\n      subscriptionId: activeSubscription.id\n    });\n  } catch (error) {\n    console.error(\"Failed to cancel Razorpay subscription:\", error);\n    res.status(500).json({ error: \"Failed to cancel subscription.\" });\n  }\n}","size_bytes":29228},"client/src/components/demo/steps/ServicesStep.tsx":{"content":"import { useState } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Button } from '@/components/ui/button';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Badge } from '@/components/ui/badge';\nimport { Plus, X, Clock, DollarSign, Upload, Image as ImageIcon } from 'lucide-react';\n\ninterface Service {\n  name: string;\n  duration: number;\n  price: number;\n  imageUrl?: string;\n}\n\ninterface DemoData {\n  services: Service[];\n  businessHours: {\n    monday: string;\n    tuesday: string;\n    wednesday: string;\n    thursday: string;\n    friday: string;\n    saturday: string;\n    sunday: string;\n  };\n}\n\ninterface ServicesStepProps {\n  data: DemoData;\n  updateData: (updates: Partial<DemoData>) => void;\n}\n\nconst timeOptions = [\n  'Closed',\n  '8:00-17:00',\n  '9:00-17:00',\n  '9:00-18:00',\n  '10:00-18:00',\n  '10:00-19:00',\n  '11:00-20:00',\n  '12:00-21:00',\n  'Custom'\n];\n\nconst durationOptions = [\n  { value: 15, label: '15 minutes' },\n  { value: 30, label: '30 minutes' },\n  { value: 45, label: '45 minutes' },\n  { value: 60, label: '1 hour' },\n  { value: 90, label: '1.5 hours' },\n  { value: 120, label: '2 hours' },\n  { value: 180, label: '3 hours' }\n];\n\nexport default function ServicesStep({ data, updateData }: ServicesStepProps) {\n  const [uploadingIndex, setUploadingIndex] = useState<number | null>(null);\n\n  const addService = () => {\n    const newServices = [...data.services, { name: '', duration: 60, price: 0 }];\n    updateData({ services: newServices });\n  };\n\n  const removeService = (index: number) => {\n    const newServices = data.services.filter((_, i) => i !== index);\n    updateData({ services: newServices });\n  };\n\n  const updateService = (index: number, updates: Partial<Service>) => {\n    const newServices = [...data.services];\n    newServices[index] = { ...newServices[index], ...updates };\n    updateData({ services: newServices });\n  };\n\n  const handleImageUpload = (index: number, event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    if (file.size > 5 * 1024 * 1024) {\n      alert('File size must be less than 5MB');\n      return;\n    }\n\n    if (!file.type.startsWith('image/')) {\n      alert('Please select an image file');\n      return;\n    }\n\n    setUploadingIndex(index);\n    \n    const reader = new FileReader();\n    reader.onload = (e) => {\n      const base64 = e.target?.result as string;\n      updateService(index, { imageUrl: base64 });\n      setUploadingIndex(null);\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const updateBusinessHours = (day: string, hours: string) => {\n    updateData({\n      businessHours: {\n        ...data.businessHours,\n        [day]: hours\n      }\n    });\n  };\n\n  const setQuickSchedule = (schedule: 'business' | 'extended' | 'weekend') => {\n    let newHours = { ...data.businessHours };\n    \n    switch (schedule) {\n      case 'business':\n        newHours = {\n          monday: '9:00-17:00',\n          tuesday: '9:00-17:00',\n          wednesday: '9:00-17:00',\n          thursday: '9:00-17:00',\n          friday: '9:00-17:00',\n          saturday: 'Closed',\n          sunday: 'Closed'\n        };\n        break;\n      case 'extended':\n        newHours = {\n          monday: '9:00-18:00',\n          tuesday: '9:00-18:00',\n          wednesday: '9:00-18:00',\n          thursday: '9:00-18:00',\n          friday: '9:00-18:00',\n          saturday: '10:00-16:00',\n          sunday: 'Closed'\n        };\n        break;\n      case 'weekend':\n        newHours = {\n          monday: '9:00-17:00',\n          tuesday: '9:00-17:00',\n          wednesday: '9:00-17:00',\n          thursday: '9:00-17:00',\n          friday: '9:00-17:00',\n          saturday: '10:00-16:00',\n          sunday: '12:00-17:00'\n        };\n        break;\n    }\n    \n    updateData({ businessHours: newHours });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Services */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex justify-between items-center\">\n            <CardTitle className=\"flex items-center gap-2\">\n              💼 Services\n            </CardTitle>\n            <Badge variant=\"secondary\" data-testid=\"badge-service-count\">\n              {data.services.length} Services\n            </Badge>\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          {data.services.map((service, index) => (\n            <div \n              key={index} \n              className=\"p-4 border rounded-lg space-y-4\"\n              data-testid={`service-item-${index}`}\n            >\n              <div className=\"flex justify-between items-start\">\n                <h4 className=\"font-medium text-sm text-muted-foreground\">\n                  Service {index + 1}\n                </h4>\n                {data.services.length > 1 && (\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => removeService(index)}\n                    data-testid={`button-remove-service-${index}`}\n                    className=\"h-8 w-8 p-0 text-muted-foreground hover:text-destructive\"\n                  >\n                    <X className=\"w-4 h-4\" />\n                  </Button>\n                )}\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                {/* Service Name */}\n                <div className=\"space-y-2\">\n                  <Label data-testid={`label-service-name-${index}`}>\n                    Service Name *\n                  </Label>\n                  <Input\n                    value={service.name}\n                    onChange={(e) => updateService(index, { name: e.target.value })}\n                    placeholder=\"e.g., Haircut\"\n                    data-testid={`input-service-name-${index}`}\n                  />\n                </div>\n\n                {/* Duration */}\n                <div className=\"space-y-2\">\n                  <Label data-testid={`label-service-duration-${index}`}>\n                    <Clock className=\"w-4 h-4 inline mr-1\" />\n                    Duration\n                  </Label>\n                  <Select\n                    value={service.duration.toString()}\n                    onValueChange={(value) => updateService(index, { duration: parseInt(value) })}\n                  >\n                    <SelectTrigger data-testid={`select-service-duration-${index}`}>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {durationOptions.map((option) => (\n                        <SelectItem \n                          key={option.value} \n                          value={option.value.toString()}\n                          data-testid={`option-duration-${option.value}`}\n                        >\n                          {option.label}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                {/* Price */}\n                <div className=\"space-y-2\">\n                  <Label data-testid={`label-service-price-${index}`}>\n                    <DollarSign className=\"w-4 h-4 inline mr-1\" />\n                    Price\n                  </Label>\n                  <Input\n                    type=\"number\"\n                    value={service.price}\n                    onChange={(e) => updateService(index, { price: parseFloat(e.target.value) || 0 })}\n                    placeholder=\"0.00\"\n                    min=\"0\"\n                    step=\"0.01\"\n                    data-testid={`input-service-price-${index}`}\n                  />\n                </div>\n              </div>\n\n              {/* Image Upload Section */}\n              <div className=\"space-y-2 pt-2 border-t\">\n                <Label data-testid={`label-service-image-${index}`}>\n                  <ImageIcon className=\"w-4 h-4 inline mr-1\" />\n                  Service Image (Optional)\n                </Label>\n                <div className=\"flex items-center gap-4\">\n                  {service.imageUrl && (\n                    <div className=\"w-20 h-20 rounded border border-border overflow-hidden flex-shrink-0\">\n                      <img\n                        src={service.imageUrl}\n                        alt={`${service.name} preview`}\n                        className=\"w-full h-full object-cover\"\n                        data-testid={`img-service-preview-${index}`}\n                      />\n                    </div>\n                  )}\n                  \n                  <div className=\"flex-1\">\n                    <input\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={(e) => handleImageUpload(index, e)}\n                      className=\"hidden\"\n                      id={`service-image-upload-${index}`}\n                      data-testid={`input-service-image-${index}`}\n                    />\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => document.getElementById(`service-image-upload-${index}`)?.click()}\n                      disabled={uploadingIndex === index}\n                      data-testid={`button-upload-service-image-${index}`}\n                      className=\"w-full sm:w-auto\"\n                    >\n                      <Upload className=\"w-4 h-4 mr-2\" />\n                      {uploadingIndex === index ? 'Uploading...' : service.imageUrl ? 'Change Image' : 'Upload Image'}\n                    </Button>\n                    {service.imageUrl && (\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => updateService(index, { imageUrl: undefined })}\n                        data-testid={`button-remove-service-image-${index}`}\n                        className=\"ml-2\"\n                      >\n                        <X className=\"w-4 h-4 mr-1\" />\n                        Remove\n                      </Button>\n                    )}\n                  </div>\n                </div>\n                <p className=\"text-xs text-muted-foreground\">\n                  Recommended: 16:9 or square image, max 5MB\n                </p>\n              </div>\n            </div>\n          ))}\n\n          <Button\n            variant=\"outline\"\n            onClick={addService}\n            className=\"w-full\"\n            data-testid=\"button-add-service\"\n          >\n            <Plus className=\"w-4 h-4 mr-2\" />\n            Add Service\n          </Button>\n        </CardContent>\n      </Card>\n\n      {/* Business Hours */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            📅 Business Hours\n          </CardTitle>\n          <div className=\"text-sm text-muted-foreground\">\n            Set your availability for appointments\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          {/* Quick Schedule Buttons */}\n          <div className=\"flex flex-wrap gap-2 mb-4\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setQuickSchedule('business')}\n              data-testid=\"button-quick-business\"\n            >\n              Business Hours (Mon-Fri 9-5)\n            </Button>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setQuickSchedule('extended')}\n              data-testid=\"button-quick-extended\"\n            >\n              Extended (Mon-Sat)\n            </Button>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setQuickSchedule('weekend')}\n              data-testid=\"button-quick-weekend\"\n            >\n              Include Weekends\n            </Button>\n          </div>\n\n          {/* Individual Days */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            {Object.entries(data.businessHours).map(([day, hours]) => (\n              <div key={day} className=\"flex items-center gap-3\">\n                <Label \n                  className=\"w-20 text-sm capitalize\"\n                  data-testid={`label-hours-${day}`}\n                >\n                  {day}\n                </Label>\n                <Select\n                  value={hours}\n                  onValueChange={(value) => updateBusinessHours(day, value)}\n                >\n                  <SelectTrigger \n                    className=\"flex-1\"\n                    data-testid={`select-hours-${day}`}\n                  >\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {timeOptions.map((option) => (\n                      <SelectItem \n                        key={option} \n                        value={option}\n                        data-testid={`option-hours-${option.replace(/[^a-zA-Z0-9]/g, '-')}`}\n                      >\n                        {option}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":13441},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"client/src/components/ui/currency-selector.tsx":{"content":"import { Button } from '@/components/ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { Badge } from '@/components/ui/badge';\nimport { ChevronDown, Globe } from 'lucide-react';\nimport { useCurrency, currencies } from '@/hooks/use-currency';\n\ninterface CurrencySelectorProps {\n  showLabel?: boolean;\n  variant?: 'default' | 'compact';\n  className?: string;\n}\n\nexport default function CurrencySelector({ \n  showLabel = true, \n  variant = 'default',\n  className = ''\n}: CurrencySelectorProps) {\n  const { selectedCurrency, setSelectedCurrency } = useCurrency();\n\n  if (variant === 'compact') {\n    return (\n      <DropdownMenu>\n        <DropdownMenuTrigger asChild>\n          <Button \n            variant=\"ghost\" \n            size=\"sm\" \n            className={`h-8 px-2 ${className}`}\n            data-testid=\"currency-selector-compact\"\n          >\n            <Globe className=\"h-4 w-4 mr-1\" />\n            <span className=\"font-medium\">{selectedCurrency.code}</span>\n            <ChevronDown className=\"h-3 w-3 ml-1\" />\n          </Button>\n        </DropdownMenuTrigger>\n        <DropdownMenuContent align=\"end\" className=\"w-48\">\n          {currencies.map((currency) => (\n            <DropdownMenuItem\n              key={currency.code}\n              onClick={() => setSelectedCurrency(currency)}\n              className=\"flex items-center justify-between cursor-pointer\"\n              data-testid={`currency-option-${currency.code}`}\n            >\n              <div className=\"flex items-center\">\n                <span className=\"font-medium mr-2\">{currency.symbol}</span>\n                <span className=\"text-sm\">{currency.code}</span>\n              </div>\n              {selectedCurrency.code === currency.code && (\n                <Badge variant=\"default\" className=\"text-xs\">Selected</Badge>\n              )}\n            </DropdownMenuItem>\n          ))}\n        </DropdownMenuContent>\n      </DropdownMenu>\n    );\n  }\n\n  return (\n    <div className={`flex items-center space-x-2 ${className}`}>\n      {showLabel && (\n        <label className=\"text-sm font-medium text-foreground flex items-center\">\n          <Globe className=\"h-4 w-4 mr-1\" />\n          Currency:\n        </label>\n      )}\n      <DropdownMenu>\n        <DropdownMenuTrigger asChild>\n          <Button \n            variant=\"outline\" \n            className=\"min-w-[140px] justify-between\"\n            data-testid=\"currency-selector\"\n          >\n            <div className=\"flex items-center\">\n              <span className=\"font-medium mr-2\">{selectedCurrency.symbol}</span>\n              <span>{selectedCurrency.code}</span>\n            </div>\n            <ChevronDown className=\"h-4 w-4\" />\n          </Button>\n        </DropdownMenuTrigger>\n        <DropdownMenuContent className=\"w-56\">\n          {currencies.map((currency) => (\n            <DropdownMenuItem\n              key={currency.code}\n              onClick={() => setSelectedCurrency(currency)}\n              className=\"flex items-center justify-between cursor-pointer\"\n              data-testid={`currency-option-${currency.code}`}\n            >\n              <div className=\"flex items-center\">\n                <span className=\"font-medium mr-3\">{currency.symbol}</span>\n                <div>\n                  <div className=\"font-medium\">{currency.code}</div>\n                  <div className=\"text-xs text-muted-foreground\">{currency.name}</div>\n                </div>\n              </div>\n              {selectedCurrency.code === currency.code && (\n                <Badge variant=\"default\" className=\"text-xs\">Selected</Badge>\n              )}\n            </DropdownMenuItem>\n          ))}\n        </DropdownMenuContent>\n      </DropdownMenu>\n    </div>\n  );\n}","size_bytes":3799},"client/src/pages/refunds.tsx":{"content":"import Header from '@/components/layout/header';\nimport Footer from '@/components/layout/footer';\nimport SEO from '@/components/seo';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { useLocation } from 'wouter';\nimport { \n  RefreshCw, \n  ArrowLeft, \n  CreditCard, \n  Clock, \n  CheckCircle, \n  XCircle,\n  AlertTriangle,\n  DollarSign,\n  Calendar,\n  Shield\n} from 'lucide-react';\n\nexport default function Refunds() {\n  const [, setLocation] = useLocation();\n\n  const refundTypes = [\n    {\n      icon: CheckCircle,\n      title: \"Full Refund\",\n      description: \"100% refund within first 14 days\",\n      timeframe: \"Within 14 days of purchase\",\n      conditions: \"No usage limitations\",\n      processing: \"2-5 business days\"\n    },\n    {\n      icon: RefreshCw,\n      title: \"Pro-rated Refund\",\n      description: \"Partial refund for unused time\",\n      timeframe: \"After 14 days, within billing period\",\n      conditions: \"Based on remaining subscription time\",\n      processing: \"3-7 business days\"\n    },\n    {\n      icon: XCircle,\n      title: \"No Refund\",\n      description: \"Service credit or alternative solution\",\n      timeframe: \"After current billing period ends\",\n      conditions: \"Account downgrades available\",\n      processing: \"Immediate account adjustment\"\n    }\n  ];\n\n  const refundProcess = [\n    {\n      step: 1,\n      title: \"Submit Request\",\n      description: \"Contact our support team with your refund request and reason\",\n      icon: DollarSign\n    },\n    {\n      step: 2,\n      title: \"Review Process\",\n      description: \"Our team reviews your request within 24 hours\",\n      icon: Clock\n    },\n    {\n      step: 3,\n      title: \"Approval & Processing\",\n      description: \"Approved refunds are processed back to your original payment method\",\n      icon: CreditCard\n    },\n    {\n      step: 4,\n      title: \"Confirmation\",\n      description: \"You'll receive confirmation once the refund is processed\",\n      icon: CheckCircle\n    }\n  ];\n\n  const policies = [\n    {\n      title: \"Subscription Refunds\",\n      content: [\n        \"Monthly subscriptions: Full refund within 14 days of initial purchase. Pro-rated refunds available for unused time after 14 days.\",\n        \"Annual subscriptions: Full refund within 14 days. Pro-rated refunds calculated based on unused months.\",\n        \"Upgrade charges: If you upgrade your plan, refund eligibility is based on the upgrade date, not the original subscription date.\",\n        \"Automatic renewals: Refunds for automatic renewals must be requested within 7 days of the renewal charge.\"\n      ]\n    },\n    {\n      title: \"Service Credits\",\n      content: [\n        \"Service interruptions: If our service is unavailable for more than 4 hours, we'll provide service credits.\",\n        \"Feature failures: Credits may be provided for significant feature malfunctions that impact your business.\",\n        \"Data loss: In the unlikely event of data loss on our end, we'll provide credits and assistance with recovery.\",\n        \"Credit usage: Service credits are applied to your next billing cycle and cannot be transferred or refunded as cash.\"\n      ]\n    },\n    {\n      title: \"Dispute Resolution\",\n      content: [\n        \"Chargeback prevention: We encourage contacting us before initiating chargebacks to resolve issues quickly.\",\n        \"Documentation: Keep records of your refund request and our response for your records.\",\n        \"Appeal process: If your refund request is denied, you can appeal the decision within 30 days.\",\n        \"External mediation: For unresolved disputes, we support mediation through recognized dispute resolution services.\"\n      ]\n    },\n    {\n      title: \"Non-Refundable Items\",\n      content: [\n        \"Setup fees: One-time setup or customization fees are generally non-refundable after service delivery.\",\n        \"Third-party costs: External service integration costs cannot be refunded.\",\n        \"Abuse or violations: Accounts terminated for terms of service violations are not eligible for refunds.\",\n        \"Downgrade difference: When downgrading plans, the difference is typically applied as credit rather than refunded.\"\n      ]\n    }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <SEO \n        title=\"Cancellation & Refunds | BookingGen\" \n        description=\"Understand BookingGen's refund policy and cancellation procedures. Learn about our 14-day satisfaction guarantee, pro-rated refunds, and refund process.\"\n        ogTitle=\"Cancellation & Refunds Policy - BookingGen\"\n        ogDescription=\"Complete refund and cancellation policy with 14-day satisfaction guarantee and clear refund procedures.\"\n      />\n      <Header />\n      \n      {/* Hero Section */}\n      <section className=\"py-20 bg-muted/30\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            <Button \n              variant=\"ghost\" \n              onClick={() => setLocation('/legal')}\n              className=\"mb-6\"\n              data-testid=\"button-back-to-legal\"\n            >\n              <ArrowLeft className=\"mr-2 h-4 w-4\" />\n              Back to Legal & Support\n            </Button>\n            \n            <div className=\"text-center mb-12\">\n              <div className=\"inline-flex items-center justify-center w-16 h-16 bg-primary/10 rounded-full mb-6\">\n                <RefreshCw className=\"h-8 w-8 text-primary\" />\n              </div>\n              <h1 className=\"text-3xl lg:text-5xl font-bold text-foreground mb-6\">\n                Cancellation & Refunds\n              </h1>\n              <p className=\"text-xl text-muted-foreground\">\n                Last updated: September 17, 2025\n              </p>\n              <p className=\"text-lg text-muted-foreground mt-4 max-w-2xl mx-auto\">\n                We want you to be completely satisfied with BookingGen. Here's everything you need \n                to know about our cancellation and refund policies.\n              </p>\n            </div>\n\n            {/* Satisfaction Guarantee */}\n            <Card className=\"mb-8 border-blue-200 bg-blue-50 dark:border-blue-800 dark:bg-blue-950/20\">\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-start gap-3\">\n                  <Shield className=\"h-5 w-5 text-blue-600 mt-1 flex-shrink-0\" />\n                  <div>\n                    <h3 className=\"font-semibold text-blue-900 dark:text-blue-100 mb-2\">\n                      14-Day Satisfaction Guarantee\n                    </h3>\n                    <p className=\"text-blue-800 dark:text-blue-200 text-sm\">\n                      Try BookingGen risk-free! If you're not completely satisfied within the first 14 days, \n                      we'll provide a full refund, no questions asked.\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </section>\n\n      {/* Refund Types */}\n      <section className=\"py-16\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            <h2 className=\"text-3xl font-bold text-center mb-12\">Refund Options</h2>\n            <div className=\"grid md:grid-cols-3 gap-6 mb-16\">\n              {refundTypes.map((type, index) => (\n                <Card key={index} className=\"text-center\">\n                  <CardHeader>\n                    <div className=\"inline-flex items-center justify-center w-12 h-12 bg-primary/10 rounded-lg mb-4 mx-auto\">\n                      <type.icon className=\"h-6 w-6 text-primary\" />\n                    </div>\n                    <CardTitle className=\"text-xl\">{type.title}</CardTitle>\n                    <p className=\"text-sm text-muted-foreground\">{type.description}</p>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-3 text-sm\">\n                      <div className=\"flex items-center gap-2\">\n                        <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n                        <span data-testid={`text-timeframe-${index}`}>{type.timeframe}</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <CheckCircle className=\"h-4 w-4 text-muted-foreground\" />\n                        <span data-testid={`text-conditions-${index}`}>{type.conditions}</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <Clock className=\"h-4 w-4 text-muted-foreground\" />\n                        <span data-testid={`text-processing-${index}`}>{type.processing}</span>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Refund Process */}\n      <section className=\"py-16 bg-muted/30\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            <h2 className=\"text-3xl font-bold text-center mb-12\">How to Request a Refund</h2>\n            <div className=\"space-y-6\">\n              {refundProcess.map((process, index) => (\n                <Card key={index} className=\"p-6\">\n                  <div className=\"flex items-start gap-4\">\n                    <div className=\"inline-flex items-center justify-center w-10 h-10 bg-primary text-primary-foreground rounded-full font-bold text-lg flex-shrink-0\">\n                      {process.step}\n                    </div>\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-3 mb-2\">\n                        <process.icon className=\"h-5 w-5 text-primary\" />\n                        <h3 className=\"font-semibold text-lg\">{process.title}</h3>\n                      </div>\n                      <p className=\"text-muted-foreground\" data-testid={`text-process-${index}`}>\n                        {process.description}\n                      </p>\n                    </div>\n                  </div>\n                </Card>\n              ))}\n            </div>\n\n            <div className=\"text-center mt-12\">\n              <Button \n                size=\"lg\"\n                onClick={() => setLocation('/contact')}\n                data-testid=\"button-request-refund\"\n              >\n                <RefreshCw className=\"mr-2 h-4 w-4\" />\n                Request a Refund\n              </Button>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Detailed Policies */}\n      <section className=\"py-16\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            <h2 className=\"text-3xl font-bold text-center mb-12\">Detailed Refund Policies</h2>\n            <div className=\"space-y-8\">\n              {policies.map((policy, index) => (\n                <Card key={index} className=\"p-6\">\n                  <CardHeader className=\"p-0 mb-4\">\n                    <CardTitle className=\"flex items-center gap-3 text-xl\">\n                      <div className=\"inline-flex items-center justify-center w-8 h-8 bg-primary/10 rounded-lg\">\n                        <CreditCard className=\"h-4 w-4 text-primary\" />\n                      </div>\n                      {policy.title}\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"p-0\">\n                    <div className=\"space-y-3\">\n                      {policy.content.map((item, itemIndex) => (\n                        <p \n                          key={itemIndex} \n                          className=\"text-muted-foreground leading-relaxed\"\n                          data-testid={`text-policy-${index}-item-${itemIndex}`}\n                        >\n                          {item}\n                        </p>\n                      ))}\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Important Notes */}\n      <section className=\"py-16 bg-muted/30\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            <Card className=\"border-orange-200 bg-orange-50 dark:border-orange-800 dark:bg-orange-950/20\">\n              <CardContent className=\"p-8\">\n                <div className=\"flex items-start gap-3 mb-6\">\n                  <AlertTriangle className=\"h-5 w-5 text-orange-600 mt-1 flex-shrink-0\" />\n                  <div>\n                    <h3 className=\"font-semibold text-orange-900 dark:text-orange-100 mb-2\">\n                      Important Notes\n                    </h3>\n                  </div>\n                </div>\n                <div className=\"space-y-4 text-orange-800 dark:text-orange-200\">\n                  <p>• Refunds are processed back to your original payment method and may take 5-10 business days to appear.</p>\n                  <p>• Annual subscriptions are calculated monthly for pro-rated refunds (annual price ÷ 12 months).</p>\n                  <p>• Service credits cannot be converted to cash refunds and expire if your account is closed.</p>\n                  <p>• Refund requests must include your account email and reason for the refund request.</p>\n                </div>\n              </CardContent>\n            </Card>\n\n            <div className=\"text-center mt-12\">\n              <Card className=\"bg-primary/5 border-primary/20\">\n                <CardContent className=\"p-8\">\n                  <h3 className=\"text-xl font-semibold mb-4\">Need Help?</h3>\n                  <p className=\"text-muted-foreground mb-6\">\n                    Have questions about our refund policy? Our support team is here to help you understand \n                    your options and process any requests quickly.\n                  </p>\n                  <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n                    <Button \n                      onClick={() => setLocation('/contact')}\n                      data-testid=\"button-contact-support\"\n                    >\n                      Contact Support\n                    </Button>\n                    <Button \n                      variant=\"outline\"\n                      onClick={() => setLocation('/legal')}\n                      data-testid=\"button-legal-help\"\n                    >\n                      Legal Center\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <Footer />\n    </div>\n  );\n}","size_bytes":14751},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/hooks/useRealtimeSubscription.ts":{"content":"import { useEffect, useState } from 'react';\nimport { supabase } from '@/lib/supabase';\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\n\ntype RealtimeEvent = 'INSERT' | 'UPDATE' | 'DELETE';\ntype RealtimePayload = {\n  eventType: RealtimeEvent;\n  new: Record<string, any>;\n  old: Record<string, any>;\n  table: string;\n};\n\n/**\n * Hook for subscribing to real-time database changes\n * @param table - The table name to subscribe to\n * @param filter - Optional filter for the subscription\n * @param queryKey - React Query key to invalidate on changes\n * @param enabled - Whether the subscription is enabled\n */\nexport function useRealtimeSubscription({\n  table,\n  filter,\n  queryKey,\n  enabled = true,\n}: {\n  table: string;\n  filter?: string;\n  queryKey?: string | string[];\n  enabled?: boolean;\n}) {\n  const queryClient = useQueryClient();\n  const [isConnected, setIsConnected] = useState(false);\n  const [lastEvent, setLastEvent] = useState<RealtimePayload | null>(null);\n\n  useEffect(() => {\n    if (!enabled || !supabase) {\n      return;\n    }\n\n    // Build subscription query\n    let subscription = supabase\n      .channel(`public:${table}`)\n      .on('postgres_changes', \n        { \n          event: '*', \n          schema: 'public', \n          table: table,\n          ...(filter && { filter })\n        }, \n        (payload: any) => {\n          console.log(`Realtime event on ${table}:`, payload.eventType, payload.new || payload.old);\n          \n          const event: RealtimePayload = {\n            eventType: payload.eventType as RealtimeEvent,\n            new: payload.new,\n            old: payload.old,\n            table: table\n          };\n          \n          setLastEvent(event);\n\n          // Invalidate relevant queries to refetch data\n          if (queryKey) {\n            queryClient.invalidateQueries({ queryKey: Array.isArray(queryKey) ? queryKey : [queryKey] });\n          }\n        }\n      );\n\n    // Subscribe with connection status tracking\n    subscription.subscribe((status: any) => {\n      console.log(`Realtime subscription status for ${table}:`, status);\n      setIsConnected(status === 'SUBSCRIBED');\n    });\n\n    return () => {\n      console.log(`Unsubscribing from ${table} realtime`);\n      subscription.unsubscribe();\n      setIsConnected(false);\n    };\n  }, [table, filter, queryKey, enabled, queryClient]);\n\n  return {\n    isConnected,\n    lastEvent,\n  };\n}\n\n/**\n * Hook for real-time appointments with ownership filtering\n */\nexport function useRealtimeAppointments(ownerId?: string) {\n  const queryClient = useQueryClient();\n  \n  return useRealtimeSubscription({\n    table: 'appointments',\n    filter: ownerId ? `owner_id=eq.${ownerId}` : undefined,\n    queryKey: '/api/appointments',\n    enabled: !!ownerId\n  });\n}\n\n/**\n * Hook for real-time pages with ownership filtering  \n */\nexport function useRealtimePages(ownerId?: string) {\n  const queryClient = useQueryClient();\n  \n  return useRealtimeSubscription({\n    table: 'pages',\n    filter: ownerId ? `owner_id=eq.${ownerId}` : undefined,\n    queryKey: '/api/pages',\n    enabled: !!ownerId\n  });\n}\n\n/**\n * Hook for real-time services for a specific page\n */\nexport function useRealtimeServices(pageId?: string) {\n  const queryClient = useQueryClient();\n  \n  return useRealtimeSubscription({\n    table: 'services', \n    filter: pageId ? `page_id=eq.${pageId}` : undefined,\n    queryKey: pageId ? ['/api/pages', pageId, 'services'] : undefined,\n    enabled: !!pageId\n  });\n}\n\n/**\n * Hook for real-time dashboard stats - invalidates multiple queries with debouncing\n */\nexport function useRealtimeDashboard(ownerId?: string) {\n  const queryClient = useQueryClient();\n  const [isConnected, setIsConnected] = useState(false);\n\n  useEffect(() => {\n    if (!ownerId || !supabase) {\n      return;\n    }\n\n    // Debounce function to prevent excessive invalidations\n    let debounceTimeout: NodeJS.Timeout;\n    const debouncedInvalidateStats = () => {\n      clearTimeout(debounceTimeout);\n      debounceTimeout = setTimeout(() => {\n        queryClient.invalidateQueries({ queryKey: ['/api/dashboard/stats'] });\n        queryClient.invalidateQueries({ queryKey: ['/api/dashboard/recent-activity'] });\n      }, 300); // 300ms debounce\n    };\n\n    // Single channel for both appointments and pages (more efficient)\n    const dashboardSub = supabase\n      .channel(`dashboard:${ownerId}`)\n      .on('postgres_changes', \n        { \n          event: 'INSERT', // Only listen to relevant events\n          schema: 'public', \n          table: 'appointments',\n          filter: `owner_id=eq.${ownerId}`\n        }, \n        (payload: any) => {\n          console.log('Dashboard: appointment created', payload.eventType);\n          debouncedInvalidateStats();\n          queryClient.invalidateQueries({ queryKey: ['/api/appointments'] });\n        }\n      )\n      .on('postgres_changes', \n        { \n          event: 'UPDATE', \n          schema: 'public', \n          table: 'appointments',\n          filter: `owner_id=eq.${ownerId}`\n        }, \n        (payload: any) => {\n          console.log('Dashboard: appointment updated', payload.eventType);\n          debouncedInvalidateStats();\n          queryClient.invalidateQueries({ queryKey: ['/api/appointments'] });\n        }\n      )\n      .on('postgres_changes', \n        { \n          event: 'INSERT',\n          schema: 'public', \n          table: 'pages',\n          filter: `owner_id=eq.${ownerId}`\n        }, \n        (payload: any) => {\n          console.log('Dashboard: page created', payload.eventType);\n          debouncedInvalidateStats();\n          queryClient.invalidateQueries({ queryKey: ['/api/pages'] });\n        }\n      )\n      .on('postgres_changes', \n        { \n          event: 'UPDATE',\n          schema: 'public', \n          table: 'pages',\n          filter: `owner_id=eq.${ownerId}`\n        }, \n        (payload: any) => {\n          console.log('Dashboard: page updated', payload.eventType);\n          debouncedInvalidateStats();\n          queryClient.invalidateQueries({ queryKey: ['/api/pages'] });\n        }\n      );\n\n    dashboardSub.subscribe((status: any) => {\n      console.log(`Dashboard realtime status:`, status);\n      setIsConnected(status === 'SUBSCRIBED');\n    });\n\n    return () => {\n      clearTimeout(debounceTimeout);\n      dashboardSub.unsubscribe();\n      setIsConnected(false);\n    };\n  }, [ownerId, queryClient]);\n\n  return { isConnected };\n}","size_bytes":6412},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/pages/admin.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Lock, Search, User, CreditCard, Calendar, AlertCircle, XCircle, Edit, Bell, RefreshCw } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from '@/components/ui/dialog';\n\nexport default function AdminPage() {\n  const [adminKey, setAdminKey] = useState('');\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [userId, setUserId] = useState('');\n  const [userStatus, setUserStatus] = useState<any>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isExpiryDialogOpen, setIsExpiryDialogOpen] = useState(false);\n  const [newExpiryDate, setNewExpiryDate] = useState('');\n  const [recentPayments, setRecentPayments] = useState<any[]>([]);\n  const [isLoadingPayments, setIsLoadingPayments] = useState(false);\n  const { toast } = useToast();\n\n  const handleAuth = async () => {\n    if (!adminKey.trim()) {\n      toast({\n        title: \"Error\",\n        description: \"Please enter an admin key\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      // Validate admin key by making a test request to the server\n      const response = await fetch('/api/admin/validate', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-admin-key': adminKey,\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error('Invalid admin key');\n      }\n\n      setIsAuthenticated(true);\n      toast({\n        title: \"Authenticated\",\n        description: \"Admin access granted\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Authentication Failed\",\n        description: error instanceof Error ? error.message : \"Invalid admin key\",\n        variant: \"destructive\",\n      });\n      setAdminKey('');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleSearch = async () => {\n    if (!userId.trim()) {\n      toast({\n        title: \"Error\",\n        description: \"Please enter a user ID\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const response = await fetch(`/api/admin/user-status/${userId}`, {\n        headers: {\n          'x-admin-key': adminKey,\n        },\n      });\n\n      if (!response.ok) {\n        if (response.status === 403) {\n          setIsAuthenticated(false);\n          throw new Error('Invalid admin key');\n        }\n        throw new Error('Failed to fetch user status');\n      }\n\n      const data = await response.json();\n      setUserStatus(data);\n      toast({\n        title: \"Success\",\n        description: \"User status loaded\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: error instanceof Error ? error.message : \"Failed to load user status\",\n        variant: \"destructive\",\n      });\n      setUserStatus(null);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleCancelSubscription = async (subscriptionId: string) => {\n    if (!confirm('Are you sure you want to cancel this subscription?')) {\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const response = await fetch('/api/admin/cancel-subscription', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-admin-key': adminKey,\n        },\n        body: JSON.stringify({\n          userId: userStatus.profile.id,\n          subscriptionId,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to cancel subscription');\n      }\n\n      toast({\n        title: \"Success\",\n        description: \"Subscription cancelled successfully\",\n      });\n\n      // Refresh user status\n      await handleSearch();\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: error instanceof Error ? error.message : \"Failed to cancel subscription\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleUpdateExpiry = async () => {\n    if (!newExpiryDate) {\n      toast({\n        title: \"Error\",\n        description: \"Please select a new expiry date\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const response = await fetch('/api/admin/update-expiry', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-admin-key': adminKey,\n        },\n        body: JSON.stringify({\n          userId: userStatus.profile.id,\n          expiryDate: newExpiryDate,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to update expiry date');\n      }\n\n      toast({\n        title: \"Success\",\n        description: \"Membership expiry updated successfully\",\n      });\n\n      setIsExpiryDialogOpen(false);\n      setNewExpiryDate('');\n\n      // Refresh user status\n      await handleSearch();\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: error instanceof Error ? error.message : \"Failed to update expiry date\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const fetchRecentPayments = async () => {\n    if (!isAuthenticated || !adminKey) return;\n    \n    setIsLoadingPayments(true);\n    try {\n      const response = await fetch('/api/admin/recent-payments?limit=20', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-admin-key': adminKey,\n        },\n      });\n\n      if (!response.ok) {\n        if (response.status === 403) {\n          setIsAuthenticated(false);\n          throw new Error('Admin key expired or invalid');\n        }\n        throw new Error('Failed to fetch recent payments');\n      }\n\n      const data = await response.json();\n      setRecentPayments(data.payments || []);\n    } catch (error) {\n      console.error('Failed to load recent payments:', error);\n      toast({\n        title: \"Error\",\n        description: error instanceof Error ? error.message : \"Failed to load recent payments\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoadingPayments(false);\n    }\n  };\n\n  useEffect(() => {\n    if (isAuthenticated && adminKey) {\n      fetchRecentPayments();\n      const interval = setInterval(fetchRecentPayments, 30000);\n      return () => clearInterval(interval);\n    }\n  }, [isAuthenticated, adminKey]);\n\n  if (!isAuthenticated) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4\">\n        <Card className=\"w-full max-w-md\">\n          <CardHeader className=\"text-center\">\n            <div className=\"w-16 h-16 bg-gray-900 dark:bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <Lock className=\"h-8 w-8 text-white dark:text-gray-900\" />\n            </div>\n            <CardTitle className=\"text-2xl\">Admin Access</CardTitle>\n            <CardDescription>Enter your admin key to continue</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <Input\n              type=\"password\"\n              placeholder=\"Admin Key\"\n              value={adminKey}\n              onChange={(e) => setAdminKey(e.target.value)}\n              onKeyDown={(e) => e.key === 'Enter' && handleAuth()}\n              data-testid=\"input-admin-key\"\n            />\n            <Button \n              onClick={handleAuth} \n              className=\"w-full\"\n              disabled={isLoading}\n              data-testid=\"button-auth-admin\"\n            >\n              {isLoading ? 'Validating...' : 'Authenticate'}\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 p-4 md:p-8\">\n      <div className=\"max-w-6xl mx-auto space-y-6\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">Admin Dashboard</h1>\n            <p className=\"text-gray-600 dark:text-gray-400 mt-1\">User subscription management</p>\n          </div>\n          <Badge variant=\"outline\" className=\"px-4 py-2\">\n            <Lock className=\"h-4 w-4 mr-2\" />\n            Authenticated\n          </Badge>\n        </div>\n\n        {/* Recent Payments Dashboard */}\n        <Card>\n          <CardHeader>\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Bell className=\"h-5 w-5\" />\n                  Recent Purchases\n                </CardTitle>\n                <CardDescription>Real-time payment notifications (auto-updates every 30s)</CardDescription>\n              </div>\n              <Button\n                onClick={fetchRecentPayments}\n                disabled={isLoadingPayments}\n                variant=\"outline\"\n                size=\"sm\"\n                data-testid=\"button-refresh-payments\"\n              >\n                <RefreshCw className={`h-4 w-4 ${isLoadingPayments ? 'animate-spin' : ''}`} />\n              </Button>\n            </div>\n          </CardHeader>\n          <CardContent>\n            {isLoadingPayments && recentPayments.length === 0 ? (\n              <p className=\"text-gray-500 dark:text-gray-400\">Loading recent payments...</p>\n            ) : recentPayments.length === 0 ? (\n              <p className=\"text-gray-500 dark:text-gray-400\">No recent payments</p>\n            ) : (\n              <div className=\"space-y-2 max-h-96 overflow-y-auto\">\n                {recentPayments.map((payment) => (\n                  <div \n                    key={payment.id} \n                    className=\"border rounded-lg p-3 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors\"\n                    data-testid={`recent-payment-${payment.id}`}\n                  >\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-2\">\n                          <p className=\"font-medium\">{payment.userFullName}</p>\n                          <Badge variant={payment.status === 'completed' ? 'default' : 'secondary'} className=\"text-xs\">\n                            {payment.status}\n                          </Badge>\n                        </div>\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400\">{payment.userEmail}</p>\n                        <div className=\"flex items-center gap-4 mt-1\">\n                          <p className=\"text-sm font-medium text-green-600 dark:text-green-400\">\n                            {payment.currency} {payment.amount}\n                          </p>\n                          <p className=\"text-xs text-gray-500\">{payment.plan} plan</p>\n                          <p className=\"text-xs text-gray-400\">\n                            {new Date(payment.createdAt).toLocaleString()}\n                          </p>\n                        </div>\n                      </div>\n                      <Button\n                        onClick={() => {\n                          setUserId(payment.userId);\n                          handleSearch();\n                        }}\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        data-testid={`button-view-user-${payment.id}`}\n                      >\n                        View User\n                      </Button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Search */}\n        <Card>\n          <CardHeader>\n            <CardTitle>User Lookup</CardTitle>\n            <CardDescription>Search for a user by their ID or email</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex gap-2\">\n              <Input\n                placeholder=\"User ID or Email\"\n                value={userId}\n                onChange={(e) => setUserId(e.target.value)}\n                onKeyDown={(e) => e.key === 'Enter' && handleSearch()}\n                data-testid=\"input-user-id\"\n              />\n              <Button \n                onClick={handleSearch} \n                disabled={isLoading}\n                data-testid=\"button-search-user\"\n              >\n                <Search className=\"h-4 w-4 mr-2\" />\n                {isLoading ? 'Loading...' : 'Search'}\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* User Status */}\n        {userStatus && (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {/* Profile Info */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <User className=\"h-5 w-5\" />\n                  Profile Information\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                <div>\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">User ID</p>\n                  <p className=\"font-mono text-sm\" data-testid=\"text-profile-id\">{userStatus.profile.id}</p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">Email</p>\n                  <p data-testid=\"text-profile-email\">{userStatus.profile.email || userStatus.profile.fullName || 'N/A'}</p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">Membership Status</p>\n                  <Badge variant={userStatus.profile.membershipStatus === 'pro' ? 'default' : 'secondary'} data-testid=\"badge-membership-status\">\n                    {userStatus.profile.membershipStatus}\n                  </Badge>\n                </div>\n                <div>\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">Membership Expires</p>\n                  <div className=\"flex items-center gap-2\">\n                    <p data-testid=\"text-membership-expires\">\n                      {userStatus.profile.membershipExpires \n                        ? new Date(userStatus.profile.membershipExpires).toLocaleDateString()\n                        : 'N/A'}\n                    </p>\n                    {userStatus.profile.membershipStatus === 'pro' && (\n                      <Button\n                        onClick={() => {\n                          setNewExpiryDate(userStatus.profile.membershipExpires?.split('T')[0] || '');\n                          setIsExpiryDialogOpen(true);\n                        }}\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        data-testid=\"button-edit-expiry\"\n                      >\n                        <Edit className=\"h-4 w-4\" />\n                      </Button>\n                    )}\n                  </div>\n                </div>\n                <div>\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">Trial Status</p>\n                  <Badge variant=\"outline\" data-testid=\"badge-trial-status\">{userStatus.profile.trialStatus}</Badge>\n                </div>\n                {userStatus.profile.trialEndsAt && (\n                  <div>\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">Trial Ends</p>\n                    <p data-testid=\"text-trial-ends\">\n                      {new Date(userStatus.profile.trialEndsAt).toLocaleDateString()}\n                    </p>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            {/* Subscriptions */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Calendar className=\"h-5 w-5\" />\n                  Subscriptions\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                {userStatus.subscriptions.length === 0 ? (\n                  <p className=\"text-gray-500 dark:text-gray-400\">No subscriptions found</p>\n                ) : (\n                  <div className=\"space-y-4\">\n                    {userStatus.subscriptions.map((sub: any) => (\n                      <div key={sub.id} className=\"border rounded-lg p-4 space-y-3\" data-testid={`subscription-${sub.id}`}>\n                        <div className=\"flex items-center justify-between\">\n                          <p className=\"font-medium\">{sub.planName}</p>\n                          <Badge variant={sub.status === 'active' ? 'default' : 'secondary'}>\n                            {sub.status}\n                          </Badge>\n                        </div>\n                        <p className=\"text-sm text-gray-500\">\n                          {sub.currency} {sub.amount}\n                          {sub.isTrial && <span className=\"ml-2 text-blue-600\">(Trial)</span>}\n                        </p>\n                        <p className=\"text-xs text-gray-400 font-mono\">{sub.id}</p>\n                        {(sub.status === 'active' || sub.status === 'created' || sub.status === 'authenticated') && (\n                          <Button\n                            onClick={() => handleCancelSubscription(sub.id)}\n                            variant=\"destructive\"\n                            size=\"sm\"\n                            disabled={isLoading}\n                            data-testid={`button-cancel-subscription-${sub.id}`}\n                            className=\"w-full\"\n                          >\n                            <XCircle className=\"h-4 w-4 mr-2\" />\n                            Cancel Subscription\n                          </Button>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            {/* Payments */}\n            <Card className=\"md:col-span-2\">\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <CreditCard className=\"h-5 w-5\" />\n                  Payment History\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                {userStatus.payments.length === 0 ? (\n                  <div className=\"flex items-center gap-2 text-yellow-600 dark:text-yellow-400\">\n                    <AlertCircle className=\"h-5 w-5\" />\n                    <p>No payment records found</p>\n                  </div>\n                ) : (\n                  <div className=\"space-y-3\">\n                    {userStatus.payments.map((payment: any) => (\n                      <div key={payment.id} className=\"border rounded-lg p-4 flex items-center justify-between\" data-testid={`payment-${payment.id}`}>\n                        <div>\n                          <p className=\"font-medium\">{payment.plan}</p>\n                          <p className=\"text-sm text-gray-500\">\n                            {payment.currency} {payment.amount}\n                          </p>\n                        </div>\n                        <div className=\"text-right\">\n                          <Badge variant={payment.status === 'completed' ? 'default' : 'secondary'}>\n                            {payment.status}\n                          </Badge>\n                          <p className=\"text-xs text-gray-400 mt-1\">\n                            {new Date(payment.createdAt).toLocaleDateString()}\n                          </p>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </div>\n        )}\n      </div>\n\n      {/* Update Expiry Dialog */}\n      <Dialog open={isExpiryDialogOpen} onOpenChange={setIsExpiryDialogOpen}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Update Membership Expiry</DialogTitle>\n            <DialogDescription>\n              Set a new expiry date for this user's membership\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <label htmlFor=\"expiry-date\" className=\"text-sm font-medium\">\n                New Expiry Date\n              </label>\n              <Input\n                id=\"expiry-date\"\n                type=\"date\"\n                value={newExpiryDate}\n                onChange={(e) => setNewExpiryDate(e.target.value)}\n                data-testid=\"input-new-expiry-date\"\n              />\n            </div>\n          </div>\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => setIsExpiryDialogOpen(false)}\n              data-testid=\"button-cancel-expiry\"\n            >\n              Cancel\n            </Button>\n            <Button\n              onClick={handleUpdateExpiry}\n              disabled={isLoading}\n              data-testid=\"button-save-expiry\"\n            >\n              {isLoading ? 'Updating...' : 'Update Expiry'}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":21637},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/pages/sales.tsx":{"content":"import Header from '@/components/layout/header';\nimport Footer from '@/components/layout/footer';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { useLocation } from 'wouter';\nimport { \n  Check, \n  Mail, \n  Phone, \n  Calendar, \n  Building, \n  Users, \n  Shield, \n  Headphones,\n  ArrowRight,\n  Star\n} from 'lucide-react';\n\nexport default function Sales() {\n  const [, setLocation] = useLocation();\n\n  const enterpriseFeatures = [\n    {\n      icon: Users,\n      title: \"Unlimited Team Members\",\n      description: \"Add as many team members as you need with role-based permissions\"\n    },\n    {\n      icon: Shield,\n      title: \"Enterprise Security\",\n      description: \"Advanced security features including SSO and data encryption\"\n    },\n    {\n      icon: Calendar,\n      title: \"Advanced Scheduling\",\n      description: \"Complex scheduling rules, time zones, and calendar integrations\"\n    },\n    {\n      icon: Building,\n      title: \"Custom Integrations\",\n      description: \"API access and custom integrations with your existing tools\"\n    },\n    {\n      icon: Headphones,\n      title: \"24/7 Priority Support\",\n      description: \"Dedicated account manager and round-the-clock priority support\"\n    },\n    {\n      icon: Star,\n      title: \"SLA Guarantees\",\n      description: \"99.9% uptime guarantee with service level agreements\"\n    }\n  ];\n\n  const contactMethods = [\n    {\n      icon: Mail,\n      title: \"Email Us\",\n      description: \"Get in touch with our sales team\",\n      action: \"team@bookinggen.xyz\",\n      buttonText: \"Send Email\",\n      onClick: () => window.open('mailto:team@bookinggen.xyz?subject=Enterprise Plan Inquiry', '_blank')\n    },\n    {\n      icon: Calendar,\n      title: \"Schedule a Demo\",\n      description: \"Book a personalized demo with our team\",\n      action: \"Book 30-min demo\",\n      buttonText: \"Schedule Demo\",\n      onClick: () => window.open('mailto:team@bookinggen.xyz?subject=Demo Request&body=I would like to schedule a demo for the Enterprise plan.', '_blank')\n    }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background page-gradient\">\n      <Header />\n      \n      {/* Glass Prism Background Elements */}\n      <div className=\"absolute inset-0 bg-gradient-to-br from-blue-50/80 via-white to-blue-50/80 bg-overlay pointer-events-none -z-10\"></div>\n      <div className=\"absolute top-20 left-10 w-72 h-72 glass-prism rounded-full opacity-30 animate-float bg-overlay pointer-events-none -z-10\"></div>\n      <div className=\"absolute top-32 right-20 w-96 h-96 glass-prism rounded-full opacity-20 animate-float bg-overlay pointer-events-none -z-10\" style={{animationDelay: '1.5s'}}></div>\n      <div className=\"absolute bottom-20 left-1/3 w-48 h-48 glass-prism rounded-full opacity-25 animate-float bg-overlay pointer-events-none -z-10\" style={{animationDelay: '3s'}}></div>\n      \n      <section className=\"pt-32 pb-32 relative content-layer\">\n        <div className=\"container mx-auto px-6\">\n          {/* Hero Section */}\n          <div className=\"text-center mb-20\">\n            <div className=\"animate-fade-in-up\">\n              <h1 className=\"text-4xl lg:text-6xl font-bold text-foreground mb-6 hero-radial-beam\">\n                Enterprise Solutions\n              </h1>\n              <p className=\"text-xl lg:text-2xl text-muted-foreground mb-8 max-w-3xl mx-auto\">\n                Scale your booking operations with enterprise-grade features, security, and support designed for growing organizations.\n              </p>\n            </div>\n          </div>\n\n          {/* Enterprise Features Grid */}\n          <div className=\"mb-20\">\n            <div className=\"text-center mb-12 animate-fade-in-up\" style={{animationDelay: '0.2s'}}>\n              <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">\n                Built for Enterprise\n              </h2>\n              <p className=\"text-lg text-muted-foreground\">\n                Everything in Pro, plus advanced features for enterprise needs\n              </p>\n            </div>\n\n            <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16\">\n              {enterpriseFeatures.map((feature, index) => (\n                <Card \n                  key={index}\n                  className=\"glass-prism-card hover-lift animate-fade-in-up\"\n                  style={{animationDelay: `${0.1 * index}s`}}\n                >\n                  <CardContent className=\"p-8 text-center\">\n                    <div className=\"w-16 h-16 mx-auto mb-6 bg-primary/10 rounded-2xl flex items-center justify-center\">\n                      <feature.icon className=\"h-8 w-8 text-primary\" />\n                    </div>\n                    <h3 className=\"text-xl font-semibold text-foreground mb-3\">\n                      {feature.title}\n                    </h3>\n                    <p className=\"text-muted-foreground\">\n                      {feature.description}\n                    </p>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n\n          {/* Contact Section */}\n          <div className=\"max-w-4xl mx-auto\">\n            <div className=\"text-center mb-12 animate-fade-in-up\" style={{animationDelay: '0.4s'}}>\n              <h2 className=\"text-3xl lg:text-4xl font-bold text-foreground mb-4\">\n                Ready to Get Started?\n              </h2>\n              <p className=\"text-lg text-muted-foreground\">\n                Contact our sales team to discuss your enterprise needs and get a custom quote\n              </p>\n            </div>\n\n            <div className=\"grid md:grid-cols-2 gap-8 mb-12\">\n              {contactMethods.map((method, index) => (\n                <Card \n                  key={index}\n                  className=\"glass-prism-card hover-lift animate-fade-in-up\"\n                  style={{animationDelay: `${0.5 + 0.1 * index}s`}}\n                >\n                  <CardContent className=\"p-8 text-center\">\n                    <div className=\"w-16 h-16 mx-auto mb-6 bg-primary/10 rounded-2xl flex items-center justify-center\">\n                      <method.icon className=\"h-8 w-8 text-primary\" />\n                    </div>\n                    <h3 className=\"text-xl font-semibold text-foreground mb-3\">\n                      {method.title}\n                    </h3>\n                    <p className=\"text-muted-foreground mb-6\">\n                      {method.description}\n                    </p>\n                    <div className=\"text-sm text-muted-foreground mb-6 font-mono\">\n                      {method.action}\n                    </div>\n                    <Button\n                      onClick={method.onClick}\n                      className=\"glass-prism-button w-full\"\n                      size=\"lg\"\n                      data-testid={`button-${method.title.toLowerCase().replace(' ', '-')}`}\n                    >\n                      {method.buttonText}\n                      <ArrowRight className=\"ml-2 h-4 w-4\" />\n                    </Button>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n\n            {/* Back to Pricing */}\n            <div className=\"text-center animate-fade-in-up\" style={{animationDelay: '0.7s'}}>\n              <Button\n                onClick={() => setLocation('/pricing')}\n                variant=\"outline\"\n                className=\"bg-white/10 backdrop-blur-sm border border-white/20 hover:bg-white/20 transition-all duration-300 text-foreground\"\n                data-testid=\"button-back-to-pricing\"\n              >\n                ← Back to Pricing\n              </Button>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <Footer />\n    </div>\n  );\n}","size_bytes":7757},"client/src/pages/home.tsx":{"content":"import { useEffect, useState } from 'react';\nimport Header from '@/components/layout/header';\nimport Footer from '@/components/layout/footer';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionItem,\n  AccordionTrigger,\n} from '@/components/ui/accordion';\nimport { useLocation } from 'wouter';\nimport DemoWizard from '@/components/demo/DemoWizard';\nimport AppointmentBallpit from '@/components/animations/AppointmentBallpit';\nimport Stepper, { Step } from '@/components/ui/Stepper';\nimport { \n  Palette, \n  CalendarCheck, \n  CreditCard, \n  Smartphone, \n  BarChart3, \n  Bell,\n  ArrowRight,\n  Play,\n  Check,\n  Star,\n  Users,\n  Clock,\n  DollarSign,\n  Zap,\n  Globe,\n  Shield,\n  Target,\n  BookOpen,\n  Heart,\n  Coffee,\n  Scissors,\n  Monitor,\n  Calendar,\n  ExternalLink\n} from 'lucide-react';\n\nexport default function Home() {\n  const [, setLocation] = useLocation();\n  const [showDemoWizard, setShowDemoWizard] = useState(false);\n\n  // Handle hash-based scrolling when navigating to homepage with hash\n  useEffect(() => {\n    const scrollToHashSection = () => {\n      const hash = window.location.hash;\n      if (hash) {\n        const element = document.querySelector(hash);\n        if (element) {\n          element.scrollIntoView({ behavior: 'smooth' });\n          return true;\n        }\n      }\n      return false;\n    };\n\n    // Try to scroll immediately\n    if (!scrollToHashSection()) {\n      // If element not found, retry after a short delay (for DOM to be ready)\n      const timeoutId = setTimeout(() => {\n        if (!scrollToHashSection()) {\n          // Final retry with requestAnimationFrame\n          requestAnimationFrame(scrollToHashSection);\n        }\n      }, 100);\n      \n      return () => clearTimeout(timeoutId);\n    }\n  }, []);\n\n  const features = [\n    {\n      icon: Palette,\n      title: \"Custom Branding\",\n      description: \"Personalize your booking pages with your logo, colors, and custom domain to match your brand perfectly.\"\n    },\n    {\n      icon: CalendarCheck,\n      title: \"Smart Scheduling\",\n      description: \"Intelligent calendar integration with availability management, time zone detection, and automated confirmations.\"\n    },\n    {\n      icon: Users,\n      title: \"Customer Management\",\n      description: \"Build stronger relationships with comprehensive customer profiles, booking history, and communication tools.\"\n    },\n    {\n      icon: Smartphone,\n      title: \"Mobile Optimized\",\n      description: \"Beautiful, responsive designs that work perfectly on all devices. Your clients can book from anywhere.\"\n    },\n    {\n      icon: BarChart3,\n      title: \"Analytics Dashboard\",\n      description: \"Track bookings and performance with powerful analytics and customer insights.\"\n    },\n    {\n      icon: Bell,\n      title: \"Smart Notifications\",\n      description: \"Automated email notifications for appointment approvals and rejections keep you and your clients informed about booking status instantly.\"\n    }\n  ];\n\n  const steps = [\n    {\n      number: \"1\",\n      title: \"Create Your Page\",\n      description: \"Design your booking page with our intuitive editor. Add your services, set your availability, and customize your branding.\"\n    },\n    {\n      number: \"2\",\n      title: \"Share Your Link\",\n      description: \"Get a beautiful, shareable link for your booking page. Add it to your website, social media, or email signature.\"\n    },\n    {\n      number: \"3\",\n      title: \"Accept Bookings\",\n      description: \"Start receiving bookings instantly. Manage appointments and grow your business effortlessly with our streamlined booking system.\"\n    }\n  ];\n\n  const testimonials = [\n    {\n      name: \"Sarah Chen\",\n      role: \"Yoga Instructor\",\n      content: \"BookingGen transformed my business. I went from managing bookings in spreadsheets to having a professional system that handles everything automatically. It's been a game-changer for my studio!\",\n      rating: 5,\n      avatar: \"SC\",\n      metric: \"Time Saver\",\n      timeframe: \"Daily use\"\n    },\n    {\n      name: \"David Martinez\",\n      role: \"Therapist\",\n      content: \"Managing appointments has never been easier! The automated scheduling and reminders have streamlined my entire booking process. At just $14.99, it's an incredible value for what you get.\",\n      rating: 5,\n      avatar: \"DM\",\n      metric: \"Highly Efficient\",\n      timeframe: \"Regular use\"\n    },\n    {\n      name: \"Elena Rodriguez\",\n      role: \"Personal Trainer\",\n      content: \"My clients love how easy it is to book sessions. The mobile experience is flawless, and the professional look has really elevated my brand. Best investment I've made for my business!\",\n      rating: 5,\n      avatar: \"ER\",\n      metric: \"Client Favorite\",\n      timeframe: \"Daily use\"\n    }\n  ];\n\n  const useCases = [\n    {\n      icon: Heart,\n      title: \"Healthcare & Wellness\",\n      description: \"Therapists, counselors, fitness trainers, and wellness coaches\",\n      examples: [\"Medical consultations\", \"Therapy sessions\", \"Personal training\", \"Spa treatments\"]\n    },\n    {\n      icon: Coffee,\n      title: \"Professional Services\",\n      description: \"Consultants, coaches, and business professionals\",\n      examples: [\"Business consulting\", \"Life coaching\", \"Legal consultations\", \"Financial planning\"]\n    },\n    {\n      icon: Scissors,\n      title: \"Beauty & Lifestyle\",\n      description: \"Salons, stylists, photographers, and personal services\",\n      examples: [\"Hair appointments\", \"Photo shoots\", \"Makeup sessions\", \"Styling consultations\"]\n    },\n    {\n      icon: BookOpen,\n      title: \"Education & Tutoring\",\n      description: \"Teachers, tutors, and educational professionals\",\n      examples: [\"Private tutoring\", \"Music lessons\", \"Language coaching\", \"Skills training\"]\n    }\n  ];\n\n\n  return (\n    <div className=\"min-h-screen page-gradient\">\n      <Header />\n      \n      {/* Add top padding to account for floating header */}\n      <div className=\"h-28\"></div>\n      \n      {/* Hero Section */}\n      <section className=\"relative overflow-hidden gojiberry-hero-gradient\">\n        {/* Appointment Ballpit Animation */}\n        <div className=\"absolute inset-0\" style={{ height: '700px' }}>\n          <AppointmentBallpit count={35} />\n        </div>\n        \n        {/* Glass Prism Background Elements */}\n        <div className=\"absolute inset-0 bg-gradient-to-br from-blue-50/80 via-white to-blue-50/80 bg-overlay\"></div>\n        <div className=\"absolute top-10 left-10 w-72 h-72 glass-prism rounded-full opacity-30 animate-float bg-overlay mobile-hide\"></div>\n        <div className=\"absolute top-32 right-20 w-96 h-96 glass-prism rounded-full opacity-20 animate-float bg-overlay mobile-hide\" style={{animationDelay: '1.5s'}}></div>\n        <div className=\"absolute bottom-20 left-1/3 w-48 h-48 glass-prism rounded-full opacity-25 animate-float bg-overlay mobile-hide\" style={{animationDelay: '3s'}}></div>\n        \n        <div className=\"relative pt-20 pb-16 lg:pt-28 lg:pb-24 content-layer\">\n          <div className=\"container mx-auto px-6\">\n            <div className=\"text-center max-w-5xl mx-auto\">\n              <div className=\"space-y-8 animate-fade-in-up\">\n                {/* Limited Time Offer Badge */}\n                <div className=\"inline-flex items-center px-4 py-2 notification-badge rounded-full text-white text-sm font-semibold shadow-lg animate-scale-in\">\n                  <span className=\"bg-white text-blue-600 text-xs font-bold px-2 py-1 rounded-md mr-3\">🎉 LIMITED TIME</span>\n                  7 Days FREE Trial - No Credit Card Required\n                </div>\n                \n                {/* Main Headline */}\n                <div className=\"hero-radial-beam\">\n                  <h1 className=\"text-clamp-xl font-bold leading-tight text-foreground animate-slide-in-left text-wrap-balance\">\n                    Get More Bookings & Grow Revenue with{' '}\n                    <span className=\"text-blue-gradient\">\n                      Professional Booking Pages\n                    </span>\n                  </h1>\n                </div>\n                \n                {/* Subtitle */}\n                <p className=\"text-lg sm:text-xl lg:text-2xl text-muted-foreground leading-relaxed max-w-4xl mx-auto animate-slide-in-right break-words\">\n                  Create stunning, professional booking pages in minutes. Increase your bookings and grow your revenue effortlessly.\n                </p>\n                \n                {/* CTA Buttons */}\n                <div className=\"pt-4 animate-scale-in content-layer flex flex-col sm:flex-row gap-4 justify-center items-center\" style={{animationDelay: '0.3s'}}>\n                  <Button \n                    onClick={() => setLocation('/signup')}\n                    size=\"lg\"\n                    className=\"glass-prism-button px-12 py-6 rounded-full text-xl h-auto mobile-full-width min-touch-target\"\n                    data-testid=\"button-get-started\"\n                  >\n                    Start Your 7-Day FREE Trial\n                    <ArrowRight className=\"ml-3 h-6 w-6\" />\n                  </Button>\n                  <Button \n                    onClick={() => setLocation('/pricing')}\n                    size=\"lg\"\n                    variant=\"outline\"\n                    className=\"glass-prism-button px-12 py-6 rounded-full text-xl h-auto mobile-full-width min-touch-target\"\n                    data-testid=\"button-view-pricing\"\n                  >\n                    View Pricing\n                  </Button>\n                </div>\n                \n                {/* Trust Indicators */}\n                <div className=\"flex flex-col sm:flex-row items-center justify-center space-y-2 sm:space-y-0 sm:space-x-8 text-sm text-muted-foreground pt-6\">\n                  <div className=\"flex items-center\">\n                    <Check className=\"h-5 w-5 text-green-500 mr-3\" />\n                    7-Day FREE Trial\n                  </div>\n                  <div className=\"flex items-center\">\n                    <Check className=\"h-5 w-5 text-green-500 mr-3\" />\n                    Cancel Anytime\n                  </div>\n                  <div className=\"flex items-center\">\n                    <Check className=\"h-5 w-5 text-green-500 mr-3\" />\n                    Setup in 5 Minutes\n                  </div>\n                  <div className=\"flex items-center\">\n                    <Check className=\"h-5 w-5 text-green-500 mr-3\" />\n                    Just $14.99/mo After Trial\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Test Before You Launch Section */}\n      <section className=\"relative py-24 overflow-hidden bg-gradient-to-br from-primary/5 via-background to-blue-50/30 dark:to-blue-950/30\">\n        {/* Glass Prism Background Elements */}\n        <div className=\"absolute top-10 left-10 w-64 h-64 glass-prism rounded-full opacity-15 animate-float bg-overlay mobile-hide\"></div>\n        <div className=\"absolute bottom-20 right-20 w-48 h-48 glass-prism rounded-full opacity-20 animate-float bg-overlay mobile-hide\" style={{animationDelay: '2s'}}></div>\n        \n        <div className=\"relative container mx-auto px-6 content-layer\">\n          <div className=\"text-center mb-16 animate-fade-in-up\">\n            <div className=\"inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 rounded-full text-white text-sm font-semibold shadow-lg mb-8\">\n              <span className=\"bg-white text-blue-600 text-xs font-bold px-2 py-1 rounded-md mr-3\">Try Now</span>\n              No signup required\n            </div>\n            \n            <h2 className=\"text-clamp-lg font-bold text-foreground mb-8 text-wrap-balance\">\n              <span className=\"text-blue-gradient\">\n                Test before you Launch\n              </span>\n            </h2>\n            \n            <p className=\"text-xl lg:text-2xl text-muted-foreground max-w-4xl mx-auto leading-relaxed mb-12 break-words\">\n              Create and preview your booking page instantly. See exactly how it will look before committing to a plan.\n            </p>\n          </div>\n\n          <div className=\"grid lg:grid-cols-2 gap-8 lg:gap-16 items-center lg:items-start\">\n            {/* Left: Benefits */}\n            <div className=\"space-y-8 animate-fade-in-up\" style={{animationDelay: '0.2s'}}>\n              <div className=\"space-y-6\">\n                <div className=\"flex items-start space-x-4\">\n                  <div className=\"w-12 h-12 glass-prism rounded-lg flex items-center justify-center shrink-0 min-touch-target\">\n                    <Zap className=\"h-6 w-6 text-primary\" />\n                  </div>\n                  <div>\n                    <h3 className=\"text-xl font-bold text-foreground mb-2\">Instant Preview</h3>\n                    <p className=\"text-muted-foreground break-words\">See your booking page come to life in real-time as you customize it. No guesswork involved.</p>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-start space-x-4\">\n                  <div className=\"w-12 h-12 glass-prism rounded-lg flex items-center justify-center shrink-0 min-touch-target\">\n                    <Target className=\"h-6 w-6 text-primary\" />\n                  </div>\n                  <div>\n                    <h3 className=\"text-xl font-bold text-foreground mb-2\">Perfect Your Design</h3>\n                    <p className=\"text-muted-foreground break-words\">Test different themes, colors, and layouts until you find the perfect match for your brand.</p>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-start space-x-4\">\n                  <div className=\"w-12 h-12 glass-prism rounded-lg flex items-center justify-center shrink-0 min-touch-target\">\n                    <Shield className=\"h-6 w-6 text-primary\" />\n                  </div>\n                  <div>\n                    <h3 className=\"text-xl font-bold text-foreground mb-2\">Risk-Free Testing</h3>\n                    <p className=\"text-muted-foreground break-words\">Try all features without any commitment. Only sign up when you're completely satisfied.</p>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-start space-x-4\">\n                  <div className=\"w-12 h-12 glass-prism rounded-lg flex items-center justify-center shrink-0 min-touch-target\">\n                    <Globe className=\"h-6 w-6 text-primary\" />\n                  </div>\n                  <div>\n                    <h3 className=\"text-xl font-bold text-foreground mb-2\">Share for Feedback</h3>\n                    <p className=\"text-muted-foreground break-words\">Get feedback from colleagues or clients before going live. Share your demo link easily.</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Right: Call to Action */}\n            <div className=\"animate-fade-in-up\" style={{animationDelay: '0.4s'}}>\n              <Card className=\"glass-prism-card p-8 hover-lift relative group mobile-no-blur\">\n                <div className=\"absolute -inset-4 bg-gradient-to-r from-blue-400/20 via-blue-500/30 to-blue-600/20 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 -z-10 mobile-hide\"></div>\n                \n                <div className=\"text-center space-y-6\">\n                  <div className=\"w-20 h-20 glass-prism rounded-full flex items-center justify-center mx-auto group-hover:scale-110 transition-transform duration-300\">\n                    <Monitor className=\"h-10 w-10 text-primary\" />\n                  </div>\n                  \n                  <div>\n                    <h3 className=\"text-2xl font-bold text-foreground mb-4\">Ready to create your demo?</h3>\n                    <p className=\"text-muted-foreground mb-6 break-words\">\n                      It takes less than 5 minutes to build and preview your booking page. Start with our guided wizard.\n                    </p>\n                  </div>\n                  \n                  <div className=\"space-y-4\">\n                    <Button\n                      onClick={() => setShowDemoWizard(true)}\n                      size=\"lg\"\n                      className=\"w-full glass-prism-button px-8 py-4 rounded-full text-lg h-auto font-semibold min-touch-target\"\n                      data-testid=\"button-start-demo-wizard\"\n                    >\n                      <Play className=\"mr-3 h-5 w-5\" />\n                      Start Demo Wizard\n                    </Button>\n                    \n                    <div className=\"flex flex-col sm:flex-row items-center justify-center gap-3 sm:gap-6 text-sm text-muted-foreground\">\n                      <div className=\"flex items-center\">\n                        <Check className=\"h-4 w-4 text-green-500 mr-2\" />\n                        Free demo preview\n                      </div>\n                      <div className=\"flex items-center\">\n                        <Check className=\"h-4 w-4 text-green-500 mr-2\" />\n                        No signup required\n                      </div>\n                      <div className=\"flex items-center\">\n                        <Check className=\"h-4 w-4 text-green-500 mr-2\" />\n                        5 min setup\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"pt-4 border-t border-border/50\">\n                    <p className=\"text-xs text-muted-foreground break-words\">\n                      💡 <strong>Pro tip:</strong> Your demo will be saved for 7 days so you can come back and refine it anytime.\n                    </p>\n                  </div>\n                </div>\n              </Card>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Demo Wizard Modal */}\n      {showDemoWizard && (\n        <DemoWizard \n          open={showDemoWizard}\n          onClose={() => setShowDemoWizard(false)}\n        />\n      )}\n\n      {/* Features Section */}\n      <section id=\"features\" className=\"relative py-24 overflow-hidden gojiberry-gradient\">\n        {/* Glass Prism Background Elements */}\n        <div className=\"absolute top-20 right-10 w-64 h-64 glass-prism rounded-full opacity-20 animate-float bg-overlay mobile-hide\"></div>\n        <div className=\"absolute bottom-10 left-20 w-48 h-48 glass-prism rounded-full opacity-25 animate-float bg-overlay mobile-hide\" style={{animationDelay: '2s'}}></div>\n        \n        <div className=\"relative container mx-auto px-6 content-layer\">\n          <div className=\"text-center mb-20 animate-fade-in-up\">\n            <h2 className=\"text-clamp-lg font-bold text-foreground mb-8 text-wrap-balance\">\n              Everything you need to{' '}\n              <span className=\"text-blue-gradient\">\n                accept bookings\n              </span>\n            </h2>\n            <p className=\"text-xl lg:text-2xl text-muted-foreground max-w-4xl mx-auto leading-relaxed\">\n              Powerful features designed to help you create professional booking experiences that your clients will love.\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8 lg:gap-10\">\n            {features.map((feature, index) => (\n              <Card \n                key={index} \n                className=\"group glass-prism-card hover-lift animate-fade-in-up\"\n                style={{animationDelay: `${index * 0.1}s`}}\n              >\n                <CardContent className=\"p-8\">\n                  <div className=\"relative mb-6\">\n                    <div className=\"w-16 h-16 glass-prism rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300\">\n                      <feature.icon className=\"h-8 w-8 text-primary group-hover:text-blue-600 transition-colors duration-300\" />\n                    </div>\n                    <div className=\"absolute -inset-2 bg-gradient-to-r from-blue-400/20 to-blue-600/20 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 -z-10\"></div>\n                  </div>\n                  <h3 className=\"text-xl font-bold text-foreground mb-4 group-hover:text-blue-gradient transition-colors duration-300\">{feature.title}</h3>\n                  <p className=\"text-muted-foreground leading-relaxed\">{feature.description}</p>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* How It Works */}\n      <section id=\"how-it-works\" className=\"relative py-24 overflow-hidden\">\n        {/* Glass Prism Background Elements */}\n        <div className=\"absolute top-32 left-10 w-80 h-80 glass-prism rounded-full opacity-15 animate-float mobile-hide\"></div>\n        \n        <div className=\"container mx-auto px-6\">\n          <div className=\"text-center mb-16 animate-fade-in-up\">\n            <h2 className=\"text-clamp-lg font-bold text-foreground mb-8 text-wrap-balance\">\n              Launch your booking page in{' '}\n              <span className=\"text-blue-gradient\">\n                3 simple steps\n              </span>\n            </h2>\n            <p className=\"text-xl text-muted-foreground max-w-3xl mx-auto\">\n              Follow our interactive guide to see how easy it is to get started\n            </p>\n          </div>\n\n          <div className=\"max-w-4xl mx-auto animate-fade-in-up\" style={{animationDelay: '0.2s'}}>\n            <Stepper\n              initialStep={1}\n              backButtonText=\"Previous\"\n              nextButtonText=\"Next Step\"\n              onFinalStepCompleted={() => {\n                setLocation('/signup');\n              }}\n            >\n              <Step>\n                <div className=\"text-center space-y-6 py-8\">\n                  <div className=\"w-24 h-24 glass-prism rounded-full flex items-center justify-center mx-auto shadow-lg\">\n                    <span className=\"text-4xl font-bold text-blue-gradient\">1</span>\n                  </div>\n                  <h3 className=\"text-3xl font-bold text-foreground\">{steps[0].title}</h3>\n                  <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto leading-relaxed\">\n                    {steps[0].description}\n                  </p>\n                  <div className=\"pt-4 flex flex-wrap justify-center gap-3\">\n                    <div className=\"flex items-center gap-2 px-4 py-2 bg-primary/10 rounded-full\">\n                      <Palette className=\"h-5 w-5 text-primary\" />\n                      <span className=\"text-sm font-medium\">Custom Branding</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 px-4 py-2 bg-primary/10 rounded-full\">\n                      <CalendarCheck className=\"h-5 w-5 text-primary\" />\n                      <span className=\"text-sm font-medium\">Set Availability</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 px-4 py-2 bg-primary/10 rounded-full\">\n                      <DollarSign className=\"h-5 w-5 text-primary\" />\n                      <span className=\"text-sm font-medium\">Add Services</span>\n                    </div>\n                  </div>\n                </div>\n              </Step>\n              <Step>\n                <div className=\"text-center space-y-6 py-8\">\n                  <div className=\"w-24 h-24 glass-prism rounded-full flex items-center justify-center mx-auto shadow-lg\">\n                    <span className=\"text-4xl font-bold text-blue-gradient\">2</span>\n                  </div>\n                  <h3 className=\"text-3xl font-bold text-foreground\">{steps[1].title}</h3>\n                  <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto leading-relaxed\">\n                    {steps[1].description}\n                  </p>\n                  <div className=\"pt-4 flex justify-center\">\n                    <div className=\"inline-block px-6 py-3 bg-muted rounded-lg font-mono text-sm\">\n                      <Globe className=\"inline h-5 w-5 text-primary mr-2\" />\n                      bookinggen.xyz/<span className=\"text-primary font-bold\">yourname</span>\n                    </div>\n                  </div>\n                </div>\n              </Step>\n              <Step>\n                <div className=\"text-center space-y-6 py-8\">\n                  <div className=\"w-24 h-24 glass-prism rounded-full flex items-center justify-center mx-auto shadow-lg\">\n                    <span className=\"text-4xl font-bold text-blue-gradient\">3</span>\n                  </div>\n                  <h3 className=\"text-3xl font-bold text-foreground\">{steps[2].title}</h3>\n                  <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto leading-relaxed\">\n                    {steps[2].description}\n                  </p>\n                  <div className=\"pt-4 flex flex-wrap justify-center gap-3\">\n                    <div className=\"flex items-center gap-2 px-4 py-2 bg-green-500/10 rounded-full\">\n                      <Check className=\"h-5 w-5 text-green-600\" />\n                      <span className=\"text-sm font-medium\">Automated Confirmations</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 px-4 py-2 bg-green-500/10 rounded-full\">\n                      <Bell className=\"h-5 w-5 text-green-600\" />\n                      <span className=\"text-sm font-medium\">Email Notifications</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 px-4 py-2 bg-green-500/10 rounded-full\">\n                      <BarChart3 className=\"h-5 w-5 text-green-600\" />\n                      <span className=\"text-sm font-medium\">Track Performance</span>\n                    </div>\n                  </div>\n                </div>\n              </Step>\n            </Stepper>\n          </div>\n\n          <div className=\"text-center mt-12 animate-fade-in-up\" style={{animationDelay: '0.4s'}}>\n            <p className=\"text-sm text-muted-foreground\">\n              💡 <strong>Pro tip:</strong> Complete all steps to automatically redirect to sign up\n            </p>\n          </div>\n        </div>\n      </section>\n\n      {/* Booking Page Demo */}\n      <section className=\"relative py-24 overflow-hidden gojiberry-gradient\">\n        {/* Glass Prism Background Elements */}\n        <div className=\"absolute inset-0 bg-gradient-to-br from-blue-50/80 via-white to-blue-50/80 bg-overlay\"></div>\n        <div className=\"absolute top-20 right-10 w-64 h-64 glass-prism rounded-full opacity-20 animate-float bg-overlay mobile-hide\"></div>\n        <div className=\"absolute bottom-10 left-20 w-48 h-48 glass-prism rounded-full opacity-25 animate-float bg-overlay mobile-hide\" style={{animationDelay: '2s'}}></div>\n        \n        <div className=\"relative container mx-auto px-6 content-layer\">\n          <div className=\"text-center mb-20 animate-fade-in-up\">\n            <h2 className=\"text-clamp-lg font-bold text-foreground mb-8 text-wrap-balance\">\n              See what your{' '}\n              <span className=\"text-blue-gradient\">\n                booking pages\n              </span>{' '}\n              will look like\n            </h2>\n            <p className=\"text-xl lg:text-2xl text-muted-foreground max-w-4xl mx-auto leading-relaxed\">\n              Beautiful, professional booking pages that convert visitors into clients\n            </p>\n          </div>\n\n          <div className=\"grid lg:grid-cols-2 gap-16 items-center\">\n            {/* Desktop Demo */}\n            <div className=\"space-y-6 animate-fade-in-up\" style={{animationDelay: '0.2s'}}>\n              <div className=\"glass-prism-card rounded-3xl p-8 hover-lift relative group\">\n                <div className=\"absolute -inset-4 bg-gradient-to-r from-blue-400/20 via-blue-500/30 to-blue-600/20 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 -z-10\"></div>\n                <div className=\"flex items-center space-x-2 mb-6\">\n                  <div className=\"w-3 h-3 bg-red-400 rounded-full\"></div>\n                  <div className=\"w-3 h-3 bg-yellow-400 rounded-full\"></div>\n                  <div className=\"w-3 h-3 bg-green-400 rounded-full\"></div>\n                  <div className=\"ml-4 text-xs text-muted-foreground font-mono\">bookinggen.xyz/yourname</div>\n                </div>\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center space-x-4\">\n                    <div className=\"w-16 h-16 glass-prism rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300\">\n                      <Heart className=\"h-8 w-8 text-primary\" />\n                    </div>\n                    <div>\n                      <h3 className=\"text-xl font-bold text-foreground\">Dr. Sarah Wellness</h3>\n                      <p className=\"text-muted-foreground\">Therapy & Counseling</p>\n                    </div>\n                  </div>\n                  <div className=\"space-y-3\">\n                    <div className=\"p-4 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg hover:bg-white/15 transition-all duration-300 mobile-no-blur\">\n                      <h4 className=\"font-semibold text-foreground\">Individual Therapy Session</h4>\n                      <p className=\"text-sm text-muted-foreground\">50 minutes • $120</p>\n                    </div>\n                    <div className=\"p-4 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg hover:bg-white/15 transition-all duration-300 mobile-no-blur\">\n                      <h4 className=\"font-semibold text-foreground\">Couples Counseling</h4>\n                      <p className=\"text-sm text-muted-foreground\">60 minutes • $150</p>\n                    </div>\n                  </div>\n                  <Button className=\"w-full glass-prism-button px-6 py-2 rounded-full font-semibold min-touch-target\">\n                    Book Appointment\n                  </Button>\n                </div>\n              </div>\n              <div className=\"text-center\">\n                <h3 className=\"text-lg font-semibold text-foreground mb-2\">Desktop Experience</h3>\n                <p className=\"text-muted-foreground\">Clean, professional layout optimized for desktop users</p>\n              </div>\n            </div>\n\n            {/* Mobile Demo */}\n            <div className=\"flex justify-center animate-fade-in-up\" style={{animationDelay: '0.4s'}}>\n              <div className=\"w-80 space-y-6\">\n                <div className=\"glass-prism-card rounded-3xl p-6 relative overflow-hidden hover-lift group\">\n                  <div className=\"absolute -inset-4 bg-gradient-to-r from-blue-400/20 via-blue-500/30 to-blue-600/20 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 -z-10\"></div>\n                  <div className=\"absolute top-0 left-1/2 transform -translate-x-1/2 w-32 h-1 bg-white/30 rounded-b-lg\"></div>\n                  <div className=\"pt-4 space-y-4\">\n                    <div className=\"text-center\">\n                      <div className=\"w-12 h-12 glass-prism rounded-full flex items-center justify-center mx-auto mb-2 group-hover:scale-110 transition-transform duration-300\">\n                        <Coffee className=\"h-6 w-6 text-primary\" />\n                      </div>\n                      <h3 className=\"text-lg font-bold text-foreground\">Mike's Barber Shop</h3>\n                      <p className=\"text-sm text-muted-foreground\">Premium cuts & styling</p>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <div className=\"p-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg hover:bg-white/15 transition-all duration-300 mobile-no-blur\">\n                        <h4 className=\"font-semibold text-sm text-foreground\">Classic Cut</h4>\n                        <p className=\"text-xs text-muted-foreground\">30 min • $35</p>\n                      </div>\n                      <div className=\"p-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg hover:bg-white/15 transition-all duration-300 mobile-no-blur\">\n                        <h4 className=\"font-semibold text-sm text-foreground\">Cut & Style</h4>\n                        <p className=\"text-xs text-muted-foreground\">45 min • $50</p>\n                      </div>\n                    </div>\n                    <Button size=\"sm\" className=\"w-full glass-prism-button px-4 py-2 rounded-full font-semibold text-sm min-touch-target\">\n                      Book Now\n                    </Button>\n                  </div>\n                </div>\n                <div className=\"text-center\">\n                  <h3 className=\"text-lg font-semibold text-foreground mb-2\">Mobile Experience</h3>\n                  <p className=\"text-muted-foreground\">Perfect mobile design for on-the-go bookings</p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"text-center mt-16 animate-fade-in-up\" style={{animationDelay: '0.6s'}}>\n            <Button \n              size=\"lg\"\n              onClick={() => setLocation('/pricing')}\n              className=\"glass-prism-button px-8 py-3 rounded-full text-lg font-semibold hover-lift mobile-full-width min-touch-target\"\n              data-testid=\"button-view-pricing\"\n            >\n              <DollarSign className=\"mr-2 h-5 w-5\" />\n              View Pricing\n            </Button>\n          </div>\n        </div>\n      </section>\n\n\n      {/* Use Cases Section */}\n      <section className=\"relative py-24 overflow-hidden\">\n        {/* Background Gradient */}\n        <div className=\"absolute inset-0 bg-gradient-to-br from-primary/3 via-background to-blue-50/20 dark:to-blue-950/20\"></div>\n        <div className=\"relative container mx-auto px-6\">\n          <div className=\"text-center mb-20\">\n            <h2 className=\"text-clamp-lg font-bold text-foreground mb-8 text-wrap-balance\">\n              Perfect for any{' '}\n              <span className=\"bg-gradient-to-r from-primary via-blue-600 to-primary bg-clip-text text-transparent\">\n                service-based business\n              </span>\n            </h2>\n            <p className=\"text-xl lg:text-2xl text-muted-foreground max-w-4xl mx-auto leading-relaxed\">\n              Join professionals across industries who trust BookingGen to manage their appointments\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-10\">\n            {useCases.map((useCase, index) => (\n              <Card key={index} className=\"group relative bg-background/60 backdrop-blur-sm border border-border/50 hover:border-primary/20 transition-all duration-500 hover:shadow-2xl hover:shadow-primary/10 hover:-translate-y-2 mobile-no-blur\" data-testid={`use-case-${index}`}>\n                <CardContent className=\"p-8\">\n                  <div className=\"relative mb-6\">\n                    <div className=\"w-16 h-16 bg-gradient-to-br from-primary/10 to-blue-500/10 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300\">\n                      <useCase.icon className=\"h-8 w-8 text-primary group-hover:text-blue-600 transition-colors duration-300\" />\n                    </div>\n                    <div className=\"absolute -inset-2 bg-gradient-to-r from-primary/20 to-blue-500/20 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 -z-10\"></div>\n                  </div>\n                  <h3 className=\"text-xl font-bold text-foreground mb-3 group-hover:text-primary transition-colors duration-300\" data-testid={`use-case-title-${index}`}>\n                    {useCase.title}\n                  </h3>\n                  <p className=\"text-muted-foreground mb-6 leading-relaxed\" data-testid={`use-case-description-${index}`}>\n                    {useCase.description}\n                  </p>\n                  <div className=\"space-y-2\">\n                    {useCase.examples.map((example, exampleIndex) => (\n                      <div key={exampleIndex} className=\"flex items-center text-sm text-muted-foreground\">\n                        <Check className=\"h-4 w-4 text-green-500 mr-3 flex-shrink-0\" />\n                        {example}\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Preview Booking Page Section */}\n      <section className=\"relative py-24 overflow-hidden bg-gradient-to-br from-blue-50/50 via-background to-purple-50/50 dark:from-blue-950/30 dark:via-background dark:to-purple-950/30\">\n        <div className=\"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmYiIGZpbGwtb3BhY2l0eT0iMC4xIj48cGF0aCBkPSJNMzYgMzRjMC0yLjIxLTEuNzktNC00LTRzLTQgMS43OS00IDQgMS43OSA0IDQgNCA0LTEuNzkgNC00em0wLTI4YzAtMi4yMS0xLjc5LTQtNC00cy00IDEuNzktNCA0IDEuNzkgNCA0IDQgNC0xLjc5IDQtNHptMjggMjhjMC0yLjIxLTEuNzktNC00LTRzLTQgMS43OS00IDQgMS43OSA0IDQgNCA0LTEuNzkgNC00em0wLTI4YzAtMi4yMS0xLjc5LTQtNC00cy00IDEuNzktNCA0IDEuNzkgNCA0IDQgNC0xLjc5IDQtNHpNOCAzNGMwLTIuMjEtMS43OS00LTQtNHMtNCAxLjc5LTQgNCAxLjc5IDQgNCA0IDQtMS43OSA0LTR6bTAtMjhjMC0yLjIxLTEuNzktNC00LTRzLTQgMS43OS00IDQgMS43OSA0IDQgNCA0LTEuNzkgNC00eiIvPjwvZz48L2c+PC9zdmc+')] opacity-10\"></div>\n        \n        <div className=\"relative container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto text-center space-y-8 animate-fade-in-up\">\n            <div className=\"space-y-4\">\n              <h2 className=\"text-3xl sm:text-4xl lg:text-5xl font-bold text-foreground leading-tight\">\n                Still confused?{' '}\n                <span className=\"bg-gradient-to-r from-primary via-blue-600 to-purple-600 bg-clip-text text-transparent\">\n                  Take a look at a booking page yourself\n                </span>\n                {' '}to see how it looks\n              </h2>\n              <p className=\"text-lg lg:text-xl text-muted-foreground max-w-2xl mx-auto leading-relaxed\">\n                Experience a real booking page in action and see exactly what your customers will interact with\n              </p>\n            </div>\n\n            <div className=\"flex justify-center pt-6\">\n              <Button\n                size=\"lg\"\n                onClick={() => window.open('https://www.bookinggen.xyz/marcos-hair-salon', '_blank')}\n                className=\"glass-prism-button px-10 py-6 rounded-full text-lg h-auto font-bold shadow-lg hover:shadow-xl transition-all duration-300 min-touch-target group\"\n                data-testid=\"button-preview-booking-page\"\n              >\n                <ExternalLink className=\"mr-3 h-5 w-5 group-hover:scale-110 transition-transform duration-300\" />\n                Preview Booking Page\n              </Button>\n            </div>\n\n            <div className=\"flex flex-col sm:flex-row items-center justify-center gap-3 sm:gap-6 text-sm text-muted-foreground pt-4\">\n              <div className=\"flex items-center\">\n                <Check className=\"h-4 w-4 text-green-500 mr-2\" />\n                Live example page\n              </div>\n              <div className=\"flex items-center\">\n                <Check className=\"h-4 w-4 text-green-500 mr-2\" />\n                No signup needed\n              </div>\n              <div className=\"flex items-center\">\n                <Check className=\"h-4 w-4 text-green-500 mr-2\" />\n                See it in action\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Testimonials Section */}\n      <section id=\"testimonials\" className=\"py-24\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"text-center mb-20\">\n            <h2 className=\"text-clamp-lg font-bold text-foreground mb-8 text-wrap-balance\">\n              What our{' '}\n              <span className=\"bg-gradient-to-r from-primary via-blue-600 to-primary bg-clip-text text-transparent\">\n                users are saying\n              </span>\n            </h2>\n            <p className=\"text-xl lg:text-2xl text-muted-foreground max-w-4xl mx-auto leading-relaxed\">\n              See how BookingGen has transformed businesses just like yours\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-3 gap-8 lg:gap-10\">\n            {testimonials.map((testimonial, index) => (\n              <Card key={index} className=\"group relative bg-background/60 backdrop-blur-sm border border-border/50 hover:border-primary/20 transition-all duration-500 hover:shadow-2xl hover:shadow-primary/10 hover:-translate-y-2 mobile-no-blur\" data-testid={`testimonial-${index}`}>\n                <CardContent className=\"p-8\">\n                  <div className=\"flex items-center justify-between mb-6\">\n                    <div className=\"flex items-center\">\n                      {[...Array(testimonial.rating)].map((_, i) => (\n                        <Star key={i} className=\"h-5 w-5 text-yellow-400 fill-current\" />\n                      ))}\n                    </div>\n                    <div className=\"text-right\">\n                      <div className=\"text-2xl font-bold text-blue-gradient\">{testimonial.metric}</div>\n                      <div className=\"text-xs text-muted-foreground\">{testimonial.timeframe}</div>\n                    </div>\n                  </div>\n                  <p className=\"text-muted-foreground mb-8 italic text-lg leading-relaxed\" data-testid={`testimonial-content-${index}`}>\n                    \"{testimonial.content}\"\n                  </p>\n                  <div className=\"flex items-center\">\n                    <div className=\"relative\">\n                      <div className=\"w-12 h-12 bg-gradient-to-br from-primary/20 to-blue-500/20 rounded-full flex items-center justify-center mr-4 group-hover:scale-110 transition-transform duration-300\">\n                        <span className=\"text-sm font-bold text-primary\">{testimonial.avatar}</span>\n                      </div>\n                      <div className=\"absolute -inset-1 bg-gradient-to-r from-primary/20 to-blue-500/20 rounded-full blur-md opacity-0 group-hover:opacity-100 transition-opacity duration-300 -z-10\"></div>\n                    </div>\n                    <div>\n                      <div className=\"font-bold text-foreground text-lg group-hover:text-primary transition-colors duration-300\" data-testid={`testimonial-name-${index}`}>\n                        {testimonial.name}\n                      </div>\n                      <div className=\"text-muted-foreground font-medium\" data-testid={`testimonial-role-${index}`}>\n                        {testimonial.role}\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* FAQ Section */}\n      <section className=\"relative py-24 overflow-hidden bg-background\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"text-center mb-16 animate-fade-in-up\">\n            <h2 className=\"text-clamp-lg font-bold text-foreground mb-8 text-wrap-balance\">\n              Frequently Asked{' '}\n              <span className=\"text-blue-gradient\">\n                Questions\n              </span>\n            </h2>\n            <p className=\"text-xl lg:text-2xl text-muted-foreground max-w-4xl mx-auto leading-relaxed\">\n              Everything you need to know about BookingGen and our 7-day free trial\n            </p>\n          </div>\n\n          <div className=\"max-w-4xl mx-auto\">\n            <Accordion type=\"single\" collapsible className=\"space-y-4\">\n              <AccordionItem value=\"item-1\" className=\"glass-prism-card border border-border/50 rounded-lg px-6\">\n                <AccordionTrigger className=\"text-left text-lg font-semibold hover:text-primary\">\n                  Do I need a credit card for the free trial?\n                </AccordionTrigger>\n                <AccordionContent className=\"text-muted-foreground text-base leading-relaxed\">\n                  No credit card required! Start your 7-day free trial instantly with just your email. Experience all Pro features with no payment information needed. It's completely free, no strings attached.\n                </AccordionContent>\n              </AccordionItem>\n\n              <AccordionItem value=\"item-2\" className=\"glass-prism-card border border-border/50 rounded-lg px-6\">\n                <AccordionTrigger className=\"text-left text-lg font-semibold hover:text-primary\">\n                  What happens after my 7-day free trial ends?\n                </AccordionTrigger>\n                <AccordionContent className=\"text-muted-foreground text-base leading-relaxed\">\n                  After your 7-day trial ends, you can choose to upgrade to Pro for $14.99/month to continue enjoying all features. There's no automatic billing - you'll only be charged if you decide to upgrade. Your account will simply revert to the free plan if you don't upgrade.\n                </AccordionContent>\n              </AccordionItem>\n\n              <AccordionItem value=\"item-3\" className=\"glass-prism-card border border-border/50 rounded-lg px-6\">\n                <AccordionTrigger className=\"text-left text-lg font-semibold hover:text-primary\">\n                  Can I cancel my subscription anytime?\n                </AccordionTrigger>\n                <AccordionContent className=\"text-muted-foreground text-base leading-relaxed\">\n                  Yes! Cancel anytime with just one click from your dashboard. No contracts, no commitments, no cancellation fees. We believe in earning your business every month, not trapping you in a contract.\n                </AccordionContent>\n              </AccordionItem>\n\n              <AccordionItem value=\"item-4\" className=\"glass-prism-card border border-border/50 rounded-lg px-6\">\n                <AccordionTrigger className=\"text-left text-lg font-semibold hover:text-primary\">\n                  How quickly can I set up my booking page?\n                </AccordionTrigger>\n                <AccordionContent className=\"text-muted-foreground text-base leading-relaxed\">\n                  Most users create their first professional booking page in under 5 minutes! Our intuitive builder guides you through adding your services, availability, and branding. You can start accepting bookings the same day you sign up.\n                </AccordionContent>\n              </AccordionItem>\n\n              <AccordionItem value=\"item-5\" className=\"glass-prism-card border border-border/50 rounded-lg px-6\">\n                <AccordionTrigger className=\"text-left text-lg font-semibold hover:text-primary\">\n                  Is there a limit on bookings or pages?\n                </AccordionTrigger>\n                <AccordionContent className=\"text-muted-foreground text-base leading-relaxed\">\n                  During your trial and with the Pro plan, you get UNLIMITED booking pages and UNLIMITED bookings. No hidden limits, no surprise charges. Whether you get 10 bookings or 10,000, the price stays the same at $14.99/month.\n                </AccordionContent>\n              </AccordionItem>\n\n              <AccordionItem value=\"item-6\" className=\"glass-prism-card border border-border/50 rounded-lg px-6\">\n                <AccordionTrigger className=\"text-left text-lg font-semibold hover:text-primary\">\n                  What features are included in the free trial?\n                </AccordionTrigger>\n                <AccordionContent className=\"text-muted-foreground text-base leading-relaxed\">\n                  You get FULL access to all Pro features: unlimited booking pages, custom branding, analytics dashboard, automated notifications, mobile optimization, priority support, and more. No features are locked or hidden during the trial.\n                </AccordionContent>\n              </AccordionItem>\n\n              <AccordionItem value=\"item-7\" className=\"glass-prism-card border border-border/50 rounded-lg px-6\">\n                <AccordionTrigger className=\"text-left text-lg font-semibold hover:text-primary\">\n                  Will my booking page work on mobile devices?\n                </AccordionTrigger>\n                <AccordionContent className=\"text-muted-foreground text-base leading-relaxed\">\n                  Yes! All booking pages are fully responsive and optimized for mobile devices. Over 60% of bookings happen on mobile, so we've made sure your pages look perfect and function flawlessly on phones, tablets, and desktops.\n                </AccordionContent>\n              </AccordionItem>\n\n              <AccordionItem value=\"item-8\" className=\"glass-prism-card border border-border/50 rounded-lg px-6\">\n                <AccordionTrigger className=\"text-left text-lg font-semibold hover:text-primary\">\n                  Do you offer support during the trial?\n                </AccordionTrigger>\n                <AccordionContent className=\"text-muted-foreground text-base leading-relaxed\">\n                  Absolutely! Trial users get access to our priority support team. We're here to help you succeed from day one. Get answers via email support, live chat, and our comprehensive help center with video tutorials.\n                </AccordionContent>\n              </AccordionItem>\n            </Accordion>\n          </div>\n\n          <div className=\"text-center mt-16 animate-fade-in-up\">\n            <p className=\"text-lg text-muted-foreground mb-6\">\n              Still have questions? We're here to help!\n            </p>\n            <Button \n              onClick={() => setLocation('/contact')}\n              size=\"lg\"\n              variant=\"outline\"\n              className=\"glass-prism-button px-8 py-3 rounded-full text-lg min-touch-target\"\n              data-testid=\"button-contact\"\n            >\n              Contact Support\n            </Button>\n          </div>\n        </div>\n      </section>\n\n      {/* CTA Section */}\n      <section className=\"relative py-24 overflow-hidden gojiberry-gradient\">\n        {/* Glass Prism Background Elements */}\n        <div className=\"absolute top-10 right-32 w-72 h-72 glass-prism rounded-full opacity-20 animate-float bg-overlay\"></div>\n        <div className=\"absolute bottom-20 left-20 w-56 h-56 glass-prism rounded-full opacity-15 animate-float bg-overlay\" style={{animationDelay: '1s'}}></div>\n        \n        <div className=\"relative container mx-auto px-6 content-layer\">\n          <div className=\"text-center max-w-5xl mx-auto animate-fade-in-up\">\n            <div className=\"inline-flex items-center px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 rounded-full text-white text-sm font-semibold shadow-lg mb-8 animate-pulse\">\n              <span className=\"bg-white text-green-600 text-xs font-bold px-2 py-1 rounded-md mr-3\">⏰ LIMITED OFFER</span>\n              50% OFF - Only $14.99/Month\n            </div>\n            \n            <h2 className=\"text-4xl lg:text-6xl xl:text-7xl font-bold text-foreground mb-8 leading-tight\">\n              Ready to{' '}\n              <span className=\"text-blue-gradient\">\n                Transform Your Booking Process?\n              </span>\n            </h2>\n            <p className=\"text-xl lg:text-2xl text-muted-foreground mb-12 leading-relaxed max-w-4xl mx-auto\">\n              Start your 7-day FREE trial now. Full Pro access. Cancel anytime.\n            </p>\n            <div className=\"flex flex-col sm:flex-row gap-6 justify-center mb-12 animate-scale-in content-layer\" style={{animationDelay: '0.3s'}}>\n              <Button \n                size=\"lg\"\n                onClick={() => setLocation('/signup')}\n                className=\"glass-prism-button px-12 py-6 rounded-full text-xl h-auto mobile-full-width min-touch-target font-bold\"\n                data-testid=\"button-cta-signup\"\n              >\n                Start Your 7-Day FREE Trial\n                <ArrowRight className=\"ml-3 h-6 w-6\" />\n              </Button>\n              <Button \n                size=\"lg\"\n                variant=\"outline\"\n                onClick={() => setLocation('/pricing')}\n                className=\"glass-prism-button px-12 py-6 rounded-full text-xl h-auto mobile-full-width min-touch-target\"\n                data-testid=\"button-cta-pricing\"\n              >\n                <DollarSign className=\"mr-3 h-6 w-6\" />\n                View Pricing\n              </Button>\n            </div>\n            <div className=\"flex flex-col sm:flex-row items-center justify-center space-y-3 sm:space-y-0 sm:space-x-12 text-lg text-muted-foreground\">\n              <div className=\"flex items-center\">\n                <Check className=\"h-6 w-6 text-green-500 mr-3\" />\n                7-Day FREE Trial\n              </div>\n              <div className=\"flex items-center\">\n                <Check className=\"h-6 w-6 text-green-500 mr-3\" />\n                Full Pro Access\n              </div>\n              <div className=\"flex items-center\">\n                <Check className=\"h-6 w-6 text-green-500 mr-3\" />\n                Cancel Anytime\n              </div>\n              <div className=\"flex items-center\">\n                <Check className=\"h-6 w-6 text-green-500 mr-3\" />\n                Just $14.99/mo After Trial\n              </div>\n            </div>\n            \n            <div className=\"mt-12 pt-8 border-t border-border/30\">\n              <p className=\"text-sm text-muted-foreground\">\n                💡 <strong className=\"text-foreground\">Limited Time Offer:</strong> Get 50% OFF the regular price when you subscribe after your trial. Only $14.99/month instead of $29.99!\n              </p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":54107},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/pages/contact.tsx":{"content":"import Header from '@/components/layout/header';\nimport Footer from '@/components/layout/footer';\nimport SEO from '@/components/seo';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\nimport { useLocation } from 'wouter';\nimport { useToast } from '@/hooks/use-toast';\nimport { \n  Mail, \n  ArrowLeft, \n  MessageCircle, \n  Send, \n  Clock, \n  MapPin,\n  Phone,\n  Users,\n  HeadphonesIcon,\n  CheckCircle,\n  AlertCircle\n} from 'lucide-react';\n\nconst contactFormSchema = z.object({\n  name: z.string().min(2, 'Name must be at least 2 characters'),\n  email: z.string().email('Please enter a valid email address'),\n  subject: z.string().min(5, 'Subject must be at least 5 characters'),\n  message: z.string().min(10, 'Message must be at least 10 characters'),\n  category: z.enum(['general', 'technical', 'billing', 'feature', 'bug', 'refund'])\n});\n\ntype ContactFormData = z.infer<typeof contactFormSchema>;\n\nexport default function Contact() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  \n  const form = useForm<ContactFormData>({\n    resolver: zodResolver(contactFormSchema),\n    defaultValues: {\n      name: '',\n      email: '',\n      subject: '',\n      message: '',\n      category: 'general'\n    }\n  });\n\n  const contactMethods = [\n    {\n      icon: Mail,\n      title: \"Email Support\",\n      description: \"Get detailed help from our support team\",\n      contact: \"team@bookinggen.xyz\",\n      response: \"We typically respond within 24-48 hours\",\n      action: () => window.open('mailto:team@bookinggen.xyz', '_blank')\n    },\n    {\n      icon: HeadphonesIcon,\n      title: \"Help Center\",\n      description: \"Browse our comprehensive knowledge base\",\n      contact: \"Self-service articles available 24/7\",\n      response: \"Instant access to solutions\",\n      action: () => setLocation('/help-center')\n    },\n    {\n      icon: Users,\n      title: \"Priority Support\",\n      description: \"Dedicated support for Pro subscribers\",\n      contact: \"Available for Pro users\",\n      response: \"Priority queue with faster response times\",\n      action: () => setLocation('/pricing')\n    }\n  ];\n\n  const supportCategories = [\n    { value: 'general', label: 'General Questions' },\n    { value: 'technical', label: 'Technical Support' },\n    { value: 'billing', label: 'Billing & Account' },\n    { value: 'feature', label: 'Feature Request' },\n    { value: 'bug', label: 'Bug Report' },\n    { value: 'refund', label: 'Refund Request' }\n  ];\n\n  const onSubmit = async (data: ContactFormData) => {\n    try {\n      // Simulate form submission - in a real app, this would make an API call\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      \n      toast({\n        title: \"Message sent successfully!\",\n        description: \"We'll get back to you within 24-48 hours.\",\n      });\n      \n      // Reset form\n      form.reset();\n    } catch (error) {\n      toast({\n        title: \"Error sending message\",\n        description: \"Please try again or email us directly at team@bookinggen.xyz\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <SEO \n        title=\"Contact Us | BookingGen\" \n        description=\"Get help from BookingGen's support team. Contact us via email or our support form. We respond within 24-48 hours to all inquiries.\"\n        ogTitle=\"Contact BookingGen Support\"\n        ogDescription=\"Contact BookingGen's support team for help with your booking platform. Multiple support options available.\"\n      />\n      <Header />\n      \n      {/* Hero Section */}\n      <section className=\"py-20 bg-muted/30\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            <Button \n              variant=\"ghost\" \n              onClick={() => setLocation('/legal')}\n              className=\"mb-6\"\n              data-testid=\"button-back-to-legal\"\n            >\n              <ArrowLeft className=\"mr-2 h-4 w-4\" />\n              Back to Legal & Support\n            </Button>\n            \n            <div className=\"text-center mb-12\">\n              <div className=\"inline-flex items-center justify-center w-16 h-16 bg-primary/10 rounded-full mb-6\">\n                <MessageCircle className=\"h-8 w-8 text-primary\" />\n              </div>\n              <h1 className=\"text-3xl lg:text-5xl font-bold text-foreground mb-6\">\n                Contact Us\n              </h1>\n              <p className=\"text-xl text-muted-foreground max-w-2xl mx-auto\">\n                Have questions, need support, or want to share feedback? We're here to help! \n                Reach out to our team and we'll get back to you quickly.\n              </p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Contact Methods */}\n      <section className=\"py-16\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            <h2 className=\"text-3xl font-bold text-center mb-12\">Get in Touch</h2>\n            <div className=\"grid md:grid-cols-3 gap-6 mb-16\">\n              {contactMethods.map((method, index) => (\n                <Card key={index} className=\"text-center hover:shadow-lg transition-shadow\">\n                  <CardHeader>\n                    <div className=\"inline-flex items-center justify-center w-12 h-12 bg-primary/10 rounded-lg mb-4 mx-auto\">\n                      <method.icon className=\"h-6 w-6 text-primary\" />\n                    </div>\n                    <CardTitle className=\"text-xl\">{method.title}</CardTitle>\n                    <p className=\"text-sm text-muted-foreground\">{method.description}</p>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-3 mb-4\">\n                      <div className=\"flex items-center justify-center gap-2 text-sm\">\n                        <Users className=\"h-4 w-4 text-primary\" />\n                        <span className=\"font-medium\" data-testid={`text-contact-method-${index}`}>\n                          {method.contact}\n                        </span>\n                      </div>\n                      <div className=\"flex items-center justify-center gap-2 text-sm text-muted-foreground\">\n                        <Clock className=\"h-4 w-4\" />\n                        <span>{method.response}</span>\n                      </div>\n                    </div>\n                    <Button \n                      variant=\"outline\" \n                      size=\"sm\" \n                      onClick={method.action}\n                      className=\"w-full\"\n                      data-testid={`button-${method.title.toLowerCase().replace(/\\s+/g, '-')}`}\n                    >\n                      Get Started\n                    </Button>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Contact Form */}\n      <section className=\"py-16 bg-muted/30\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-2xl mx-auto\">\n            <div className=\"text-center mb-12\">\n              <h2 className=\"text-3xl font-bold mb-4\">Send us a Message</h2>\n              <p className=\"text-lg text-muted-foreground\">\n                Fill out the form below and we'll get back to you as soon as possible.\n              </p>\n            </div>\n\n            <Card>\n              <CardContent className=\"p-8\">\n                <Form {...form}>\n                  <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n                    <div className=\"grid md:grid-cols-2 gap-4\">\n                      <FormField\n                        control={form.control}\n                        name=\"name\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Full Name *</FormLabel>\n                            <FormControl>\n                              <Input\n                                placeholder=\"Your full name\"\n                                data-testid=\"input-name\"\n                                {...field}\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={form.control}\n                        name=\"email\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Email Address *</FormLabel>\n                            <FormControl>\n                              <Input\n                                placeholder=\"your@email.com\"\n                                data-testid=\"input-email\"\n                                {...field}\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n\n                    <FormField\n                      control={form.control}\n                      name=\"category\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Category</FormLabel>\n                          <Select onValueChange={field.onChange} defaultValue={field.value}>\n                            <FormControl>\n                              <SelectTrigger data-testid=\"select-category\">\n                                <SelectValue placeholder=\"Select a category\" />\n                              </SelectTrigger>\n                            </FormControl>\n                            <SelectContent>\n                              {supportCategories.map((cat) => (\n                                <SelectItem key={cat.value} value={cat.value}>\n                                  {cat.label}\n                                </SelectItem>\n                              ))}\n                            </SelectContent>\n                          </Select>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"subject\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Subject *</FormLabel>\n                          <FormControl>\n                            <Input\n                              placeholder=\"Brief description of your inquiry\"\n                              data-testid=\"input-subject\"\n                              {...field}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"message\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Message *</FormLabel>\n                          <FormControl>\n                            <Textarea\n                              placeholder=\"Please provide as much detail as possible about your question or issue...\"\n                              className=\"min-h-[120px]\"\n                              data-testid=\"textarea-message\"\n                              {...field}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                  <div className=\"bg-muted/50 p-4 rounded-lg\">\n                    <div className=\"flex items-start gap-3\">\n                      <CheckCircle className=\"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0\" />\n                      <div className=\"text-sm\">\n                        <p className=\"font-medium mb-1\">What happens next?</p>\n                        <p className=\"text-muted-foreground\">\n                          We'll review your message and respond within 24-48 hours. For urgent issues, \n                          please email us directly at{' '}\n                          <span className=\"font-medium text-primary\">team@bookinggen.xyz</span>.\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                    <Button \n                      type=\"submit\" \n                      className=\"w-full\" \n                      size=\"lg\"\n                      disabled={form.formState.isSubmitting}\n                      data-testid=\"button-send-message\"\n                    >\n                      {form.formState.isSubmitting ? (\n                        <>\n                          <Clock className=\"mr-2 h-4 w-4 animate-spin\" />\n                          Sending Message...\n                        </>\n                      ) : (\n                        <>\n                          <Send className=\"mr-2 h-4 w-4\" />\n                          Send Message\n                        </>\n                      )}\n                    </Button>\n                  </form>\n                </Form>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </section>\n\n      {/* Direct Contact Info */}\n      <section className=\"py-16\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            <Card className=\"bg-primary/5 border-primary/20\">\n              <CardContent className=\"p-8\">\n                <div className=\"text-center mb-8\">\n                  <Mail className=\"h-12 w-12 text-primary mx-auto mb-4\" />\n                  <h3 className=\"text-2xl font-bold mb-2\">Direct Contact</h3>\n                  <p className=\"text-muted-foreground\">\n                    Prefer to reach out directly? Here's how to contact our team.\n                  </p>\n                </div>\n\n                <div className=\"grid md:grid-cols-2 gap-8\">\n                  <div className=\"text-center\">\n                    <div className=\"inline-flex items-center justify-center w-10 h-10 bg-primary/10 rounded-lg mb-3\">\n                      <Mail className=\"h-5 w-5 text-primary\" />\n                    </div>\n                    <h4 className=\"font-semibold mb-2\">Email Us</h4>\n                    <p className=\"text-sm text-muted-foreground mb-2\">\n                      Send us an email anytime\n                    </p>\n                    <a \n                      href=\"mailto:team@bookinggen.xyz\" \n                      className=\"text-primary hover:underline font-medium\"\n                      data-testid=\"link-email-direct\"\n                    >\n                      team@bookinggen.xyz\n                    </a>\n                  </div>\n\n                  <div className=\"text-center\">\n                    <div className=\"inline-flex items-center justify-center w-10 h-10 bg-primary/10 rounded-lg mb-3\">\n                      <Clock className=\"h-5 w-5 text-primary\" />\n                    </div>\n                    <h4 className=\"font-semibold mb-2\">Response Time</h4>\n                    <p className=\"text-sm text-muted-foreground mb-2\">\n                      We aim to respond to all inquiries\n                    </p>\n                    <p className=\"text-primary font-medium\">Within 24-48 hours</p>\n                  </div>\n                </div>\n\n                <div className=\"text-center mt-8 pt-8 border-t border-border\">\n                  <div className=\"flex items-center justify-center gap-2 text-sm text-muted-foreground mb-2\">\n                    <AlertCircle className=\"h-4 w-4\" />\n                    <span>Need immediate help?</span>\n                  </div>\n                  <p className=\"text-sm\">\n                    For urgent technical issues, include \"URGENT\" in your subject line to prioritize your request.\n                  </p>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </section>\n\n      <Footer />\n    </div>\n  );\n}","size_bytes":16706},"client/src/index.css":{"content":"@import url('https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap');\n@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&display=swap');\n@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap');\n@import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&display=swap');\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  --background: hsl(0, 0%, 100%);\n  --foreground: hsl(222.2, 84%, 4.9%);\n  --card: hsl(0, 0%, 100%);\n  --card-foreground: hsl(222.2, 84%, 4.9%);\n  --popover: hsl(0, 0%, 100%);\n  --popover-foreground: hsl(222.2, 84%, 4.9%);\n  --primary: hsl(221.2, 83.2%, 53.3%);\n  --primary-foreground: hsl(210, 40%, 98%);\n  --secondary: hsl(210, 40%, 96%);\n  --secondary-foreground: hsl(222.2, 84%, 4.9%);\n  --muted: hsl(210, 40%, 96%);\n  --muted-foreground: hsl(215.4, 16.3%, 46.9%);\n  --accent: hsl(210, 40%, 96%);\n  --accent-foreground: hsl(222.2, 84%, 4.9%);\n  --destructive: hsl(0, 84.2%, 60.2%);\n  --destructive-foreground: hsl(210, 40%, 98%);\n  --border: hsl(214.3, 31.8%, 91.4%);\n  --input: hsl(214.3, 31.8%, 91.4%);\n  --ring: hsl(221.2, 83.2%, 53.3%);\n  --chart-1: hsl(221.2, 83.2%, 53.3%);\n  --chart-2: hsl(159.8, 100%, 36.1%);\n  --chart-3: hsl(42.0, 92.8%, 56.3%);\n  --chart-4: hsl(147.1, 78.5%, 41.96%);\n  --chart-5: hsl(341.5, 75.2%, 50.98%);\n  --sidebar: hsl(0, 0%, 100%);\n  --sidebar-foreground: hsl(222.2, 84%, 4.9%);\n  --sidebar-primary: hsl(221.2, 83.2%, 53.3%);\n  --sidebar-primary-foreground: hsl(210, 40%, 98%);\n  --sidebar-accent: hsl(210, 40%, 96%);\n  --sidebar-accent-foreground: hsl(222.2, 84%, 4.9%);\n  --sidebar-border: hsl(214.3, 31.8%, 91.4%);\n  --sidebar-ring: hsl(221.2, 83.2%, 53.3%);\n  --radius: 0.75rem;\n  --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n}\n\n/* Beautiful background patterns */\n.bg-grid-pattern {\n  background-image: radial-gradient(circle at 1px 1px, rgba(255,255,255,0.15) 1px, transparent 0);\n  background-size: 20px 20px;\n}\n\n.bg-dots-pattern {\n  background-image: radial-gradient(circle at 2px 2px, rgba(255,255,255,0.1) 2px, transparent 0);\n  background-size: 24px 24px;\n}\n\n/* Enhanced card animations */\n.card-hover {\n  transition: all 0.3s ease;\n}\n\n.card-hover:hover {\n  transform: translateY(-8px);\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n}\n\n/* Beautiful gradient overlays */\n.hero-overlay {\n  background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255,255,255,0.1);\n}\n\n/* Font family classes */\n.font-inter { font-family: 'Inter', sans-serif; }\n.font-playfair { font-family: 'Playfair Display', serif; }\n.font-roboto { font-family: 'Roboto', sans-serif; }\n.font-opensans { font-family: 'Open Sans', sans-serif;\n}\n\n.dark {\n  --background: hsl(222.2, 84%, 4.9%);\n  --foreground: hsl(210, 40%, 98%);\n  --card: hsl(222.2, 84%, 4.9%);\n  --card-foreground: hsl(210, 40%, 98%);\n  --popover: hsl(222.2, 84%, 4.9%);\n  --popover-foreground: hsl(210, 40%, 98%);\n  --primary: hsl(217.2, 91.2%, 59.8%);\n  --primary-foreground: hsl(222.2, 84%, 4.9%);\n  --secondary: hsl(217.2, 32.6%, 17.5%);\n  --secondary-foreground: hsl(210, 40%, 98%);\n  --muted: hsl(217.2, 32.6%, 17.5%);\n  --muted-foreground: hsl(215, 20.2%, 65.1%);\n  --accent: hsl(217.2, 32.6%, 17.5%);\n  --accent-foreground: hsl(210, 40%, 98%);\n  --destructive: hsl(0, 62.8%, 30.6%);\n  --destructive-foreground: hsl(210, 40%, 98%);\n  --border: hsl(217.2, 32.6%, 17.5%);\n  --input: hsl(217.2, 32.6%, 17.5%);\n  --ring: hsl(224.3, 76.3%, 94.1%);\n  --chart-1: hsl(221.2, 83.2%, 53.3%);\n  --chart-2: hsl(159.8, 100%, 36.1%);\n  --chart-3: hsl(42.0, 92.8%, 56.3%);\n  --chart-4: hsl(147.1, 78.5%, 41.96%);\n  --chart-5: hsl(341.5, 75.2%, 50.98%);\n  --sidebar: hsl(222.2, 84%, 4.9%);\n  --sidebar-foreground: hsl(210, 40%, 98%);\n  --sidebar-primary: hsl(221.2, 83.2%, 53.3%);\n  --sidebar-primary-foreground: hsl(210, 40%, 98%);\n  --sidebar-accent: hsl(217.2, 32.6%, 17.5%);\n  --sidebar-accent-foreground: hsl(210, 40%, 98%);\n  --sidebar-border: hsl(217.2, 32.6%, 17.5%);\n  --sidebar-ring: hsl(221.2, 83.2%, 53.3%);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply bg-background text-foreground font-sans antialiased;\n    /* Mobile safety: prevent horizontal scroll */\n    overflow-x: hidden;\n    /* iOS-specific optimizations */\n    -webkit-text-size-adjust: 100%;\n    -webkit-overflow-scrolling: touch;\n  }\n\n  #root {\n    /* Prevent horizontal overflow */\n    overflow-x: hidden;\n  }\n\n  /* Mobile-safe media elements */\n  img, video, svg, canvas, iframe, picture {\n    max-width: 100%;\n    height: auto;\n  }\n\n  /* iOS input zoom prevention */\n  input, textarea, select {\n    font-size: 16px;\n  }\n\n  /* Custom scrollbar styling */\n  .scrollbar-thin::-webkit-scrollbar {\n    width: 6px;\n    height: 6px;\n  }\n\n  .scrollbar-thin::-webkit-scrollbar-track {\n    background: transparent;\n    border-radius: 10px;\n  }\n\n  .scrollbar-thin::-webkit-scrollbar-thumb {\n    background: rgba(156, 163, 175, 0.5);\n    border-radius: 10px;\n    transition: background 0.3s ease;\n  }\n\n  .scrollbar-thin::-webkit-scrollbar-thumb:hover {\n    background: rgba(107, 114, 128, 0.7);\n  }\n\n  .dark .scrollbar-thin::-webkit-scrollbar-thumb {\n    background: rgba(75, 85, 99, 0.5);\n  }\n\n  .dark .scrollbar-thin::-webkit-scrollbar-thumb:hover {\n    background: rgba(107, 114, 128, 0.7);\n  }\n\n  /* For Firefox */\n  .scrollbar-thin {\n    scrollbar-width: thin;\n    scrollbar-color: rgba(156, 163, 175, 0.5) transparent;\n  }\n\n  .dark .scrollbar-thin {\n    scrollbar-color: rgba(75, 85, 99, 0.5) transparent;\n  }\n}\n\n/* Custom gradient and effects matching the design reference */\n.hero-gradient {\n  background: linear-gradient(135deg, hsl(var(--primary) / 0.1) 0%, hsl(217.2, 91.2%, 70% / 0.1) 100%);\n}\n\n.button-gradient {\n  background: linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(217.2, 91.2%, 60%) 100%) !important;\n  color: white !important;\n  border: none !important;\n  box-shadow: 0 4px 14px hsl(var(--primary) / 0.3);\n  transition: all 0.3s ease;\n}\n\n.button-gradient:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 25px hsl(var(--primary) / 0.4) !important;\n  background: linear-gradient(135deg, hsl(var(--primary) / 0.9) 0%, hsl(217.2, 91.2%, 55%) 100%) !important;\n  color: white !important;\n}\n\n.card-hover {\n  transition: all 0.3s ease;\n}\n\n.card-hover:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 20px 40px hsl(var(--primary) / 0.1);\n}\n\n.feature-icon {\n  background: linear-gradient(135deg, hsl(var(--primary) / 0.1) 0%, hsl(217.2, 91.2%, 70% / 0.1) 100%);\n}\n\n.modal-backdrop {\n  backdrop-filter: blur(8px);\n}\n\n/* Ensure rounded corners are consistent */\n.rounded-xl {\n  border-radius: 0.75rem;\n}\n\n/* Upgrade button shake animation */\n@keyframes shake {\n  0%, 100% { transform: translateX(0); }\n  25% { transform: translateX(-2px); }\n  75% { transform: translateX(2px); }\n}\n\n@keyframes pulse-glow {\n  0%, 100% { box-shadow: 0 4px 14px hsl(var(--primary) / 0.3); }\n  50% { box-shadow: 0 6px 20px hsl(var(--primary) / 0.5); }\n}\n\n.shake-animation {\n  animation: shake 0.5s ease-in-out infinite;\n}\n\n.pulse-glow-animation {\n  animation: pulse-glow 2s ease-in-out infinite;\n}\n\n/* Premium styling enhancements */\n.premium-gradient {\n  background: linear-gradient(135deg, hsl(var(--primary) / 0.08) 0%, hsl(217.2, 91.2%, 90% / 0.08) 50%, hsl(var(--primary) / 0.12) 100%);\n  backdrop-filter: blur(1px);\n}\n\n.premium-card {\n  background: linear-gradient(145deg, hsl(var(--card)), hsl(var(--card) / 0.98));\n  border: 1px solid hsl(var(--border));\n  box-shadow: 0 4px 20px hsl(var(--foreground) / 0.03), 0 1px 3px hsl(var(--foreground) / 0.08);\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.premium-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 12px 40px hsl(var(--foreground) / 0.08), 0 4px 16px hsl(var(--primary) / 0.12);\n}\n\n.stat-card {\n  background: linear-gradient(145deg, hsl(var(--card)), hsl(var(--card) / 0.95));\n  border: 1px solid hsl(var(--border) / 0.5);\n  box-shadow: 0 2px 12px hsl(var(--foreground) / 0.04);\n  transition: all 0.2s ease;\n}\n\n.stat-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 24px hsl(var(--foreground) / 0.08);\n}\n\n.premium-button {\n  background: linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(217.2, 91.2%, 60%) 100%);\n  box-shadow: 0 4px 16px hsl(var(--primary) / 0.4);\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  border: none;\n  color: white;\n}\n\n.premium-button:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 12px 32px hsl(var(--primary) / 0.5);\n  background: linear-gradient(135deg, hsl(var(--primary) / 0.9) 0%, hsl(217.2, 91.2%, 55%) 100%);\n  color: white;\n}\n\n.glass-effect {\n  background: linear-gradient(145deg, hsl(var(--background) / 0.8), hsl(var(--background) / 0.6));\n  backdrop-filter: blur(12px);\n  border: 1px solid hsl(var(--border) / 0.3);\n}\n\n.text-gradient {\n  background: linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(217.2, 91.2%, 65%) 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n\n.dashboard-header {\n  background: linear-gradient(145deg, hsl(var(--card)), hsl(var(--card) / 0.98));\n  border-bottom: 1px solid hsl(var(--border) / 0.8);\n  box-shadow: 0 1px 3px hsl(var(--foreground) / 0.05);\n}\n\n.quick-action-button {\n  background: linear-gradient(145deg, hsl(var(--background)), hsl(var(--muted) / 0.3));\n  border: 1px solid hsl(var(--border) / 0.5);\n  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.quick-action-button:hover {\n  background: linear-gradient(145deg, hsl(var(--muted) / 0.5), hsl(var(--muted) / 0.7));\n  border-color: hsl(var(--primary) / 0.3);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px hsl(var(--foreground) / 0.06);\n}\n\n.rounded-2xl {\n  border-radius: 1rem;\n}\n\n/* Focus styles for accessibility */\n.focus\\:ring-2:focus {\n  --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);\n  --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);\n  box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);\n}\n\n.focus\\:ring-primary:focus {\n  --tw-ring-color: hsl(var(--primary));\n}\n\n/* Animations */\n@keyframes accordion-down {\n  from {\n    height: 0;\n  }\n  to {\n    height: var(--radix-accordion-content-height);\n  }\n}\n\n@keyframes accordion-up {\n  from {\n    height: var(--radix-accordion-content-height);\n  }\n  to {\n    height: 0;\n  }\n}\n\n.animate-accordion-down {\n  animation: accordion-down 0.2s ease-out;\n}\n\n.animate-accordion-up {\n  animation: accordion-up 0.2s ease-out;\n}\n\n/* Gojiberry-style Blue/White Gradients and Effects */\n.gojiberry-gradient {\n  background: linear-gradient(135deg, \n    hsl(217.2, 91.2%, 97%) 0%, \n    hsl(217.2, 91.2%, 95%) 25%,\n    hsl(221.2, 83.2%, 97%) 50%, \n    hsl(217.2, 91.2%, 96%) 75%, \n    hsl(217.2, 91.2%, 95%) 100%);\n}\n\n.gojiberry-hero-gradient {\n  background: linear-gradient(135deg, \n    hsl(0, 0%, 100%) 0%,\n    hsl(217.2, 91.2%, 95%) 25%,\n    hsl(221.2, 83.2%, 88%) 50%, \n    hsl(217.2, 91.2%, 75%) 75%, \n    hsl(221.2, 83.2%, 65%) 100%);\n}\n\n.notification-badge {\n  background: linear-gradient(135deg, \n    hsl(217.2, 91.2%, 59.8%) 0%, \n    hsl(221.2, 83.2%, 53.3%) 100%);\n  box-shadow: 0 4px 14px hsl(217.2, 91.2%, 59.8% / 0.3);\n  border: 1px solid hsl(217.2, 91.2%, 70%);\n}\n\n/* Glass Prism Effects */\n.glass-prism {\n  background: linear-gradient(145deg, \n    hsla(0, 0%, 100%, 0.25) 0%, \n    hsla(0, 0%, 100%, 0.1) 50%,\n    hsla(0, 0%, 100%, 0.05) 100%);\n  backdrop-filter: blur(20px);\n  border: 1px solid hsla(0, 0%, 100%, 0.18);\n  box-shadow: \n    0 8px 32px hsla(0, 0%, 0%, 0.1),\n    inset 0 1px 0 hsla(0, 0%, 100%, 0.4);\n}\n\n.glass-prism-card {\n  background: linear-gradient(145deg, \n    hsla(217.2, 91.2%, 98%, 0.8) 0%, \n    hsla(217.2, 91.2%, 96%, 0.6) 100%);\n  backdrop-filter: blur(16px);\n  border: 1px solid hsla(217.2, 91.2%, 80%, 0.3);\n  box-shadow: \n    0 8px 32px hsla(217.2, 91.2%, 20%, 0.1),\n    inset 0 1px 0 hsla(0, 0%, 100%, 0.6);\n}\n\n/* Enhanced Glass Prism Button */\n.glass-prism-button {\n  background: linear-gradient(145deg, \n    hsla(217.2, 91.2%, 75%, 0.9) 0%, \n    hsla(221.2, 83.2%, 65%, 0.8) 50%,\n    hsla(217.2, 91.2%, 55%, 0.9) 100%) !important;\n  backdrop-filter: blur(15px) !important;\n  border: 2px solid hsla(0, 0%, 100%, 0.3) !important;\n  box-shadow: \n    0 12px 24px hsla(217.2, 91.2%, 20%, 0.2),\n    inset 0 1px 0 hsla(0, 0%, 100%, 0.5) !important;\n  color: white !important;\n  font-weight: 600 !important;\n  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;\n  transform: perspective(1000px) rotateX(0deg) rotateY(0deg);\n}\n\n.glass-prism-button:hover {\n  background: linear-gradient(145deg, \n    hsla(217.2, 91.2%, 65%, 0.95) 0%, \n    hsla(221.2, 83.2%, 55%, 0.9) 50%,\n    hsla(217.2, 91.2%, 45%, 0.95) 100%) !important;\n  transform: perspective(1000px) rotateX(-2deg) rotateY(2deg) translateY(-8px) scale(1.05) !important;\n  box-shadow: \n    0 20px 40px hsla(217.2, 91.2%, 20%, 0.3),\n    inset 0 2px 0 hsla(0, 0%, 100%, 0.6) !important;\n  border-color: hsla(0, 0%, 100%, 0.5) !important;\n  color: white !important;\n}\n\n.glass-prism-button:active {\n  transform: perspective(1000px) rotateX(2deg) rotateY(-1deg) translateY(-4px) scale(0.98) !important;\n  transition: all 0.1s ease !important;\n}\n\n/* Scroll Animations */\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes slideInLeft {\n  from {\n    opacity: 0;\n    transform: translateX(-30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n@keyframes slideInRight {\n  from {\n    opacity: 0;\n    transform: translateX(30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n@keyframes scaleIn {\n  from {\n    opacity: 0;\n    transform: scale(0.9);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n@keyframes float {\n  0%, 100% {\n    transform: translateY(0px);\n  }\n  50% {\n    transform: translateY(-10px);\n  }\n}\n\n.animate-fade-in-up {\n  animation: fadeInUp 0.6s ease-out forwards;\n}\n\n.animate-slide-in-left {\n  animation: slideInLeft 0.6s ease-out forwards;\n}\n\n.animate-slide-in-right {\n  animation: slideInRight 0.6s ease-out forwards;\n}\n\n.animate-scale-in {\n  animation: scaleIn 0.5s ease-out forwards;\n}\n\n.animate-float {\n  animation: float 3s ease-in-out infinite;\n}\n\n/* Enhanced Hover Effects */\n.hover-lift {\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.hover-lift:hover {\n  transform: translateY(-8px);\n  box-shadow: 0 20px 40px hsla(217.2, 91.2%, 20%, 0.15);\n}\n\n/* Blue Gradient Text */\n.text-blue-gradient {\n  background: linear-gradient(135deg, \n    hsl(217.2, 91.2%, 59.8%) 0%, \n    hsl(221.2, 83.2%, 53.3%) 50%,\n    hsl(217.2, 91.2%, 45%) 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n\n/* Hero Radial Beam - Strong gradient behind headline */\n.hero-radial-beam {\n  position: relative;\n  z-index: 10;\n}\n\n.hero-radial-beam::before {\n  content: '';\n  position: absolute;\n  top: -150px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 1200px;\n  height: 800px;\n  background: radial-gradient(ellipse 900px 500px at 50% 30%, \n    hsla(217, 70%, 92%, 0.4) 0%, \n    hsla(217, 60%, 90%, 0.25) 25%,\n    hsla(221, 65%, 88%, 0.15) 45%,\n    hsla(217, 55%, 85%, 0.08) 65%,\n    transparent 85%);\n  z-index: -1;\n  pointer-events: none;\n  filter: blur(1px);\n}\n\n/* Persistent page gradient for glass effects */\n.page-gradient {\n  background: linear-gradient(135deg, \n    hsl(0, 0%, 100%) 0%,\n    hsl(217.2, 91.2%, 98%) 20%,\n    hsl(217.2, 91.2%, 96%) 40%,\n    hsl(221.2, 83.2%, 95%) 60%, \n    hsl(217.2, 91.2%, 94%) 80%, \n    hsl(221.2, 83.2%, 93%) 100%);\n}\n\n/* Enhanced overlay handling */\n.bg-overlay {\n  pointer-events: none;\n  z-index: 0;\n}\n\n.content-layer {\n  position: relative;\n  z-index: 10;\n}\n\n/* Floating Glass Header Container */\n.floating-glass-header-container {\n  position: fixed;\n  top: 16px;\n  left: 0;\n  right: 0;\n  z-index: 50;\n  display: flex;\n  justify-content: center;\n  pointer-events: none;\n}\n\n.floating-glass-header {\n  background: linear-gradient(145deg, \n    hsla(0, 0%, 100%, 0.85) 0%, \n    hsla(217, 91%, 97%, 0.75) 50%,\n    hsla(0, 0%, 100%, 0.8) 100%);\n  backdrop-filter: blur(20px);\n  border: 1px solid hsla(217, 91%, 80%, 0.2);\n  box-shadow: \n    0 8px 32px hsla(217, 91%, 20%, 0.1),\n    0 2px 8px hsla(217, 91%, 20%, 0.05),\n    inset 0 1px 0 hsla(0, 0%, 100%, 0.4);\n  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n  border-radius: 20px;\n  transform: translateY(0);\n  pointer-events: auto;\n  margin: 0 16px;\n  width: 100%;\n  max-width: 1200px;\n}\n\n.floating-glass-header:hover {\n  transform: translateY(-2px);\n  box-shadow: \n    0 12px 40px hsla(217, 91%, 20%, 0.15),\n    0 4px 16px hsla(217, 91%, 20%, 0.08),\n    inset 0 1px 0 hsla(0, 0%, 100%, 0.5);\n}\n\n.nav-link-animated {\n  position: relative;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.nav-link-animated::after {\n  content: '';\n  position: absolute;\n  width: 0;\n  height: 2px;\n  bottom: -4px;\n  left: 50%;\n  background: linear-gradient(90deg, \n    hsl(217.2, 91.2%, 59.8%) 0%, \n    hsl(221.2, 83.2%, 53.3%) 100%);\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  transform: translateX(-50%);\n}\n\n.nav-link-animated:hover::after {\n  width: 100%;\n}\n\n/* Responsive Animation Control */\n@media (prefers-reduced-motion: reduce) {\n  .animate-fade-in-up,\n  .animate-slide-in-left,\n  .animate-slide-in-right,\n  .animate-scale-in,\n  .animate-float,\n  .animate-float-delayed,\n  .animate-float-slow,\n  .animate-fade-in,\n  .animate-slide-up,\n  .hover-lift {\n    animation: none;\n    transition: none;\n  }\n}\n\n/* Additional Dashboard Animations */\n@keyframes float-delayed {\n  0%, 100% {\n    transform: translateY(0px) translateX(0px);\n  }\n  50% {\n    transform: translateY(-15px) translateX(10px);\n  }\n}\n\n@keyframes float-slow {\n  0%, 100% {\n    transform: translateY(0px) rotate(0deg);\n  }\n  50% {\n    transform: translateY(-10px) rotate(1deg);\n  }\n}\n\n@keyframes fade-in {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n@keyframes slide-up {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.animate-float-delayed {\n  animation: float-delayed 8s ease-in-out infinite;\n}\n\n.animate-float-slow {\n  animation: float-slow 10s ease-in-out infinite;\n}\n\n.animate-fade-in {\n  animation: fade-in 0.5s ease-out;\n}\n\n.animate-slide-up {\n  animation: slide-up 0.6s ease-out;\n}\n\n/* Mobile Utility Classes */\n@layer utilities {\n  /* Text clamping for responsive headings */\n  .text-clamp-sm {\n    font-size: clamp(1.5rem, 4vw, 2rem);\n  }\n  \n  .text-clamp-md {\n    font-size: clamp(1.75rem, 5vw, 3rem);\n  }\n  \n  .text-clamp-lg {\n    font-size: clamp(2rem, 6vw, 4rem);\n  }\n  \n  .text-clamp-xl {\n    font-size: clamp(2.5rem, 7vw, 5rem);\n  }\n\n  /* Text wrapping utilities */\n  .text-wrap-balance {\n    text-wrap: balance;\n  }\n  \n  .text-break-words {\n    overflow-wrap: anywhere;\n    word-break: break-word;\n    hyphens: auto;\n  }\n\n  /* Minimum touch target size (44x44px) */\n  .min-touch-target {\n    min-height: 44px;\n    min-width: 44px;\n  }\n\n  /* Safe area padding for iOS */\n  .safe-area-top {\n    padding-top: env(safe-area-inset-top);\n  }\n  \n  .safe-area-bottom {\n    padding-bottom: env(safe-area-inset-bottom);\n  }\n  \n  .safe-area-left {\n    padding-left: env(safe-area-inset-left);\n  }\n  \n  .safe-area-right {\n    padding-right: env(safe-area-inset-right);\n  }\n\n  /* Mobile-specific optimizations */\n  @media (max-width: 640px) {\n    /* Reduce blur effects on mobile for performance */\n    .mobile-no-blur {\n      backdrop-filter: none;\n      filter: none;\n    }\n\n    /* Hide decorative elements on mobile */\n    .mobile-hide {\n      display: none;\n    }\n\n    /* Full width buttons on mobile */\n    .mobile-full-width {\n      width: 100%;\n    }\n  }\n\n  /* Hide scrollbar but maintain scrolling functionality */\n  .scrollbar-hide {\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n  }\n  \n  .scrollbar-hide::-webkit-scrollbar {\n    display: none;\n  }\n}\n","size_bytes":20293},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5742},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1858},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL environment variable is required\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\", \n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":323},"server/storage.ts":{"content":"// Storage interface and implementation\nimport { SupabaseStorage } from './supabase-storage';\n\nexport interface IStorage {\n  // Profiles\n  createProfile(profile: any): Promise<any>;\n  getProfile(userId: string): Promise<any | undefined>;\n  updateProfile(userId: string, updates: any): Promise<any | undefined>;\n  \n  // Pages\n  createPage(page: any): Promise<any>;\n  getPage(id: string): Promise<any | undefined>;\n  getPageBySlug(slug: string): Promise<any | undefined>;\n  getPagesByOwner(ownerId: string): Promise<any[]>;\n  updatePage(id: string, updates: any): Promise<any | undefined>;\n  deletePage(id: string): Promise<boolean>;\n  \n  // Services\n  createService(service: any): Promise<any>;\n  getServiceById(id: string): Promise<any | undefined>;\n  getServicesByPageId(pageId: string): Promise<any[]>;\n  updateService(id: string, updates: any): Promise<any | undefined>;\n  deleteService(id: string): Promise<boolean>;\n  \n  // Appointments\n  createAppointment(appointment: any): Promise<any>;\n  getAppointmentById(id: string): Promise<any | undefined>;\n  getAppointmentsByOwner(ownerId: string): Promise<any[]>;\n  updateAppointment(id: string, updates: any): Promise<any | undefined>;\n  \n  // Payments\n  createPayment(payment: any): Promise<any>;\n  getPaymentsByUser(userId: string): Promise<any[]>;\n  getAllRecentPayments(limit: number): Promise<any[]>;\n  \n  // Reviews\n  createReview(review: any): Promise<any>;\n  getReviewsByPageId(pageId: string): Promise<any[]>;\n  getApprovedReviewsByPageId(pageId: string): Promise<any[]>;\n  getReviewsByOwner(ownerId: string): Promise<any[]>;\n  updateReview(id: string, updates: any): Promise<any | undefined>;\n  \n  // Subscriptions\n  createSubscription(subscription: any): Promise<any>;\n  getSubscription(id: string): Promise<any | undefined>;\n  getSubscriptionsByUser(userId: string): Promise<any[]>;\n  updateSubscription(id: string, updates: any): Promise<any | undefined>;\n  cancelSubscription(id: string): Promise<boolean>;\n  \n  // Orders (for Razorpay payment verification)\n  createOrder(order: any): Promise<any>;\n  getOrder(id: string): Promise<any | undefined>;\n  updateOrder(id: string, updates: any): Promise<any | undefined>;\n  \n  // Demo Pages\n  createDemoPage(demoData: any, ownerId?: string): Promise<any>;\n  getDemoPage(id: string): Promise<any | undefined>;\n  getDemoPagesByOwner(ownerId: string): Promise<any[]>;\n  deleteDemoPage(id: string): Promise<boolean>;\n  atomicConvertDemo(demoId: string, convertToken: string): Promise<any | null>;\n  associateDemoWithUser(demoId: string, userId: string): Promise<boolean>;\n  \n  // Demo Users\n  createDemoUser(email: string, fullName?: string): Promise<any>;\n  \n  // Staff\n  createStaff(staff: any): Promise<any>;\n  getStaffById(id: string): Promise<any | undefined>;\n  getStaffByPageId(pageId: string): Promise<any[]>;\n  updateStaff(id: string, updates: any): Promise<any | undefined>;\n  deleteStaff(id: string): Promise<boolean>;\n  \n  // Notes\n  createNote(note: any): Promise<any>;\n  getNoteById(id: string): Promise<any | undefined>;\n  getNotesByUser(userId: string): Promise<any[]>;\n  updateNote(id: string, updates: any): Promise<any | undefined>;\n  deleteNote(id: string): Promise<boolean>;\n}\n\n// Initialize storage instance with SupabaseStorage\nexport const storage = new SupabaseStorage();","size_bytes":3301},"client/src/components/dashboard/overview.tsx":{"content":"import { useState } from 'react';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { FileText, CalendarCheck, Clock, DollarSign, Plus, Calendar, BarChart3, Edit, Check, User, AlertCircle, Wifi, WifiOff, Sparkles, X, XCircle, TrendingUp, Percent, ArrowRight, AlertTriangle } from 'lucide-react';\nimport { useLocation } from 'wouter';\nimport { useQuery } from '@tanstack/react-query';\nimport { useCurrency } from '@/hooks/use-currency';\nimport { useAuth } from '@/hooks/use-auth';\nimport { useRealtimeDashboard } from '@/hooks/useRealtimeSubscription';\nimport TrialActivationModal from '@/components/modals/trial-activation-modal';\nimport UpgradeModal from '@/components/modals/upgrade-modal';\nimport { LineChart, Line, AreaChart, Area, BarChart, Bar, PieChart, Pie, Cell, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\n\ninterface OverviewProps {\n  onSectionChange?: (section: string) => void;\n}\n\ninterface DashboardStats {\n  pagesCount: number;\n  totalAppointments: number;\n  pendingAppointments: number;\n  totalRevenue: number;\n  conversionRate: number;\n  avgBookingValue: number;\n}\n\ninterface RecentActivity {\n  id: string;\n  type: string;\n  title: string;\n  description: string;\n  time: string;\n  status: string;\n}\n\ninterface AnalyticsCharts {\n  bookingTrend: Array<{ date: string; bookings: number; revenue: number }>;\n  statusDistribution: Array<{ name: string; value: number; color: string }>;\n  revenueData: Array<{ status: string; revenue: number; color: string }>;\n}\n\nexport default function Overview({ onSectionChange }: OverviewProps) {\n  const [, setLocation] = useLocation();\n  const { formatPrice } = useCurrency();\n  const { user, profile } = useAuth();\n  const [isTrialModalOpen, setIsTrialModalOpen] = useState(false);\n  const [isUpgradeModalOpen, setIsUpgradeModalOpen] = useState(false);\n  const [showTrialBanner, setShowTrialBanner] = useState(true);\n  const [showCautionBanner, setShowCautionBanner] = useState(() => {\n    const dismissed = localStorage.getItem('serverLoadBannerDismissed');\n    return dismissed !== 'true';\n  });\n  const [selectedPageId, setSelectedPageId] = useState<string>('all');\n\n  // Enable real-time subscriptions for live dashboard updates\n  const { isConnected: isRealtimeConnected } = useRealtimeDashboard(user?.id);\n\n  // Check if user is eligible for trial\n  const isTrialAvailable = profile && (profile as any).trialStatus === 'available' && profile.membershipStatus !== 'pro';\n  \n  // Check if user is currently on a trial\n  const isOnTrial = profile && (profile as any).trialStatus === 'active' && profile.membershipStatus === 'pro';\n  \n  // Check if user has a cancelled trial (still has access until it expires)\n  const isCancelledTrial = profile && (profile as any).trialStatus === 'cancelled' && profile.membershipStatus === 'pro';\n  \n  // Calculate days remaining in trial\n  const getDaysRemaining = () => {\n    if ((!isOnTrial && !isCancelledTrial) || !(profile as any).trialEndsAt) return 0;\n    const now = new Date();\n    const trialEnd = new Date((profile as any).trialEndsAt);\n    const diffTime = trialEnd.getTime() - now.getTime();\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    return Math.max(0, diffDays);\n  };\n\n  // Fetch dashboard statistics\n  const { data: dashboardStats, isLoading: statsLoading, error: statsError } = useQuery<DashboardStats>({\n    queryKey: ['/api/dashboard/stats'],\n    enabled: true\n  });\n\n  // Fetch recent activity\n  const { data: recentActivity, isLoading: activityLoading, error: activityError } = useQuery<RecentActivity[]>({\n    queryKey: ['/api/dashboard/recent-activity'],\n    enabled: true\n  });\n\n  // Fetch analytics charts data\n  const { data: analyticsCharts, isLoading: chartsLoading } = useQuery<AnalyticsCharts>({\n    queryKey: ['/api/dashboard/analytics-charts'],\n    enabled: true\n  });\n\n  // Fetch appointments for calendar preview\n  const { data: appointments, isLoading: appointmentsLoading } = useQuery<any[]>({\n    queryKey: ['/api/appointments'],\n    enabled: true\n  });\n\n  // Fetch user's booking pages\n  const { data: userPages, isLoading: pagesLoading } = useQuery<any[]>({\n    queryKey: ['/api/pages'],\n    enabled: true\n  });\n\n  const stats = [\n    {\n      title: \"Booking Pages\",\n      value: statsLoading ? \"...\" : (dashboardStats?.pagesCount?.toString() || \"0\"),\n      icon: FileText,\n      color: \"bg-primary/10 text-primary\",\n      gradient: \"from-blue-500/20 to-blue-600/20\"\n    },\n    {\n      title: \"Total Bookings\",\n      value: statsLoading ? \"...\" : (dashboardStats?.totalAppointments?.toString() || \"0\"),\n      icon: CalendarCheck,\n      color: \"bg-green-100 text-green-600\",\n      gradient: \"from-green-500/20 to-cyan-500/20\"\n    },\n    {\n      title: \"Pending\",\n      value: statsLoading ? \"...\" : (dashboardStats?.pendingAppointments?.toString() || \"0\"),\n      icon: Clock,\n      color: \"bg-orange-100 text-orange-600\",\n      gradient: \"from-orange-500/20 to-yellow-500/20\"\n    },\n    {\n      title: \"Total Revenue\",\n      value: statsLoading ? \"...\" : formatPrice(dashboardStats?.totalRevenue || 0),\n      icon: DollarSign,\n      color: \"bg-emerald-100 text-emerald-600\",\n      gradient: \"from-emerald-500/20 to-teal-500/20\"\n    },\n    {\n      title: \"Conversion Rate\",\n      value: statsLoading ? \"...\" : `${dashboardStats?.conversionRate || 0}%`,\n      icon: Percent,\n      color: \"bg-blue-100 text-blue-600\",\n      gradient: \"from-blue-500/20 to-indigo-500/20\"\n    },\n    {\n      title: \"Avg Booking Value\",\n      value: statsLoading ? \"...\" : formatPrice(dashboardStats?.avgBookingValue || 0),\n      icon: TrendingUp,\n      color: \"bg-blue-100 text-blue-600\",\n      gradient: \"from-blue-500/20 to-cyan-500/20\"\n    }\n  ];\n\n  // Format activities from API data\n  const activities = recentActivity || [];\n  \n  const formatActivityTime = (timeString: string) => {\n    try {\n      const date = new Date(timeString);\n      const now = new Date();\n      const diffMinutes = Math.floor((now.getTime() - date.getTime()) / (1000 * 60));\n      \n      if (diffMinutes < 1) return \"Just now\";\n      if (diffMinutes < 60) return `${diffMinutes}m ago`;\n      \n      const diffHours = Math.floor(diffMinutes / 60);\n      if (diffHours < 24) return `${diffHours}h ago`;\n      \n      const diffDays = Math.floor(diffHours / 24);\n      if (diffDays < 7) return `${diffDays}d ago`;\n      \n      return date.toLocaleDateString();\n    } catch {\n      return \"Recently\";\n    }\n  };\n\n  const getActivityIcon = (activity: any) => {\n    switch (activity.status) {\n      case 'pending':\n        return { icon: Clock, iconBg: \"bg-orange-100 text-orange-600\" };\n      case 'accepted':\n        return { icon: Check, iconBg: \"bg-green-100 text-green-600\" };\n      case 'declined':\n        return { icon: AlertCircle, iconBg: \"bg-red-100 text-red-600\" };\n      default:\n        return { icon: User, iconBg: \"bg-blue-100 text-blue-600\" };\n    }\n  };\n\n  const quickActions = [\n    {\n      title: \"Create New Page\",\n      description: \"Set up a booking page for your services\",\n      icon: Plus,\n      iconBg: \"bg-primary/10 text-primary\",\n      action: () => {\n        setLocation('/create-page');\n      }\n    },\n    {\n      title: \"View Calendar\",\n      description: \"Check your upcoming appointments\",\n      icon: Calendar,\n      iconBg: \"bg-green-100 text-green-600\",\n      action: () => {\n        onSectionChange?.('appointments');\n      }\n    },\n    {\n      title: \"View Analytics\",\n      description: \"Track your booking performance\",\n      icon: BarChart3,\n      iconBg: \"bg-blue-100 text-blue-600\",\n      action: () => {\n        onSectionChange?.('analytics');\n      }\n    }\n  ];\n\n  // Get upcoming appointments for calendar preview (filtered by selected page)\n  const upcomingAppointments = (appointments || [])\n    .filter(apt => {\n      // Filter by selected page\n      if (selectedPageId !== 'all' && apt.pageId !== selectedPageId) {\n        return false;\n      }\n      \n      // Filter for upcoming appointments only\n      const appointmentDate = new Date(apt.date);\n      const today = new Date();\n      today.setHours(0, 0, 0, 0);\n      return appointmentDate >= today;\n    })\n    .sort((a, b) => {\n      const dateA = new Date(a.date);\n      const dateB = new Date(b.date);\n      return dateA.getTime() - dateB.getTime();\n    })\n    .slice(0, 5);\n\n  return (\n    <div className=\"animate-fade-in-up\">\n      {/* Trial Activation Banner */}\n      {isTrialAvailable && showTrialBanner && (\n        <Card className=\"glass-prism-card backdrop-blur-xl bg-gradient-to-r from-purple-500/20 via-pink-500/20 to-purple-500/20 border-purple-300/50 dark:border-purple-600/50 shadow-2xl mb-8 animate-slide-down relative overflow-hidden\" data-testid=\"banner-trial-activation\">\n          <div className=\"absolute inset-0 bg-gradient-to-r from-purple-400/10 via-pink-400/10 to-purple-400/10 animate-pulse\"></div>\n          <CardContent className=\"p-6 relative z-10\">\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"absolute top-4 right-4 text-purple-600 dark:text-purple-400 hover:bg-purple-100 dark:hover:bg-purple-900/30\"\n              onClick={() => setShowTrialBanner(false)}\n              data-testid=\"button-close-trial-banner\"\n            >\n              <X className=\"h-4 w-4\" />\n            </Button>\n            <div className=\"flex flex-col sm:flex-row items-center gap-6\">\n              <div className=\"w-16 h-16 glass-prism rounded-full flex items-center justify-center backdrop-blur-md bg-gradient-to-br from-purple-500/30 to-pink-500/30 border border-purple-300/50 dark:border-purple-600/50 animate-pulse\">\n                <Sparkles className=\"h-8 w-8 text-purple-600 dark:text-purple-400\" />\n              </div>\n              <div className=\"flex-1 text-center sm:text-left\">\n                <h3 className=\"text-xl font-bold bg-gradient-to-r from-purple-900 to-pink-900 dark:from-purple-100 dark:to-pink-100 bg-clip-text text-transparent mb-2\">\n                  Start Your 7-Day Free Trial!\n                </h3>\n                <p className=\"text-gray-700 dark:text-gray-300 mb-4 sm:mb-0\">\n                  No credit card required - Experience all Pro features instantly for 7 days!\n                </p>\n              </div>\n              <Button\n                onClick={() => setIsTrialModalOpen(true)}\n                size=\"lg\"\n                className=\"glass-prism-button backdrop-blur-lg bg-gradient-to-r from-purple-100 via-purple-200 to-purple-300 dark:from-purple-800 dark:via-purple-700 dark:to-purple-600 hover:from-purple-200 hover:via-purple-300 hover:to-purple-400 dark:hover:from-purple-700 dark:hover:via-purple-600 dark:hover:to-purple-500 text-purple-800 dark:text-purple-100 shadow-lg hover:scale-105 transition-all duration-300 border border-purple-300/50 dark:border-purple-600/50 font-semibold h-12\"\n                data-testid=\"button-activate-trial-banner\"\n              >\n                <Sparkles className=\"h-5 w-5 mr-2\" />\n                Activate Free Trial\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Trial Activation Modal */}\n      <TrialActivationModal \n        isOpen={isTrialModalOpen}\n        onClose={() => setIsTrialModalOpen(false)}\n      />\n\n      {/* Upgrade Modal */}\n      <UpgradeModal \n        isOpen={isUpgradeModalOpen}\n        onClose={() => setIsUpgradeModalOpen(false)}\n      />\n\n      {/* Subscription Activation Caution Banner */}\n      {showCautionBanner && (\n        <Card className=\"glass-prism-card backdrop-blur-xl bg-gradient-to-r from-yellow-400/20 via-amber-400/20 to-yellow-400/20 border-yellow-500/50 dark:border-yellow-600/50 shadow-2xl mb-8 animate-slide-down relative overflow-hidden\" data-testid=\"banner-subscription-caution\">\n          <div className=\"absolute inset-0 bg-gradient-to-r from-yellow-300/10 via-amber-300/10 to-yellow-300/10 animate-pulse\"></div>\n          <CardContent className=\"p-6 relative z-10\">\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"absolute top-2 right-2 text-yellow-700 dark:text-yellow-400 hover:bg-yellow-100 dark:hover:bg-yellow-900/30 z-20\"\n              onClick={() => {\n                localStorage.setItem('serverLoadBannerDismissed', 'true');\n                setShowCautionBanner(false);\n              }}\n              data-testid=\"button-close-caution-banner\"\n            >\n              <X className=\"h-4 w-4\" />\n            </Button>\n            <div className=\"flex flex-col sm:flex-row items-center gap-6 pr-10\">\n              <div className=\"w-16 h-16 glass-prism rounded-full flex items-center justify-center backdrop-blur-md bg-gradient-to-br from-yellow-500/30 to-amber-500/30 border border-yellow-400/50 dark:border-yellow-600/50 animate-pulse\">\n                <AlertTriangle className=\"h-8 w-8 text-yellow-700 dark:text-yellow-400\" />\n              </div>\n              <div className=\"flex-1 text-center sm:text-left\">\n                <h3 className=\"text-xl font-bold bg-gradient-to-r from-yellow-900 to-amber-900 dark:from-yellow-100 dark:to-amber-100 bg-clip-text text-transparent mb-2\">\n                  Experiencing High Server Load\n                </h3>\n                <p className=\"text-gray-700 dark:text-gray-300 mb-4 sm:mb-0\">\n                  If you've recently purchased a membership, activated your free trial, or upgraded to Pro, please allow 2-5 minutes for activation. We're experiencing higher than normal traffic and are working to resolve this.\n                </p>\n              </div>\n              <Button\n                onClick={() => setLocation('/subscription-delays')}\n                className=\"glass-prism-button backdrop-blur-lg bg-gradient-to-r from-yellow-100 via-yellow-200 to-yellow-300 dark:from-yellow-800 dark:via-yellow-700 dark:to-yellow-600 hover:from-yellow-200 hover:via-yellow-300 hover:to-yellow-400 dark:hover:from-yellow-700 dark:hover:via-yellow-600 dark:hover:to-yellow-500 text-yellow-800 dark:text-yellow-100 shadow-lg hover:scale-105 transition-all duration-300 border border-yellow-400/50 dark:border-yellow-600/50 font-semibold h-12 whitespace-nowrap\"\n                data-testid=\"button-read-more-delays\"\n              >\n                Read more <ArrowRight className=\"h-5 w-5 ml-2\" />\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Active Trial Banner */}\n      {isOnTrial && (\n        <Card className=\"glass-prism-card backdrop-blur-xl bg-gradient-to-r from-purple-500/15 via-blue-500/15 to-purple-500/15 border-purple-300/50 dark:border-purple-600/50 shadow-2xl mb-8 animate-slide-down\" data-testid=\"banner-active-trial\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex flex-col sm:flex-row items-center justify-between gap-4\">\n              <div className=\"flex items-center gap-4\">\n                <div className=\"w-12 h-12 glass-prism rounded-full flex items-center justify-center backdrop-blur-md bg-gradient-to-br from-purple-500/30 to-blue-500/30 border border-purple-300/50 dark:border-purple-600/50\">\n                  <Sparkles className=\"h-6 w-6 text-purple-600 dark:text-purple-400\" />\n                </div>\n                <div>\n                  <h3 className=\"text-lg font-bold text-gray-900 dark:text-gray-100 mb-1\">\n                    Free Trial Active\n                  </h3>\n                  <p className=\"text-sm text-gray-700 dark:text-gray-300\">\n                    {getDaysRemaining() > 0 ? (\n                      <>\n                        <span className=\"font-semibold text-purple-600 dark:text-purple-400\">{getDaysRemaining()} {getDaysRemaining() === 1 ? 'day' : 'days'}</span> remaining in your trial\n                        {(profile as any).trialEndsAt && (\n                          <> • Ends {new Date((profile as any).trialEndsAt).toLocaleDateString()}</>\n                        )}\n                      </>\n                    ) : (\n                      'Your trial is ending soon'\n                    )}\n                  </p>\n                </div>\n              </div>\n              <Button\n                onClick={() => setIsUpgradeModalOpen(true)}\n                className=\"glass-prism-button backdrop-blur-lg bg-gradient-to-r from-purple-100 via-purple-200 to-purple-300 dark:from-purple-800 dark:via-purple-700 dark:to-purple-600 hover:from-purple-200 hover:via-purple-300 hover:to-purple-400 dark:hover:from-purple-700 dark:hover:via-purple-600 dark:hover:to-purple-500 text-purple-800 dark:text-purple-100 shadow-lg border border-purple-300/50 dark:border-purple-600/50 font-semibold\"\n                data-testid=\"button-upgrade-from-trial\"\n              >\n                Upgrade to Pro\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Cancelled Trial Banner - User still has access until trial ends */}\n      {isCancelledTrial && (\n        <Card className=\"glass-prism-card backdrop-blur-xl bg-gradient-to-r from-orange-500/15 via-red-500/15 to-orange-500/15 border-orange-300/50 dark:border-orange-600/50 shadow-2xl mb-8 animate-slide-down\" data-testid=\"banner-cancelled-trial\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex flex-col sm:flex-row items-center justify-between gap-4\">\n              <div className=\"flex items-center gap-4\">\n                <div className=\"w-12 h-12 glass-prism rounded-full flex items-center justify-center backdrop-blur-md bg-gradient-to-br from-orange-500/30 to-red-500/30 border border-orange-300/50 dark:border-orange-600/50\">\n                  <XCircle className=\"h-6 w-6 text-orange-600 dark:text-orange-400\" />\n                </div>\n                <div>\n                  <h3 className=\"text-lg font-bold text-gray-900 dark:text-gray-100 mb-1\">\n                    Trial Cancelled\n                  </h3>\n                  <p className=\"text-sm text-gray-700 dark:text-gray-300\">\n                    {getDaysRemaining() > 0 ? (\n                      <>\n                        You still have <span className=\"font-semibold text-orange-600 dark:text-orange-400\">{getDaysRemaining()} {getDaysRemaining() === 1 ? 'day' : 'days'}</span> of Pro access\n                        {(profile as any).trialEndsAt && (\n                          <> • Ends {new Date((profile as any).trialEndsAt).toLocaleDateString()}</>\n                        )}\n                      </>\n                    ) : (\n                      'Your trial access is ending soon'\n                    )}\n                  </p>\n                </div>\n              </div>\n              <Button\n                onClick={() => setIsUpgradeModalOpen(true)}\n                className=\"glass-prism-button backdrop-blur-lg bg-gradient-to-r from-orange-100 via-orange-200 to-orange-300 dark:from-orange-800 dark:via-orange-700 dark:to-orange-600 hover:from-orange-200 hover:via-orange-300 hover:to-orange-400 dark:hover:from-orange-700 dark:hover:via-orange-600 dark:hover:to-orange-500 text-orange-800 dark:text-orange-100 shadow-lg border border-orange-300/50 dark:border-orange-600/50 font-semibold\"\n                data-testid=\"button-upgrade-from-cancelled-trial\"\n              >\n                Upgrade to Keep Access\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Stats Grid */}\n      <div className=\"grid grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6 mb-8\">\n        {statsError ? (\n          <div className=\"col-span-full\">\n            <Card className=\"border-red-200\">\n              <CardContent className=\"p-6 text-center\">\n                <div className=\"text-4xl text-red-500 mb-4\">⚠️</div>\n                <p className=\"text-red-600\">Failed to load dashboard statistics</p>\n              </CardContent>\n            </Card>\n          </div>\n        ) : (\n          stats.map((stat, index) => (\n            <Card key={index} className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-2xl hover-lift animate-scale-in\">\n              <CardContent className=\"p-4 lg:p-6\">\n                <div className=\"flex items-center justify-between mb-3 lg:mb-4\">\n                  <div className={`w-10 h-10 lg:w-12 lg:h-12 rounded-xl glass-prism backdrop-blur-md bg-gradient-to-br ${stat.gradient} border border-white/30 flex items-center justify-center`}>\n                    <stat.icon className=\"h-5 w-5 lg:h-6 lg:w-6\" />\n                  </div>\n                  <span className=\"text-xl lg:text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent\" data-testid={`stat-${stat.title.toLowerCase().replace(/ /g, '-')}`}>\n                    {stat.value}\n                  </span>\n                </div>\n                <h3 className=\"text-xs lg:text-sm font-medium text-gray-600 dark:text-gray-300\">{stat.title}</h3>\n              </CardContent>\n            </Card>\n          ))\n        )}\n      </div>\n\n      {/* Charts Section */}\n      <div className=\"grid lg:grid-cols-2 gap-6 mb-8\">\n        {/* Booking Trend Chart */}\n        {!chartsLoading && analyticsCharts && analyticsCharts.bookingTrend.length > 0 && (\n          <Card className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-2xl hover-lift animate-fade-in\">\n            <CardContent className=\"p-6\">\n              <h3 className=\"text-lg font-semibold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent mb-4\">Booking Trends (Last 30 Days)</h3>\n              <ResponsiveContainer width=\"100%\" height={250}>\n                <AreaChart data={analyticsCharts.bookingTrend}>\n                  <defs>\n                    <linearGradient id=\"colorBookings\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                      <stop offset=\"5%\" stopColor=\"#3b82f6\" stopOpacity={0.8}/>\n                      <stop offset=\"95%\" stopColor=\"#3b82f6\" stopOpacity={0.1}/>\n                    </linearGradient>\n                  </defs>\n                  <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(255,255,255,0.1)\" />\n                  <XAxis \n                    dataKey=\"date\" \n                    stroke=\"#888\" \n                    tick={{ fill: '#888', fontSize: 12 }}\n                    angle={-45}\n                    textAnchor=\"end\"\n                    height={80}\n                  />\n                  <YAxis stroke=\"#888\" tick={{ fill: '#888', fontSize: 12 }} />\n                  <Tooltip \n                    contentStyle={{ \n                      backgroundColor: 'rgba(255, 255, 255, 0.95)', \n                      border: '1px solid rgba(255,255,255,0.3)',\n                      borderRadius: '8px',\n                      backdropFilter: 'blur(10px)'\n                    }}\n                  />\n                  <Area \n                    type=\"monotone\" \n                    dataKey=\"bookings\" \n                    stroke=\"#3b82f6\" \n                    fillOpacity={1} \n                    fill=\"url(#colorBookings)\"\n                    strokeWidth={2}\n                  />\n                </AreaChart>\n              </ResponsiveContainer>\n            </CardContent>\n          </Card>\n        )}\n\n        {/* Calendar Preview */}\n        <Card className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-2xl hover-lift animate-fade-in\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-semibold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent\">Upcoming Appointments</h3>\n              <Button\n                onClick={() => onSectionChange?.('appointments')}\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"glass-prism backdrop-blur-md bg-white/10 dark:bg-black/10 border border-white/20 hover:bg-white/20 dark:hover:bg-black/20 text-gray-800 dark:text-gray-100\"\n                data-testid=\"button-view-full-calendar\"\n              >\n                <Calendar className=\"h-4 w-4 mr-2\" />\n                View Full Calendar\n              </Button>\n            </div>\n\n            {/* Page Selector */}\n            <div className=\"mb-4\">\n              <Select value={selectedPageId} onValueChange={setSelectedPageId}>\n                <SelectTrigger className=\"glass-prism backdrop-blur-md bg-white/10 dark:bg-black/10 border border-white/20 text-gray-800 dark:text-gray-100\" data-testid=\"select-booking-page\">\n                  <SelectValue placeholder=\"Select booking page\" />\n                </SelectTrigger>\n                <SelectContent className=\"glass-prism-card backdrop-blur-xl bg-white/95 dark:bg-gray-900/95 border border-white/20\">\n                  <SelectItem value=\"all\" className=\"cursor-pointer\">All Pages</SelectItem>\n                  {pagesLoading ? (\n                    <SelectItem value=\"loading\" disabled>Loading pages...</SelectItem>\n                  ) : (userPages || []).length === 0 ? (\n                    <SelectItem value=\"none\" disabled>No pages yet</SelectItem>\n                  ) : (\n                    (userPages || []).map((page) => (\n                      <SelectItem key={page.id} value={page.id} className=\"cursor-pointer\">\n                        {page.title || 'Untitled Page'}\n                      </SelectItem>\n                    ))\n                  )}\n                </SelectContent>\n              </Select>\n            </div>\n            \n            <div className=\"space-y-3 max-h-[200px] overflow-y-auto\">\n              {appointmentsLoading || pagesLoading ? (\n                <div className=\"text-center py-8\">\n                  <div className=\"text-2xl mb-2\">⏳</div>\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">Loading appointments...</p>\n                </div>\n              ) : upcomingAppointments.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <div className=\"text-4xl mb-2\">📅</div>\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                    {(userPages || []).length === 0 \n                      ? 'Create your first booking page to start receiving appointments'\n                      : selectedPageId === 'all' \n                        ? 'No upcoming appointments across all pages'\n                        : 'No upcoming appointments for this page'}\n                  </p>\n                  {(userPages || []).length === 0 && (\n                    <Button\n                      onClick={() => onSectionChange?.('pages')}\n                      variant=\"link\"\n                      size=\"sm\"\n                      className=\"mt-2 text-blue-600 dark:text-blue-400\"\n                      data-testid=\"button-create-page\"\n                    >\n                      Create a booking page\n                    </Button>\n                  )}\n                </div>\n              ) : (\n                upcomingAppointments.map((apt, index) => {\n                  const appointmentDate = new Date(apt.date);\n                  const isToday = appointmentDate.toDateString() === new Date().toDateString();\n                  const isTomorrow = appointmentDate.toDateString() === new Date(Date.now() + 86400000).toDateString();\n                  \n                  let dateLabel = appointmentDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n                  if (isToday) dateLabel = 'Today';\n                  if (isTomorrow) dateLabel = 'Tomorrow';\n                  \n                  const statusColors: Record<string, string> = {\n                    pending: 'bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400',\n                    accepted: 'bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400',\n                    declined: 'bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400',\n                    rescheduled: 'bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400'\n                  };\n\n                  // Find the page this appointment belongs to\n                  const appointmentPage = (userPages || []).find(page => page.id === apt.pageId);\n                  const pageTitle = appointmentPage?.title || 'Unknown Page';\n\n                  return (\n                    <div \n                      key={apt.id || index} \n                      className=\"glass-prism backdrop-blur-md bg-white/5 dark:bg-black/5 border border-white/20 rounded-lg p-3 hover:bg-white/10 dark:hover:bg-black/10 transition-all duration-200\"\n                      data-testid={`calendar-preview-appointment-${index}`}\n                    >\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2 mb-1\">\n                            <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-100\">\n                              {apt.customerName}\n                            </span>\n                            <span className={`text-xs px-2 py-0.5 rounded-full ${statusColors[apt.status] || statusColors.pending}`}>\n                              {apt.status}\n                            </span>\n                          </div>\n                          <p className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">\n                            {apt.serviceName || 'Service'}\n                          </p>\n                          <div className=\"flex items-center gap-3 text-xs text-gray-500 dark:text-gray-500 flex-wrap\">\n                            {selectedPageId === 'all' && (\n                              <span className=\"flex items-center gap-1 text-blue-600 dark:text-blue-400\">\n                                <FileText className=\"h-3 w-3\" />\n                                {pageTitle}\n                              </span>\n                            )}\n                            <span className=\"flex items-center gap-1\">\n                              <Calendar className=\"h-3 w-3\" />\n                              {dateLabel}\n                            </span>\n                            <span className=\"flex items-center gap-1\">\n                              <Clock className=\"h-3 w-3\" />\n                              {apt.time}\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Status Distribution Chart */}\n      {!chartsLoading && analyticsCharts && analyticsCharts.statusDistribution.length > 0 && (\n        <div className=\"mb-8\">\n          <Card className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-2xl hover-lift animate-fade-in\">\n            <CardContent className=\"p-6\">\n              <h3 className=\"text-lg font-semibold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent mb-4\">Appointment Status Distribution</h3>\n              <ResponsiveContainer width=\"100%\" height={250}>\n                <PieChart>\n                  <Pie\n                    data={analyticsCharts.statusDistribution}\n                    cx=\"50%\"\n                    cy=\"50%\"\n                    labelLine={false}\n                    label={({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`}\n                    outerRadius={80}\n                    fill=\"#8884d8\"\n                    dataKey=\"value\"\n                  >\n                    {analyticsCharts.statusDistribution.map((entry, index) => (\n                      <Cell key={`cell-${index}`} fill={entry.color} />\n                    ))}\n                  </Pie>\n                  <Tooltip \n                    contentStyle={{ \n                      backgroundColor: 'rgba(255, 255, 255, 0.95)', \n                      border: '1px solid rgba(255,255,255,0.3)',\n                      borderRadius: '8px',\n                      backdropFilter: 'blur(10px)'\n                    }}\n                  />\n                </PieChart>\n              </ResponsiveContainer>\n            </CardContent>\n          </Card>\n        </div>\n      )}\n\n      {/* Revenue Chart (full width if exists) */}\n      {!chartsLoading && analyticsCharts && analyticsCharts.revenueData.length > 0 && (\n        <div className=\"mb-8\">\n          <Card className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-2xl hover-lift animate-fade-in\">\n            <CardContent className=\"p-6\">\n              <h3 className=\"text-lg font-semibold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent mb-4\">Revenue by Status</h3>\n              <ResponsiveContainer width=\"100%\" height={250}>\n                <BarChart data={analyticsCharts.revenueData}>\n                  <CartesianGrid strokeDasharray=\"3 3\" stroke=\"rgba(255,255,255,0.1)\" />\n                  <XAxis \n                    dataKey=\"status\" \n                    stroke=\"#888\" \n                    tick={{ fill: '#888', fontSize: 12 }}\n                  />\n                  <YAxis stroke=\"#888\" tick={{ fill: '#888', fontSize: 12 }} />\n                  <Tooltip \n                    contentStyle={{ \n                      backgroundColor: 'rgba(255, 255, 255, 0.95)', \n                      border: '1px solid rgba(255,255,255,0.3)',\n                      borderRadius: '8px',\n                      backdropFilter: 'blur(10px)'\n                    }}\n                    formatter={(value) => formatPrice(Number(value))}\n                  />\n                  <Bar dataKey=\"revenue\" radius={[8, 8, 0, 0]}>\n                    {analyticsCharts.revenueData.map((entry, index) => (\n                      <Cell key={`cell-${index}`} fill={entry.color} />\n                    ))}\n                  </Bar>\n                </BarChart>\n              </ResponsiveContainer>\n            </CardContent>\n          </Card>\n        </div>\n      )}\n\n      <div className=\"grid lg:grid-cols-2 gap-8\">\n        {/* Recent Activity */}\n        <Card className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-2xl hover-lift animate-slide-in-left\">\n          <CardContent className=\"p-6\">\n            <h3 className=\"text-lg font-semibold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent mb-6\">Recent Activity</h3>\n            <div className=\"space-y-4\">\n              {activityLoading ? (\n                <div className=\"text-center py-8\">\n                  <div className=\"text-4xl text-muted-foreground mb-4\">⏳</div>\n                  <p className=\"text-gray-600 dark:text-gray-400\">Loading recent activity...</p>\n                </div>\n              ) : activityError ? (\n                <div className=\"text-center py-8\">\n                  <div className=\"text-4xl text-muted-foreground mb-4\">⚠️</div>\n                  <p className=\"text-red-500 dark:text-red-400\">Failed to load recent activity</p>\n                </div>\n              ) : activities.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <div className=\"text-4xl text-muted-foreground mb-4\">📋</div>\n                  <p className=\"text-gray-600 dark:text-gray-400\">No recent activity</p>\n                </div>\n              ) : (\n                activities.map((activity: RecentActivity, index: number) => {\n                  const { icon: ActivityIcon, iconBg } = getActivityIcon(activity);\n                  return (\n                    <div key={index} className=\"flex items-center space-x-4\">\n                      <div className={`w-10 h-10 rounded-full glass-prism backdrop-blur-md bg-gradient-to-br ${iconBg.includes('orange') ? 'from-orange-500/20 to-yellow-500/20' : iconBg.includes('green') ? 'from-green-500/20 to-cyan-500/20' : iconBg.includes('red') ? 'from-red-500/20 to-pink-500/20' : 'from-blue-500/20 to-purple-500/20'} border border-white/30 flex items-center justify-center`}>\n                        <ActivityIcon className=\"h-5 w-5\" />\n                      </div>\n                      <div className=\"flex-1\">\n                        <p className=\"text-sm font-medium text-gray-800 dark:text-gray-100\">{activity.title}</p>\n                        <p className=\"text-xs text-gray-600 dark:text-gray-400\">{activity.description}</p>\n                        <p className=\"text-xs text-gray-500 dark:text-gray-500\">{formatActivityTime(activity.time)}</p>\n                      </div>\n                    </div>\n                  );\n                })\n              )}\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Quick Actions */}\n        <Card className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-2xl hover-lift animate-slide-in-right\">\n          <CardContent className=\"p-6\">\n            <h3 className=\"text-lg font-semibold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent mb-6\">Quick Actions</h3>\n            <div className=\"space-y-4\">\n              {quickActions.map((action, index) => (\n                <Button\n                  key={index}\n                  onClick={action.action}\n                  variant=\"ghost\"\n                  className=\"glass-prism backdrop-blur-md bg-white/10 dark:bg-black/10 border border-white/20 hover:bg-white/20 dark:hover:bg-black/20 transition-all duration-300 hover:shadow-lg hover:scale-105 w-full flex items-center justify-between p-4 h-auto rounded-xl\"\n                  data-testid={`quick-action-${action.title.toLowerCase().replace(' ', '-')}`}\n                >\n                  <div className=\"flex items-center space-x-3\">\n                    <div className={`w-10 h-10 rounded-xl glass-prism backdrop-blur-md bg-gradient-to-br ${action.iconBg.includes('primary') ? 'from-blue-500/20 to-purple-500/20' : action.iconBg.includes('green') ? 'from-green-500/20 to-cyan-500/20' : 'from-purple-500/20 to-pink-500/20'} border border-white/30 flex items-center justify-center`}>\n                      <action.icon className=\"h-5 w-5\" />\n                    </div>\n                    <div className=\"text-left\">\n                      <span className=\"font-medium text-gray-800 dark:text-gray-100 block\">{action.title}</span>\n                      <span className=\"text-sm text-gray-600 dark:text-gray-400\">{action.description}</span>\n                    </div>\n                  </div>\n                  <div className=\"text-gray-600 dark:text-gray-400\">→</div>\n                </Button>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","size_bytes":39203},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"replit.md":{"content":"# BookingGen - Beautiful Booking Pages Generator\n\n## Overview\n\nBookingGen is a modern SaaS platform that allows freelancers, consultants, and service providers to create stunning, professional booking pages with integrated payment processing and smart scheduling. The application enables users to build custom booking experiences with personalized branding, automated appointment management, and comprehensive analytics.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n- **Framework**: React with Vite for fast development and optimized builds\n- **Styling**: Tailwind CSS with Shadcn UI components for consistent design system\n- **State Management**: React Query (TanStack Query) for server state management and caching\n- **Routing**: Wouter for lightweight client-side routing\n- **Authentication**: Custom JWT-based authentication with local storage persistence\n\n### Backend Architecture\n- **Server Framework**: Express.js with serverless-compatible API routes\n- **Database ORM**: Drizzle ORM for type-safe database operations\n- **Authentication**: JWT tokens with bcrypt password hashing\n- **File Structure**: Modular design with separate routes, storage, and schema layers\n- **Development Server**: Vite middleware integration for seamless development experience\n\n### Database Design\n- **Primary Database**: PostgreSQL with Neon serverless driver\n- **Schema Management**: Drizzle Kit for migrations and schema synchronization\n- **Core Tables**:\n  - `users`: Basic user authentication data\n  - `profiles`: Extended user information and membership status\n  - `pages`: Booking page configurations with customization options\n  - `services`: Service offerings linked to booking pages\n  - `appointments`: Booking records with customer information\n  - `paymentsDemo`: Payment transaction records\n\n### Authentication & Authorization\n- **Strategy**: JWT-based authentication with server-side verification\n- **Password Security**: bcrypt hashing with salt rounds\n- **Session Management**: Token-based sessions stored in localStorage\n- **Route Protection**: AuthGuard component for protected routes\n- **User Roles**: Profile-based membership levels (free/pro)\n\n### Payment Processing\n- **Provider**: Razorpay integration for secure payment handling\n- **Architecture**: Server-side order creation and verification\n- **Security**: API keys separated between client-safe and server-only\n- **Implementation**: Razorpay SDK integration with custom checkout flow\n\n### File Upload & Storage\n- **Provider**: Supabase Storage for logo and asset management\n- **Integration**: Direct upload capabilities for booking page customization\n- **Asset Management**: URL-based file references in database schema\n\n### UI/UX Design System\n- **Component Library**: Radix UI primitives with custom styling\n- **Design Tokens**: CSS custom properties for consistent theming\n- **Responsive Design**: Mobile-first approach with Tailwind breakpoints\n- **Accessibility**: ARIA-compliant components and keyboard navigation\n- **Dark Mode**: Built-in theme switching capabilities\n\n## External Dependencies\n\n### Database & Backend Services\n- **Neon Database**: Serverless PostgreSQL hosting with connection pooling\n- **Supabase**: Authentication services and file storage infrastructure\n\n### Payment Processing\n- **Razorpay**: Payment gateway for order creation, processing, and verification\n- **Integration**: Live API keys for production payment handling\n\n### Development & Build Tools\n- **Vite**: Build tool and development server with HMR\n- **TypeScript**: Type safety across frontend and backend\n- **Drizzle Kit**: Database migration and schema management\n- **ESBuild**: Backend bundling for production deployment\n\n### UI & Component Libraries\n- **Radix UI**: Headless component primitives for accessibility\n- **Tailwind CSS**: Utility-first CSS framework\n- **Lucide React**: Icon library for consistent iconography\n- **React Hook Form**: Form state management and validation\n\n### Deployment & Hosting\n- **Vercel**: Serverless deployment platform with API routes\n- **Environment Variables**: Secure configuration management for API keys\n- **Static Assets**: CDN-optimized delivery for frontend resources\n\n### Third-party Integrations\n- **Google Fonts**: Typography with Inter font family\n- **Calendar Integration**: External calendar linking capabilities\n- **Email Services**: Appointment confirmation and notification system (planned)","size_bytes":4482},"client/src/components/dashboard/sidebar.tsx":{"content":"import { useState } from 'react';\nimport { useAuth } from '@/hooks/use-auth';\nimport { Button } from '@/components/ui/button';\nimport { CalendarDays, PieChart, FileText, CalendarCheck, BarChart3, Settings, Crown, User, ChevronUp, LogOut, Sparkles, Calendar, StickyNote, HelpCircle, MessageSquare } from 'lucide-react';\nimport { Badge } from '@/components/ui/badge';\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuSeparator, DropdownMenuTrigger } from '@/components/ui/dropdown-menu';\nimport { Avatar, AvatarFallback } from '@/components/ui/avatar';\nimport UpgradeModal from '@/components/modals/upgrade-modal';\nimport TrialActivationModal from '@/components/modals/trial-activation-modal';\nimport { useLocation } from 'wouter';\n\ninterface SidebarProps {\n  activeSection: string;\n  onSectionChange: (section: string) => void;\n}\n\nexport default function Sidebar({ activeSection, onSectionChange }: SidebarProps) {\n  const { user, profile, logout } = useAuth();\n  const [, setLocation] = useLocation();\n  const [isUpgradeModalOpen, setIsUpgradeModalOpen] = useState(false);\n  const [isTrialModalOpen, setIsTrialModalOpen] = useState(false);\n\n  const isTrialAvailable = profile && (profile as any).trialStatus === 'available' && profile.membershipStatus !== 'pro';\n\n  const getInitials = (name: string) => {\n    return name\n      .split(' ')\n      .map(part => part[0])\n      .join('')\n      .toUpperCase()\n      .slice(0, 2);\n  };\n\n  const navigation = [\n    { id: 'overview', label: 'Overview', icon: PieChart },\n    { id: 'pages', label: 'Booking Pages', icon: FileText },\n    { id: 'appointments', label: 'Appointments', icon: CalendarCheck, badge: 0 },\n    { id: 'analytics', label: 'Analytics', icon: BarChart3 },\n  ];\n\n  const toolsNav = [\n    { id: 'reviews', label: 'Reviews', icon: MessageSquare },\n    { id: 'calendar', label: 'Calendar', icon: Calendar },\n    { id: 'notes', label: 'Notes', icon: StickyNote },\n    { id: 'help-center', label: 'Help Center', icon: HelpCircle },\n  ];\n\n  const settingsNav = [\n    { id: 'settings', label: 'Settings', icon: Settings },\n  ];\n\n  return (\n    <div className=\"w-64 glass-prism-card backdrop-blur-xl bg-white/5 dark:bg-black/5 border-r border-white/20 h-screen flex flex-col shadow-2xl animate-slide-in-left fixed left-0 top-0 z-40 overflow-y-auto overscroll-contain mobile-no-blur\">\n      {/* Logo */}\n      <div className=\"p-6 border-b border-white/10\">\n        <div className=\"flex items-center space-x-3\">\n          <div className=\"w-10 h-10 glass-prism rounded-xl flex items-center justify-center backdrop-blur-md bg-gradient-to-br from-blue-500/20 to-purple-500/20 border border-white/30 mobile-no-blur\">\n            <CalendarDays className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n          </div>\n          <span className=\"text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent\">BookingGen</span>\n        </div>\n      </div>\n      \n      {/* Navigation */}\n      <nav className=\"px-4 py-6 space-y-2 flex-1\">\n        <div className=\"mb-4\">\n          <p className=\"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider px-2 mb-3\">Dashboard</p>\n          <button\n            onClick={() => onSectionChange('overview')}\n            className={`w-full flex items-center px-3 py-2.5 rounded-xl transition-all duration-300 group ${\n              activeSection === 'overview'\n                ? 'glass-prism-button text-white shadow-lg backdrop-blur-lg mobile-no-blur'\n                : 'text-gray-700 dark:text-gray-300 hover:bg-white/10 dark:hover:bg-black/10 hover:backdrop-blur-md mobile-no-blur'\n            }`}\n            data-testid=\"nav-overview\"\n          >\n            <PieChart className=\"h-5 w-5 mr-3\" />\n            <span className=\"font-medium\">Dashboard</span>\n          </button>\n        </div>\n        \n        <div className=\"space-y-1\">\n          {navigation.slice(1).map((item) => (\n            <button\n              key={item.id}\n              onClick={() => onSectionChange(item.id)}\n              className={`w-full flex items-center px-3 py-2.5 rounded-xl transition-all duration-300 group ${\n                activeSection === item.id\n                  ? 'glass-prism-button text-white shadow-lg backdrop-blur-lg mobile-no-blur'\n                  : 'text-gray-700 dark:text-gray-300 hover:bg-white/10 dark:hover:bg-black/10 hover:backdrop-blur-md mobile-no-blur'\n              }`}\n              data-testid={`nav-${item.id}`}\n            >\n              <item.icon className=\"h-5 w-5 mr-3\" />\n              <span className=\"font-medium\">{item.label}</span>\n              {item.badge !== undefined && item.badge > 0 && (\n                <Badge variant=\"destructive\" className=\"ml-auto text-xs\">\n                  {item.badge}\n                </Badge>\n              )}\n            </button>\n          ))}\n        </div>\n        \n        <div className=\"pt-6 border-t border-white/10 mt-6\">\n          <p className=\"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider px-2 mb-3\">Tools</p>\n          <div className=\"space-y-1\">\n            {toolsNav.map((item) => (\n              <button\n                key={item.id}\n                onClick={() => onSectionChange(item.id)}\n                className={`w-full flex items-center px-3 py-2.5 rounded-xl transition-all duration-300 group ${\n                  activeSection === item.id\n                    ? 'glass-prism-button text-white shadow-lg backdrop-blur-lg mobile-no-blur'\n                    : 'text-gray-700 dark:text-gray-300 hover:bg-white/10 dark:hover:bg-black/10 hover:backdrop-blur-md mobile-no-blur'\n                }`}\n                data-testid={`nav-${item.id}`}\n              >\n                <item.icon className=\"h-5 w-5 mr-3\" />\n                <span className=\"font-medium\">{item.label}</span>\n              </button>\n            ))}\n          </div>\n        </div>\n        \n        <div className=\"pt-6 border-t border-white/10 mt-6\">\n          <p className=\"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider px-2 mb-3\">Settings</p>\n          {settingsNav.map((item) => (\n            <button\n              key={item.id}\n              onClick={() => onSectionChange(item.id)}\n              className={`w-full flex items-center px-3 py-2.5 rounded-xl transition-all duration-300 group ${\n                activeSection === item.id\n                  ? 'glass-prism-button text-white shadow-lg backdrop-blur-lg mobile-no-blur'\n                  : 'text-gray-700 dark:text-gray-300 hover:bg-white/10 dark:hover:bg-black/10 hover:backdrop-blur-md mobile-no-blur'\n              }`}\n              data-testid={`nav-${item.id}`}\n            >\n              <item.icon className=\"h-5 w-5 mr-3\" />\n              <span className=\"font-medium\">{item.label}</span>\n            </button>\n          ))}\n        </div>\n      </nav>\n      \n      {/* Enhanced Upgrade/Trial Card at Bottom */}\n      {profile && profile.membershipStatus !== 'pro' && (\n        <div className=\"p-4\">\n          <div className={`relative glass-prism-card backdrop-blur-xl ${isTrialAvailable ? 'bg-gradient-to-br from-purple-500/10 via-pink-500/5 to-purple-500/10' : 'bg-gradient-to-br from-blue-500/10 via-purple-500/5 to-pink-500/10'} border border-white/20 rounded-2xl p-5 overflow-hidden shadow-2xl animate-float sm:animate-float mobile-no-blur`}>\n            {/* Background decoration */}\n            <div className={`absolute top-0 right-0 w-20 h-20 ${isTrialAvailable ? 'bg-gradient-to-br from-purple-400/20 to-pink-400/20' : 'bg-gradient-to-br from-blue-400/20 to-purple-400/20'} rounded-full -translate-y-10 translate-x-10 blur-xl mobile-hide`}></div>\n            <div className=\"absolute bottom-0 left-0 w-16 h-16 bg-gradient-to-br from-purple-400/20 to-pink-400/20 rounded-full translate-y-8 -translate-x-8 blur-xl mobile-hide\"></div>\n            \n            {/* Content */}\n            <div className=\"relative z-10\">\n              <div className=\"flex items-center mb-3\">\n                {isTrialAvailable ? (\n                  <>\n                    <Sparkles className=\"h-5 w-5 text-purple-500 mr-2\" />\n                    <h4 className=\"font-bold text-gray-800 dark:text-gray-100 text-sm\">Free Trial</h4>\n                  </>\n                ) : (\n                  <>\n                    <Crown className=\"h-5 w-5 text-yellow-500 mr-2\" />\n                    <h4 className=\"font-bold text-gray-800 dark:text-gray-100 text-sm\">Upgrade</h4>\n                  </>\n                )}\n              </div>\n              <p className=\"text-xs text-gray-600 dark:text-gray-300 mb-4 leading-relaxed\">\n                {isTrialAvailable ? '7 days free - No card required' : 'Upgrade to Pro to access all features'}\n              </p>\n              <Button \n                className={`w-full ${isTrialAvailable ? 'glass-prism-button backdrop-blur-lg bg-gradient-to-r from-purple-100 via-purple-200 to-purple-300 dark:from-purple-800 dark:via-purple-700 dark:to-purple-600 hover:from-purple-200 hover:via-purple-300 hover:to-purple-400 dark:hover:from-purple-700 dark:hover:via-purple-600 dark:hover:to-purple-500 text-purple-800 dark:text-purple-100 border border-purple-300/50 dark:border-purple-600/50' : 'glass-prism-button text-white'} shadow-lg text-xs h-9 font-semibold`}\n                data-testid={isTrialAvailable ? \"button-trial-sidebar\" : \"button-upgrade\"}\n                onClick={() => isTrialAvailable ? setIsTrialModalOpen(true) : setIsUpgradeModalOpen(true)}\n              >\n                {isTrialAvailable ? (\n                  <>\n                    <Sparkles className=\"h-4 w-4 mr-1\" />\n                    Start Free Trial\n                  </>\n                ) : 'Upgrade'}\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <TrialActivationModal \n        isOpen={isTrialModalOpen}\n        onClose={() => setIsTrialModalOpen(false)}\n      />\n\n      {/* Account Switcher */}\n      <div className=\"p-4 mt-auto\">\n        <DropdownMenu>\n          <DropdownMenuTrigger asChild>\n            <button \n              className=\"w-full glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 rounded-2xl p-4 hover:bg-white/20 dark:hover:bg-black/20 transition-all duration-300 shadow-lg hover:shadow-xl group mobile-no-blur\"\n              data-testid=\"button-account-switcher\"\n            >\n              <div className=\"flex items-center justify-between min-w-0\">\n                <div className=\"flex items-center space-x-3 min-w-0 flex-1\">\n                  <Avatar className=\"h-10 w-10 glass-prism border-2 border-white/30 flex-shrink-0\">\n                    <AvatarFallback className=\"glass-prism-button text-white text-sm font-semibold\">\n                      {profile?.fullName ? getInitials(profile.fullName) : getInitials(user?.email || 'U')}\n                    </AvatarFallback>\n                  </Avatar>\n                  <div className=\"text-left min-w-0 flex-1\">\n                    <p className=\"text-sm font-semibold text-gray-800 dark:text-gray-100 truncate max-w-full\" title={profile?.fullName || 'User'}>\n                      {profile?.fullName || 'User'}\n                    </p>\n                    <p className=\"text-xs text-gray-600 dark:text-gray-400 truncate max-w-full\" title={user?.email}>\n                      {user?.email}\n                    </p>\n                  </div>\n                </div>\n                <ChevronUp className=\"h-4 w-4 text-gray-600 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-200 transition-colors flex-shrink-0\" />\n              </div>\n            </button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent \n            align=\"end\" \n            side=\"top\"\n            className=\"w-64 glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-2xl mobile-no-blur\"\n          >\n            <div className=\"p-3\">\n              <div className=\"flex items-center space-x-3 mb-3 min-w-0\">\n                <Avatar className=\"h-12 w-12 glass-prism border-2 border-white/30 flex-shrink-0\">\n                  <AvatarFallback className=\"glass-prism-button text-white font-semibold\">\n                    {profile?.fullName ? getInitials(profile.fullName) : getInitials(user?.email || 'U')}\n                  </AvatarFallback>\n                </Avatar>\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"font-semibold text-gray-800 dark:text-gray-100 truncate\" title={profile?.fullName || 'User'}>\n                    {profile?.fullName || 'User'}\n                  </p>\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400 truncate\" title={user?.email}>\n                    {user?.email}\n                  </p>\n                  <div className=\"flex items-center mt-1\">\n                    <div className={`w-2 h-2 rounded-full mr-2 flex-shrink-0 ${profile?.membershipStatus === 'pro' ? 'bg-green-500' : 'bg-blue-500'}`}></div>\n                    <span className=\"text-xs font-medium text-gray-700 dark:text-gray-300 truncate\">\n                      {profile?.membershipStatus === 'pro' ? 'Pro Plan' : 'Starter Plan'}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <DropdownMenuSeparator className=\"bg-white/20\" />\n            <DropdownMenuItem \n              onClick={() => onSectionChange('settings')}\n              className=\"cursor-pointer hover:bg-white/10 dark:hover:bg-black/10 focus:bg-white/10 dark:focus:bg-black/10\"\n              data-testid=\"menu-account-settings\"\n            >\n              <User className=\"h-4 w-4 mr-3\" />\n              Account Settings\n            </DropdownMenuItem>\n            {profile?.membershipStatus !== 'pro' && (\n              <DropdownMenuItem \n                onClick={() => setIsUpgradeModalOpen(true)}\n                className=\"cursor-pointer hover:bg-white/10 dark:hover:bg-black/10 focus:bg-white/10 dark:focus:bg-black/10\"\n                data-testid=\"menu-upgrade\"\n              >\n                <Crown className=\"h-4 w-4 mr-3 text-yellow-500\" />\n                Upgrade to Pro\n              </DropdownMenuItem>\n            )}\n            <DropdownMenuSeparator className=\"bg-white/20\" />\n            <DropdownMenuItem \n              onClick={() => {\n                logout();\n                setLocation('/');\n              }}\n              className=\"cursor-pointer hover:bg-red-500/10 focus:bg-red-500/10 text-red-600 dark:text-red-400\"\n              data-testid=\"menu-logout\"\n            >\n              <LogOut className=\"h-4 w-4 mr-3\" />\n              Sign Out\n            </DropdownMenuItem>\n          </DropdownMenuContent>\n        </DropdownMenu>\n      </div>\n      \n      <UpgradeModal \n        isOpen={isUpgradeModalOpen} \n        onClose={() => setIsUpgradeModalOpen(false)} \n      />\n    </div>\n  );\n}\n","size_bytes":15004},"client/src/pages/dashboard.tsx":{"content":"import { useState } from 'react';\nimport Sidebar from '@/components/dashboard/sidebar';\nimport Overview from '@/components/dashboard/overview';\nimport PagesList from '@/components/dashboard/pages-list';\nimport AppointmentsList from '@/components/dashboard/appointments-list';\nimport ReviewsList from '@/components/dashboard/reviews-list';\nimport CalendarView from '@/components/dashboard/calendar';\nimport Notes from '@/components/dashboard/notes';\nimport HelpCenter from '@/components/dashboard/help-center';\nimport SupportBot from '@/components/dashboard/support-bot';\nimport { useAuth } from '@/hooks/use-auth';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Bell, Crown, LogOut, Home, Menu, X, Bug, Lightbulb, User, Shield, CreditCard, AlertTriangle, Calendar, RefreshCw, CheckCircle, Zap, Smartphone, Palette, Database, Search, Mail, Globe, Sparkles, Star, FileText, BookOpen, ArrowRight } from 'lucide-react';\nimport { Badge } from '@/components/ui/badge';\nimport { useLocation } from 'wouter';\nimport { useMutation, useQueryClient, useQuery } from '@tanstack/react-query';\nimport { apiRequest } from '@/lib/queryClient';\nimport { useToast } from '@/hooks/use-toast';\nimport { useCurrency } from '@/hooks/use-currency';\nimport UpgradeModal from '@/components/modals/upgrade-modal';\nimport BillingModal from '@/components/modals/billing-modal';\n\nexport default function Dashboard() {\n  const { user, profile } = useAuth();\n  const [activeSection, setActiveSection] = useState('overview');\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n\n  const renderContent = () => {\n    switch (activeSection) {\n      case 'pages':\n        return <PagesList />;\n      case 'appointments':\n        return <AppointmentsList />;\n      case 'analytics':\n        return <AnalyticsSection />;\n      case 'reviews':\n        return <ReviewsList />;\n      case 'calendar':\n        return <CalendarView />;\n      case 'notes':\n        return <Notes />;\n      case 'help-center':\n        return <HelpCenter />;\n      case 'settings':\n        return <SettingsSection />;\n      default:\n        return <Overview onSectionChange={setActiveSection} />;\n    }\n  };\n\n  const handleSectionChange = (section: string) => {\n    setActiveSection(section);\n    setIsMobileMenuOpen(false); // Close mobile menu when section changes\n  };\n\n  return (\n    <div className=\"min-h-screen page-gradient animate-fade-in relative overflow-hidden\">\n      {/* Glass prism background effects */}\n      <div className=\"absolute top-0 left-0 w-full h-full pointer-events-none overflow-hidden mobile-hide\">\n        <div className=\"absolute top-20 left-20 w-64 h-64 bg-gradient-to-br from-blue-400/10 via-purple-400/10 to-pink-400/10 rounded-full blur-3xl animate-float\"></div>\n        <div className=\"absolute top-40 right-32 w-48 h-48 bg-gradient-to-br from-green-400/10 via-cyan-400/10 to-blue-400/10 rounded-full blur-3xl animate-float-delayed\"></div>\n        <div className=\"absolute bottom-32 left-1/3 w-56 h-56 bg-gradient-to-br from-purple-400/10 via-pink-400/10 to-orange-400/10 rounded-full blur-3xl animate-float-slow\"></div>\n      </div>\n      \n      <div className=\"flex relative z-10\">\n        {/* Desktop Sidebar - Hidden on mobile */}\n        <div className=\"hidden lg:block\">\n          <Sidebar activeSection={activeSection} onSectionChange={handleSectionChange} />\n        </div>\n        \n        {/* Mobile Menu Overlay */}\n        {isMobileMenuOpen && (\n          <div className=\"lg:hidden fixed inset-0 z-50 flex animate-fade-in\">\n            {/* Backdrop */}\n            <div \n              className=\"fixed inset-0 bg-black/60 backdrop-blur-sm mobile-no-blur\" \n              onClick={() => setIsMobileMenuOpen(false)}\n            />\n            {/* Mobile Sidebar */}\n            <div className=\"relative w-64 h-full animate-slide-in-left\">\n              <Sidebar activeSection={activeSection} onSectionChange={handleSectionChange} />\n            </div>\n          </div>\n        )}\n        \n        <div className=\"flex-1 w-full lg:w-auto lg:ml-64\">\n          {/* Header */}\n          <header className=\"glass-prism-card mx-3 lg:mx-8 my-4 lg:my-6 px-4 lg:px-6 py-3 lg:py-4 backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 rounded-2xl shadow-2xl mobile-no-blur\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-4\">\n                {/* Mobile Menu Button */}\n                <button\n                  onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}\n                  className=\"lg:hidden p-2 rounded-xl glass-prism backdrop-blur-md bg-white/20 dark:bg-black/20 border border-white/30 hover:bg-white/30 dark:hover:bg-black/30 transition-all duration-300 min-touch-target\"\n                  data-testid=\"button-mobile-menu\"\n                >\n                  {isMobileMenuOpen ? (\n                    <X className=\"h-6 w-6 text-gray-700 dark:text-gray-200\" />\n                  ) : (\n                    <Menu className=\"h-6 w-6 text-gray-700 dark:text-gray-200\" />\n                  )}\n                </button>\n                \n                <div>\n                  <h1 className=\"text-xl lg:text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent\">Dashboard</h1>\n                  <p className=\"text-gray-600 dark:text-gray-300 text-sm lg:text-base break-words\">Manage your booking pages and appointments</p>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center space-x-4\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"w-8 h-8 lg:w-10 lg:h-10 rounded-full glass-prism flex items-center justify-center backdrop-blur-md bg-white/20 dark:bg-black/20 border border-white/30\">\n                    <span className=\"text-xs lg:text-sm font-medium text-gray-700 dark:text-gray-200\">\n                      {(user?.fullName || user?.email)?.charAt(0)?.toUpperCase() || 'U'}\n                    </span>\n                  </div>\n                  <div className=\"hidden sm:block\">\n                    <p className=\"text-sm font-medium text-gray-800 dark:text-gray-100 break-words\" data-testid=\"text-username\">\n                      {profile?.fullName || user?.email}\n                    </p>\n                    <p className=\"text-xs text-gray-600 dark:text-gray-300\" data-testid=\"text-membership-status\">\n                      {profile?.membershipStatus === 'pro' ? 'Pro Plan' : 'Starter Plan'}\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </header>\n\n          {/* Content */}\n          <div className=\"p-3 lg:p-8\">\n            <div className=\"animate-slide-up\">\n              {renderContent()}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\ninterface DashboardStats {\n  pagesCount: number;\n  totalAppointments: number;\n  pendingAppointments: number;\n  totalRevenue: number;\n  conversionRate: number;\n  avgBookingValue: number;\n}\n\nfunction AnalyticsSection() {\n  const { formatPrice } = useCurrency();\n\n  // Fetch dashboard statistics for analytics\n  const { data: dashboardStats, isLoading: statsLoading } = useQuery<DashboardStats>({\n    queryKey: ['/api/dashboard/stats'],\n    enabled: true\n  });\n\n  // Check for errors first\n  if (!statsLoading && dashboardStats === undefined) {\n    return (\n      <div className=\"animate-fade-in-up\">\n        <div className=\"mb-8\">\n          <h2 className=\"text-2xl font-bold text-foreground mb-2\">Analytics</h2>\n          <p className=\"text-muted-foreground\">Track your booking performance and revenue</p>\n        </div>\n        <Card className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-red-300/20 shadow-2xl\">\n          <CardContent className=\"p-6 text-center\">\n            <div className=\"text-4xl text-red-500 mb-4\">⚠️</div>\n            <p className=\"text-red-600 dark:text-red-400\">Failed to load analytics data</p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"animate-fade-in-up space-y-6\">\n      <div className=\"mb-8\">\n        <h2 className=\"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent mb-2\">Analytics</h2>\n        <p className=\"text-gray-600 dark:text-gray-300\">Track your booking performance and revenue</p>\n      </div>\n\n      <div className=\"grid lg:grid-cols-2 gap-4 lg:gap-6\">\n        <Card className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-2xl hover-lift mobile-no-blur animate-scale-in\" style={{animationDelay: '0.1s'}}>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-sm font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider\">Conversion Rate</h3>\n              <div className=\"w-12 h-12 rounded-xl glass-prism backdrop-blur-md bg-gradient-to-br from-blue-500/30 to-purple-500/30 border border-white/30 flex items-center justify-center\">\n                <span className=\"text-2xl\">📊</span>\n              </div>\n            </div>\n            <div className=\"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent mb-2\">\n              {statsLoading ? \"...\" : `${dashboardStats?.conversionRate || 0}%`}\n            </div>\n            <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n              {statsLoading \n                ? \"Loading...\" \n                : (dashboardStats?.totalAppointments || 0) === 0 \n                  ? \"Create pages to track conversions\" \n                  : `From ${dashboardStats?.totalAppointments || 0} total bookings`\n              }\n            </p>\n          </CardContent>\n        </Card>\n        \n        <Card className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-2xl hover-lift mobile-no-blur animate-scale-in\" style={{animationDelay: '0.2s'}}>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-sm font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider\">Avg. Booking Value</h3>\n              <div className=\"w-12 h-12 rounded-xl glass-prism backdrop-blur-md bg-gradient-to-br from-purple-500/30 to-pink-500/30 border border-white/30 flex items-center justify-center\">\n                <span className=\"text-2xl\">📈</span>\n              </div>\n            </div>\n            <div className=\"text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 dark:from-purple-400 dark:to-pink-400 bg-clip-text text-transparent mb-2\">\n              {statsLoading ? \"...\" : formatPrice(dashboardStats?.avgBookingValue || 0)}\n            </div>\n            <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n              {statsLoading \n                ? \"Loading...\" \n                : (dashboardStats?.totalAppointments || 0) === 0 \n                  ? \"No bookings yet\" \n                  : `Total revenue: ${formatPrice(dashboardStats?.totalRevenue || 0)}`\n              }\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-2xl mobile-no-blur animate-scale-in\" style={{animationDelay: '0.3s'}}>\n        <CardContent className=\"p-6\">\n          <h3 className=\"text-lg font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent mb-6\">Key Metrics Overview</h3>\n          {statsLoading ? (\n            <div className=\"h-64 glass-prism backdrop-blur-md bg-white/5 dark:bg-black/5 border border-white/10 rounded-xl flex items-center justify-center\">\n              <div className=\"text-center\">\n                <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4\"></div>\n                <p className=\"text-gray-600 dark:text-gray-400\">Loading analytics data...</p>\n              </div>\n            </div>\n          ) : dashboardStats?.totalAppointments === 0 ? (\n            <div className=\"h-64 glass-prism backdrop-blur-md bg-white/5 dark:bg-black/5 border border-white/10 rounded-xl flex items-center justify-center\">\n              <div className=\"text-center\">\n                <div className=\"text-5xl text-gray-400 mb-4\">📊</div>\n                <h4 className=\"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2\">No Data Yet</h4>\n                <p className=\"text-gray-600 dark:text-gray-400\">Analytics will appear here once you have booking data</p>\n              </div>\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6\">\n              <div className=\"text-center p-4 lg:p-6 glass-prism backdrop-blur-md bg-gradient-to-br from-blue-500/20 to-purple-500/20 border border-blue-300/30 dark:border-blue-600/30 rounded-xl mobile-no-blur hover-lift transition-all duration-300\">\n                <div className=\"text-3xl font-bold text-blue-600 dark:text-blue-400 mb-2\">{dashboardStats?.pagesCount || 0}</div>\n                <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Active Pages</p>\n              </div>\n              <div className=\"text-center p-4 lg:p-6 glass-prism backdrop-blur-md bg-gradient-to-br from-green-500/20 to-cyan-500/20 border border-green-300/30 dark:border-green-600/30 rounded-xl mobile-no-blur hover-lift transition-all duration-300\">\n                <div className=\"text-3xl font-bold text-green-600 dark:text-green-400 mb-2\">{dashboardStats?.totalAppointments || 0}</div>\n                <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Total Bookings</p>\n              </div>\n              <div className=\"text-center p-4 lg:p-6 glass-prism backdrop-blur-md bg-gradient-to-br from-orange-500/20 to-yellow-500/20 border border-orange-300/30 dark:border-orange-600/30 rounded-xl mobile-no-blur hover-lift transition-all duration-300\">\n                <div className=\"text-3xl font-bold text-orange-600 dark:text-orange-400 mb-2\">{dashboardStats?.pendingAppointments || 0}</div>\n                <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Pending Approval</p>\n              </div>\n              <div className=\"text-center p-4 lg:p-6 glass-prism backdrop-blur-md bg-gradient-to-br from-purple-500/20 to-pink-500/20 border border-purple-300/30 dark:border-purple-600/30 rounded-xl mobile-no-blur hover-lift transition-all duration-300\">\n                <div className=\"text-3xl font-bold text-purple-600 dark:text-purple-400 mb-2\">{formatPrice(dashboardStats?.totalRevenue || 0)}</div>\n                <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Total Revenue</p>\n              </div>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\ninterface BugFixesChangelogSectionProps {\n  onReportBug: () => void;\n}\n\nfunction BugFixesChangelogSection({ onReportBug }: BugFixesChangelogSectionProps) {\n  const changelogData = [\n    {\n      version: \"1.3.0\",\n      date: \"October 2025\",\n      type: \"feature\",\n      title: \"Customer Reviews Management\",\n      description: \"Added comprehensive review management system allowing you to manage and display customer feedback on your booking pages.\",\n      icon: Star,\n      items: [\n        \"Approve or decline customer reviews\",\n        \"Filter reviews by pending, approved, and declined status\",\n        \"Display reviews on public booking pages\",\n        \"Email notifications for new reviews\",\n        \"Star rating system with detailed feedback\"\n      ]\n    },\n    {\n      version: \"1.2.5\",\n      date: \"October 2025\",\n      type: \"fix\",\n      title: \"Tab Navigation Text Visibility Fix\",\n      description: \"Fixed issue where tab text disappeared when selected in the reviews section.\",\n      icon: Palette,\n      items: [\n        \"Fixed inactive tab text visibility\",\n        \"Improved tab color contrast\",\n        \"Enhanced active state styling\",\n        \"Better dark mode support for tabs\"\n      ]\n    },\n    {\n      version: \"1.2.0\",\n      date: \"October 2025\",\n      type: \"feature\",\n      title: \"Calendar & Scheduling Tools\",\n      description: \"Introduced powerful calendar management for viewing and organizing all your appointments in one place.\",\n      icon: Calendar,\n      items: [\n        \"Interactive calendar view of all appointments\",\n        \"Filter by appointment status\",\n        \"Quick appointment details preview\",\n        \"Navigate between months\",\n        \"Color-coded status indicators\"\n      ]\n    },\n    {\n      version: \"1.1.0\",\n      date: \"October 2025\",\n      type: \"feature\",\n      title: \"Notes & Documentation System\",\n      description: \"Added notes feature for keeping track of important information and reminders.\",\n      icon: FileText,\n      items: [\n        \"Create and manage personal notes\",\n        \"Archive old notes\",\n        \"Rich text support\",\n        \"Search and filter notes\",\n        \"Quick access from dashboard\"\n      ]\n    },\n    {\n      version: \"1.0.5\",\n      date: \"October 2025\",\n      type: \"feature\",\n      title: \"Help Center & Support Resources\",\n      description: \"Comprehensive help center with guides, tutorials, and FAQs to help you get the most out of BookingGen.\",\n      icon: BookOpen,\n      items: [\n        \"Getting started guides\",\n        \"Feature tutorials and walkthroughs\",\n        \"FAQ section with common questions\",\n        \"Category-based help articles\",\n        \"Search functionality for quick answers\"\n      ]\n    },\n    {\n      version: \"1.0.0\",\n      date: \"October 2025\",\n      type: \"feature\",\n      title: \"Core Booking Platform Launch\",\n      description: \"Initial release of BookingGen with essential booking page creation and management features.\",\n      icon: Zap,\n      items: [\n        \"Create unlimited booking pages\",\n        \"Customizable services and pricing\",\n        \"Appointment management dashboard\",\n        \"Email notifications for bookings\",\n        \"Mobile-responsive booking pages\",\n        \"Secure payment processing integration\"\n      ]\n    }\n  ];\n\n  return (\n    <div className=\"max-w-6xl mx-auto\">\n      {/* Header */}\n      <div className=\"mb-8\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h3 className=\"text-2xl font-bold bg-gradient-to-r from-blue-900 to-blue-700 dark:from-blue-100 dark:to-white bg-clip-text text-transparent mb-2\">\n              Bug Fixes & Changelogs\n            </h3>\n            <p className=\"text-gray-600 dark:text-gray-300\">\n              Stay updated with the latest features, improvements, and bug fixes\n            </p>\n          </div>\n          <div className=\"flex space-x-3\">\n            <Button\n              onClick={onReportBug}\n              className=\"glass-prism-button backdrop-blur-lg bg-gradient-to-r from-blue-100 via-blue-200 to-blue-300 dark:from-blue-800 dark:via-blue-700 dark:to-blue-600 text-blue-800 dark:text-blue-100 shadow-lg hover:scale-105 transition-all duration-300 border border-white/30\"\n              data-testid=\"button-report-bug-header\"\n            >\n              <Bug className=\"h-4 w-4 mr-2\" />\n              Report Bug\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n        <Card className=\"glass-prism-card backdrop-blur-xl bg-gradient-to-br from-white/90 via-blue-50/70 to-white/80 dark:from-gray-900/90 dark:via-blue-950/70 dark:to-gray-900/80 border border-white/30 dark:border-white/20 shadow-xl hover-lift\">\n          <CardContent className=\"p-6 text-center\">\n            <div className=\"w-12 h-12 glass-prism rounded-xl flex items-center justify-center mx-auto mb-4 backdrop-blur-md bg-gradient-to-br from-white/60 via-blue-50/40 to-white/50 border border-white/30\">\n              <Zap className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n            </div>\n            <div className=\"text-2xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent mb-2\">\n              {changelogData.filter(item => item.type === 'feature').length}\n            </div>\n            <p className=\"text-sm text-gray-600 dark:text-gray-400\">New Features</p>\n          </CardContent>\n        </Card>\n        \n        <Card className=\"glass-prism-card backdrop-blur-xl bg-gradient-to-br from-white/90 via-blue-50/70 to-white/80 dark:from-gray-900/90 dark:via-blue-950/70 dark:to-gray-900/80 border border-white/30 dark:border-white/20 shadow-xl hover-lift\">\n          <CardContent className=\"p-6 text-center\">\n            <div className=\"w-12 h-12 glass-prism rounded-xl flex items-center justify-center mx-auto mb-4 backdrop-blur-md bg-gradient-to-br from-white/60 via-blue-50/40 to-white/50 border border-white/30\">\n              <CheckCircle className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n            </div>\n            <div className=\"text-2xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent mb-2\">\n              {changelogData.filter(item => item.type === 'fix').length}\n            </div>\n            <p className=\"text-sm text-gray-600 dark:text-gray-400\">Bug Fixes</p>\n          </CardContent>\n        </Card>\n        \n        <Card className=\"glass-prism-card backdrop-blur-xl bg-gradient-to-br from-white/90 via-blue-50/70 to-white/80 dark:from-gray-900/90 dark:via-blue-950/70 dark:to-gray-900/80 border border-white/30 dark:border-white/20 shadow-xl hover-lift\">\n          <CardContent className=\"p-6 text-center\">\n            <div className=\"w-12 h-12 glass-prism rounded-xl flex items-center justify-center mx-auto mb-4 backdrop-blur-md bg-gradient-to-br from-white/60 via-blue-50/40 to-white/50 border border-white/30\">\n              <RefreshCw className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n            </div>\n            <div className=\"text-2xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent mb-2\">\n              {changelogData.length}\n            </div>\n            <p className=\"text-sm text-gray-600 dark:text-gray-400\">Total Updates</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Changelog Items */}\n      <div className=\"space-y-6\">\n        {changelogData.map((item, index) => (\n          <Card key={index} className=\"glass-prism-card backdrop-blur-xl bg-gradient-to-br from-white/90 via-blue-50/70 to-white/80 dark:from-gray-900/90 dark:via-blue-950/70 dark:to-gray-900/80 border border-white/30 dark:border-white/20 shadow-xl hover-lift\">\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-start space-x-4\">\n                <div className={`w-12 h-12 glass-prism rounded-xl flex items-center justify-center backdrop-blur-md bg-gradient-to-br from-white/60 via-blue-50/40 to-white/50 border border-white/30 flex-shrink-0`}>\n                  <item.icon className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n                </div>\n                \n                <div className=\"flex-1\">\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <div className=\"flex items-center space-x-3\">\n                      <h4 className=\"text-lg font-semibold bg-gradient-to-r from-blue-900 to-blue-700 dark:from-blue-100 dark:to-white bg-clip-text text-transparent\">\n                        {item.title}\n                      </h4>\n                      <div className={`glass-prism backdrop-blur-md px-3 py-1 rounded-full text-xs font-medium border border-white/30 ${\n                        item.type === 'feature' \n                          ? 'bg-gradient-to-r from-white/60 via-blue-50/40 to-white/50 text-blue-800 dark:text-blue-100'\n                          : 'bg-gradient-to-r from-white/60 via-blue-50/40 to-white/50 text-blue-800 dark:text-blue-100'\n                      }`}>\n                        {item.type === 'feature' ? 'New Feature' : 'Bug Fix'}\n                      </div>\n                    </div>\n                    <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                      v{item.version} • {item.date}\n                    </div>\n                  </div>\n                  \n                  <p className=\"text-gray-600 dark:text-gray-300 mb-4\">\n                    {item.description}\n                  </p>\n                  \n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n                    {item.items.map((subItem, subIndex) => (\n                      <div key={subIndex} className=\"flex items-center space-x-2\">\n                        <div className=\"w-4 h-4 glass-prism rounded-full flex items-center justify-center backdrop-blur-md bg-gradient-to-br from-white/60 via-blue-50/50 to-white/40 border border-white/30 flex-shrink-0\">\n                          <CheckCircle className=\"h-2.5 w-2.5 text-blue-600 dark:text-blue-400\" />\n                        </div>\n                        <span className=\"text-sm text-gray-700 dark:text-gray-300\">{subItem}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {/* CTA Section */}\n      <Card className=\"mt-8 glass-prism-card backdrop-blur-xl bg-gradient-to-br from-white/90 via-blue-50/70 to-white/80 dark:from-gray-900/90 dark:via-blue-950/70 dark:to-gray-900/80 border border-white/30 dark:border-white/20 shadow-xl\">\n        <CardContent className=\"p-8 text-center\">\n          <div className=\"w-16 h-16 glass-prism rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-md bg-gradient-to-br from-white/60 via-blue-50/40 to-white/50 border border-white/30\">\n            <Bug className=\"h-8 w-8 text-blue-600 dark:text-blue-400\" />\n          </div>\n          <h4 className=\"text-xl font-bold bg-gradient-to-r from-blue-900 to-blue-700 dark:from-blue-100 dark:to-white bg-clip-text text-transparent mb-2\">\n            Found a Bug or Have Feedback?\n          </h4>\n          <p className=\"text-gray-600 dark:text-gray-300 mb-6 max-w-2xl mx-auto\">\n            Help us improve BookingGen by reporting bugs or suggesting new features. Your feedback is valuable to us!\n          </p>\n          <div className=\"flex justify-center space-x-4\">\n            <Button\n              onClick={onReportBug}\n              className=\"glass-prism-button backdrop-blur-lg bg-gradient-to-r from-blue-100 via-blue-200 to-blue-300 dark:from-blue-800 dark:via-blue-700 dark:to-blue-600 text-blue-800 dark:text-blue-100 shadow-lg hover:scale-105 transition-all duration-300 border border-white/30\"\n              data-testid=\"button-report-bug-footer\"\n            >\n              <Bug className=\"h-4 w-4 mr-2\" />\n              Report a Bug\n            </Button>\n            <Button\n              variant=\"outline\"\n              onClick={() => window.open('mailto:team@bookinggen.xyz?subject=Feature Request', '_blank')}\n              className=\"glass-prism backdrop-blur-md bg-gradient-to-r from-white/40 via-blue-50/30 to-white/30 dark:from-gray-800/40 dark:via-blue-950/30 dark:to-gray-800/30 border border-white/30 hover:bg-white/50 dark:hover:bg-gray-800/50 transition-all duration-300 text-blue-700 dark:text-blue-300\"\n              data-testid=\"button-request-feature-footer\"\n            >\n              <Lightbulb className=\"h-4 w-4 mr-2\" />\n              Request Feature\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\nfunction SettingsSection() {\n  const { user, profile, logout, resetPassword } = useAuth();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [, setLocation] = useLocation();\n  const [showUpgradeModal, setShowUpgradeModal] = useState(false);\n  const [showBillingModal, setShowBillingModal] = useState(false);\n  const [resetPasswordLoading, setResetPasswordLoading] = useState(false);\n  const [cancelSubscriptionLoading, setCancelSubscriptionLoading] = useState(false);\n  const [activeTab, setActiveTab] = useState('account');\n  const [formData, setFormData] = useState({\n    fullName: profile?.fullName || '',\n    email: user?.email || '',\n    timezone: 'pacific'\n  });\n\n  const updateProfileMutation = useMutation({\n    mutationFn: async (data: { fullName: string; timezone: string }) => {\n      const response = await apiRequest('PATCH', '/api/profile', data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/profile'] });\n      toast({\n        title: \"Profile updated!\",\n        description: \"Your profile changes have been saved.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Update failed\",\n        description: error.message || \"Failed to update profile. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handlePasswordReset = async () => {\n    if (!user?.email) return;\n    \n    setResetPasswordLoading(true);\n    try {\n      await resetPassword(user.email);\n      toast({\n        title: \"Password reset email sent!\",\n        description: \"Check your email for instructions to reset your password.\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Reset failed\",\n        description: \"Failed to send password reset email. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setResetPasswordLoading(false);\n    }\n  };\n\n  const handleCancelSubscription = async () => {\n    setCancelSubscriptionLoading(true);\n    try {\n      const response = await apiRequest('POST', '/api/razorpay/cancel-subscription', {});\n      if (response.ok) {\n        queryClient.invalidateQueries({ queryKey: ['/api/profile'] });\n        toast({\n          title: \"Subscription cancelled\",\n          description: \"Your subscription will remain active until the end of your billing period.\",\n        });\n      } else {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to cancel subscription');\n      }\n    } catch (error: any) {\n      toast({\n        title: \"Cancellation failed\",\n        description: error.message || \"Failed to cancel subscription. Please contact support.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setCancelSubscriptionLoading(false);\n    }\n  };\n\n  const handleManageBilling = () => {\n    setShowBillingModal(true);\n  };\n  \n  const settingsTabs = [\n    { id: 'account', label: 'Account', icon: User },\n    { id: 'changelog', label: 'Bug Fixes & Changelogs', icon: Bug },\n  ];\n\n  return (\n    <div>\n      <div className=\"mb-8\">\n        <h2 className=\"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent mb-2\">Settings</h2>\n        <p className=\"text-gray-600 dark:text-gray-300\">Manage your account and preferences</p>\n      </div>\n\n      {/* Settings Navigation Tabs */}\n      <div className=\"mb-8\">\n        <div className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 rounded-2xl p-2 shadow-xl\">\n          <div className=\"flex space-x-2\">\n            {settingsTabs.map((tab) => (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id)}\n                className={`flex-1 flex items-center justify-center px-4 py-3 rounded-xl transition-all duration-300 ${\n                  activeTab === tab.id\n                    ? 'glass-prism-button text-white shadow-lg backdrop-blur-lg'\n                    : 'text-gray-700 dark:text-gray-300 hover:bg-white/10 dark:hover:bg-black/10 hover:backdrop-blur-md'\n                }`}\n                data-testid={`tab-${tab.id}`}\n              >\n                <tab.icon className=\"h-5 w-5 mr-2\" />\n                <span className=\"font-medium\">{tab.label}</span>\n              </button>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Tab Content */}\n      {activeTab === 'account' ? (\n        <div className=\"max-w-4xl\">\n          <div className=\"grid lg:grid-cols-2 gap-8\">\n          <Card className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-2xl hover-lift\">\n            <CardContent className=\"p-8\">\n              <h3 className=\"text-lg font-semibold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent mb-6\">Profile Information</h3>\n              <form className=\"space-y-6\" onSubmit={(e) => {\n                e.preventDefault();\n                updateProfileMutation.mutate({\n                  fullName: formData.fullName,\n                  timezone: formData.timezone\n                });\n              }}>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"fullName\">Full Name</Label>\n                  <Input \n                    id=\"fullName\"\n                    type=\"text\" \n                    value={formData.fullName}\n                    onChange={(e) => setFormData(prev => ({ ...prev, fullName: e.target.value }))}\n                    className=\"h-12\"\n                    data-testid=\"input-fullname\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"email\">Email Address</Label>\n                  <Input \n                    id=\"email\"\n                    type=\"email\" \n                    value={formData.email}\n                    disabled\n                    className=\"h-12 bg-muted/50\"\n                    data-testid=\"input-email\"\n                  />\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">Email cannot be changed</p>\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"timezone\">Time Zone</Label>\n                  <Select value={formData.timezone} onValueChange={(value) => setFormData(prev => ({ ...prev, timezone: value }))}>\n                    <SelectTrigger className=\"h-12\">\n                      <SelectValue placeholder=\"Select timezone\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"pacific\">UTC-08:00 (Pacific Time)</SelectItem>\n                      <SelectItem value=\"eastern\">UTC-05:00 (Eastern Time)</SelectItem>\n                      <SelectItem value=\"gmt\">UTC+00:00 (GMT)</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                <Button \n                  type=\"submit\" \n                  size=\"lg\" \n                  className=\"w-full h-12 glass-prism-button text-white shadow-lg backdrop-blur-lg\" \n                  data-testid=\"button-save-changes\"\n                >\n                  Save Changes\n                </Button>\n              </form>\n            </CardContent>\n          </Card>\n\n          <Card className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-2xl hover-lift\">\n            <CardContent className=\"p-8\">\n              <h3 className=\"text-lg font-semibold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent mb-6\">Notification Preferences</h3>\n              <div className=\"space-y-6\">\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <p className=\"font-medium text-gray-800 dark:text-gray-100\">Email Notifications</p>\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">Receive booking confirmations and updates via email</p>\n                  </div>\n                  <Checkbox defaultChecked className=\"mt-1\" />\n                </div>\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <p className=\"font-medium text-gray-800 dark:text-gray-100\">SMS Reminders</p>\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">Get text reminders for upcoming appointments</p>\n                  </div>\n                  <Checkbox className=\"mt-1\" />\n                </div>\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <p className=\"font-medium text-gray-800 dark:text-gray-100\">Marketing Updates</p>\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">Receive product updates and helpful tips</p>\n                  </div>\n                  <Checkbox defaultChecked className=\"mt-1\" />\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Security Settings */}\n        <Card className=\"mt-8 glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-2xl hover-lift\">\n          <CardContent className=\"p-8\">\n            <h3 className=\"text-lg font-semibold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent mb-6 flex items-center\">\n              <Shield className=\"h-5 w-5 mr-2\" />\n              Security Settings\n            </h3>\n            <div className=\"space-y-6\">\n              <div className=\"flex items-center justify-between p-4 glass-prism backdrop-blur-md bg-white/5 dark:bg-black/5 border border-white/10 rounded-xl\">\n                <div>\n                  <p className=\"font-medium text-gray-800 dark:text-gray-100\">Password</p>\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">Reset your account password</p>\n                </div>\n                <Button\n                  onClick={handlePasswordReset}\n                  disabled={resetPasswordLoading}\n                  className=\"glass-prism-button text-white shadow-lg backdrop-blur-lg h-10 px-4\"\n                  data-testid=\"button-reset-password\"\n                >\n                  {resetPasswordLoading ? (\n                    <>\n                      <RefreshCw className=\"h-4 w-4 mr-2 animate-spin\" />\n                      Sending...\n                    </>\n                  ) : (\n                    <>\n                      <Shield className=\"h-4 w-4 mr-2\" />\n                      Reset Password\n                    </>\n                  )}\n                </Button>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Subscription Management */}\n        <Card className=\"mt-8 glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-2xl hover-lift\">\n          <CardContent className=\"p-8\">\n            <h3 className=\"text-lg font-semibold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent mb-6 flex items-center\">\n              <CreditCard className=\"h-5 w-5 mr-2\" />\n              Subscription Management\n            </h3>\n            \n            {profile?.membershipStatus === 'pro' ? (\n              <div className=\"space-y-6\">\n                {/* Plan Status */}\n                <div className={`glass-prism backdrop-blur-md ${(profile as any)?.trialStatus === 'active' ? 'bg-gradient-to-br from-purple-500/10 to-pink-500/10 border border-purple-500/20' : 'bg-gradient-to-br from-green-500/10 to-emerald-500/10 border border-green-500/20'} rounded-xl p-6`}>\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <div className=\"flex items-center\">\n                      <div className={`w-10 h-10 glass-prism rounded-xl flex items-center justify-center mr-3 backdrop-blur-md ${(profile as any)?.trialStatus === 'active' ? 'bg-purple-500/20 border border-purple-500/30' : 'bg-green-500/20 border border-green-500/30'}`}>\n                        {(profile as any)?.trialStatus === 'active' ? (\n                          <Sparkles className=\"h-5 w-5 text-purple-600 dark:text-purple-400\" />\n                        ) : (\n                          <Crown className=\"h-5 w-5 text-green-600 dark:text-green-400\" />\n                        )}\n                      </div>\n                      <div>\n                        <div className=\"flex items-center gap-2\">\n                          <h4 className=\"font-semibold text-gray-800 dark:text-gray-100\">\n                            {(profile as any)?.trialStatus === 'active' ? 'Free Trial' : 'Pro Plan'}\n                          </h4>\n                          {(profile as any)?.trialStatus === 'active' && (\n                            <Badge className=\"bg-purple-500/20 text-purple-700 dark:text-purple-300 border-purple-500/30 text-xs\">\n                              Trial\n                            </Badge>\n                          )}\n                        </div>\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400\">All features unlocked</p>\n                      </div>\n                    </div>\n                    <div className=\"text-right\">\n                      <div className={`text-sm font-medium mb-1 flex items-center ${(profile as any)?.trialStatus === 'active' ? 'text-purple-600 dark:text-purple-400' : 'text-green-600 dark:text-green-400'}`}>\n                        <div className={`w-2 h-2 rounded-full mr-2 ${(profile as any)?.trialStatus === 'active' ? 'bg-purple-500' : 'bg-green-500'}`}></div>\n                        Active\n                      </div>\n                      {profile?.membershipExpires && (\n                        <p className=\"text-sm text-gray-500 dark:text-gray-400 flex items-center\">\n                          <Calendar className=\"h-3 w-3 mr-1\" />\n                          {(profile as any)?.trialStatus === 'active' \n                            ? `Trial ends ${new Date(profile.membershipExpires).toLocaleDateString()}`\n                            : `Renews ${new Date(profile.membershipExpires).toLocaleDateString()}`\n                          }\n                        </p>\n                      )}\n                    </div>\n                  </div>\n                  \n                  {/* Plan Features */}\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6\">\n                    {['Unlimited pages', 'Custom branding', 'Analytics', 'Priority support'].map((feature) => (\n                      <div key={feature} className=\"flex items-center\">\n                        <div className=\"w-4 h-4 glass-prism rounded-full flex items-center justify-center mr-2 backdrop-blur-md bg-green-500/20 border border-green-500/30\">\n                          <div className=\"w-1.5 h-1.5 bg-green-600 dark:bg-green-400 rounded-full\"></div>\n                        </div>\n                        <span className=\"text-xs text-gray-700 dark:text-gray-300\">{feature}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Subscription Actions */}\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                  <Button\n                    variant=\"outline\"\n                    className=\"glass-prism backdrop-blur-md bg-white/10 dark:bg-black/10 border border-white/20 hover:bg-white/20 dark:hover:bg-black/20 transition-all duration-300 flex items-center justify-center h-12\"\n                    onClick={handleManageBilling}\n                    data-testid=\"button-manage-billing\"\n                  >\n                    <CreditCard className=\"h-4 w-4 mr-2\" />\n                    Manage Billing\n                  </Button>\n                  <Button\n                    variant=\"destructive\"\n                    className=\"glass-prism backdrop-blur-md bg-red-500/20 dark:bg-red-600/20 border border-red-500/30 hover:bg-red-500/30 dark:hover:bg-red-600/30 text-red-700 dark:text-red-400 font-medium transition-all duration-300 flex items-center justify-center h-12\"\n                    onClick={handleCancelSubscription}\n                    disabled={cancelSubscriptionLoading}\n                    data-testid=\"button-cancel-subscription\"\n                  >\n                    {cancelSubscriptionLoading ? (\n                      <>\n                        <RefreshCw className=\"h-4 w-4 mr-2 animate-spin\" />\n                        Cancelling...\n                      </>\n                    ) : (\n                      <>\n                        <AlertTriangle className=\"h-4 w-4 mr-2\" />\n                        Cancel Subscription\n                      </>\n                    )}\n                  </Button>\n                </div>\n              </div>\n            ) : (\n              <div className=\"glass-prism backdrop-blur-md bg-gradient-to-br from-blue-500/10 to-purple-500/10 border border-blue-500/20 rounded-xl p-6 text-center\">\n                <div className=\"w-16 h-16 glass-prism rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-md bg-blue-500/20 border border-blue-500/30\">\n                  <Crown className=\"h-8 w-8 text-blue-600 dark:text-blue-400\" />\n                </div>\n                <h4 className=\"font-semibold text-gray-800 dark:text-gray-100 mb-2\">Starter Plan</h4>\n                <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-4\">Limited features available</p>\n                <Button\n                  className=\"glass-prism-button text-white shadow-lg backdrop-blur-lg\"\n                  onClick={() => setShowUpgradeModal(true)}\n                  data-testid=\"button-upgrade-to-pro\"\n                >\n                  <Crown className=\"h-4 w-4 mr-2\" />\n                  Upgrade to Pro\n                </Button>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Extras Section */}\n        <Card className=\"mt-8 glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-2xl\">\n          <CardContent className=\"p-8\">\n            <h3 className=\"text-lg font-semibold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent mb-6\">Extras</h3>\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n              <Button\n                variant=\"outline\"\n                className=\"glass-prism backdrop-blur-md bg-white/10 dark:bg-black/10 border border-white/20 hover:bg-white/20 dark:hover:bg-black/20 transition-all duration-300 flex items-center justify-center h-12 text-left\"\n                onClick={() => setLocation('/report-bug')}\n                data-testid=\"button-report-bug\"\n              >\n                <Bug className=\"h-4 w-4 mr-2 text-red-500\" />\n                Report a Bug\n              </Button>\n              <Button\n                variant=\"outline\"\n                className=\"glass-prism backdrop-blur-md bg-white/10 dark:bg-black/10 border border-white/20 hover:bg-white/20 dark:hover:bg-black/20 transition-all duration-300 flex items-center justify-center h-12 text-left\"\n                onClick={() => setLocation('/request-feature')}\n                data-testid=\"button-request-feature\"\n              >\n                <Lightbulb className=\"h-4 w-4 mr-2 text-yellow-500\" />\n                Request a Feature\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Account Actions */}\n        <Card className=\"mt-8 glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-2xl\">\n          <CardContent className=\"p-8\">\n            <h3 className=\"text-lg font-semibold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent mb-6\">Account Actions</h3>\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n              <Button\n                variant=\"outline\"\n                className=\"glass-prism backdrop-blur-md bg-white/10 dark:bg-black/10 border border-white/20 hover:bg-white/20 dark:hover:bg-black/20 transition-all duration-300 flex items-center justify-center h-12 w-full\"\n                onClick={() => setLocation('/')}\n                data-testid=\"button-back-home\"\n              >\n                <Home className=\"h-4 w-4 mr-2\" />\n                Back to Homepage\n              </Button>\n              <Button\n                variant=\"destructive\"\n                className=\"bg-red-500 hover:bg-red-600 dark:bg-red-600 dark:hover:bg-red-700 text-white font-semibold transition-all duration-300 flex items-center justify-center h-12 w-full shadow-lg hover:shadow-xl border-0\"\n                onClick={() => {\n                  logout();\n                  setLocation('/');\n                }}\n                data-testid=\"button-logout\"\n              >\n                <LogOut className=\"h-4 w-4 mr-2 text-white\" />\n                Logout\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Server Status Information */}\n        <Card className=\"mt-8 glass-prism-card backdrop-blur-xl bg-gradient-to-r from-yellow-400/20 via-amber-400/20 to-yellow-400/20 border-yellow-500/50 dark:border-yellow-600/50 shadow-2xl\">\n          <CardContent className=\"p-8\">\n            <div className=\"flex items-start gap-6\">\n              <div className=\"w-16 h-16 glass-prism rounded-full flex items-center justify-center backdrop-blur-md bg-gradient-to-br from-yellow-500/30 to-amber-500/30 border border-yellow-400/50 dark:border-yellow-600/50 flex-shrink-0\">\n                <AlertTriangle className=\"h-8 w-8 text-yellow-700 dark:text-yellow-400\" />\n              </div>\n              <div className=\"flex-1\">\n                <h3 className=\"text-xl font-bold bg-gradient-to-r from-yellow-900 to-amber-900 dark:from-yellow-100 dark:to-amber-100 bg-clip-text text-transparent mb-3\">\n                  Server Load Information\n                </h3>\n                <p className=\"text-gray-700 dark:text-gray-300 mb-4\">\n                  If you've recently purchased a membership, activated your free trial, or upgraded to Pro, please allow 2-5 minutes for activation. We're experiencing higher than normal traffic and are working to resolve this.\n                </p>\n                <Button\n                  onClick={() => setLocation('/subscription-delays')}\n                  className=\"glass-prism-button backdrop-blur-lg bg-gradient-to-r from-yellow-100 via-yellow-200 to-yellow-300 dark:from-yellow-800 dark:via-yellow-700 dark:to-yellow-600 hover:from-yellow-200 hover:via-yellow-300 hover:to-yellow-400 dark:hover:from-yellow-700 dark:hover:via-yellow-600 dark:hover:to-yellow-500 text-yellow-800 dark:text-yellow-100 shadow-lg hover:scale-105 transition-all duration-300 border border-yellow-400/50 dark:border-yellow-600/50 font-semibold h-10\"\n                  data-testid=\"button-read-more-server-info\"\n                >\n                  Learn more <ArrowRight className=\"h-4 w-4 ml-2\" />\n                </Button>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n        </div>\n      ) : (\n        <BugFixesChangelogSection onReportBug={() => setLocation('/report-bug')} />\n      )}\n\n      <UpgradeModal \n        isOpen={showUpgradeModal} \n        onClose={() => setShowUpgradeModal(false)} \n      />\n\n      <BillingModal \n        isOpen={showBillingModal} \n        onClose={() => setShowBillingModal(false)} \n      />\n\n      <SupportBot />\n    </div>\n  );\n}\n","size_bytes":51999},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"client/src/pages/tutorial.tsx":{"content":"import Header from '@/components/layout/header';\nimport Footer from '@/components/layout/footer';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Dialog, DialogContent, DialogTrigger, DialogTitle, DialogDescription } from '@/components/ui/dialog';\nimport { useLocation } from 'wouter';\nimport { \n  Play, \n  ArrowRight, \n  Clock, \n  Users, \n  CreditCard, \n  CheckCircle,\n  PlayCircle,\n  Monitor,\n  Smartphone,\n  Expand\n} from 'lucide-react';\nimport dashboardImage from '@assets/image_1758020681382.png';\nimport demoVideo from '@assets/0916_1758025696817.mp4';\n\nexport default function Tutorial() {\n  const [, setLocation] = useLocation();\n\n  const steps = [\n    {\n      id: 1,\n      title: \"Create Your Booking Page\",\n      description: \"Set up your professional booking page in minutes\",\n      duration: \"2 min\",\n      details: [\n        \"Choose your page name and URL\",\n        \"Add your services and pricing\", \n        \"Customize your branding and colors\",\n        \"Set your availability hours\"\n      ]\n    },\n    {\n      id: 2,\n      title: \"Configure Your Services\",\n      description: \"Define what you offer and how long each service takes\",\n      duration: \"3 min\", \n      details: [\n        \"Add service names and descriptions\",\n        \"Set duration for each service\",\n        \"Configure pricing (optional)\",\n        \"Upload service images\"\n      ]\n    },\n    {\n      id: 3,\n      title: \"Share Your Booking Link\",\n      description: \"Make it easy for clients to find and book with you\",\n      duration: \"1 min\",\n      details: [\n        \"Copy your unique booking URL\",\n        \"Add to your website or social media\",\n        \"Share via email or messaging\",\n        \"Embed on your existing website\"\n      ]\n    },\n    {\n      id: 4,\n      title: \"Manage Your Bookings\",\n      description: \"Track appointments and communicate with clients\",\n      duration: \"Ongoing\",\n      details: [\n        \"View all bookings in your dashboard\",\n        \"Accept or decline appointments\",\n        \"Send messages to clients\",\n        \"Track your revenue and analytics\"\n      ]\n    }\n  ];\n\n  const benefits = [\n    {\n      icon: Clock,\n      title: \"Save Time\",\n      description: \"Automate your booking process and reduce back-and-forth communication\"\n    },\n    {\n      icon: Users,\n      title: \"Better Experience\", \n      description: \"Provide clients with a professional, easy-to-use booking experience\"\n    },\n    {\n      icon: Monitor,\n      title: \"Real-time Analytics\",\n      description: \"Track your business performance with detailed insights and reporting\"\n    }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Header />\n      \n      <main className=\"container mx-auto px-4 py-16\">\n        {/* Hero Section */}\n        <div className=\"text-center max-w-3xl mx-auto mb-16\">\n          <Badge className=\"mb-4\" data-testid=\"badge-tutorial\">\n            Tutorial\n          </Badge>\n          <h1 className=\"text-4xl md:text-5xl font-bold mb-6 text-foreground\" data-testid=\"text-tutorial-title\">\n            How BookingGen Works\n          </h1>\n          <p className=\"text-xl text-muted-foreground mb-8\" data-testid=\"text-tutorial-subtitle\">\n            Learn how to create your professional booking page and start accepting appointments in under 10 minutes.\n          </p>\n          \n          {/* Demo Video */}\n          <Card className=\"max-w-2xl mx-auto mb-8\">\n            <CardContent className=\"p-8\">\n              <div className=\"mb-4\">\n                <h3 className=\"text-lg font-semibold mb-4 text-center\">Demo Video</h3>\n                <Dialog>\n                  <DialogTrigger asChild>\n                    <div className=\"relative aspect-video bg-black rounded-lg overflow-hidden cursor-pointer group\" data-testid=\"video-container\">\n                      <video \n                        className=\"w-full h-full object-cover\"\n                        controls\n                        preload=\"metadata\"\n                        data-testid=\"demo-video\"\n                      >\n                        <source src={demoVideo} type=\"video/mp4\" />\n                        Your browser does not support the video tag.\n                      </video>\n                      <div className=\"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100 pointer-events-none\">\n                        <div className=\"bg-white/90 rounded-full p-3\">\n                          <Expand className=\"h-6 w-6 text-gray-800\" />\n                        </div>\n                      </div>\n                    </div>\n                  </DialogTrigger>\n                  <DialogContent className=\"max-w-5xl w-full\" data-testid=\"dialog-video-fullscreen\">\n                    <DialogTitle>Demo Video - Full Screen</DialogTitle>\n                    <DialogDescription>\n                      Complete walkthrough of BookingGen features and setup process\n                    </DialogDescription>\n                    <div className=\"aspect-video\">\n                      <video \n                        className=\"w-full h-full rounded-lg\"\n                        controls\n                        autoPlay\n                        data-testid=\"demo-video-fullscreen\"\n                      >\n                        <source src={demoVideo} type=\"video/mp4\" />\n                        Your browser does not support the video tag.\n                      </video>\n                    </div>\n                  </DialogContent>\n                </Dialog>\n              </div>\n              <div className=\"flex items-center justify-center space-x-4 text-sm text-muted-foreground\">\n                <div className=\"flex items-center\">\n                  <Clock className=\"h-4 w-4 mr-1\" />\n                  Complete walkthrough\n                </div>\n                <div className=\"flex items-center\">\n                  <Monitor className=\"h-4 w-4 mr-1\" />\n                  Full demo\n                </div>\n                <div className=\"flex items-center\">\n                  <Expand className=\"h-4 w-4 mr-1\" />\n                  Fullscreen mode\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Step by step process */}\n        <div className=\"mb-16\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl font-bold mb-4 text-foreground\" data-testid=\"text-process-title\">\n              Step-by-Step Process\n            </h2>\n            <p className=\"text-lg text-muted-foreground\" data-testid=\"text-process-subtitle\">\n              Follow these simple steps to get your booking system up and running\n            </p>\n          </div>\n          \n          <div className=\"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto\">\n            {steps.map((step, index) => (\n              <Card key={step.id} className=\"relative\" data-testid={`card-step-${step.id}`}>\n                <CardHeader>\n                  <div className=\"flex items-center justify-between\">\n                    <Badge variant=\"outline\" className=\"w-8 h-8 rounded-full flex items-center justify-center p-0\">\n                      {step.id}\n                    </Badge>\n                    <span className=\"text-sm text-muted-foreground flex items-center\">\n                      <Clock className=\"h-4 w-4 mr-1\" />\n                      {step.duration}\n                    </span>\n                  </div>\n                  <CardTitle className=\"text-xl\" data-testid={`text-step-title-${step.id}`}>\n                    {step.title}\n                  </CardTitle>\n                  <CardDescription data-testid={`text-step-description-${step.id}`}>\n                    {step.description}\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <ul className=\"space-y-2\">\n                    {step.details.map((detail, detailIndex) => (\n                      <li key={detailIndex} className=\"flex items-start\" data-testid={`text-step-detail-${step.id}-${detailIndex}`}>\n                        <CheckCircle className=\"h-4 w-4 text-primary mr-2 mt-0.5 flex-shrink-0\" />\n                        <span className=\"text-sm text-foreground\">{detail}</span>\n                      </li>\n                    ))}\n                  </ul>\n                </CardContent>\n                \n                {/* Connection line for larger screens */}\n                {index < steps.length - 1 && (\n                  <div className=\"hidden md:block absolute top-8 -right-4 w-8 h-0.5 bg-border z-10\"></div>\n                )}\n              </Card>\n            ))}\n          </div>\n        </div>\n\n        {/* Benefits Section */}\n        <div className=\"mb-16\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl font-bold mb-4 text-foreground\" data-testid=\"text-benefits-title\">\n              Why Choose BookingGen?\n            </h2>\n            <p className=\"text-lg text-muted-foreground\" data-testid=\"text-benefits-subtitle\">\n              See the benefits you'll get from using our booking platform\n            </p>\n          </div>\n          \n          <div className=\"grid md:grid-cols-3 gap-8 max-w-4xl mx-auto\">\n            {benefits.map((benefit, index) => (\n              <Card key={index} className=\"text-center\" data-testid={`card-benefit-${index}`}>\n                <CardContent className=\"pt-6\">\n                  <benefit.icon className=\"h-12 w-12 text-primary mx-auto mb-4\" />\n                  <h3 className=\"text-lg font-semibold mb-2\" data-testid={`text-benefit-title-${index}`}>\n                    {benefit.title}\n                  </h3>\n                  <p className=\"text-muted-foreground\" data-testid={`text-benefit-description-${index}`}>\n                    {benefit.description}\n                  </p>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n\n        {/* Screenshots placeholder */}\n        <div className=\"mb-16\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl font-bold mb-4 text-foreground\" data-testid=\"text-screenshots-title\">\n              See It In Action\n            </h2>\n            <p className=\"text-lg text-muted-foreground\" data-testid=\"text-screenshots-subtitle\">\n              Screenshots of the actual booking process\n            </p>\n          </div>\n          \n          <div className=\"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto\">\n            <Card data-testid=\"card-screenshot-1\">\n              <CardContent className=\"p-6\">\n                <Dialog>\n                  <DialogTrigger asChild>\n                    <div className=\"relative aspect-video bg-muted rounded-lg overflow-hidden mb-4 cursor-pointer group\">\n                      <img \n                        src={dashboardImage} \n                        alt=\"BookingGen Dashboard Screenshot\" \n                        className=\"w-full h-full object-cover transition-transform group-hover:scale-105\"\n                        data-testid=\"img-dashboard-preview\"\n                      />\n                      <div className=\"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100\">\n                        <div className=\"bg-white/90 rounded-full p-2\">\n                          <Expand className=\"h-4 w-4 text-gray-800\" />\n                        </div>\n                      </div>\n                    </div>\n                  </DialogTrigger>\n                  <DialogContent className=\"max-w-4xl w-full\" data-testid=\"dialog-dashboard-enlarged\">\n                    <DialogTitle>Dashboard Preview</DialogTitle>\n                    <DialogDescription>\n                      Full-size view of the BookingGen dashboard interface\n                    </DialogDescription>\n                    <img \n                      src={dashboardImage} \n                      alt=\"BookingGen Dashboard - Full View\" \n                      className=\"w-full h-auto rounded-lg\"\n                      data-testid=\"img-dashboard-full\"\n                    />\n                  </DialogContent>\n                </Dialog>\n                <h3 className=\"font-semibold mb-2\">Your Dashboard</h3>\n                <p className=\"text-sm text-muted-foreground\">\n                  Manage all your bookings from one clean, organized dashboard\n                </p>\n              </CardContent>\n            </Card>\n            \n            <Card data-testid=\"card-screenshot-2\">\n              <CardContent className=\"p-6\">\n                <div className=\"aspect-video bg-muted rounded-lg flex items-center justify-center mb-4\">\n                  <div className=\"text-center\">\n                    <Smartphone className=\"h-12 w-12 text-muted-foreground mx-auto mb-2\" />\n                    <p className=\"text-muted-foreground\">Booking Page Screenshot</p>\n                  </div>\n                </div>\n                <h3 className=\"font-semibold mb-2\">Client Booking Experience</h3>\n                <p className=\"text-sm text-muted-foreground\">\n                  Beautiful, mobile-friendly booking pages your clients will love\n                </p>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n\n        {/* CTA Section */}\n        <div className=\"text-center\">\n          <Card className=\"max-w-2xl mx-auto\">\n            <CardContent className=\"p-8\">\n              <h2 className=\"text-2xl font-bold mb-4 text-foreground\" data-testid=\"text-cta-title\">\n                Ready to Get Started?\n              </h2>\n              <p className=\"text-muted-foreground mb-6\" data-testid=\"text-cta-description\">\n                Join thousands of professionals who trust BookingGen to manage their appointments\n              </p>\n              <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n                <Button\n                  size=\"lg\"\n                  onClick={() => setLocation('/signup')}\n                  className=\"bg-primary text-primary-foreground hover:bg-primary/90\"\n                  data-testid=\"button-signup\"\n                >\n                  Get Started\n                  <ArrowRight className=\"h-4 w-4 ml-2\" />\n                </Button>\n                <Button\n                  size=\"lg\"\n                  variant=\"outline\"\n                  onClick={() => setLocation('/pricing')}\n                  data-testid=\"button-pricing\"\n                >\n                  View Pricing\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </main>\n      \n      <Footer />\n    </div>\n  );\n}","size_bytes":14805},"client/src/pages/reset-password.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useLocation } from 'wouter';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { useToast } from '@/hooks/use-toast';\nimport { CalendarDays, Home, Eye, EyeOff, CheckCircle } from 'lucide-react';\nimport { supabase } from '@/lib/supabase';\n\nexport default function ResetPassword() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [loading, setLoading] = useState(false);\n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n  const [formData, setFormData] = useState({\n    password: '',\n    confirmPassword: ''\n  });\n\n  useEffect(() => {\n    // Check if we have a valid session for password reset\n    supabase.auth.getSession().then(({ data: { session } }) => {\n      if (!session) {\n        toast({\n          title: \"Invalid reset link\",\n          description: \"This password reset link is invalid or has expired.\",\n          variant: \"destructive\",\n        });\n        setLocation('/login');\n      }\n    });\n  }, [setLocation, toast]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (formData.password !== formData.confirmPassword) {\n      toast({\n        title: \"Passwords don't match\",\n        description: \"Please make sure both passwords are identical.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (formData.password.length < 6) {\n      toast({\n        title: \"Password too short\",\n        description: \"Password must be at least 6 characters long.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      const { error } = await supabase.auth.updateUser({\n        password: formData.password\n      });\n\n      if (error) {\n        throw new Error(error.message);\n      }\n\n      toast({\n        title: \"Password updated!\",\n        description: \"Your password has been successfully updated.\",\n      });\n\n      // Redirect to dashboard\n      setLocation('/dashboard');\n    } catch (error) {\n      toast({\n        title: \"Update failed\",\n        description: \"Failed to update password. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen page-gradient relative overflow-hidden\">\n      {/* Glass Prism Background Elements */}\n      <div className=\"absolute inset-0 bg-gradient-to-br from-blue-50/80 via-white to-blue-50/80 bg-overlay\"></div>\n      <div className=\"absolute top-10 left-10 w-72 h-72 glass-prism rounded-full opacity-30 animate-float bg-overlay\"></div>\n      <div className=\"absolute top-32 right-20 w-96 h-96 glass-prism rounded-full opacity-20 animate-float bg-overlay\" style={{animationDelay: '1.5s'}}></div>\n      <div className=\"absolute bottom-20 left-1/3 w-48 h-48 glass-prism rounded-full opacity-25 animate-float bg-overlay\" style={{animationDelay: '3s'}}></div>\n      \n      <div className=\"relative flex items-center justify-center min-h-screen p-6 content-layer\">\n        <div className=\"w-full max-w-md glass-prism-card rounded-3xl p-8 hover-lift animate-fade-in-up\">\n          <div className=\"flex justify-start mb-4\">\n            <Button \n              variant=\"ghost\" \n              size=\"sm\"\n              onClick={() => setLocation('/login')}\n              className=\"flex items-center space-x-2 text-muted-foreground hover:text-foreground bg-white/10 backdrop-blur-sm border border-white/20 hover:bg-white/20 transition-all duration-300 rounded-lg\"\n              data-testid=\"button-back-login\"\n            >\n              <Home className=\"h-4 w-4\" />\n              <span>Back to Login</span>\n            </Button>\n          </div>\n          \n          <div className=\"text-center mb-8\">\n            <div className=\"flex items-center justify-center space-x-3 mb-4\">\n              <div className=\"w-10 h-10 glass-prism rounded-lg flex items-center justify-center\">\n                <CalendarDays className=\"h-6 w-6 text-primary\" />\n              </div>\n              <span className=\"text-xl font-bold text-foreground\">BookingGen</span>\n            </div>\n            <h1 className=\"text-2xl font-bold text-foreground mb-2\">Reset your password</h1>\n            <p className=\"text-muted-foreground\">Enter your new password below</p>\n          </div>\n          \n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <div>\n              <Label htmlFor=\"password\" className=\"text-foreground font-medium\">New Password</Label>\n              <div className=\"relative mt-2\">\n                <Input\n                  id=\"password\"\n                  type={showPassword ? \"text\" : \"password\"}\n                  placeholder=\"Enter your new password\"\n                  value={formData.password}\n                  onChange={(e) => setFormData(prev => ({ ...prev, password: e.target.value }))}\n                  required\n                  minLength={6}\n                  data-testid=\"input-password\"\n                  className=\"glass-input pr-10\"\n                />\n                <Button\n                  type=\"button\"\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  data-testid=\"button-toggle-password\"\n                >\n                  {showPassword ? (\n                    <EyeOff className=\"h-4 w-4 text-muted-foreground\" />\n                  ) : (\n                    <Eye className=\"h-4 w-4 text-muted-foreground\" />\n                  )}\n                </Button>\n              </div>\n            </div>\n            \n            <div>\n              <Label htmlFor=\"confirmPassword\" className=\"text-foreground font-medium\">Confirm Password</Label>\n              <div className=\"relative mt-2\">\n                <Input\n                  id=\"confirmPassword\"\n                  type={showConfirmPassword ? \"text\" : \"password\"}\n                  placeholder=\"Confirm your new password\"\n                  value={formData.confirmPassword}\n                  onChange={(e) => setFormData(prev => ({ ...prev, confirmPassword: e.target.value }))}\n                  required\n                  minLength={6}\n                  data-testid=\"input-confirm-password\"\n                  className=\"glass-input pr-10\"\n                />\n                <Button\n                  type=\"button\"\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent\"\n                  onClick={() => setShowConfirmPassword(!showConfirmPassword)}\n                  data-testid=\"button-toggle-confirm-password\"\n                >\n                  {showConfirmPassword ? (\n                    <EyeOff className=\"h-4 w-4 text-muted-foreground\" />\n                  ) : (\n                    <Eye className=\"h-4 w-4 text-muted-foreground\" />\n                  )}\n                </Button>\n              </div>\n            </div>\n\n            {/* Password strength indicator */}\n            {formData.password && (\n              <div className=\"glass-prism backdrop-blur-md bg-white/5 dark:bg-black/5 border border-white/10 rounded-xl p-4\">\n                <div className=\"flex items-center space-x-2 text-sm\">\n                  {formData.password.length >= 6 ? (\n                    <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                  ) : (\n                    <div className=\"h-4 w-4 border border-gray-400 rounded-full\" />\n                  )}\n                  <span className={formData.password.length >= 6 ? \"text-green-600 dark:text-green-400\" : \"text-gray-600 dark:text-gray-400\"}>\n                    At least 6 characters\n                  </span>\n                </div>\n                {formData.confirmPassword && (\n                  <div className=\"flex items-center space-x-2 text-sm mt-2\">\n                    {formData.password === formData.confirmPassword ? (\n                      <CheckCircle className=\"h-4 w-4 text-green-500\" />\n                    ) : (\n                      <div className=\"h-4 w-4 border border-gray-400 rounded-full\" />\n                    )}\n                    <span className={formData.password === formData.confirmPassword ? \"text-green-600 dark:text-green-400\" : \"text-gray-600 dark:text-gray-400\"}>\n                      Passwords match\n                    </span>\n                  </div>\n                )}\n              </div>\n            )}\n            \n            <Button \n              type=\"submit\" \n              size=\"lg\"\n              className=\"w-full h-12 glass-prism-button px-6 py-2 rounded-full font-semibold text-[15px] shadow-md\"\n              disabled={loading || formData.password !== formData.confirmPassword || formData.password.length < 6}\n              data-testid=\"button-update-password\"\n            >\n              {loading ? \"Updating Password...\" : \"Update Password\"}\n            </Button>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":9229},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/layout/header.tsx":{"content":"import { useState } from 'react';\nimport { useLocation } from 'wouter';\nimport { useAuth } from '@/hooks/use-auth';\nimport { Button } from '@/components/ui/button';\nimport { CalendarDays, Menu, X } from 'lucide-react';\n\nexport default function Header() {\n  const [location, setLocation] = useLocation();\n  const { user, logout } = useAuth();\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n\n  const navigation = [\n    { name: 'Solution', href: '#how-it-works' },\n    { name: 'Features', href: '#features' },\n    { name: 'Pricing', href: '/pricing' },\n    { name: 'Testimonials', href: '#testimonials' },\n  ];\n\n  const scrollToSection = (href: string) => {\n    if (href.startsWith('#')) {\n      // If we're on the homepage, scroll to the section\n      if (location === '/') {\n        const element = document.querySelector(href);\n        if (element) {\n          element.scrollIntoView({ behavior: 'smooth' });\n        }\n      } else {\n        // If we're on another page, navigate to homepage with the hash\n        setLocation('/' + href);\n      }\n    } else {\n      // For regular page navigation\n      setLocation(href);\n    }\n    setMobileMenuOpen(false);\n  };\n\n  return (\n    <div className=\"floating-glass-header-container\">\n      <header className=\"floating-glass-header\">\n        <div className=\"px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            {/* Logo */}\n            <div \n              className=\"flex items-center space-x-3 cursor-pointer\"\n              onClick={() => setLocation('/')}\n              data-testid=\"logo\"\n            >\n              <div className=\"w-10 h-10 bg-primary rounded-lg flex items-center justify-center\">\n                <CalendarDays className=\"h-6 w-6 text-primary-foreground\" />\n              </div>\n              <span className=\"text-xl font-bold text-foreground\">BookingGen</span>\n            </div>\n\n            {/* Desktop Navigation */}\n            <nav className=\"hidden md:flex items-center space-x-10\">\n              {navigation.map((item) => (\n                <button\n                  key={item.name}\n                  onClick={() => scrollToSection(item.href)}\n                  className=\"nav-link-animated text-muted-foreground hover:text-foreground font-medium text-[15px]\"\n                  data-testid={`nav-${item.name.toLowerCase().replace(' ', '-')}`}\n                >\n                  {item.name}\n                </button>\n              ))}\n              \n              {user ? (\n                <div className=\"flex items-center space-x-4\">\n                  <Button \n                    onClick={() => setLocation('/dashboard')}\n                    className=\"bg-white/10 backdrop-blur-sm border border-white/20 hover:bg-white/20 transition-all duration-300 text-foreground px-4 py-2 rounded-lg\"\n                    data-testid=\"nav-dashboard\"\n                  >\n                    Dashboard\n                  </Button>\n                  <Button \n                    onClick={logout}\n                    className=\"bg-white/10 backdrop-blur-sm border border-white/20 hover:bg-white/20 transition-all duration-300 text-foreground px-4 py-2 rounded-lg\"\n                    data-testid=\"nav-logout\"\n                  >\n                    Logout\n                  </Button>\n                </div>\n              ) : (\n                <div className=\"flex items-center space-x-4\">\n                  <Button \n                    onClick={() => setLocation('/login')}\n                    className=\"bg-white/10 backdrop-blur-sm border border-white/20 hover:bg-white/20 transition-all duration-300 text-foreground px-4 py-2 rounded-lg\"\n                    data-testid=\"nav-login\"\n                  >\n                    Login\n                  </Button>\n                  <Button \n                    onClick={() => setLocation('/signup')}\n                    className=\"glass-prism-button px-6 py-2 rounded-full font-semibold text-[15px]\"\n                    data-testid=\"nav-signup\"\n                  >\n                    Start for Free\n                  </Button>\n                </div>\n              )}\n            </nav>\n\n            {/* Mobile Menu Button */}\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"md:hidden\"\n              onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\n              data-testid=\"mobile-menu-button\"\n            >\n              {mobileMenuOpen ? (\n                <X className=\"h-6 w-6\" />\n              ) : (\n                <Menu className=\"h-6 w-6\" />\n              )}\n            </Button>\n          </div>\n\n          {/* Mobile Navigation */}\n          {mobileMenuOpen && (\n            <div className=\"md:hidden mt-4 pb-4 border-t border-border pt-4\">\n              <div className=\"flex flex-col space-y-4\">\n                {navigation.map((item) => (\n                  <button\n                    key={item.name}\n                    onClick={() => scrollToSection(item.href)}\n                    className=\"text-left text-muted-foreground hover:text-foreground transition-colors\"\n                    data-testid={`mobile-nav-${item.name.toLowerCase().replace(' ', '-')}`}\n                  >\n                    {item.name}\n                  </button>\n                ))}\n                \n                {user ? (\n                  <>\n                    <Button \n                      onClick={() => {\n                        setLocation('/dashboard');\n                        setMobileMenuOpen(false);\n                      }}\n                      className=\"bg-white/10 backdrop-blur-sm border border-white/20 hover:bg-white/20 transition-all duration-300 justify-start text-foreground\"\n                      data-testid=\"mobile-nav-dashboard\"\n                    >\n                      Dashboard\n                    </Button>\n                    <Button \n                      onClick={() => {\n                        logout();\n                        setMobileMenuOpen(false);\n                      }}\n                      className=\"bg-white/10 backdrop-blur-sm border border-white/20 hover:bg-white/20 transition-all duration-300 justify-start text-foreground\"\n                      data-testid=\"mobile-nav-logout\"\n                    >\n                      Logout\n                    </Button>\n                  </>\n                ) : (\n                  <>\n                    <Button \n                      onClick={() => {\n                        setLocation('/login');\n                        setMobileMenuOpen(false);\n                      }}\n                      className=\"bg-white/10 backdrop-blur-sm border border-white/20 hover:bg-white/20 transition-all duration-300 justify-start text-foreground\"\n                      data-testid=\"mobile-nav-login\"\n                    >\n                      Login\n                    </Button>\n                    <Button \n                      onClick={() => {\n                        setLocation('/signup');\n                        setMobileMenuOpen(false);\n                      }}\n                      className=\"glass-prism-button justify-start rounded-full font-semibold px-6 py-2\"\n                      data-testid=\"mobile-nav-signup\"\n                    >\n                      Start for Free\n                    </Button>\n                  </>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n      </header>\n    </div>\n  );\n}\n","size_bytes":7447},"client/src/components/dashboard/support-bot.tsx":{"content":"import { useState, useRef, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { MessageCircle, X, Send, Sparkles, Bot, HelpCircle, Zap, BookOpen, Settings, Calendar } from 'lucide-react';\nimport { useAuth } from '@/hooks/use-auth';\nimport { useQuery } from '@tanstack/react-query';\nimport { useCurrency } from '@/hooks/use-currency';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\n\ninterface Message {\n  id: string;\n  type: 'user' | 'bot';\n  content: string;\n  timestamp: Date;\n}\n\ninterface DashboardStats {\n  pagesCount: number;\n  totalAppointments: number;\n  pendingAppointments: number;\n  totalRevenue: number;\n  conversionRate: number;\n  avgBookingValue: number;\n}\n\ninterface BookingPage {\n  id: string;\n  title: string;\n  slug: string;\n  published: boolean;\n}\n\ninterface FAQ {\n  id: string;\n  category: string;\n  question: string;\n  answer: string;\n  keywords: string[];\n}\n\nconst faqs: FAQ[] = [\n  {\n    id: '1',\n    category: 'Pages',\n    question: 'How do I create a booking page?',\n    answer: \"To create a booking page:\\n1. Click 'Booking Pages' in the sidebar\\n2. Click 'Create New Page' button\\n3. Fill in:\\n   • Page title\\n   • Tagline\\n   • Services you offer\\n   • Business hours\\n   • Branding (colors, logo, theme)\\n4. Click 'Create Page'\\n5. Toggle 'Published' to make it live!\\n\\nYour page will have a unique shareable link!\",\n    keywords: ['create', 'new', 'page', 'booking', 'make', 'build']\n  },\n  {\n    id: '2',\n    category: 'Pages',\n    question: 'How do I delete a booking page?',\n    answer: \"To delete a booking page:\\n1. Go to 'Booking Pages' in the sidebar\\n2. Find the page you want to delete\\n3. Click the three dots menu (⋮) on the page card\\n4. Select 'Delete Page'\\n5. Confirm the deletion\\n\\nNote: This action cannot be undone, and all associated appointments will be removed.\\n\\n💡 Tip: You can unpublish a page instead of deleting it to keep it as a draft.\",\n    keywords: ['delete', 'remove', 'archive', 'page', 'get rid']\n  },\n  {\n    id: '3',\n    category: 'Pages',\n    question: 'How do I edit my booking page?',\n    answer: \"To edit a booking page:\\n1. Go to 'Booking Pages' in the sidebar\\n2. Find the page you want to edit\\n3. Click the 'Edit' button on the page card\\n4. Make your changes (services, branding, availability, etc.)\\n5. Click 'Save Changes' when done\\n\\nYour changes will be reflected immediately on the live page!\",\n    keywords: ['edit', 'modify', 'change', 'update', 'page']\n  },\n  {\n    id: '4',\n    category: 'Pages',\n    question: 'How do I share my booking link?',\n    answer: \"To share your booking page:\\n1. Go to 'Booking Pages'\\n2. Find your published page\\n3. Click 'Copy Link' button\\n4. Share the link via:\\n   • Your website\\n   • Social media\\n   • Email signature\\n   • Business cards\\n\\nAnyone with the link can book your services!\",\n    keywords: ['share', 'link', 'url', 'copy', 'send']\n  },\n  {\n    id: '5',\n    category: 'Services',\n    question: 'How do I add services?',\n    answer: \"To add services to your booking page:\\n1. Edit your booking page\\n2. Scroll to the 'Services' section\\n3. Click 'Add Service'\\n4. Enter service details:\\n   • Name (e.g., '1-Hour Consultation')\\n   • Description\\n   • Duration in minutes\\n   • Price and currency\\n5. Click 'Save Service'\\n6. Save your page changes\\n\\nYou can add multiple services per page!\",\n    keywords: ['add', 'service', 'offering', 'new']\n  },\n  {\n    id: '6',\n    category: 'Appointments',\n    question: 'How do I manage appointments?',\n    answer: \"To manage appointments:\\n1. Go to 'Appointments' in the sidebar\\n2. View all pending, accepted, and rejected bookings\\n3. For each appointment you can:\\n   • Accept it (customer gets notified)\\n   • Reject it (customer gets notified)\\n   • View customer details\\n   • See booking information\\n\\nCustomers receive automatic email notifications!\",\n    keywords: ['manage', 'handle', 'appointment', 'booking', 'view']\n  },\n  {\n    id: '7',\n    category: 'Appointments',\n    question: 'How do I accept or reject appointments?',\n    answer: \"To accept or reject appointments:\\n1. Go to 'Appointments' section\\n2. Find the pending appointment\\n3. Click 'Accept' to confirm or 'Reject' to decline\\n4. The customer receives an automatic notification\\n\\nAccepted appointments show in your revenue, rejected ones don't!\",\n    keywords: ['accept', 'reject', 'approve', 'decline', 'appointment']\n  },\n  {\n    id: '8',\n    category: 'Appointments',\n    question: 'How do I reschedule an appointment?',\n    answer: \"To reschedule an appointment:\\n1. Go to 'Appointments' in the sidebar\\n2. Find the appointment you want to reschedule\\n3. Click the 'Reschedule' button\\n4. Select a new date and time\\n5. Add an optional note for the customer\\n6. Click 'Send Reschedule'\\n\\nThe customer receives an automatic email notification with the new details!\",\n    keywords: ['reschedule', 'change time', 'move', 'change date', 'appointment']\n  },\n  {\n    id: '9',\n    category: 'Customization',\n    question: 'How do I customize my branding?',\n    answer: \"To customize your booking page branding:\\n1. Edit your booking page\\n2. Use the customization options:\\n   • Choose a theme (Ocean Blue, Sunset, etc.)\\n   • Select primary color\\n   • Pick background style\\n   • Upload your logo\\n   • Choose font family\\n3. Preview your changes in real-time\\n4. Save when you're happy with the look!\",\n    keywords: ['customize', 'brand', 'theme', 'color', 'logo', 'style']\n  },\n  {\n    id: '10',\n    category: 'Customization',\n    question: 'How do I set my availability?',\n    answer: \"To set your availability:\\n1. Edit your booking page\\n2. Scroll to 'Business Hours'\\n3. Set hours for each day:\\n   • Enter opening time (e.g., 9:00)\\n   • Enter closing time (e.g., 17:00)\\n   • Or mark as 'Closed' for days off\\n4. Save your changes\\n\\nCustomers can only book during your available hours!\",\n    keywords: ['availability', 'hours', 'time', 'schedule', 'business hours']\n  },\n  {\n    id: '11',\n    category: 'Payment',\n    question: 'How do I set up payments?',\n    answer: \"BookingGen uses Razorpay for payment processing!\\n\\n**To set up payments:**\\n1. Go to Settings in the sidebar\\n2. Click 'Payment Integration'\\n3. Enter your Razorpay API credentials:\\n   • Key ID\\n   • Key Secret\\n4. Save settings\\n5. Set prices when creating services\\n\\nCustomers can now pay directly when booking!\\n\\n**Troubleshooting:**\\n• Make sure your Razorpay account is active\\n• Verify API keys are correct\\n• Test with a small amount first\",\n    keywords: ['payment', 'setup', 'razorpay', 'integration', 'money']\n  },\n  {\n    id: '12',\n    category: 'Account',\n    question: 'What features are included in Pro?',\n    answer: \"As a Pro member, you have:\\n• Unlimited booking pages\\n• Unlimited appointments\\n• Advanced analytics\\n• Custom branding\\n• Priority support\\n• All future features!\\n\\nUpgrade anytime from the sidebar!\",\n    keywords: ['pro', 'upgrade', 'subscription', 'features', 'premium']\n  },\n  {\n    id: '13',\n    category: 'Account',\n    question: 'How much does Pro cost?',\n    answer: \"BookingGen offers a Pro plan at just $14.99/month (50% off the regular price)! This includes unlimited booking pages, unlimited appointments, advanced analytics, custom branding, and priority support. New users can try it free for 7 days!\",\n    keywords: ['pricing', 'price', 'cost', 'how much', 'subscription']\n  },\n  {\n    id: '14',\n    category: 'Calendar',\n    question: 'How do I sync with Google Calendar?',\n    answer: \"To sync with Google Calendar:\\n1. Edit your booking page\\n2. Find 'Calendar Integration'\\n3. Add your Google Calendar link\\n4. Save changes\\n\\nAll appointments will sync to your calendar!\",\n    keywords: ['calendar', 'sync', 'google', 'connect', 'integration']\n  }\n];\n\nexport default function SupportBot() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [messages, setMessages] = useState<Message[]>([\n    {\n      id: '1',\n      type: 'bot',\n      content: \"👋 Hi! I'm your BookingGen assistant. I'm here to help you with your account, bookings, and answer any questions you have. How can I help you today?\",\n      timestamp: new Date()\n    }\n  ]);\n  const [inputValue, setInputValue] = useState('');\n  const [showFAQs, setShowFAQs] = useState(false);\n  const [faqCategory, setFaqCategory] = useState<string>('all');\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const { user, profile } = useAuth();\n  const { formatPrice } = useCurrency();\n\n  const { data: stats, error: statsError } = useQuery<DashboardStats>({\n    queryKey: ['/api/dashboard/stats'],\n    enabled: isOpen\n  });\n\n  const { data: pages, error: pagesError } = useQuery<BookingPage[]>({\n    queryKey: ['/api/pages'],\n    enabled: isOpen\n  });\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const isPro = profile?.membershipStatus === 'pro';\n  const isTrialActive = (profile as any)?.trialStatus === 'active';\n  const userName = profile?.fullName || user?.email?.split('@')[0] || 'there';\n\n  const getResponse = (userMessage: string): string => {\n    const message = userMessage.toLowerCase().trim();\n\n    if (message.includes('hello') || message.includes('hi') || message.includes('hey')) {\n      return `Hello ${userName}! 👋 How can I assist you today?`;\n    }\n\n    for (const faq of faqs) {\n      const hasKeyword = faq.keywords.some(keyword => message.includes(keyword));\n      if (hasKeyword) {\n        return faq.answer;\n      }\n    }\n\n    if (message.includes('show') && (message.includes('stats') || message.includes('analytics') || message.includes('revenue'))) {\n      if (statsError) {\n        return \"I'm having trouble loading your analytics data right now. Please try again in a moment, or check the Analytics section directly.\";\n      }\n      if (!stats) {\n        return \"I'm loading your analytics data. Please try again in a moment.\";\n      }\n      let response = `Here's a summary of your account:\\n\\n`;\n      response += `📊 **Statistics**\\n`;\n      response += `• Booking Pages: ${stats.pagesCount}\\n`;\n      response += `• Total Appointments: ${stats.totalAppointments}\\n`;\n      response += `• Pending Appointments: ${stats.pendingAppointments}\\n`;\n      response += `• Total Revenue: ${formatPrice(stats.totalRevenue)}\\n`;\n      response += `• Conversion Rate: ${stats.conversionRate}%\\n`;\n      if (stats.avgBookingValue > 0) {\n        response += `• Average Booking Value: ${formatPrice(stats.avgBookingValue)}`;\n      }\n      return response;\n    }\n\n    if (message.includes('show') && (message.includes('page') || message.includes('pages'))) {\n      if (pagesError) {\n        return \"I'm having trouble loading your booking pages right now. Please try again in a moment, or check the Booking Pages section directly.\";\n      }\n      if (!pages || pages.length === 0) {\n        return \"You don't have any booking pages yet. Click 'Create New Page' to get started!\";\n      }\n      const publishedPages = pages.filter(p => p.published).length;\n      const draftPages = pages.filter(p => !p.published).length;\n      let response = `You have ${pages.length} booking page${pages.length !== 1 ? 's' : ''}:\\n`;\n      response += `• Published: ${publishedPages}\\n`;\n      response += `• Drafts: ${draftPages}\\n\\n`;\n      if (pages.length > 0) {\n        response += `Your pages:\\n`;\n        pages.slice(0, 3).forEach(page => {\n          response += `• ${page.title} ${page.published ? '(Live)' : '(Draft)'}\\n`;\n        });\n        if (pages.length > 3) {\n          response += `...and ${pages.length - 3} more`;\n        }\n      }\n      return response;\n    }\n\n    if (message.includes('trial')) {\n      if (isTrialActive) {\n        return \"You're currently enjoying your 7-day Pro trial! All premium features are unlocked. Remember to add your payment details before the trial ends to continue enjoying Pro benefits.\";\n      }\n      if ((profile as any)?.trialStatus === 'used') {\n        return \"You've already used your free trial. You can upgrade to Pro anytime to access all premium features!\";\n      }\n      if ((profile as any)?.trialStatus === 'available') {\n        return \"You're eligible for a 7-day free trial! Click the trial button in the sidebar to activate it and enjoy all Pro features.\";\n      }\n      return \"Your trial status is currently unavailable. Please contact support for assistance.\";\n    }\n\n    if (message.includes('help') || message.includes('what can you do')) {\n      return `I can help you with:\\n\\n📄 **Booking Pages**\\n• Create, edit, delete pages\\n• Publish/unpublish pages\\n• Customize branding & themes\\n• Share booking links\\n\\n📅 **Appointments**\\n• Accept/reject bookings\\n• Manage appointments\\n• View customer details\\n\\n⚙️ **Settings**\\n• Add services\\n• Set availability\\n• Upload logo\\n• Manage subscription\\n\\n📊 **Analytics**\\n• View statistics\\n• Track revenue\\n• Monitor conversions\\n\\nType 'faqs' to browse frequently asked questions or just ask me anything!`;\n    }\n\n    if (message.includes('faq') || message.includes('frequently asked')) {\n      setShowFAQs(true);\n      return \"I've opened the FAQ section for you. Browse through common questions or ask me directly!\";\n    }\n\n    const casualResponses = [\n      \"I'm not sure about that specific question. Try:\\n• Asking 'help' to see what I can do\\n• Type 'faqs' to browse common questions\\n• Or ask about pages, appointments, or settings!\",\n      \"That's a great question! For detailed assistance, try typing 'faqs' or ask about:\\n• Creating booking pages\\n• Managing appointments\\n• Customizing your branding\\n• Account settings\",\n      \"I can help you with booking pages, appointments, and account settings. Try typing 'faqs' to see common questions or ask me directly!\"\n    ];\n\n    return casualResponses[Math.floor(Math.random() * casualResponses.length)];\n  };\n\n  const handleSend = () => {\n    if (!inputValue.trim()) return;\n\n    const userMessage: Message = {\n      id: Date.now().toString(),\n      type: 'user',\n      content: inputValue,\n      timestamp: new Date()\n    };\n\n    setMessages(prev => [...prev, userMessage]);\n\n    setTimeout(() => {\n      const botResponse: Message = {\n        id: (Date.now() + 1).toString(),\n        type: 'bot',\n        content: getResponse(inputValue),\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, botResponse]);\n    }, 500);\n\n    setInputValue('');\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  const handleQuickAction = (question: string) => {\n    setInputValue(question);\n    handleSend();\n  };\n\n  const handleFAQClick = (faq: FAQ) => {\n    const userMessage: Message = {\n      id: Date.now().toString(),\n      type: 'user',\n      content: faq.question,\n      timestamp: new Date()\n    };\n\n    setMessages(prev => [...prev, userMessage]);\n\n    setTimeout(() => {\n      const botResponse: Message = {\n        id: (Date.now() + 1).toString(),\n        type: 'bot',\n        content: faq.answer,\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, botResponse]);\n    }, 300);\n\n    setShowFAQs(false);\n  };\n\n  const categories = ['all', ...Array.from(new Set(faqs.map(f => f.category)))];\n  const filteredFAQs = faqCategory === 'all' ? faqs : faqs.filter(f => f.category === faqCategory);\n\n  return (\n    <>\n      {isOpen && (\n        <Card className=\"fixed bottom-20 right-4 w-[calc(100vw-2rem)] sm:w-96 sm:right-6 sm:bottom-24 h-[500px] sm:h-[600px] max-w-[400px] glass-prism-card backdrop-blur-xl border-white/20 shadow-2xl flex flex-col z-50 animate-scale-in mobile-no-blur\">\n          <CardHeader className=\"border-b border-white/10 flex flex-row items-center justify-between p-4\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-10 h-10 glass-prism rounded-full flex items-center justify-center bg-gradient-to-br from-blue-500/20 to-purple-500/20\">\n                <Bot className=\"h-5 w-5 text-primary\" />\n              </div>\n              <div>\n                <CardTitle className=\"text-lg\">Support Assistant</CardTitle>\n                <p className=\"text-xs text-muted-foreground\">Always here to help</p>\n              </div>\n            </div>\n            <div className=\"flex gap-2\">\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => setShowFAQs(!showFAQs)}\n                className=\"h-8 w-8 p-0\"\n                data-testid=\"button-toggle-faqs\"\n              >\n                <HelpCircle className=\"h-4 w-4\" />\n              </Button>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => setIsOpen(false)}\n                className=\"h-8 w-8 p-0\"\n                data-testid=\"button-close-support\"\n              >\n                <X className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          </CardHeader>\n\n          {showFAQs ? (\n            <CardContent className=\"flex-1 overflow-y-auto p-4\">\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h3 className=\"text-lg font-semibold\">Frequently Asked Questions</h3>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => setShowFAQs(false)}\n                    data-testid=\"button-back-to-chat\"\n                  >\n                    Back to Chat\n                  </Button>\n                </div>\n                <div className=\"flex gap-2 flex-wrap mb-4\">\n                  {categories.map(cat => (\n                    <Button\n                      key={cat}\n                      variant={faqCategory === cat ? 'default' : 'outline'}\n                      size=\"sm\"\n                      onClick={() => setFaqCategory(cat)}\n                      className={faqCategory === cat ? 'glass-prism-button' : 'glass-prism'}\n                      data-testid={`button-category-${cat}`}\n                    >\n                      {cat === 'all' ? 'All' : cat}\n                    </Button>\n                  ))}\n                </div>\n                <div className=\"space-y-2\">\n                  {filteredFAQs.map((faq) => (\n                    <button\n                      key={faq.id}\n                      onClick={() => handleFAQClick(faq)}\n                      className=\"w-full text-left p-3 rounded-xl glass-prism hover:glass-prism-button transition-all duration-300 group\"\n                      data-testid={`faq-item-${faq.id}`}\n                    >\n                      <div className=\"flex items-start gap-2\">\n                        <HelpCircle className=\"h-4 w-4 mt-0.5 flex-shrink-0 text-blue-500\" />\n                        <div className=\"flex-1\">\n                          <p className=\"text-sm font-medium group-hover:text-white transition-colors\">\n                            {faq.question}\n                          </p>\n                          <Badge variant=\"secondary\" className=\"mt-1 text-xs\">\n                            {faq.category}\n                          </Badge>\n                        </div>\n                      </div>\n                    </button>\n                  ))}\n                </div>\n              </div>\n            </CardContent>\n          ) : (\n            <>\n              <CardContent className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n                {messages.map(message => (\n                  <div\n                    key={message.id}\n                    className={`flex ${message.type === 'user' ? 'justify-end' : 'justify-start'}`}\n                  >\n                    <div\n                      className={`max-w-[80%] rounded-2xl p-3 ${\n                        message.type === 'user'\n                          ? 'bg-gradient-to-br from-blue-500 to-blue-600 text-white'\n                          : 'glass-prism backdrop-blur-md text-foreground'\n                      }`}\n                      data-testid={`message-${message.type}-${message.id}`}\n                    >\n                      <p className=\"text-sm whitespace-pre-line break-words\">{message.content}</p>\n                      <p className=\"text-xs opacity-70 mt-1\">\n                        {message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                      </p>\n                    </div>\n                  </div>\n                ))}\n                {messages.length === 1 && (\n                  <div className=\"space-y-2 mt-4\">\n                    <p className=\"text-xs text-muted-foreground mb-2\">Quick Actions:</p>\n                    <div className=\"grid grid-cols-2 gap-2\">\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => handleQuickAction('How do I create a page?')}\n                        className=\"glass-prism text-xs justify-start\"\n                        data-testid=\"quick-action-create-page\"\n                      >\n                        <Zap className=\"h-3 w-3 mr-1\" />\n                        Create Page\n                      </Button>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => handleQuickAction('How do I manage appointments?')}\n                        className=\"glass-prism text-xs justify-start\"\n                        data-testid=\"quick-action-appointments\"\n                      >\n                        <Calendar className=\"h-3 w-3 mr-1\" />\n                        Appointments\n                      </Button>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => handleQuickAction('How do I customize branding?')}\n                        className=\"glass-prism text-xs justify-start\"\n                        data-testid=\"quick-action-branding\"\n                      >\n                        <Sparkles className=\"h-3 w-3 mr-1\" />\n                        Branding\n                      </Button>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => setShowFAQs(true)}\n                        className=\"glass-prism text-xs justify-start\"\n                        data-testid=\"quick-action-faqs\"\n                      >\n                        <BookOpen className=\"h-3 w-3 mr-1\" />\n                        View FAQs\n                      </Button>\n                    </div>\n                  </div>\n                )}\n                <div ref={messagesEndRef} />\n              </CardContent>\n\n              <div className=\"border-t border-white/10 p-4\">\n                <div className=\"flex space-x-2\">\n                  <Input\n                    value={inputValue}\n                    onChange={(e) => setInputValue(e.target.value)}\n                    onKeyPress={handleKeyPress}\n                    placeholder=\"Ask me anything...\"\n                    className=\"flex-1 glass-prism backdrop-blur-md border-white/20\"\n                    data-testid=\"input-support-message\"\n                  />\n                  <Button\n                    onClick={handleSend}\n                    size=\"sm\"\n                    className=\"glass-prism-button\"\n                    data-testid=\"button-send-message\"\n                  >\n                    <Send className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </div>\n            </>\n          )}\n        </Card>\n      )}\n\n      <Button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"fixed bottom-4 right-4 sm:bottom-6 sm:right-6 h-14 w-14 rounded-full glass-prism-button shadow-2xl z-50 p-0\"\n        data-testid=\"button-toggle-support\"\n      >\n        {isOpen ? (\n          <X className=\"h-6 w-6\" />\n        ) : (\n          <MessageCircle className=\"h-6 w-6\" />\n        )}\n      </Button>\n    </>\n  );\n}\n","size_bytes":24486},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/components/RazorpayButton.tsx":{"content":"import { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { CreditCard, Loader2 } from 'lucide-react';\nimport { apiRequest } from '@/lib/queryClient';\nimport { useToast } from '@/hooks/use-toast';\nimport { useCurrency } from '@/hooks/use-currency';\n\ninterface RazorpayButtonProps {\n  plan?: string;\n  onSuccess?: (paymentId: string, orderId: string) => void;\n  onError?: (error: any) => void;\n  onCancel?: () => void;\n  disabled?: boolean;\n  className?: string;\n  children?: React.ReactNode;\n}\n\ndeclare global {\n  interface Window {\n    Razorpay: any;\n  }\n}\n\nexport default function RazorpayButton({\n  plan = 'pro',\n  onSuccess,\n  onError,\n  onCancel,\n  disabled = false,\n  className = \"\",\n  children = \"Pay with Credit / Debit card\"\n}: RazorpayButtonProps) {\n  const [isProcessing, setIsProcessing] = useState(false);\n  const { toast } = useToast();\n  const { selectedCurrency } = useCurrency();\n\n  // Load Razorpay SDK\n  const loadRazorpayScript = (): Promise<boolean> => {\n    return new Promise((resolve) => {\n      if (window.Razorpay) {\n        resolve(true);\n        return;\n      }\n      const script = document.createElement('script');\n      script.src = 'https://checkout.razorpay.com/v1/checkout.js';\n      script.onload = () => resolve(true);\n      script.onerror = () => resolve(false);\n      document.body.appendChild(script);\n    });\n  };\n\n  const handlePayment = async () => {\n    try {\n      setIsProcessing(true);\n\n      // Load Razorpay script if not already loaded\n      const scriptLoaded = await loadRazorpayScript();\n      if (!scriptLoaded) {\n        throw new Error('Failed to load Razorpay checkout script');\n      }\n\n      // Create order on backend (server determines pricing)\n      const response = await apiRequest('POST', '/api/razorpay/order', {\n        plan: plan\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.error || 'Failed to create order');\n      }\n\n      const orderData = await response.json();\n\n      // Configure Razorpay checkout options\n      const options = {\n        key: orderData.key,\n        amount: orderData.amount,\n        currency: orderData.currency,\n        name: 'BookingGen Pro',\n        description: 'Upgrade to Pro Plan',\n        order_id: orderData.orderId,\n        handler: async (paymentResponse: any) => {\n          try {\n            // Verify payment on backend\n            const verifyResponse = await apiRequest('POST', '/api/razorpay/verify', {\n              razorpayOrderId: paymentResponse.razorpay_order_id,\n              razorpayPaymentId: paymentResponse.razorpay_payment_id,\n              razorpaySignature: paymentResponse.razorpay_signature\n            });\n\n            if (!verifyResponse.ok) {\n              throw new Error('Payment verification failed');\n            }\n\n            const verificationData = await verifyResponse.json();\n            \n            if (verificationData.success) {\n              toast({\n                title: \"Payment Successful!\",\n                description: \"Your upgrade to Pro has been completed.\",\n              });\n\n              if (onSuccess) {\n                onSuccess(verificationData.paymentId, verificationData.orderId);\n              }\n            } else {\n              throw new Error('Payment verification failed');\n            }\n          } catch (error) {\n            console.error('Payment verification failed:', error);\n            toast({\n              title: \"Payment Verification Failed\",\n              description: \"There was an issue verifying your payment. Please contact support.\",\n              variant: \"destructive\",\n            });\n\n            if (onError) {\n              onError(error);\n            }\n          }\n        },\n        prefill: {\n          name: '',\n          email: '',\n          contact: ''\n        },\n        notes: {\n          plan: plan\n        },\n        theme: {\n          color: '#2563eb'\n        },\n        modal: {\n          ondismiss: () => {\n            setIsProcessing(false);\n            toast({\n              title: \"Payment Cancelled\",\n              description: \"You can try again anytime.\",\n            });\n            \n            if (onCancel) {\n              onCancel();\n            }\n          }\n        }\n      };\n\n      // Open Razorpay checkout\n      const razorpayInstance = new window.Razorpay(options);\n      razorpayInstance.open();\n\n    } catch (error) {\n      console.error('Payment initialization failed:', error);\n      setIsProcessing(false);\n      \n      toast({\n        title: \"Payment Failed\",\n        description: error instanceof Error ? error.message : \"Failed to initialize payment. Please try again.\",\n        variant: \"destructive\",\n      });\n\n      if (onError) {\n        onError(error);\n      }\n    }\n  };\n\n  return (\n    <Button\n      onClick={handlePayment}\n      disabled={disabled || isProcessing}\n      className={className}\n      data-testid=\"button-razorpay\"\n    >\n      {isProcessing ? (\n        <>\n          <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n          Processing...\n        </>\n      ) : (\n        <>\n          <CreditCard className=\"h-4 w-4 mr-2\" />\n          {children}\n        </>\n      )}\n    </Button>\n  );\n}","size_bytes":5237},"client/src/components/dashboard/pages-list.tsx":{"content":"import { useState } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { \n  AlertDialog, \n  AlertDialogAction, \n  AlertDialogCancel, \n  AlertDialogContent, \n  AlertDialogDescription, \n  AlertDialogFooter, \n  AlertDialogHeader, \n  AlertDialogTitle \n} from '@/components/ui/alert-dialog';\nimport CreatePageModal from '@/components/modals/create-page-modal';\nimport UpgradeModal from '@/components/modals/upgrade-modal';\nimport { Badge } from '@/components/ui/badge';\nimport { Plus, ExternalLink, Edit, Eye, Trash2, Link, Rocket, AlertTriangle } from 'lucide-react';\nimport { useLocation } from 'wouter';\nimport { apiRequest } from '@/lib/queryClient';\nimport { useToast } from '@/hooks/use-toast';\nimport { useAuth } from '@/hooks/use-auth';\nimport { getUserPages } from '@/lib/supabase-queries';\nimport { useRealtimePages } from '@/hooks/useRealtimeSubscription';\n\nexport default function PagesList() {\n  const [, setLocation] = useLocation();\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [showUpgradeModal, setShowUpgradeModal] = useState(false);\n  const [deletePageId, setDeletePageId] = useState<string | null>(null);\n  const [editingPage, setEditingPage] = useState<any | null>(null);\n  const [launchingPageId, setLaunchingPageId] = useState<string | null>(null);\n  const queryClient = useQueryClient();\n  const { toast } = useToast();\n  const { user, profile } = useAuth();\n\n  // Enable real-time subscriptions for live page updates\n  const { isConnected: isRealtimeConnected } = useRealtimePages(user?.id);\n\n  // Check if user has Pro membership and it hasn't expired\n  const now = new Date();\n  const membershipExpired = profile?.membershipExpires && new Date(profile.membershipExpires) <= now;\n  const isProUser = profile?.membershipStatus === 'pro' && !membershipExpired;\n\n  // Use direct Supabase client for user's pages data\n  const { data: pages = [], isLoading } = useQuery<any[]>({\n    queryKey: [`user-pages-${user?.id}`],\n    queryFn: getUserPages,\n    enabled: !!user?.id,\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (pageId: string) => {\n      return apiRequest('DELETE', `/api/pages/${pageId}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`user-pages-${user?.id}`] });\n      toast({\n        title: \"Page deleted\",\n        description: \"Your booking page has been successfully deleted.\",\n      });\n      setDeletePageId(null);\n    },\n    onError: (error) => {\n      toast({\n        title: \"Delete failed\",\n        description: \"Failed to delete the page. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const launchMutation = useMutation({\n    mutationFn: async (pageId: string) => {\n      const response = await apiRequest('POST', `/api/page/launch`, { pageId });\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`user-pages-${user?.id}`] });\n      toast({\n        title: \"Page launched!\",\n        description: \"Your booking page is now live and accepting appointments.\",\n      });\n      setLaunchingPageId(null);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Launch failed\",\n        description: error.message || \"Failed to launch the page. Please try again.\",\n        variant: \"destructive\",\n      });\n      setLaunchingPageId(null);\n    },\n  });\n\n  const handleDeletePage = (pageId: string) => {\n    setDeletePageId(pageId);\n  };\n\n  const handleLaunchPage = (pageId: string) => {\n    setLaunchingPageId(pageId);\n    launchMutation.mutate(pageId);\n  };\n\n  const confirmDelete = () => {\n    if (deletePageId) {\n      deleteMutation.mutate(deletePageId);\n    }\n  };\n\n  const handleCreatePage = () => {\n    if (isProUser) {\n      setShowCreateModal(true);\n    } else {\n      setShowUpgradeModal(true);\n    }\n  };\n\n  const handleEditPage = (page: any) => {\n    setEditingPage(page);\n    setShowCreateModal(true);\n  };\n\n  const handleCopyLink = async (page: any) => {\n    const pageUrl = `${window.location.origin}/${page.slug}`;\n    try {\n      await navigator.clipboard.writeText(pageUrl);\n      toast({\n        title: \"Link copied!\",\n        description: `Page link has been copied to your clipboard.`,\n      });\n    } catch (error) {\n      // Fallback for browsers that don't support clipboard API\n      try {\n        const textArea = document.createElement('textarea');\n        textArea.value = pageUrl;\n        document.body.appendChild(textArea);\n        textArea.select();\n        const successful = document.execCommand('copy');\n        document.body.removeChild(textArea);\n        \n        if (successful) {\n          toast({\n            title: \"Link copied!\",\n            description: `Page link has been copied to your clipboard.`,\n          });\n        } else {\n          throw new Error('Copy command failed');\n        }\n      } catch (fallbackError) {\n        toast({\n          title: \"Copy failed\",\n          description: \"Unable to copy link. Please copy it manually from the URL bar.\",\n          variant: \"destructive\",\n        });\n      }\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"animate-fade-in-up\">\n      <div className=\"flex items-center justify-between mb-8\">\n        <div>\n          <h2 className=\"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent\">Booking Pages</h2>\n          <p className=\"text-gray-600 dark:text-gray-300\">Create and manage your booking pages</p>\n        </div>\n        <Button \n          onClick={handleCreatePage}\n          variant=\"default\"\n          className=\"glass-prism-button text-white shadow-lg backdrop-blur-lg\"\n          data-testid=\"button-create-page\"\n        >\n          <Plus className=\"h-5 w-5 mr-2\" />\n          Create Page\n        </Button>\n      </div>\n\n      {pages.length === 0 ? (\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          <Card className=\"border-2 border-dashed border-border\">\n            <CardContent className=\"p-6 flex flex-col items-center justify-center text-center h-80\">\n              <div className=\"w-16 h-16 bg-muted rounded-xl flex items-center justify-center mb-4\">\n                <Plus className=\"h-8 w-8 text-muted-foreground\" />\n              </div>\n              <h3 className=\"text-lg font-semibold text-foreground mb-2\">Create Your First Page</h3>\n              <p className=\"text-muted-foreground text-sm mb-6\">\n                Set up a booking page for your services and start accepting appointments\n              </p>\n              <Button \n                onClick={handleCreatePage}\n                variant=\"default\"\n                className=\"glass-prism-button text-white shadow-lg backdrop-blur-lg\"\n                data-testid=\"button-get-started\"\n              >\n                Get Started\n              </Button>\n            </CardContent>\n          </Card>\n        </div>\n      ) : (\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {pages.map((page: any) => (\n            <Card key={page.id} className=\"overflow-hidden\">\n              <div className=\"h-48 bg-gradient-to-br from-primary/10 to-primary/20 flex items-center justify-center\">\n                {page.logoUrl ? (\n                  <img \n                    src={page.logoUrl} \n                    alt={`${page.title} logo`}\n                    className=\"w-20 h-20 rounded-lg object-cover\"\n                  />\n                ) : (\n                  <div className=\"w-20 h-20 bg-primary/20 rounded-lg flex items-center justify-center\">\n                    <span className=\"text-2xl font-bold text-primary\">\n                      {page.title?.charAt(0) || 'B'}\n                    </span>\n                  </div>\n                )}\n              </div>\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center justify-between mb-3\">\n                  <h3 className=\"text-lg font-semibold text-foreground\">{page.title}</h3>\n                  <div className=\"flex items-center gap-2\">\n                    {page.isDemoPage ? (\n                      <>\n                        <Badge variant=\"outline\" className=\"text-xs border-orange-200 text-orange-600 bg-orange-50\">\n                          Demo\n                        </Badge>\n                        {page.isExpired && (\n                          <Badge variant=\"outline\" className=\"text-xs border-red-200 text-red-600 bg-red-50\">\n                            Expired\n                          </Badge>\n                        )}\n                      </>\n                    ) : !page.published ? (\n                      <Badge variant=\"secondary\" className=\"text-xs\">\n                        <AlertTriangle className=\"w-3 h-3 mr-1\" />\n                        Draft\n                      </Badge>\n                    ) : (\n                      <div className=\"w-3 h-3 bg-green-500 rounded-full\" title=\"Published\"></div>\n                    )}\n                  </div>\n                </div>\n                <p className=\"text-muted-foreground text-sm mb-4\">{page.tagline}</p>\n                <div className=\"flex items-center justify-between text-sm text-muted-foreground mb-4\">\n                  {page.isDemoPage ? (\n                    <span className=\"text-orange-600\">Demo Preview</span>\n                  ) : (\n                    <span>bookinggen.xyz/{page.slug}</span>\n                  )}\n                  <span>0 bookings</span>\n                </div>\n                {page.isDemoPage && (\n                  <div className=\"mb-4 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg\">\n                    <div className=\"flex items-start gap-2\">\n                      <AlertTriangle className=\"h-4 w-4 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0\" />\n                      <div className=\"flex-1\">\n                        <p className=\"text-sm font-medium text-amber-800 dark:text-amber-200 mb-1\">\n                          ⚠️ Demo Page - Not Live\n                        </p>\n                        <p className=\"text-xs text-amber-700 dark:text-amber-300 mb-2\">\n                          This is a demo page and is not published live. Upgrade to Pro to publish this page and start accepting real bookings.\n                        </p>\n                        {page.expiresAt && (\n                          <p className=\"text-xs text-amber-600 dark:text-amber-400\">\n                            Demo expires: {new Date(page.expiresAt).toLocaleDateString()}\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                )}\n                <div className=\"flex space-x-2\">\n                  {/* Handle demo pages differently */}\n                  {page.isDemoPage ? (\n                    <>\n                      {/* Demo pages always show upgrade prompts - no edit/delete */}\n                      <Button \n                        size=\"sm\" \n                        variant=\"outline\"\n                        className=\"flex-1 text-orange-600 border-orange-200 hover:bg-orange-50\"\n                        onClick={() => setShowUpgradeModal(true)}\n                        disabled={page.isExpired}\n                        data-testid={`button-upgrade-to-launch-${page.slug}`}\n                      >\n                        <Rocket className=\"h-4 w-4 mr-1\" />\n                        {page.isExpired ? 'Demo Expired' : 'Upgrade to Launch'}\n                      </Button>\n                      <Button \n                        variant=\"outline\" \n                        size=\"sm\" \n                        className=\"text-orange-600 border-orange-200 hover:bg-orange-50\"\n                        onClick={() => setShowUpgradeModal(true)}\n                        disabled={page.isExpired}\n                        title=\"Upgrade to get shareable links\"\n                        data-testid={`button-upgrade-to-share-${page.slug}`}\n                      >\n                        <Link className=\"h-4 w-4\" />\n                      </Button>\n                    </>\n                  ) : (\n                    /* Regular page actions */\n                    <>\n                      {/* If page is unpublished (converted from demo), show launch button for Pro users */}\n                      {!page.published ? (\n                        <>\n                          {isProUser ? (\n                            <Button \n                              size=\"sm\" \n                              variant=\"default\"\n                              className=\"flex-1 bg-green-600 text-white hover:bg-green-700 shadow-md\"\n                              onClick={() => handleLaunchPage(page.id)}\n                              disabled={launchingPageId === page.id}\n                              data-testid={`button-launch-${page.slug}`}\n                            >\n                              {launchingPageId === page.id ? (\n                                <>\n                                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-1\" />\n                                  Launching...\n                                </>\n                              ) : (\n                                <>\n                                  <Rocket className=\"h-4 w-4 mr-1\" />\n                                  Launch\n                                </>\n                              )}\n                            </Button>\n                          ) : (\n                            <Button \n                              size=\"sm\" \n                              variant=\"outline\"\n                              className=\"flex-1 text-orange-600 border-orange-200 hover:bg-orange-50\"\n                              onClick={() => setShowUpgradeModal(true)}\n                              data-testid={`button-upgrade-to-launch-${page.slug}`}\n                            >\n                              <Rocket className=\"h-4 w-4 mr-1\" />\n                              Upgrade to Launch\n                            </Button>\n                          )}\n                          <Button \n                            variant=\"outline\" \n                            size=\"sm\" \n                            onClick={() => handleEditPage(page)}\n                            data-testid={`button-edit-${page.slug}`}\n                          >\n                            <Edit className=\"h-4 w-4\" />\n                          </Button>\n                        </>\n                      ) : (\n                        <>\n                          <Button \n                            variant=\"outline\" \n                            size=\"sm\" \n                            className=\"flex-1\"\n                            onClick={() => handleEditPage(page)}\n                            data-testid={`button-edit-${page.slug}`}\n                          >\n                            <Edit className=\"h-4 w-4 mr-1\" />\n                            Edit\n                          </Button>\n                          <Button \n                            size=\"sm\" \n                            variant=\"default\"\n                            className=\"flex-1 bg-primary text-primary-foreground hover:bg-primary/90 shadow-md\"\n                            onClick={() => setLocation(`/${page.slug}`)}\n                            data-testid={`button-view-${page.slug}`}\n                          >\n                            <Eye className=\"h-4 w-4 mr-1\" />\n                            View\n                          </Button>\n                          <Button \n                            variant=\"outline\" \n                            size=\"sm\" \n                            className=\"text-blue-600 border-blue-200 hover:bg-blue-50 hover:text-blue-700\"\n                            onClick={() => handleCopyLink(page)}\n                            aria-label={`Copy link for ${page.title}`}\n                            title=\"Copy page link to clipboard\"\n                            data-testid={`button-copy-link-${page.slug}`}\n                          >\n                            <Link className=\"h-4 w-4\" />\n                          </Button>\n                        </>\n                      )}\n                      <Button \n                        variant=\"outline\" \n                        size=\"sm\" \n                        className=\"text-red-600 border-red-200 hover:bg-red-50 hover:text-red-700\"\n                        onClick={() => handleDeletePage(page.id)}\n                        data-testid={`button-delete-${page.slug}`}\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </Button>\n                    </>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n          \n          {/* Add new page card */}\n          <Card className=\"border-2 border-dashed border-border\">\n            <CardContent className=\"p-6 flex flex-col items-center justify-center text-center h-80\">\n              <div className=\"w-16 h-16 bg-muted rounded-xl flex items-center justify-center mb-4\">\n                <Plus className=\"h-8 w-8 text-muted-foreground\" />\n              </div>\n              <h3 className=\"text-lg font-semibold text-foreground mb-2\">Create New Page</h3>\n              <p className=\"text-muted-foreground text-sm mb-6\">\n                Set up another booking page for different services\n              </p>\n              <Button \n                onClick={handleCreatePage}\n                variant=\"default\"\n                className=\"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md\"\n                data-testid=\"button-create-another-page\"\n              >\n                Get Started\n              </Button>\n            </CardContent>\n          </Card>\n        </div>\n      )}\n\n      <CreatePageModal \n        open={showCreateModal} \n        onClose={() => {\n          setShowCreateModal(false);\n          setEditingPage(null);\n        }}\n        editingPage={editingPage}\n      />\n\n      <UpgradeModal \n        isOpen={showUpgradeModal} \n        onClose={() => setShowUpgradeModal(false)} \n      />\n\n      <AlertDialog open={!!deletePageId} onOpenChange={() => setDeletePageId(null)}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Delete Booking Page</AlertDialogTitle>\n            <AlertDialogDescription>\n              Are you sure you want to delete this booking page? This action cannot be undone and will permanently remove the page and all its associated data.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel data-testid=\"button-cancel-delete\">Cancel</AlertDialogCancel>\n            <AlertDialogAction \n              onClick={confirmDelete}\n              disabled={deleteMutation.isPending}\n              className=\"bg-red-600 hover:bg-red-700\"\n              data-testid=\"button-confirm-delete\"\n            >\n              {deleteMutation.isPending ? 'Deleting...' : 'Delete Page'}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n","size_bytes":19608},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/pages/subscription/cancel.tsx":{"content":"import { useLocation } from 'wouter';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { X, ArrowLeft } from 'lucide-react';\nimport Header from '@/components/layout/header';\nimport Footer from '@/components/layout/footer';\n\nexport default function SubscriptionCancel() {\n  const [, setLocation] = useLocation();\n\n  return (\n    <div className=\"min-h-screen bg-background page-gradient\">\n      <Header />\n      <div className=\"container mx-auto px-4 py-16 flex items-center justify-center min-h-[60vh]\">\n        <Card className=\"w-full max-w-lg mx-auto glass-prism-card backdrop-blur-xl bg-gradient-to-br from-white/95 via-orange-50/80 to-white/90 dark:from-gray-900/95 dark:via-orange-950/80 dark:to-gray-900/90 border border-orange-200/30 dark:border-orange-800/20 shadow-2xl\">\n          <CardHeader className=\"text-center\">\n            <div className=\"w-16 h-16 bg-orange-100 dark:bg-orange-900 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <X className=\"h-8 w-8 text-orange-600 dark:text-orange-400\" />\n            </div>\n            <CardTitle className=\"text-2xl text-orange-800 dark:text-orange-200\">\n              Subscription Cancelled\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"text-center space-y-6\">\n            <div className=\"space-y-2\">\n              <p className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">\n                No worries!\n              </p>\n              <p className=\"text-gray-600 dark:text-gray-300\">\n                Your subscription was cancelled. You can try again anytime or explore our features with the free plan.\n              </p>\n            </div>\n\n            <div className=\"bg-white/50 dark:bg-gray-800/50 rounded-lg p-4\">\n              <h3 className=\"font-semibold text-gray-900 dark:text-gray-100 mb-2\">\n                What you can still do:\n              </h3>\n              <ul className=\"text-sm text-gray-600 dark:text-gray-300 space-y-1 text-left\">\n                <li>• Explore the dashboard</li>\n                <li>• Try our free features</li>\n                <li>• Read our documentation</li>\n                <li>• Contact support if you have questions</li>\n              </ul>\n            </div>\n\n            <div className=\"space-y-3\">\n              <Button \n                onClick={() => setLocation('/pricing')}\n                className=\"w-full\"\n                data-testid=\"button-try-again\"\n              >\n                <ArrowLeft className=\"h-4 w-4 mr-2\" />\n                Try Again\n              </Button>\n              <Button \n                variant=\"outline\"\n                onClick={() => setLocation('/dashboard')}\n                className=\"w-full\"\n                data-testid=\"button-dashboard\"\n              >\n                Go to Dashboard\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n      <Footer />\n    </div>\n  );\n}","size_bytes":3031},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/hooks/use-auth.tsx":{"content":"import { useState, useEffect, createContext, useContext, useRef } from 'react';\nimport { useLocation } from 'wouter';\nimport { supabase } from '@/lib/supabase';\nimport type { User as SupabaseUser, Session, AuthChangeEvent } from '@supabase/supabase-js';\nimport { apiRequest, setAuthHandler } from '@/lib/queryClient';\n\ninterface User {\n  id: string;\n  email: string;\n  fullName?: string;\n}\n\ninterface Profile {\n  id: string;\n  fullName?: string;\n  membershipStatus: string;\n  membershipPlan?: string;\n  membershipExpires?: string;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  profile: Profile | null;\n  session: Session | null;\n  login: (email: string, password: string, redirectTo?: string) => Promise<void>;\n  signup: (email: string, password: string, fullName: string) => Promise<{ needsEmailConfirmation: boolean }>;\n  signInWithGoogle: () => Promise<void>;\n  resetPassword: (email: string) => Promise<void>;\n  resendConfirmation: (email: string) => Promise<void>;\n  logout: () => Promise<void>;\n  loading: boolean;\n}\n\nconst AuthContext = createContext<AuthContextType | null>(null);\n\nexport function AuthProvider({ children }: { children: React.ReactNode }): JSX.Element {\n  const [location, setLocation] = useLocation();\n  const [user, setUser] = useState<User | null>(null);\n  const [profile, setProfile] = useState<Profile | null>(null);\n  const [session, setSession] = useState<Session | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [redirectAfterLogin, setRedirectAfterLogin] = useState<string | null>(null);\n\n  // Track auth error handling to prevent duplicate calls\n  const authErrorRef = useRef(false);\n  \n  // Handle global 401 errors by logging out and redirecting to login\n  const handleAuthError = async () => {\n    // Debounce to prevent multiple simultaneous calls\n    if (authErrorRef.current) {\n      return;\n    }\n    authErrorRef.current = true;\n    \n    console.log('Authentication error detected, logging out...');\n    // Clear local state immediately\n    localStorage.removeItem('token');\n    setUser(null);\n    setProfile(null);\n    setSession(null);\n    \n    // Sign out from Supabase\n    await supabase.auth.signOut();\n    \n    // Redirect to login if not already there\n    if (location !== '/login' && location !== '/' && location !== '/signup') {\n      setRedirectAfterLogin(location);\n      setLocation('/login');\n    }\n    \n    // Reset the debounce flag after a short delay\n    setTimeout(() => {\n      authErrorRef.current = false;\n    }, 1000);\n  };\n\n  useEffect(() => {\n    // Set up global auth error handler for 401 responses\n    setAuthHandler(handleAuthError);\n    \n    // Get initial session\n    supabase.auth.getSession().then(({ data: { session } }: { data: { session: Session | null } }) => {\n      setSession(session);\n      if (session?.user) {\n        // Store Supabase token for API calls\n        localStorage.setItem('token', session.access_token);\n        setUser({\n          id: session.user.id,\n          email: session.user.email || '',\n          fullName: session.user.user_metadata?.full_name\n        });\n        fetchProfile(session.user.id);\n      } else {\n        localStorage.removeItem('token');\n      }\n      setLoading(false);\n    });\n\n    // Listen for auth changes\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange(async (event: AuthChangeEvent, session: Session | null) => {\n      setSession(session);\n      \n      if (session?.user) {\n        // Store Supabase token for API calls\n        localStorage.setItem('token', session.access_token);\n        setUser({\n          id: session.user.id,\n          email: session.user.email || '',\n          fullName: session.user.user_metadata?.full_name\n        });\n        \n        // Create profile if this is a new signup verification\n        if (event === 'SIGNED_IN' && session.user.email_confirmed_at) {\n          try {\n            await fetchProfile(session.user.id);\n          } catch (error) {\n            // If profile doesn't exist, create it\n            try {\n              await apiRequest('POST', '/api/profile', {\n                userId: session.user.id,\n                fullName: session.user.user_metadata?.full_name || '',\n              });\n              await fetchProfile(session.user.id);\n              \n              // Check for pending demo association after profile creation\n              const pendingDemoInfo = localStorage.getItem('pending_demo_info');\n              if (pendingDemoInfo) {\n                try {\n                  const demoInfo = JSON.parse(pendingDemoInfo);\n                  if (demoInfo.demoId && demoInfo.convertToken) {\n                    // Associate the demo with the new user account\n                    const demoResponse = await apiRequest('POST', '/api/demo/associate', {\n                      demoId: demoInfo.demoId,\n                      convertToken: demoInfo.convertToken\n                    });\n                    \n                    if (demoResponse.ok) {\n                      console.log('Demo successfully associated with user account after email confirmation');\n                      localStorage.removeItem('pending_demo_info');\n                      localStorage.removeItem('bookinggen_demo_v1');\n                    }\n                  }\n                } catch (demoError) {\n                  console.error('Failed to associate demo after email confirmation:', demoError);\n                }\n              }\n            } catch (createError) {\n              console.error('Failed to create profile after email verification:', createError);\n            }\n          }\n        } else {\n          fetchProfile(session.user.id);\n        }\n        \n        // Handle redirect after successful login\n        // Don't redirect if user is on reset password page (they came from email link)\n        if (redirectAfterLogin && (event === 'SIGNED_IN' || event === 'TOKEN_REFRESHED') && location !== '/reset-password') {\n          setTimeout(() => {\n            setLocation(redirectAfterLogin);\n            setRedirectAfterLogin(null);\n          }, 100);\n        }\n      } else {\n        localStorage.removeItem('token');\n        setUser(null);\n        setProfile(null);\n      }\n      setLoading(false);\n    });\n\n    return () => subscription.unsubscribe();\n  }, [redirectAfterLogin, setLocation, location]);\n\n  const fetchProfile = async (userId: string) => {\n    try {\n      const response = await apiRequest('GET', '/api/profile');\n      \n      if (!response.ok) {\n        // If profile doesn't exist (404), throw to trigger creation\n        if (response.status === 404) {\n          throw new Error('Profile not found');\n        }\n        // For other errors, set fallback profile\n        console.error('Failed to fetch profile:', response.status);\n        setProfile({\n          id: userId,\n          fullName: session?.user?.user_metadata?.full_name || '',\n          membershipStatus: 'free',\n          membershipPlan: undefined,\n          membershipExpires: undefined\n        });\n        return;\n      }\n      \n      const profileData = await response.json();\n      setProfile(profileData);\n      console.log('Profile fetched successfully:', profileData);\n    } catch (error) {\n      // Re-throw 404 errors to allow profile creation\n      if (error instanceof Error && error.message === 'Profile not found') {\n        throw error;\n      }\n      \n      console.error('Failed to fetch profile:', error);\n      // Set a default profile for network/server errors\n      setProfile({\n        id: userId,\n        fullName: session?.user?.user_metadata?.full_name || '',\n        membershipStatus: 'free',\n        membershipPlan: undefined,\n        membershipExpires: undefined\n      });\n    }\n  };\n\n  const login = async (email: string, password: string, redirectTo: string = '/dashboard') => {\n    // Only set redirectAfterLogin if it's not already set (preserve auth handler's redirect)\n    if (!redirectAfterLogin) {\n      setRedirectAfterLogin(redirectTo);\n    }\n    const { data, error } = await supabase.auth.signInWithPassword({\n      email,\n      password,\n    });\n\n    if (error) {\n      setRedirectAfterLogin(null);\n      throw new Error(error.message);\n    }\n  };\n\n  const signup = async (email: string, password: string, fullName: string) => {\n    const { data, error } = await supabase.auth.signUp({\n      email,\n      password,\n      options: {\n        data: {\n          full_name: fullName,\n        },\n        emailRedirectTo: `${window.location.origin}/dashboard`,\n      },\n    });\n\n    if (error) {\n      console.error('Supabase signup error:', error);\n      throw new Error(error.message);\n    }\n    \n    console.log('Signup response:', { user: data.user?.id, session: !!data.session, needsConfirmation: !data.session });\n\n    // Check if email confirmation is needed\n    const needsEmailConfirmation = !data.session && data.user && !data.user.email_confirmed_at;\n\n    // Create profile in our database only if user is immediately confirmed\n    if (data.user && data.session) {\n      try {\n        // Store token BEFORE making profile creation request\n        localStorage.setItem('token', data.session.access_token);\n        \n        console.log('Creating profile for user:', data.user.id);\n        const profileResponse = await apiRequest('POST', '/api/profile', {\n          userId: data.user.id,\n          fullName: fullName,\n        });\n        console.log('Profile creation response:', profileResponse.status);\n\n        // Check for pending demo association after signup\n        const pendingDemoInfo = localStorage.getItem('pending_demo_info');\n        if (pendingDemoInfo) {\n          try {\n            const demoInfo = JSON.parse(pendingDemoInfo);\n            if (demoInfo.demoId && demoInfo.convertToken) {\n              // Associate the demo with the new user account\n              const demoResponse = await apiRequest('POST', '/api/demo/associate', {\n                demoId: demoInfo.demoId,\n                convertToken: demoInfo.convertToken\n              });\n              \n              if (demoResponse.ok) {\n                console.log('Demo successfully associated with user account');\n                localStorage.removeItem('pending_demo_info');\n                localStorage.removeItem('bookinggen_demo_v1');\n              }\n            }\n          } catch (demoError) {\n            console.error('Failed to associate demo after signup:', demoError);\n          }\n        }\n      } catch (error) {\n        console.error('Failed to create profile:', error);\n      }\n    }\n\n    return { needsEmailConfirmation: !!needsEmailConfirmation };\n  };\n\n  const signInWithGoogle = async () => {\n    const { data, error } = await supabase.auth.signInWithOAuth({\n      provider: 'google',\n      options: {\n        redirectTo: `${window.location.origin}/dashboard`,\n      },\n    });\n\n    if (error) {\n      throw new Error(error.message);\n    }\n  };\n\n  const resetPassword = async (email: string) => {\n    const { error } = await supabase.auth.resetPasswordForEmail(email, {\n      redirectTo: `${window.location.origin}/reset-password`,\n    });\n\n    if (error) {\n      throw new Error(error.message);\n    }\n  };\n\n  const resendConfirmation = async (email: string) => {\n    const { error } = await supabase.auth.resend({\n      type: 'signup',\n      email: email,\n      options: {\n        emailRedirectTo: `${window.location.origin}/dashboard`,\n      },\n    });\n\n    if (error) {\n      throw new Error(error.message);\n    }\n  };\n\n  const logout = async () => {\n    const { error } = await supabase.auth.signOut();\n    if (error) {\n      throw new Error(error.message);\n    }\n  };\n\n  return (\n    <AuthContext.Provider value={{ \n      user, \n      profile, \n      session, \n      login, \n      signup, \n      signInWithGoogle, \n      resetPassword, \n      resendConfirmation, \n      logout, \n      loading \n    }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}","size_bytes":12096},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":791},"README.md":{"content":"# BookingGen - Beautiful Booking Pages Generator\n\nCreate stunning, professional booking pages in minutes. BookingGen is a modern SaaS platform that allows freelancers, consultants, and service providers to build custom booking experiences with integrated payment processing and appointment management.\n\n## ✨ Features\n\n- **Custom Booking Pages**: Create beautiful, branded booking pages with your logo, colors, and services\n- **Smart Scheduling**: Intelligent calendar integration with availability management and time zone detection\n- **Secure Payments**: Accept payments instantly with Razorpay integration\n- **Mobile Optimized**: Responsive designs that work perfectly on all devices\n- **Analytics Dashboard**: Track bookings, revenue, and customer insights\n- **Appointment Management**: Accept, decline, and reschedule appointments with ease\n\n## 🚀 Tech Stack\n\n- **Frontend**: React + Vite, Tailwind CSS, Shadcn UI\n- **Backend**: Express.js with serverless API routes\n- **Database**: PostgreSQL with Drizzle ORM\n- **Authentication**: Supabase Auth\n- **Payments**: Razorpay\n- **Storage**: Supabase Storage\n- **Deployment**: Vercel\n\n## 📋 Prerequisites\n\n- Node.js 18+ and npm\n- Supabase account and project\n- Razorpay account for payment processing\n\n## 🛠️ Local Development Setup\n\n### 1. Clone the Repository\n\n```bash\ngit clone <repository-url>\ncd bookinggen\nnpm install\n","size_bytes":1383},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/modals/booking-modal.tsx":{"content":"import { useState } from 'react';\nimport { useMutation } from '@tanstack/react-query';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { useToast } from '@/hooks/use-toast';\nimport { apiRequest } from '@/lib/queryClient';\nimport { Info, Calendar, Clock, User, Mail, Phone, FileText, Sparkles, Check } from 'lucide-react';\n\ninterface BookingModalProps {\n  open: boolean;\n  onClose: () => void;\n  page: any;\n  services: any[];\n}\n\nexport default function BookingModal({ open, onClose, page, services }: BookingModalProps) {\n  const { toast } = useToast();\n  const [formData, setFormData] = useState({\n    customerName: '',\n    customerPhone: '',\n    customerEmail: '',\n    serviceId: '',\n    date: '',\n    time: '',\n    notes: ''\n  });\n\n  // Extract theme color from page\n  const primaryColor = page?.primaryColor || '#2563eb';\n\n  // Helper function to convert hex to RGB\n  const hexToRgb = (hex: string) => {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result \n      ? `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}`\n      : '37, 99, 235';\n  };\n\n  const createAppointmentMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await apiRequest('POST', '/api/appointments', data);\n      return response.json();\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Booking request submitted!\",\n        description: \"You will receive a confirmation email shortly.\",\n      });\n      onClose();\n      resetForm();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error submitting booking\",\n        description: error.message || \"Something went wrong. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      customerName: '',\n      customerPhone: '',\n      customerEmail: '',\n      serviceId: '',\n      date: '',\n      time: '',\n      notes: ''\n    });\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!formData.customerName || !formData.customerPhone || !formData.customerEmail || !formData.serviceId || !formData.date || !formData.time) {\n      toast({\n        title: \"Missing required fields\",\n        description: \"Please fill in all required fields including email.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    createAppointmentMutation.mutate({\n      pageId: page.id,\n      ownerId: page.ownerId,\n      serviceId: formData.serviceId,\n      customerName: formData.customerName,\n      customerPhone: formData.customerPhone,\n      customerEmail: formData.customerEmail,\n      date: formData.date,\n      time: formData.time,\n      notes: formData.notes\n    });\n  };\n\n  const timeSlots = [\n    '09:00', '10:00', '11:00', '12:00',\n    '13:00', '14:00', '15:00', '16:00', '17:00'\n  ];\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent \n        className=\"max-w-3xl max-h-[90vh] overflow-y-auto p-0 border-0 shadow-2xl !rounded-2xl\"\n        style={{\n          background: `linear-gradient(135deg, rgba(${hexToRgb(primaryColor)}, 0.04) 0%, rgba(${hexToRgb(primaryColor)}, 0.01) 100%), rgba(255, 255, 255, 0.95)`,\n          borderRadius: '1rem'\n        }}\n      >\n        <div className=\"p-6 sm:p-8\">\n          <DialogHeader className=\"text-center space-y-2 mb-6\">\n            <div \n              className=\"mx-auto w-16 h-16 rounded-2xl flex items-center justify-center mb-2 shadow-lg\"\n              style={{\n                background: `linear-gradient(135deg, ${primaryColor} 0%, ${primaryColor}dd 100%)`\n              }}\n            >\n              <Sparkles className=\"h-8 w-8 text-white\" />\n            </div>\n            <DialogTitle className=\"text-3xl font-bold text-foreground\">\n              Book Your Appointment\n            </DialogTitle>\n            <p className=\"text-base text-muted-foreground max-w-md mx-auto\">\n              Choose your preferred time and let us create something amazing together\n            </p>\n          </DialogHeader>\n        \n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            {/* Personal Information Section */}\n            <Card \n              className=\"border-0 shadow-lg backdrop-blur-sm rounded-2xl\"\n              style={{\n                background: `linear-gradient(135deg, rgba(${hexToRgb(primaryColor)}, 0.03) 0%, rgba(${hexToRgb(primaryColor)}, 0.01) 100%), rgba(255, 255, 255, 0.6)`\n              }}\n            >\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center space-x-3 mb-6\">\n                  <div \n                    className=\"w-10 h-10 rounded-xl flex items-center justify-center shadow-md\"\n                    style={{\n                      background: `linear-gradient(135deg, rgba(${hexToRgb(primaryColor)}, 0.15) 0%, rgba(${hexToRgb(primaryColor)}, 0.08) 100%)`\n                    }}\n                  >\n                    <User className=\"h-5 w-5\" style={{ color: primaryColor }} />\n                  </div>\n                  <h3 className=\"text-xl font-semibold text-foreground\">Personal Information</h3>\n                </div>\n                <div className=\"grid md:grid-cols-2 gap-6\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"customerName\" className=\"text-sm font-medium text-foreground flex items-center space-x-2\">\n                      <span>Full Name</span>\n                      <span className=\"text-red-500\">*</span>\n                    </Label>\n                    <Input\n                      id=\"customerName\"\n                      placeholder=\"Enter your full name\"\n                      value={formData.customerName}\n                      onChange={(e) => setFormData(prev => ({ ...prev, customerName: e.target.value }))}\n                      required\n                      className=\"h-12 border-0 bg-background/80 backdrop-blur-sm shadow-sm focus:shadow-md transition-all duration-200\"\n                      data-testid=\"input-customer-name\"\n                    />\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"customerPhone\" className=\"text-sm font-medium text-foreground flex items-center space-x-2\">\n                      <Phone className=\"h-4 w-4\" />\n                      <span>Phone Number</span>\n                      <span className=\"text-red-500\">*</span>\n                    </Label>\n                    <Input\n                      id=\"customerPhone\"\n                      type=\"tel\"\n                      placeholder=\"(123) 456-7890\"\n                      value={formData.customerPhone}\n                      onChange={(e) => setFormData(prev => ({ ...prev, customerPhone: e.target.value }))}\n                      required\n                      className=\"h-12 border-0 bg-background/80 backdrop-blur-sm shadow-sm focus:shadow-md transition-all duration-200\"\n                      data-testid=\"input-customer-phone\"\n                    />\n                  </div>\n                </div>\n                <div className=\"mt-6 space-y-2\">\n                  <Label htmlFor=\"customerEmail\" className=\"text-sm font-medium text-foreground flex items-center space-x-2\">\n                    <Mail className=\"h-4 w-4\" />\n                    <span>Email Address</span>\n                    <span className=\"text-red-500\">*</span>\n                  </Label>\n                  <Input\n                    id=\"customerEmail\"\n                    type=\"email\"\n                    placeholder=\"your@email.com\"\n                    value={formData.customerEmail}\n                    onChange={(e) => setFormData(prev => ({ ...prev, customerEmail: e.target.value }))}\n                    required\n                    className=\"h-12 border-0 bg-background/80 backdrop-blur-sm shadow-sm focus:shadow-md transition-all duration-200\"\n                    data-testid=\"input-customer-email\"\n                  />\n                </div>\n              </CardContent>\n            </Card>\n            \n            {/* Service Selection Section */}\n            <Card \n              className=\"border-0 shadow-lg backdrop-blur-sm rounded-2xl\"\n              style={{\n                background: `linear-gradient(135deg, rgba(${hexToRgb(primaryColor)}, 0.03) 0%, rgba(${hexToRgb(primaryColor)}, 0.01) 100%), rgba(255, 255, 255, 0.6)`\n              }}\n            >\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center space-x-3 mb-6\">\n                  <div \n                    className=\"w-10 h-10 rounded-xl flex items-center justify-center shadow-md\"\n                    style={{\n                      background: `linear-gradient(135deg, rgba(${hexToRgb(primaryColor)}, 0.15) 0%, rgba(${hexToRgb(primaryColor)}, 0.08) 100%)`\n                    }}\n                  >\n                    <Sparkles className=\"h-5 w-5\" style={{ color: primaryColor }} />\n                  </div>\n                  <h3 className=\"text-xl font-semibold text-foreground\">Select Your Service</h3>\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"service\" className=\"text-sm font-medium text-foreground flex items-center space-x-2\">\n                    <span>Choose a Service</span>\n                    <span className=\"text-red-500\">*</span>\n                  </Label>\n                  <Select value={formData.serviceId} onValueChange={(value) => setFormData(prev => ({ ...prev, serviceId: value }))}>\n                    <SelectTrigger className=\"h-12 border-0 bg-background/80 backdrop-blur-sm shadow-sm focus:shadow-md transition-all duration-200\" data-testid=\"select-service\">\n                      <SelectValue placeholder=\"Choose a service\" />\n                    </SelectTrigger>\n                    <SelectContent className=\"bg-card/95 backdrop-blur-md border-0 shadow-xl z-[100]\">\n                      {services.map((service) => (\n                        <SelectItem key={service.id} value={service.id} className=\"focus:bg-primary/10 cursor-pointer\">\n                          <div className=\"flex items-center justify-between w-full\">\n                            <span className=\"font-medium\">{service.name}</span>\n                            <div className=\"flex items-center space-x-2 text-sm text-muted-foreground\">\n                              <span className=\"font-semibold text-primary\">${service.price}</span>\n                              <span>•</span>\n                              <span>{service.durationMinutes} min</span>\n                            </div>\n                          </div>\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n              </CardContent>\n            </Card>\n            \n            {/* Appointment Timing Section */}\n            <Card \n              className=\"border-0 shadow-lg backdrop-blur-sm rounded-2xl\"\n              style={{\n                background: `linear-gradient(135deg, rgba(${hexToRgb(primaryColor)}, 0.03) 0%, rgba(${hexToRgb(primaryColor)}, 0.01) 100%), rgba(255, 255, 255, 0.6)`\n              }}\n            >\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center space-x-3 mb-6\">\n                  <div \n                    className=\"w-10 h-10 rounded-xl flex items-center justify-center shadow-md\"\n                    style={{\n                      background: `linear-gradient(135deg, rgba(${hexToRgb(primaryColor)}, 0.15) 0%, rgba(${hexToRgb(primaryColor)}, 0.08) 100%)`\n                    }}\n                  >\n                    <Calendar className=\"h-5 w-5\" style={{ color: primaryColor }} />\n                  </div>\n                  <h3 className=\"text-xl font-semibold text-foreground\">Schedule Your Appointment</h3>\n                </div>\n                <div className=\"grid md:grid-cols-2 gap-6\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"date\" className=\"text-sm font-medium text-foreground flex items-center space-x-2\">\n                      <Calendar className=\"h-4 w-4\" />\n                      <span>Preferred Date</span>\n                      <span className=\"text-red-500\">*</span>\n                    </Label>\n                    <Input\n                      id=\"date\"\n                      type=\"date\"\n                      value={formData.date}\n                      onChange={(e) => setFormData(prev => ({ ...prev, date: e.target.value }))}\n                      min={new Date().toISOString().split('T')[0]}\n                      required\n                      className=\"h-12 border-0 bg-background/80 backdrop-blur-sm shadow-sm focus:shadow-md transition-all duration-200\"\n                      data-testid=\"input-date\"\n                    />\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"time\" className=\"text-sm font-medium text-foreground flex items-center space-x-2\">\n                      <Clock className=\"h-4 w-4\" />\n                      <span>Preferred Time</span>\n                      <span className=\"text-red-500\">*</span>\n                    </Label>\n                    <Select value={formData.time} onValueChange={(value) => setFormData(prev => ({ ...prev, time: value }))}>\n                      <SelectTrigger className=\"h-12 border-0 bg-background/80 backdrop-blur-sm shadow-sm focus:shadow-md transition-all duration-200\" data-testid=\"select-time\">\n                        <SelectValue placeholder=\"Select time slot\" />\n                      </SelectTrigger>\n                      <SelectContent className=\"bg-card/95 backdrop-blur-md border-0 shadow-xl z-[100]\">\n                        {timeSlots.map((time) => (\n                          <SelectItem key={time} value={time} className=\"focus:bg-primary/10 cursor-pointer\">\n                            <div className=\"flex items-center space-x-2\">\n                              <Clock className=\"h-4 w-4 text-muted-foreground\" />\n                              <span>{time}</span>\n                            </div>\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n            \n            {/* Additional Information Section */}\n            <Card \n              className=\"border-0 shadow-lg backdrop-blur-sm rounded-2xl\"\n              style={{\n                background: `linear-gradient(135deg, rgba(${hexToRgb(primaryColor)}, 0.03) 0%, rgba(${hexToRgb(primaryColor)}, 0.01) 100%), rgba(255, 255, 255, 0.6)`\n              }}\n            >\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center space-x-3 mb-6\">\n                  <div \n                    className=\"w-10 h-10 rounded-xl flex items-center justify-center shadow-md\"\n                    style={{\n                      background: `linear-gradient(135deg, rgba(${hexToRgb(primaryColor)}, 0.15) 0%, rgba(${hexToRgb(primaryColor)}, 0.08) 100%)`\n                    }}\n                  >\n                    <FileText className=\"h-5 w-5\" style={{ color: primaryColor }} />\n                  </div>\n                  <h3 className=\"text-xl font-semibold text-foreground\">Additional Information</h3>\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"notes\" className=\"text-sm font-medium text-foreground flex items-center space-x-2\">\n                    <FileText className=\"h-4 w-4\" />\n                    <span>Special Requests or Notes</span>\n                    <span className=\"text-muted-foreground text-xs\">(Optional)</span>\n                  </Label>\n                  <Textarea\n                    id=\"notes\"\n                    rows={4}\n                    placeholder=\"Tell us about your goals, any health concerns, or special requests...\"\n                    value={formData.notes}\n                    onChange={(e) => setFormData(prev => ({ ...prev, notes: e.target.value }))}\n                    className=\"resize-none border-0 bg-background/80 backdrop-blur-sm shadow-sm focus:shadow-md transition-all duration-200\"\n                    data-testid=\"textarea-notes\"\n                  />\n                </div>\n                \n                <div \n                  className=\"mt-6 rounded-xl p-4\"\n                  style={{\n                    background: `linear-gradient(135deg, rgba(${hexToRgb(primaryColor)}, 0.08) 0%, rgba(${hexToRgb(primaryColor)}, 0.04) 100%)`,\n                    border: `1px solid rgba(${hexToRgb(primaryColor)}, 0.15)`\n                  }}\n                >\n                  <div className=\"flex items-start space-x-3\">\n                    <div \n                      className=\"w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5\"\n                      style={{\n                        background: `rgba(${hexToRgb(primaryColor)}, 0.2)`\n                      }}\n                    >\n                      <Check className=\"h-3 w-3\" style={{ color: primaryColor }} />\n                    </div>\n                    <div className=\"text-sm\">\n                      <p className=\"font-medium text-foreground mb-1\">What happens next?</p>\n                      <p className=\"text-muted-foreground\">You'll receive a confirmation email within 30 minutes, and we'll contact you to confirm your appointment details.</p>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n            \n            {/* Action Buttons */}\n            <div className=\"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4 pt-6\">\n              <Button \n                type=\"button\" \n                variant=\"outline\" \n                className=\"flex-1 h-14 border-2 hover:bg-muted/50 transition-all duration-200 text-base font-medium rounded-xl\"\n                onClick={onClose}\n                data-testid=\"button-cancel\"\n              >\n                Cancel\n              </Button>\n              <Button \n                type=\"submit\" \n                className=\"flex-1 h-14 text-base font-semibold text-white shadow-lg hover:shadow-xl transition-all duration-200 rounded-xl\"\n                style={{\n                  background: `linear-gradient(135deg, ${primaryColor} 0%, ${primaryColor}dd 100%)`\n                }}\n                disabled={createAppointmentMutation.isPending}\n                data-testid=\"button-submit-booking\"\n              >\n                {createAppointmentMutation.isPending ? (\n                  <div className=\"flex items-center justify-center space-x-2\">\n                    <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-current\"></div>\n                    <span>Submitting...</span>\n                  </div>\n                ) : (\n                  <div className=\"flex items-center justify-center space-x-2\">\n                    <Sparkles className=\"h-5 w-5\" />\n                    <span>Book My Appointment</span>\n                  </div>\n                )}\n              </Button>\n            </div>\n          </form>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":19734},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { AuthProvider } from \"@/hooks/use-auth\";\nimport { CurrencyProvider } from \"@/hooks/use-currency\";\nimport Home from \"@/pages/home\";\nimport Login from \"@/pages/login\";\nimport Signup from \"@/pages/signup\";\nimport ResetPassword from \"@/pages/reset-password\";\nimport Dashboard from \"@/pages/dashboard\";\nimport CreatePage from \"@/pages/create-page\";\nimport PublicBooking from \"@/pages/public-booking\";\nimport Pricing from \"@/pages/pricing\";\nimport Sales from \"@/pages/sales\";\nimport Tutorial from \"@/pages/tutorial\";\nimport AuthGuard from \"@/components/auth/auth-guard\";\nimport NotFound from \"@/pages/not-found\";\nimport Legal from \"@/pages/legal\";\nimport Terms from \"@/pages/terms\";\nimport Privacy from \"@/pages/privacy\";\nimport Refunds from \"@/pages/refunds\";\nimport Contact from \"@/pages/contact\";\nimport ReportBug from \"@/pages/report-bug\";\nimport RequestFeature from \"@/pages/request-feature\";\nimport HelpCenter from \"@/pages/help-center\";\nimport SubscriptionSuccess from \"@/pages/subscription/success\";\nimport SubscriptionCancel from \"@/pages/subscription/cancel\";\nimport SubscriptionDelays from \"@/pages/subscription-delays\";\nimport AdminPage from \"@/pages/admin\";\nimport ReschedulePublic from \"@/pages/reschedule-public\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={Home} />\n      <Route path=\"/login\" component={Login} />\n      <Route path=\"/signup\" component={Signup} />\n      <Route path=\"/reset-password\" component={ResetPassword} />\n      <Route path=\"/pricing\" component={Pricing} />\n      <Route path=\"/sales\" component={Sales} />\n      <Route path=\"/tutorial\" component={Tutorial} />\n      <Route path=\"/legal\" component={Legal} />\n      <Route path=\"/terms\" component={Terms} />\n      <Route path=\"/privacy\" component={Privacy} />\n      <Route path=\"/refunds\" component={Refunds} />\n      <Route path=\"/contact\" component={Contact} />\n      <Route path=\"/help-center\" component={HelpCenter} />\n      <Route path=\"/subscription/success\" component={SubscriptionSuccess} />\n      <Route path=\"/subscription/cancel\" component={SubscriptionCancel} />\n      <Route path=\"/subscription-delays\" component={SubscriptionDelays} />\n      <Route path=\"/admin\" component={AdminPage} />\n      <Route path=\"/dashboard\">\n        <AuthGuard>\n          <Dashboard />\n        </AuthGuard>\n      </Route>\n      <Route path=\"/create-page\">\n        <AuthGuard>\n          <CreatePage />\n        </AuthGuard>\n      </Route>\n      <Route path=\"/report-bug\">\n        <AuthGuard>\n          <ReportBug />\n        </AuthGuard>\n      </Route>\n      <Route path=\"/request-feature\">\n        <AuthGuard>\n          <RequestFeature />\n        </AuthGuard>\n      </Route>\n      <Route path=\"/reschedule/:appointmentId\" component={ReschedulePublic} />\n      <Route path=\"/:slug\" component={PublicBooking} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <CurrencyProvider>\n        <AuthProvider>\n          <TooltipProvider>\n            <Toaster />\n            <Router />\n          </TooltipProvider>\n        </AuthProvider>\n      </CurrencyProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":3474},"client/src/components/RazorpaySubscriptionButton.tsx":{"content":"import { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { CreditCard, Loader2 } from 'lucide-react';\nimport { apiRequest } from '@/lib/queryClient';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface RazorpaySubscriptionButtonProps {\n  plan?: string;\n  isTrial?: boolean;\n  onSuccess?: (subscriptionId: string) => void;\n  onError?: (error: any) => void;\n  onCancel?: () => void;\n  onPaymentStart?: () => void;\n  disabled?: boolean;\n  className?: string;\n  children?: React.ReactNode;\n}\n\ndeclare global {\n  interface Window {\n    Razorpay: any;\n  }\n}\n\nexport default function RazorpaySubscriptionButton({\n  plan = 'pro',\n  isTrial = false,\n  onSuccess,\n  onError,\n  onCancel,\n  onPaymentStart,\n  disabled = false,\n  className = \"\",\n  children = \"Pay with Credit / Debit card\"\n}: RazorpaySubscriptionButtonProps) {\n  const [isProcessing, setIsProcessing] = useState(false);\n  const { toast } = useToast();\n\n  // Load Razorpay SDK\n  const loadRazorpayScript = (): Promise<boolean> => {\n    return new Promise((resolve) => {\n      if (window.Razorpay) {\n        resolve(true);\n        return;\n      }\n      const script = document.createElement('script');\n      script.src = 'https://checkout.razorpay.com/v1/checkout.js';\n      script.onload = () => resolve(true);\n      script.onerror = () => resolve(false);\n      document.body.appendChild(script);\n    });\n  };\n\n  const handleSubscription = async () => {\n    try {\n      setIsProcessing(true);\n\n      // Load Razorpay script if not already loaded\n      const scriptLoaded = await loadRazorpayScript();\n      if (!scriptLoaded) {\n        throw new Error('Failed to load Razorpay checkout script');\n      }\n\n      // Create subscription on backend\n      const response = await apiRequest('POST', '/api/razorpay/subscriptions', {\n        plan: plan,\n        isTrial: isTrial\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.error || 'Failed to create subscription');\n      }\n\n      const subscriptionData = await response.json();\n\n      // Configure Razorpay subscription options\n      const options = {\n        key: subscriptionData.key,\n        subscription_id: subscriptionData.subscriptionId,\n        name: 'BookingGen Pro',\n        description: isTrial ? '7-Day Free Trial - Then $14.99/month' : 'Monthly Pro Subscription - $14.99/month',\n        handler: async (response: any) => {\n          try {\n            console.log('Razorpay subscription response:', response);\n            \n            // Check subscription status with retry logic (Razorpay needs time to update status)\n            const checkStatus = async (retries = 8, delay = 3000): Promise<void> => {\n              for (let i = 0; i < retries; i++) {\n                try {\n                  // Wait before EACH check to give Razorpay time to update\n                  // Start with 5 seconds for the first check, then 3 seconds for subsequent checks\n                  const waitTime = i === 0 ? 5000 : delay;\n                  console.log(`⏱️ Waiting ${waitTime/1000}s before status check ${i + 1}...`);\n                  await new Promise(resolve => setTimeout(resolve, waitTime));\n                  \n                  const statusResponse = await apiRequest('GET', `/api/razorpay/subscriptions/${subscriptionData.subscriptionId}`);\n                  if (statusResponse.ok) {\n                    const statusData = await statusResponse.json();\n                    console.log(`✅ Subscription status check (attempt ${i + 1}):`, statusData);\n                    \n                    // If status is authenticated or active, activation is complete\n                    if (statusData.status === 'authenticated' || statusData.status === 'active') {\n                      console.log('🎉 Subscription activated successfully!');\n                      return;\n                    }\n                    \n                    console.log(`⏳ Status still \"${statusData.status}\", retrying...`);\n                  } else {\n                    const errorText = await statusResponse.text();\n                    console.warn(`❌ Status check HTTP ${statusResponse.status} (attempt ${i + 1}):`, errorText);\n                  }\n                } catch (statusError) {\n                  console.error(`❌ Status check failed (attempt ${i + 1}):`, statusError);\n                }\n              }\n              \n              console.log('⚠️ Status checks complete. Webhook will activate your membership shortly.');\n            };\n            \n            // Start status check in background (don't await - let it run)\n            checkStatus().catch(err => console.error('Status check error:', err));\n            \n            toast({\n              title: isTrial ? \"Free Trial Activated!\" : \"Subscription Created!\",\n              description: isTrial ? \"Your 7-day free trial has started. You won't be charged until the trial ends.\" : \"Your monthly Pro subscription is now active.\",\n            });\n\n            if (onSuccess) {\n              onSuccess(subscriptionData.subscriptionId);\n            }\n          } catch (error) {\n            console.error('Subscription handler error:', error);\n            toast({\n              title: \"Subscription Setup Failed\",\n              description: \"There was an issue setting up your subscription. Please contact support.\",\n              variant: \"destructive\",\n            });\n\n            if (onError) {\n              onError(error);\n            }\n          }\n        },\n        prefill: {\n          name: '',\n          email: '',\n          contact: ''\n        },\n        notes: {\n          plan: plan,\n          type: 'subscription'\n        },\n        theme: {\n          color: '#2563eb'\n        },\n        modal: {\n          ondismiss: () => {\n            setIsProcessing(false);\n            toast({\n              title: \"Subscription Cancelled\",\n              description: \"You can try again anytime.\",\n            });\n            \n            if (onCancel) {\n              onCancel();\n            }\n          }\n        }\n      };\n\n      // Open Razorpay subscription checkout\n      const razorpayInstance = new window.Razorpay(options);\n      razorpayInstance.open();\n\n      // Call onPaymentStart callback to notify parent component that payment popup has opened\n      if (onPaymentStart) {\n        onPaymentStart();\n      }\n\n    } catch (error) {\n      console.error('Subscription initialization failed:', error);\n      setIsProcessing(false);\n      \n      toast({\n        title: \"Subscription Failed\",\n        description: error instanceof Error ? error.message : \"Failed to initialize subscription. Please try again.\",\n        variant: \"destructive\",\n      });\n\n      if (onError) {\n        onError(error);\n      }\n    }\n  };\n\n  return (\n    <Button\n      onClick={handleSubscription}\n      disabled={disabled || isProcessing}\n      className={className}\n      data-testid=\"button-razorpay-subscription\"\n    >\n      {isProcessing ? (\n        <>\n          <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n          Setting up subscription...\n        </>\n      ) : (\n        <>\n          <CreditCard className=\"h-4 w-4 mr-2\" />\n          {children}\n        </>\n      )}\n    </Button>\n  );\n}","size_bytes":7257},"client/src/pages/signup.tsx":{"content":"import { useState } from 'react';\nimport { useLocation } from 'wouter';\nimport { useAuth } from '@/hooks/use-auth';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { useToast } from '@/hooks/use-toast';\nimport { CalendarDays, Home, Eye, EyeOff } from 'lucide-react';\nimport EmailConfirmationModal from '@/components/modals/email-confirmation-modal';\n\nexport default function Signup() {\n  const [, setLocation] = useLocation();\n  const { signup, signInWithGoogle } = useAuth();\n  const { toast } = useToast();\n  const [loading, setLoading] = useState(false);\n  const [showEmailConfirmation, setShowEmailConfirmation] = useState(false);\n  const [formData, setFormData] = useState({\n    fullName: '',\n    email: '',\n    password: '',\n    remember: false,\n    agreeToTerms: false\n  });\n  const [showPassword, setShowPassword] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!formData.agreeToTerms) {\n      toast({\n        title: \"Please accept the terms\",\n        description: \"You must agree to the Terms of Service and Privacy Policy.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      const result = await signup(formData.email, formData.password, formData.fullName);\n      \n      if (result.needsEmailConfirmation) {\n        setShowEmailConfirmation(true);\n        toast({\n          title: \"Check your email!\",\n          description: \"We sent you a confirmation link to complete your signup.\",\n        });\n      } else {\n        // Check if redirected from demo creation\n        const urlParams = new URLSearchParams(window.location.search);\n        const redirectFrom = urlParams.get('redirect_from');\n        \n        if (redirectFrom === 'demo') {\n          toast({\n            title: \"Account created!\",\n            description: \"Welcome to BookingGen! Your demo page is now available in your dashboard.\",\n          });\n        } else {\n          toast({\n            title: \"Account created!\",\n            description: \"Welcome to BookingGen. Let's get you started.\",\n          });\n        }\n        setLocation('/dashboard');\n      }\n    } catch (error) {\n      toast({\n        title: \"Signup failed\",\n        description: \"Failed to create account. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleGoogleSignUp = async () => {\n    try {\n      await signInWithGoogle();\n      // Note: Supabase OAuth will handle the redirect, so no need to manually redirect\n    } catch (error) {\n      toast({\n        title: \"Google Sign Up failed\",\n        description: \"Failed to sign up with Google. Please try again.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen page-gradient relative overflow-hidden\">\n      {/* Glass Prism Background Elements */}\n      <div className=\"absolute inset-0 bg-gradient-to-br from-blue-50/80 via-white to-blue-50/80 bg-overlay\"></div>\n      <div className=\"absolute top-10 left-10 w-72 h-72 glass-prism rounded-full opacity-30 animate-float bg-overlay\"></div>\n      <div className=\"absolute top-32 right-20 w-96 h-96 glass-prism rounded-full opacity-20 animate-float bg-overlay\" style={{animationDelay: '1.5s'}}></div>\n      <div className=\"absolute bottom-20 left-1/3 w-48 h-48 glass-prism rounded-full opacity-25 animate-float bg-overlay\" style={{animationDelay: '3s'}}></div>\n      \n      <div className=\"relative flex items-center justify-center min-h-screen p-6 content-layer\">\n        <div className=\"w-full max-w-md glass-prism-card rounded-3xl p-8 hover-lift animate-fade-in-up\">\n          <div className=\"flex justify-start mb-4\">\n            <Button \n              variant=\"ghost\" \n              size=\"sm\"\n              onClick={() => setLocation('/')}\n              className=\"flex items-center space-x-2 text-muted-foreground hover:text-foreground bg-white/10 backdrop-blur-sm border border-white/20 hover:bg-white/20 transition-all duration-300 rounded-lg\"\n              data-testid=\"button-back-home\"\n            >\n              <Home className=\"h-4 w-4\" />\n              <span>Back to Homepage</span>\n            </Button>\n          </div>\n          \n          <div className=\"text-center mb-8\">\n            <div className=\"flex items-center justify-center space-x-3 mb-4\">\n              <div className=\"w-10 h-10 glass-prism rounded-lg flex items-center justify-center\">\n                <CalendarDays className=\"h-6 w-6 text-primary\" />\n              </div>\n              <span className=\"text-xl font-bold text-foreground\">BookingGen</span>\n            </div>\n            <h1 className=\"text-2xl font-bold text-foreground mb-2\">Create your account</h1>\n            <p className=\"text-muted-foreground\">Start creating beautiful booking pages today</p>\n          </div>\n          \n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <div>\n              <Label htmlFor=\"fullName\" className=\"text-foreground font-medium\">Full Name</Label>\n              <Input\n                id=\"fullName\"\n                type=\"text\"\n                placeholder=\"Enter your full name\"\n                value={formData.fullName}\n                onChange={(e) => setFormData(prev => ({ ...prev, fullName: e.target.value }))}\n                required\n                data-testid=\"input-fullname\"\n                className=\"glass-input mt-2\"\n              />\n            </div>\n            \n            <div>\n              <Label htmlFor=\"email\" className=\"text-foreground font-medium\">Email</Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                placeholder=\"Enter your email\"\n                value={formData.email}\n                onChange={(e) => setFormData(prev => ({ ...prev, email: e.target.value }))}\n                required\n                data-testid=\"input-email\"\n                className=\"glass-input mt-2\"\n              />\n            </div>\n            \n            <div>\n              <Label htmlFor=\"password\" className=\"text-foreground font-medium\">Password</Label>\n              <div className=\"relative mt-2\">\n                <Input\n                  id=\"password\"\n                  type={showPassword ? \"text\" : \"password\"}\n                  placeholder=\"Create a password\"\n                  value={formData.password}\n                  onChange={(e) => setFormData(prev => ({ ...prev, password: e.target.value }))}\n                  required\n                  data-testid=\"input-password\"\n                  className=\"glass-input pr-10\"\n                />\n                <Button\n                  type=\"button\"\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  data-testid=\"button-toggle-password\"\n                >\n                  {showPassword ? (\n                    <EyeOff className=\"h-4 w-4 text-muted-foreground\" />\n                  ) : (\n                    <Eye className=\"h-4 w-4 text-muted-foreground\" />\n                  )}\n                </Button>\n              </div>\n            </div>\n            \n            <div className=\"space-y-4\">\n              <div className=\"flex items-center space-x-2\">\n                <Checkbox \n                  id=\"remember\"\n                  checked={formData.remember}\n                  onCheckedChange={(checked) => setFormData(prev => ({ ...prev, remember: !!checked }))}\n                  data-testid=\"checkbox-remember\"\n                />\n                <Label htmlFor=\"remember\" className=\"text-sm text-foreground\">Remember me</Label>\n              </div>\n              \n              <div className=\"flex items-start space-x-2\">\n                <Checkbox \n                  id=\"terms\"\n                  checked={formData.agreeToTerms}\n                  onCheckedChange={(checked) => setFormData(prev => ({ ...prev, agreeToTerms: !!checked }))}\n                  data-testid=\"checkbox-terms\"\n                />\n                <Label htmlFor=\"terms\" className=\"text-sm leading-5 text-foreground\">\n                  I agree to the{' '}\n                  <Button variant=\"link\" className=\"p-0 h-auto text-primary text-sm hover:text-primary/80 font-medium\">\n                    Terms of Service\n                  </Button>\n                  {' '}and{' '}\n                  <Button variant=\"link\" className=\"p-0 h-auto text-primary text-sm hover:text-primary/80 font-medium\">\n                    Privacy Policy\n                  </Button>\n                </Label>\n              </div>\n            </div>\n            \n            <Button \n              type=\"submit\" \n              size=\"lg\"\n              className=\"w-full h-12 glass-prism-button px-6 py-2 rounded-full font-semibold text-[15px] shadow-md\"\n              disabled={loading}\n              data-testid=\"button-create-account\"\n            >\n              {loading ? \"Creating Account...\" : \"Create Account\"}\n            </Button>\n            \n            <div className=\"relative\">\n              <div className=\"absolute inset-0 flex items-center\">\n                <div className=\"w-full border-t border-white/20\"></div>\n              </div>\n              <div className=\"relative flex justify-center text-sm\">\n                <span className=\"px-4 bg-white/5 backdrop-blur-sm text-muted-foreground rounded-full\">Or continue with</span>\n              </div>\n            </div>\n            \n            <Button \n              type=\"button\" \n              variant=\"outline\" \n              size=\"lg\"\n              className=\"w-full h-12 bg-white/10 backdrop-blur-sm border border-white/20 hover:bg-white/20 transition-all duration-300 rounded-full\"\n              onClick={handleGoogleSignUp}\n              data-testid=\"button-google-signup\"\n            >\n              <svg className=\"mr-2 h-4 w-4\" viewBox=\"0 0 24 24\">\n                <path fill=\"currentColor\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\n                <path fill=\"currentColor\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\n                <path fill=\"currentColor\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\n                <path fill=\"currentColor\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\n              </svg>\n              Sign up with Google\n            </Button>\n          </form>\n          \n          <div className=\"text-center mt-6\">\n            <p className=\"text-muted-foreground\">\n              Already have an account?{' '}\n              <Button \n                variant=\"link\" \n                className=\"p-0 text-primary hover:text-primary/80 font-medium\"\n                onClick={() => setLocation('/login')}\n                data-testid=\"link-signin\"\n              >\n                Sign in\n              </Button>\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Email Confirmation Modal */}\n      <EmailConfirmationModal\n        isOpen={showEmailConfirmation}\n        onClose={() => setShowEmailConfirmation(false)}\n        email={formData.email}\n      />\n    </div>\n  );\n}","size_bytes":11664},"server/index.ts":{"content":"// Load environment variables first before any other imports\nimport 'dotenv/config';\n\nimport express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\n\n// CRITICAL: Register webhook routes with raw body BEFORE JSON parser\n// This prevents express.json() from consuming the raw body needed for signature verification\napp.post(\"/api/razorpay/webhook\", express.raw({ type: 'application/json' }), async (req, res) => {\n  const { handleRazorpayWebhook } = await import(\"./razorpay\");\n  await handleRazorpayWebhook(req, res);\n});\n\napp.post(\"/api/paypal/webhook\", express.raw({ type: 'application/json' }), async (req, res) => {\n  const { handlePayPalWebhook } = await import(\"./paypal-webhook\");\n  await handlePayPalWebhook(req, res);\n});\n\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2735},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1419},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/dashboard/notes.tsx":{"content":"import { useState } from 'react';\nimport { useQuery, useMutation } from '@tanstack/react-query';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Plus, Trash2, Edit, Save, X, StickyNote, Search, Pin, Archive, Tag, Palette } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport { apiRequest, queryClient } from '@/lib/queryClient';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Badge } from '@/components/ui/badge';\n\ninterface Note {\n  id: string;\n  title: string;\n  content: string;\n  category: string;\n  tags: string;\n  color: string;\n  isPinned: boolean;\n  isArchived: boolean;\n  createdAt: string;\n  updatedAt: string;\n}\n\nconst noteColors = [\n  { name: 'Blue', value: 'blue', bg: 'bg-blue-100 dark:bg-blue-900/30', border: 'border-blue-300 dark:border-blue-700' },\n  { name: 'Green', value: 'green', bg: 'bg-green-100 dark:bg-green-900/30', border: 'border-green-300 dark:border-green-700' },\n  { name: 'Yellow', value: 'yellow', bg: 'bg-yellow-100 dark:bg-yellow-900/30', border: 'border-yellow-300 dark:border-yellow-700' },\n  { name: 'Red', value: 'red', bg: 'bg-red-100 dark:bg-red-900/30', border: 'border-red-300 dark:border-red-700' },\n  { name: 'Purple', value: 'purple', bg: 'bg-purple-100 dark:bg-purple-900/30', border: 'border-purple-300 dark:border-purple-700' },\n  { name: 'Pink', value: 'pink', bg: 'bg-pink-100 dark:bg-pink-900/30', border: 'border-pink-300 dark:border-pink-700' },\n  { name: 'Gray', value: 'gray', bg: 'bg-gray-100 dark:bg-gray-900/30', border: 'border-gray-300 dark:border-gray-700' },\n];\n\nconst categories = ['General', 'Work', 'Personal', 'Ideas', 'Meeting Notes', 'To-Do', 'Important'];\n\nexport default function Notes() {\n  const [selectedNote, setSelectedNote] = useState<Note | null>(null);\n  const [isEditing, setIsEditing] = useState(false);\n  const [isCreating, setIsCreating] = useState(false);\n  const [editTitle, setEditTitle] = useState('');\n  const [editContent, setEditContent] = useState('');\n  const [editCategory, setEditCategory] = useState('General');\n  const [editTags, setEditTags] = useState('');\n  const [editColor, setEditColor] = useState('blue');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [categoryFilter, setCategoryFilter] = useState('all');\n  const [showArchived, setShowArchived] = useState(false);\n  const { toast } = useToast();\n\n  const { data: notes = [] } = useQuery<Note[]>({\n    queryKey: ['/api/notes'],\n  });\n\n  const createNoteMutation = useMutation({\n    mutationFn: async (data: { title: string; content: string; category: string; tags: string; color: string; isPinned: boolean; isArchived: boolean }) => {\n      const response = await apiRequest('POST', '/api/notes', data);\n      if (!response.ok) throw new Error('Failed to create note');\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/notes'] });\n      setIsCreating(false);\n      setEditTitle('');\n      setEditContent('');\n      setEditCategory('General');\n      setEditTags('');\n      setEditColor('blue');\n      toast({\n        title: 'Note created',\n        description: 'Your note has been saved successfully.',\n      });\n    },\n    onError: () => {\n      toast({\n        title: 'Error',\n        description: 'Failed to create note. Please try again.',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const updateNoteMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: any }) => {\n      const response = await apiRequest('PATCH', `/api/notes/${id}`, data);\n      if (!response.ok) throw new Error('Failed to update note');\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/notes'] });\n      setIsEditing(false);\n      toast({\n        title: 'Note updated',\n        description: 'Your changes have been saved.',\n      });\n    },\n    onError: () => {\n      toast({\n        title: 'Error',\n        description: 'Failed to update note. Please try again.',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const deleteNoteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const response = await apiRequest('DELETE', `/api/notes/${id}`);\n      if (!response.ok) throw new Error('Failed to delete note');\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/notes'] });\n      setSelectedNote(null);\n      toast({\n        title: 'Note deleted',\n        description: 'Your note has been removed.',\n      });\n    },\n    onError: () => {\n      toast({\n        title: 'Error',\n        description: 'Failed to delete note. Please try again.',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const handleStartEdit = (note: Note) => {\n    setIsEditing(true);\n    setEditTitle(note.title);\n    setEditContent(note.content);\n    setEditCategory(note.category || 'General');\n    setEditTags(note.tags || '');\n    setEditColor(note.color || 'blue');\n  };\n\n  const handleSaveEdit = () => {\n    if (selectedNote) {\n      updateNoteMutation.mutate({\n        id: selectedNote.id,\n        data: { title: editTitle, content: editContent, category: editCategory, tags: editTags, color: editColor },\n      });\n    }\n  };\n\n  const handleCancelEdit = () => {\n    setIsEditing(false);\n    setEditTitle('');\n    setEditContent('');\n    setEditCategory('General');\n    setEditTags('');\n    setEditColor('blue');\n  };\n\n  const handleCreateNote = () => {\n    if (!editTitle.trim()) {\n      toast({\n        title: 'Title required',\n        description: 'Please enter a title for your note.',\n        variant: 'destructive',\n      });\n      return;\n    }\n    createNoteMutation.mutate({ \n      title: editTitle, \n      content: editContent, \n      category: editCategory, \n      tags: editTags, \n      color: editColor,\n      isPinned: false,\n      isArchived: false\n    });\n  };\n\n  const handleCancelCreate = () => {\n    setIsCreating(false);\n    setEditTitle('');\n    setEditContent('');\n    setEditCategory('General');\n    setEditTags('');\n    setEditColor('blue');\n  };\n\n  const togglePin = (note: Note) => {\n    updateNoteMutation.mutate({\n      id: note.id,\n      data: { isPinned: !note.isPinned },\n    });\n  };\n\n  const toggleArchive = (note: Note) => {\n    updateNoteMutation.mutate({\n      id: note.id,\n      data: { isArchived: !note.isArchived },\n    });\n  };\n\n  const getColorClasses = (color: string) => {\n    const colorObj = noteColors.find(c => c.value === color);\n    return colorObj || noteColors[0];\n  };\n\n  let filteredNotes = notes.filter((note) => {\n    const matchesSearch =\n      note.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      note.content.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      (note.tags && note.tags.toLowerCase().includes(searchQuery.toLowerCase()));\n    \n    const matchesCategory = categoryFilter === 'all' || note.category === categoryFilter;\n    const matchesArchive = showArchived ? note.isArchived : !note.isArchived;\n\n    return matchesSearch && matchesCategory && matchesArchive;\n  });\n\n  const pinnedNotes = filteredNotes.filter(note => note.isPinned);\n  const unpinnedNotes = filteredNotes.filter(note => !note.isPinned);\n  const sortedNotes = [...pinnedNotes, ...unpinnedNotes];\n\n  return (\n    <div className=\"space-y-6 animate-fade-in\">\n      <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n        <div>\n          <h2 className=\"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent\">\n            Notes\n          </h2>\n          <p className=\"text-sm sm:text-base text-muted-foreground mt-1\">Keep track of important information</p>\n        </div>\n        <div className=\"flex gap-2 flex-wrap w-full sm:w-auto\">\n          <Button\n            variant={showArchived ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => setShowArchived(!showArchived)}\n            className={`flex-1 sm:flex-initial ${showArchived ? 'glass-prism-button bg-red-500/20 hover:bg-red-500/30 text-red-700 dark:text-red-300 border-red-300 dark:border-red-700' : 'glass-prism'}`}\n            data-testid=\"button-toggle-archived\"\n          >\n            {showArchived ? <Trash2 className=\"h-4 w-4 mr-2\" /> : <Archive className=\"h-4 w-4 mr-2\" />}\n            <span className=\"truncate\">{showArchived ? 'Trash Bin' : 'Active Notes'}</span>\n          </Button>\n          <Button\n            onClick={() => {\n              setIsCreating(true);\n              setSelectedNote(null);\n              setEditTitle('');\n              setEditContent('');\n              setEditCategory('General');\n              setEditTags('');\n              setEditColor('blue');\n            }}\n            className=\"glass-prism-button text-white shadow-lg flex-1 sm:flex-initial\"\n            disabled={isCreating}\n            data-testid=\"button-new-note\"\n          >\n            <Plus className=\"h-4 w-4 mr-2\" />\n            <span className=\"truncate\">New Note</span>\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6\">\n        <Card className=\"glass-prism-card backdrop-blur-xl bg-white/5 dark:bg-black/5 border-white/20 shadow-2xl animate-slide-in-left mobile-no-blur\">\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-base sm:text-lg font-bold text-gray-800 dark:text-gray-100\">\n              All Notes ({sortedNotes.length})\n            </CardTitle>\n            <div className=\"space-y-3 mt-4\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                <Input\n                  placeholder=\"Search notes...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-10 glass-prism bg-white/5 border-white/20\"\n                  data-testid=\"input-search-notes\"\n                />\n              </div>\n              <Select value={categoryFilter} onValueChange={setCategoryFilter}>\n                <SelectTrigger className=\"glass-prism bg-white/5 border-white/20\" data-testid=\"select-category-filter\">\n                  <SelectValue placeholder=\"Filter by category\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Categories</SelectItem>\n                  {categories.map(cat => (\n                    <SelectItem key={cat} value={cat}>{cat}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </CardHeader>\n          <CardContent className=\"pt-0\">\n            <div className=\"space-y-2 max-h-[400px] sm:max-h-[500px] lg:max-h-[600px] overflow-y-auto pr-2 scrollbar-thin\">\n              {sortedNotes.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <div className=\"w-16 h-16 glass-prism rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse\">\n                    <StickyNote className=\"h-8 w-8 text-gray-400\" />\n                  </div>\n                  <p className=\"text-gray-600 dark:text-gray-400\">\n                    {searchQuery || categoryFilter !== 'all' ? 'No notes found' : showArchived ? 'No archived notes' : 'No notes yet. Create your first note!'}\n                  </p>\n                </div>\n              ) : (\n                sortedNotes.map((note, index) => {\n                  const colorClasses = getColorClasses(note.color);\n                  return (\n                    <button\n                      key={note.id}\n                      onClick={() => {\n                        setSelectedNote(note);\n                        setIsCreating(false);\n                        setIsEditing(false);\n                      }}\n                      className={`w-full text-left p-3 sm:p-4 rounded-xl transition-all duration-300 group animate-fade-in border ${\n                        selectedNote?.id === note.id\n                          ? 'glass-prism-button text-white shadow-lg scale-[1.02]'\n                          : `glass-prism hover:glass-prism-button ${colorClasses.bg} ${colorClasses.border}`\n                      }`}\n                      style={{ animationDelay: `${index * 0.05}s` }}\n                      data-testid={`note-item-${note.id}`}\n                    >\n                      <div className=\"flex items-start justify-between mb-1\">\n                        <h4 className=\"text-sm sm:text-base font-semibold truncate flex-1 group-hover:text-white dark:group-hover:text-white\">{note.title}</h4>\n                        {note.isPinned && <Pin className=\"h-3 w-3 sm:h-3.5 sm:w-3.5 ml-2 flex-shrink-0 fill-current\" />}\n                      </div>\n                      <p className=\"text-xs sm:text-sm text-gray-600 dark:text-gray-400 group-hover:text-gray-100 dark:group-hover:text-gray-200 line-clamp-2 mb-2\">\n                        {note.content || 'No content'}\n                      </p>\n                      <div className=\"flex items-center justify-between gap-2 flex-wrap\">\n                        <div className=\"flex flex-wrap gap-1\">\n                          <Badge variant=\"secondary\" className=\"text-[10px] sm:text-xs px-1.5 py-0\">\n                            {note.category}\n                          </Badge>\n                          {note.tags && note.tags.split(',').slice(0, 2).map((tag, i) => (\n                            <Badge key={i} variant=\"outline\" className=\"text-[10px] sm:text-xs px-1.5 py-0\">\n                              {tag.trim()}\n                            </Badge>\n                          ))}\n                        </div>\n                        <p className=\"text-[10px] sm:text-xs text-gray-500 dark:text-gray-500 group-hover:text-gray-200 dark:group-hover:text-gray-300 whitespace-nowrap\">\n                          {new Date(note.updatedAt).toLocaleDateString()}\n                        </p>\n                      </div>\n                    </button>\n                  );\n                })\n              )}\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"lg:col-span-2 glass-prism-card backdrop-blur-xl bg-white/5 dark:bg-black/5 border-white/20 shadow-2xl animate-slide-in-right mobile-no-blur\">\n          <CardHeader className=\"pb-3\">\n            <div className=\"flex items-center justify-between flex-wrap gap-2\">\n              <CardTitle className=\"text-base sm:text-lg font-bold text-gray-800 dark:text-gray-100\">\n                {isCreating ? 'New Note' : isEditing ? 'Edit Note' : 'Note Details'}\n              </CardTitle>\n              {(selectedNote || isCreating) && (\n                <div className=\"flex gap-1 sm:gap-2 flex-wrap\">\n                  {isEditing || isCreating ? (\n                    <>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={isCreating ? handleCancelCreate : handleCancelEdit}\n                        className=\"glass-prism text-xs sm:text-sm\"\n                        data-testid=\"button-cancel-edit\"\n                      >\n                        <X className=\"h-3 w-3 sm:h-4 sm:w-4 sm:mr-1\" />\n                        <span className=\"hidden sm:inline\">Cancel</span>\n                      </Button>\n                      <Button\n                        size=\"sm\"\n                        onClick={isCreating ? handleCreateNote : handleSaveEdit}\n                        className=\"glass-prism-button text-white text-xs sm:text-sm\"\n                        disabled={createNoteMutation.isPending || updateNoteMutation.isPending}\n                        data-testid=\"button-save-note\"\n                      >\n                        <Save className=\"h-3 w-3 sm:h-4 sm:w-4 sm:mr-1\" />\n                        <span className=\"hidden sm:inline\">Save</span>\n                      </Button>\n                    </>\n                  ) : (\n                    <>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => togglePin(selectedNote!)}\n                        className=\"glass-prism text-xs sm:text-sm\"\n                        disabled={updateNoteMutation.isPending}\n                        data-testid=\"button-pin-note\"\n                      >\n                        <Pin className={`h-3 w-3 sm:h-4 sm:w-4 sm:mr-1 ${selectedNote?.isPinned ? 'fill-current' : ''}`} />\n                        <span className=\"hidden sm:inline\">{selectedNote?.isPinned ? 'Unpin' : 'Pin'}</span>\n                      </Button>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => toggleArchive(selectedNote!)}\n                        className=\"glass-prism text-xs sm:text-sm\"\n                        disabled={updateNoteMutation.isPending}\n                        data-testid=\"button-archive-note\"\n                      >\n                        <Archive className=\"h-3 w-3 sm:h-4 sm:w-4 sm:mr-1\" />\n                        <span className=\"hidden sm:inline\">{selectedNote?.isArchived ? 'Unarchive' : 'Archive'}</span>\n                      </Button>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => handleStartEdit(selectedNote!)}\n                        className=\"glass-prism text-xs sm:text-sm\"\n                        data-testid=\"button-edit-note\"\n                      >\n                        <Edit className=\"h-3 w-3 sm:h-4 sm:w-4 sm:mr-1\" />\n                        <span className=\"hidden sm:inline\">Edit</span>\n                      </Button>\n                      <Button\n                        variant=\"destructive\"\n                        size=\"sm\"\n                        onClick={() => deleteNoteMutation.mutate(selectedNote!.id)}\n                        disabled={deleteNoteMutation.isPending}\n                        data-testid=\"button-delete-note\"\n                      >\n                        <Trash2 className=\"h-3 w-3 sm:h-4 sm:w-4 sm:mr-1\" />\n                        <span className=\"hidden sm:inline\">Delete</span>\n                      </Button>\n                    </>\n                  )}\n                </div>\n              )}\n            </div>\n          </CardHeader>\n          <CardContent className=\"pt-0\">\n            {isCreating || isEditing ? (\n              <div className=\"space-y-3 sm:space-y-4 animate-fade-in\">\n                <div>\n                  <Input\n                    placeholder=\"Note title\"\n                    value={editTitle}\n                    onChange={(e) => setEditTitle(e.target.value)}\n                    className=\"glass-prism bg-white/5 border-white/20 text-base sm:text-lg font-semibold\"\n                    data-testid=\"input-note-title\"\n                  />\n                </div>\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n                  <div>\n                    <label className=\"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mb-1 block\">Category</label>\n                    <Select value={editCategory} onValueChange={setEditCategory}>\n                      <SelectTrigger className=\"glass-prism bg-white/5 border-white/20\" data-testid=\"select-category\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {categories.map(cat => (\n                          <SelectItem key={cat} value={cat}>{cat}</SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n                  <div>\n                    <label className=\"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mb-1 block\">Color</label>\n                    <Select value={editColor} onValueChange={setEditColor}>\n                      <SelectTrigger className=\"glass-prism bg-white/5 border-white/20\" data-testid=\"select-color\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {noteColors.map(color => (\n                          <SelectItem key={color.value} value={color.value}>\n                            <div className=\"flex items-center gap-2\">\n                              <div className={`w-4 h-4 rounded ${color.bg} ${color.border} border`} />\n                              {color.name}\n                            </div>\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n                <div>\n                  <label className=\"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mb-1 block\">Tags (comma-separated)</label>\n                  <Input\n                    placeholder=\"e.g., urgent, meeting, project\"\n                    value={editTags}\n                    onChange={(e) => setEditTags(e.target.value)}\n                    className=\"glass-prism bg-white/5 border-white/20\"\n                    data-testid=\"input-tags\"\n                  />\n                </div>\n                <div>\n                  <Textarea\n                    placeholder=\"Write your note here...\"\n                    value={editContent}\n                    onChange={(e) => setEditContent(e.target.value)}\n                    className=\"glass-prism bg-white/5 border-white/20 min-h-[250px] sm:min-h-[350px] resize-none text-sm sm:text-base\"\n                    data-testid=\"textarea-note-content\"\n                  />\n                </div>\n              </div>\n            ) : selectedNote ? (\n              <div className=\"space-y-3 sm:space-y-4 animate-fade-in\">\n                <div className=\"flex items-start justify-between flex-wrap gap-2\">\n                  <h3 className=\"text-xl sm:text-2xl font-bold text-gray-800 dark:text-gray-100 flex-1 min-w-0 break-words\">\n                    {selectedNote.title}\n                  </h3>\n                  {selectedNote.isPinned && (\n                    <Badge variant=\"secondary\" className=\"flex-shrink-0\">\n                      <Pin className=\"h-3 w-3 mr-1 fill-current\" />\n                      Pinned\n                    </Badge>\n                  )}\n                </div>\n                <div className=\"flex flex-wrap items-center gap-1 sm:gap-2\">\n                  <Badge variant=\"default\" className=\"text-xs\">{selectedNote.category}</Badge>\n                  {selectedNote.tags && selectedNote.tags.split(',').map((tag, i) => (\n                    <Badge key={i} variant=\"outline\" className=\"text-xs\">\n                      <Tag className=\"h-3 w-3 mr-1\" />\n                      {tag.trim()}\n                    </Badge>\n                  ))}\n                  <Badge className={`${getColorClasses(selectedNote.color).bg} text-xs`}>\n                    <Palette className=\"h-3 w-3 mr-1\" />\n                    {noteColors.find(c => c.value === selectedNote.color)?.name}\n                  </Badge>\n                </div>\n                <div className=\"text-xs sm:text-sm text-gray-500 dark:text-gray-400\">\n                  Last updated: {new Date(selectedNote.updatedAt).toLocaleString()}\n                </div>\n                <div className=\"prose dark:prose-invert max-w-none\">\n                  <div className=\"glass-prism p-4 sm:p-6 rounded-xl whitespace-pre-wrap text-sm sm:text-base text-gray-700 dark:text-gray-300\">\n                    {selectedNote.content || 'No content'}\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <div className=\"text-center py-16\">\n                <div className=\"w-20 h-20 glass-prism rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse\">\n                  <StickyNote className=\"h-10 w-10 text-gray-400\" />\n                </div>\n                <h3 className=\"text-xl font-semibold text-gray-700 dark:text-gray-300 mb-2\">\n                  No note selected\n                </h3>\n                <p className=\"text-gray-600 dark:text-gray-400 mb-6\">\n                  Select a note from the list or create a new one\n                </p>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","size_bytes":24744},"client/src/components/demo/steps/PreviewStep.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport { Monitor, Smartphone, UserPlus, Rocket, Clock, DollarSign, Phone, Calendar, Scissors, Coffee, Heart, User, Camera, Palette, Zap, Target, Shield, Briefcase, Wrench, Headphones, Music, BookOpen, Leaf, Award, ArrowLeft, MapPin, Sparkles, MessageSquare, Info, FileText } from 'lucide-react';\nimport { useState } from 'react';\n\ninterface Service {\n  name: string;\n  duration: number;\n  price: number;\n  imageUrl?: string;\n}\n\ninterface DemoData {\n  businessName: string;\n  tagline: string;\n  contactPhone: string;\n  logoBase64: string;\n  businessType: string;\n  walkInsAccepted: string;\n  parking: string;\n  amenities: string;\n  spokenLanguages: string;\n  kidFriendly: string;\n  appointmentCancellationPolicy: string;\n  theme: string;\n  primaryColor: string;\n  fontSize: 'small' | 'medium' | 'large';\n  showLogo: boolean;\n  showPhone: boolean;\n  services: Service[];\n  businessHours: {\n    monday: string;\n    tuesday: string;\n    wednesday: string;\n    thursday: string;\n    friday: string;\n    saturday: string;\n    sunday: string;\n  };\n}\n\ninterface PreviewStepProps {\n  data: DemoData;\n  onCreateAccount: () => void;\n  onRestart?: () => void;\n  isConverting: boolean;\n  isSaving?: boolean;\n  user: any;\n}\n\nexport default function PreviewStep({\n  data,\n  onCreateAccount,\n  onRestart,\n  isConverting,\n  isSaving = false,\n  user\n}: PreviewStepProps) {\n  const [viewMode, setViewMode] = useState<'desktop' | 'mobile'>('desktop');\n\n  const openBusinessHours = Object.entries(data.businessHours)\n    .filter(([, hours]) => hours !== 'Closed')\n    .slice(0, 3);\n\n  // Helper function to convert hex to RGB\n  const hexToRgb = (hex: string) => {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result \n      ? `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}`\n      : '37, 99, 235'; // fallback to blue\n  };\n\n  // Create dynamic styles based on theme data (matching real booking page)\n  const getThemeStyles = () => {\n    const primaryColor = data.primaryColor || '#2563eb';\n    const backgroundType = 'gradient'; // Demo always uses gradient\n    const backgroundValue = data.theme || 'blue';\n    const fontFamily = 'inter'; // Demo always uses inter\n    \n    // Background style mapping (from real booking page)\n    const backgroundClasses = {\n      'blue': backgroundType === 'gradient' ? 'bg-gradient-to-br from-blue-50 to-blue-100' : 'bg-blue-50',\n      'green': backgroundType === 'gradient' ? 'bg-gradient-to-br from-emerald-50 to-emerald-100' : 'bg-emerald-50',\n      'purple': backgroundType === 'gradient' ? 'bg-gradient-to-br from-violet-50 to-violet-100' : 'bg-violet-50',\n      'rose': backgroundType === 'gradient' ? 'bg-gradient-to-br from-rose-50 to-rose-100' : 'bg-rose-50',\n      'white': 'bg-white',\n      'gray': 'bg-gray-50',\n      'teal': backgroundType === 'gradient' ? 'bg-gradient-to-br from-teal-50 to-teal-100' : 'bg-teal-50',\n      'orange': backgroundType === 'gradient' ? 'bg-gradient-to-br from-orange-50 to-orange-100' : 'bg-orange-50',\n      'indigo': backgroundType === 'gradient' ? 'bg-gradient-to-br from-indigo-50 to-indigo-100' : 'bg-indigo-50',\n      'amber': backgroundType === 'gradient' ? 'bg-gradient-to-br from-amber-50 to-amber-100' : 'bg-amber-50',\n      'ocean': 'bg-gradient-to-r from-cyan-50 to-blue-100',\n      'sunset': 'bg-gradient-to-r from-orange-50 to-pink-100',\n      'forest': 'bg-gradient-to-r from-green-50 to-emerald-100',\n      'lavender': 'bg-gradient-to-r from-purple-50 to-pink-100',\n      'rainbow': 'bg-gradient-to-r from-red-50 via-yellow-50 to-green-50',\n      'tropical': 'bg-gradient-to-br from-teal-50 via-cyan-50 to-blue-50',\n      'warm-sunset': 'bg-gradient-to-br from-yellow-50 via-orange-50 to-red-50',\n      'cool-mint': 'bg-gradient-to-br from-green-50 via-teal-50 to-blue-50',\n      'cream': 'bg-amber-50',\n      'ice': 'bg-blue-50',\n      'soft-mint': 'bg-green-50',\n      'light-lavender': 'bg-purple-50'\n    };\n    \n    // Font family mapping\n    const fontClasses = {\n      'inter': 'font-inter',\n      'playfair': 'font-playfair',\n      'roboto': 'font-roboto',\n      'opensans': 'font-opensans'\n    };\n    \n    return {\n      backgroundColor: backgroundClasses[backgroundValue as keyof typeof backgroundClasses] || backgroundClasses.blue,\n      fontClass: fontClasses[fontFamily as keyof typeof fontClasses] || fontClasses.inter,\n      primaryColor,\n      cssVariables: {\n        '--theme-primary': primaryColor,\n        '--theme-primary-rgb': hexToRgb(primaryColor)\n      } as React.CSSProperties\n    };\n  };\n\n  // Smart icon assignment based on service name (matching real booking page with Lucide icons)\n  const getServiceIcon = (serviceName: string) => {\n    const name = serviceName.toLowerCase();\n    \n    if (name.includes('cut') || name.includes('hair') || name.includes('style')) return Scissors;\n    if (name.includes('coffee') || name.includes('café') || name.includes('cafe')) return Coffee;\n    if (name.includes('massage') || name.includes('spa') || name.includes('relax')) return Heart;\n    if (name.includes('consult') || name.includes('meeting') || name.includes('session')) return User;\n    if (name.includes('design') || name.includes('web') || name.includes('digital')) return Monitor;\n    if (name.includes('photo') || name.includes('picture') || name.includes('shoot')) return Camera;\n    if (name.includes('art') || name.includes('paint') || name.includes('creative')) return Palette;\n    if (name.includes('fitness') || name.includes('training') || name.includes('workout')) return Zap;\n    if (name.includes('coaching') || name.includes('mentor') || name.includes('goal')) return Target;\n    if (name.includes('security') || name.includes('protect') || name.includes('safe')) return Shield;\n    if (name.includes('business') || name.includes('corporate') || name.includes('professional')) return Briefcase;\n    if (name.includes('repair') || name.includes('fix') || name.includes('service')) return Wrench;\n    if (name.includes('audio') || name.includes('sound') || name.includes('podcast')) return Headphones;\n    if (name.includes('music') || name.includes('lesson') || name.includes('instrument')) return Music;\n    if (name.includes('education') || name.includes('tutor') || name.includes('learn')) return BookOpen;\n    if (name.includes('marketing') || name.includes('growth') || name.includes('launch')) return Rocket;\n    if (name.includes('wellness') || name.includes('health') || name.includes('therapy')) return Leaf;\n    \n    // Default fallback\n    return Calendar;\n  };\n\n  const BookingPagePreview = () => {\n    const themeStyles = getThemeStyles();\n    \n    return (\n    <div \n      className={`min-h-screen ${themeStyles.backgroundColor} ${themeStyles.fontClass} overflow-hidden scroll-smooth ${\n        viewMode === 'mobile' ? 'max-w-sm mx-auto' : 'w-full'\n      }`}\n      style={{\n        ...themeStyles.cssVariables,\n        fontSize: data.fontSize === 'small' ? '14px' : data.fontSize === 'medium' ? '16px' : '18px'\n      }}\n    >\n      {/* Enhanced Header (matching real booking page) */}\n      <header className=\"border-b border-border/10 bg-card/60 backdrop-blur-xl sticky top-0 z-50 shadow-sm\">\n        <div className=\"container mx-auto px-4 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3 min-w-0 flex-1\">\n              <div \n                className=\"w-10 h-10 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0\"\n                style={{\n                  background: `linear-gradient(135deg, ${data.primaryColor} 0%, ${data.primaryColor}dd 100%)`\n                }}\n              >\n                {data.showLogo && data.logoBase64 ? (\n                  <img\n                    src={data.logoBase64}\n                    alt=\"Logo\"\n                    className=\"w-8 h-8 rounded-lg object-cover\"\n                  />\n                ) : (\n                  <span className=\"text-lg font-bold text-white\">\n                    {data.businessName?.charAt(0) || 'B'}\n                  </span>\n                )}\n              </div>\n              <div className=\"min-w-0 flex-1\">\n                <span className=\"text-lg font-bold text-foreground truncate block\">{data.businessName || 'Your Business'}</span>\n                {data.tagline && (\n                  <p className=\"text-sm text-muted-foreground mt-0.5 truncate\">{data.tagline}</p>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Enhanced Hero Section (matching real booking page) */}\n      <section className=\"relative overflow-hidden min-h-[60vh] flex items-center px-4\">\n        {/* Dynamic layered background */}\n        <div className=\"absolute inset-0\">\n          <div \n            className=\"absolute inset-0\"\n            style={{\n              background: `radial-gradient(ellipse at 50% 0%, rgba(${hexToRgb(data.primaryColor)}, 0.15) 0%, rgba(${hexToRgb(data.primaryColor)}, 0.05) 25%, transparent 60%), linear-gradient(135deg, rgba(${hexToRgb(data.primaryColor)}, 0.08) 0%, rgba(${hexToRgb(data.primaryColor)}, 0.02) 50%, rgba(${hexToRgb(data.primaryColor)}, 0.08) 100%)`\n            }}\n          ></div>\n          \n          {/* Animated elements */}\n          <div className=\"absolute inset-0 overflow-hidden\">\n            <div \n              className=\"absolute top-10 -right-10 w-48 h-48 rounded-full blur-3xl opacity-70 animate-pulse\"\n              style={{\n                background: `radial-gradient(circle, rgba(${hexToRgb(data.primaryColor)}, 0.1) 0%, transparent 70%)`,\n                animationDuration: '4s'\n              }}\n            ></div>\n            <div \n              className=\"absolute -bottom-10 -left-10 w-40 h-40 rounded-full blur-3xl opacity-60 animate-pulse\"\n              style={{\n                background: `radial-gradient(circle, rgba(${hexToRgb(data.primaryColor)}, 0.08) 0%, transparent 70%)`,\n                animationDuration: '6s',\n                animationDelay: '1s'\n              }}\n            ></div>\n          </div>\n        </div>\n        \n        {/* Main content */}\n        <div className=\"container mx-auto px-4 relative z-10\">\n          <div className=\"max-w-4xl mx-auto text-center\">\n            {/* Professional badge */}\n            <div className=\"mb-8\">\n              <div \n                className=\"inline-flex items-center px-6 py-3 rounded-full text-sm font-semibold backdrop-blur-md shadow-xl border border-white/20\"\n                style={{\n                  background: `linear-gradient(135deg, rgba(${hexToRgb(data.primaryColor)}, 0.15) 0%, rgba(${hexToRgb(data.primaryColor)}, 0.08) 100%)`,\n                  color: data.primaryColor\n                }}\n              >\n                <div \n                  className=\"w-2 h-2 rounded-full mr-3 animate-pulse\"\n                  style={{ backgroundColor: data.primaryColor }}\n                ></div>\n                ✨ Premium Professional Services\n              </div>\n            </div>\n            \n            {/* Enhanced main heading */}\n            <div className=\"mb-8\">\n              <h1 className=\"text-4xl md:text-6xl font-black text-foreground mb-4 leading-tight tracking-tight\">\n                <span className=\"block bg-gradient-to-r from-foreground to-foreground/80 bg-clip-text text-transparent\">\n                  {data.businessName || 'Your Business'}\n                </span>\n              </h1>\n              \n              {data.tagline && (\n                <p className=\"text-xl md:text-2xl text-muted-foreground max-w-3xl mx-auto font-medium leading-relaxed opacity-95\">\n                  {data.tagline}\n                </p>\n              )}\n            </div>\n            \n            {/* Enhanced CTA section */}\n            <div className=\"mb-12\">\n              <div className=\"flex flex-col sm:flex-row gap-4 justify-center items-center mb-6\">\n                <Button \n                  className=\"px-8 py-4 rounded-xl text-lg h-auto font-bold bg-primary hover:bg-primary/90 text-primary-foreground shadow-lg hover:shadow-xl transition-all duration-300\"\n                  style={{ backgroundColor: data.primaryColor }}\n                >\n                  <Calendar className=\"h-5 w-5 mr-3\" />\n                  Book Appointment\n                </Button>\n              </div>\n              \n              {/* Trust indicators */}\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 max-w-xl mx-auto\">\n                <div className=\"flex items-center justify-center p-3 rounded-xl bg-card/40 backdrop-blur-sm border border-border/20\">\n                  <div className=\"flex items-center\">\n                    <div \n                      className=\"w-6 h-6 rounded-full mr-2 flex items-center justify-center shadow-lg\"\n                      style={{ backgroundColor: data.primaryColor }}\n                    >\n                      <span className=\"text-white text-xs\">⭐</span>\n                    </div>\n                    <span className=\"font-semibold text-foreground text-sm\">Professional Service</span>\n                  </div>\n                </div>\n\n                <div className=\"flex items-center justify-center p-3 rounded-xl bg-card/40 backdrop-blur-sm border border-border/20\">\n                  <div className=\"flex items-center\">\n                    <div \n                      className=\"w-6 h-6 rounded-full mr-2 flex items-center justify-center shadow-lg\"\n                      style={{ backgroundColor: data.primaryColor }}\n                    >\n                      <span className=\"text-white text-xs\">✓</span>\n                    </div>\n                    <span className=\"font-semibold text-foreground text-sm\">Easy Booking</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Enhanced Services Section (matching real booking page) */}\n      <section className=\"py-12 px-4\">\n        <div className=\"container mx-auto\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl md:text-4xl font-bold text-foreground mb-4\">Our Services</h2>\n            <p className=\"text-xl text-muted-foreground max-w-2xl mx-auto\">Choose from our range of professional services</p>\n          </div>\n\n          <div className=\"max-w-4xl mx-auto\">\n            <div className=\"grid gap-6\">\n              {data.services.filter(s => s.name).map((service, index) => (\n                <div\n                  key={index}\n                  className=\"group p-6 rounded-2xl border border-border/20 bg-card/60 backdrop-blur-sm hover:shadow-lg transition-all duration-300 hover:border-border/40\"\n                >\n                  <div className=\"flex items-center justify-between gap-4\">\n                    <div className=\"flex items-center space-x-4 flex-1\">\n                      {service.imageUrl ? (\n                        <div className=\"w-20 h-20 rounded-2xl overflow-hidden shadow-lg flex-shrink-0 group-hover:scale-105 transition-transform duration-300\">\n                          <img\n                            src={service.imageUrl}\n                            alt={`${service.name} preview`}\n                            className=\"w-full h-full object-cover\"\n                          />\n                        </div>\n                      ) : (\n                        <div \n                          className=\"w-14 h-14 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 flex-shrink-0\"\n                          style={{\n                            background: `linear-gradient(135deg, ${data.primaryColor}20 0%, ${data.primaryColor}10 100%)`\n                          }}\n                        >\n                          <Calendar className=\"w-6 h-6\" style={{ color: data.primaryColor }} />\n                        </div>\n                      )}\n                      <div className=\"flex-1 min-w-0\">\n                        <h3 className=\"text-xl font-bold text-foreground mb-2\">{service.name}</h3>\n                        <div className=\"flex items-center gap-6 text-muted-foreground\">\n                          <span className=\"flex items-center gap-2\">\n                            <Clock className=\"w-4 h-4\" />\n                            {service.duration} min\n                          </span>\n                          <span className=\"flex items-center gap-2\">\n                            <DollarSign className=\"w-4 h-4\" />\n                            ${service.price.toFixed(2)}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                    <Button \n                      className=\"px-6 py-3 rounded-xl text-white font-semibold shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 flex-shrink-0\"\n                      style={{ backgroundColor: data.primaryColor }}\n                    >\n                      Book Now\n                    </Button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Enhanced Business Hours Section (matching real booking page) */}\n      {openBusinessHours.length > 0 && (\n        <section className=\"py-8 px-4\">\n          <div className=\"container mx-auto\">\n            <div className=\"max-w-3xl mx-auto\">\n              <div className=\"border-0 shadow-lg bg-card/80 backdrop-blur-md rounded-2xl p-6\">\n                <div className=\"flex items-center space-x-3 mb-4\">\n                  <div \n                    className=\"w-10 h-10 rounded-xl flex items-center justify-center shadow-lg\"\n                    style={{\n                      background: `linear-gradient(135deg, ${data.primaryColor}20 0%, ${data.primaryColor}10 100%)`\n                    }}\n                  >\n                    <Clock className=\"h-5 w-5\" style={{ color: data.primaryColor }} />\n                  </div>\n                  <div>\n                    <h3 className=\"text-lg font-semibold\">Business Hours</h3>\n                    <p className=\"text-sm text-muted-foreground\">When we're available to serve you</p>\n                  </div>\n                </div>\n                <div className=\"grid gap-2 ml-12\">\n                  {openBusinessHours.map(([day, hours]) => (\n                    <div key={day} className=\"flex justify-between items-center py-2 px-4 rounded-lg bg-background/50\">\n                      <span className=\"capitalize font-medium text-foreground\">{day}</span>\n                      <span className=\"text-muted-foreground\">{hours}</span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n      )}\n\n      {/* Additional Business Information Section */}\n      {(data.businessType || data.walkInsAccepted || data.parking || data.amenities || data.spokenLanguages || data.kidFriendly || data.appointmentCancellationPolicy) && (\n        <section className=\"py-8 px-4\">\n          <div className=\"container mx-auto\">\n            <div className=\"max-w-3xl mx-auto\">\n              <div className=\"border-0 shadow-lg bg-card/80 backdrop-blur-md rounded-2xl p-6\">\n                <div className=\"flex items-center space-x-3 mb-6\">\n                  <div \n                    className=\"w-10 h-10 rounded-xl flex items-center justify-center shadow-lg\"\n                    style={{\n                      background: `linear-gradient(135deg, ${data.primaryColor}20 0%, ${data.primaryColor}10 100%)`\n                    }}\n                  >\n                    <Info className=\"h-5 w-5\" style={{ color: data.primaryColor }} />\n                  </div>\n                  <div>\n                    <h3 className=\"text-lg font-semibold\">Additional Information</h3>\n                    <p className=\"text-sm text-muted-foreground\">More details about our business</p>\n                  </div>\n                </div>\n                <div className=\"grid gap-4 sm:grid-cols-2\">\n                  {/* Business Type */}\n                  {data.businessType && (\n                    <div className=\"flex items-start space-x-3\">\n                      <div \n                        className=\"w-5 h-5 rounded-full flex items-center justify-center mt-0.5 flex-shrink-0\"\n                        style={{ backgroundColor: data.primaryColor }}\n                      >\n                        <Briefcase className=\"h-3 w-3 text-white\" />\n                      </div>\n                      <div>\n                        <p className=\"text-sm font-medium text-foreground\">Business Type</p>\n                        <p className=\"text-sm text-muted-foreground\">\n                          {data.businessType.charAt(0).toUpperCase() + data.businessType.slice(1)}\n                        </p>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Walk-ins */}\n                  {data.walkInsAccepted && (\n                    <div className=\"flex items-start space-x-3\">\n                      <div \n                        className=\"w-5 h-5 rounded-full flex items-center justify-center mt-0.5 flex-shrink-0\"\n                        style={{ backgroundColor: data.primaryColor }}\n                      >\n                        <Clock className=\"h-3 w-3 text-white\" />\n                      </div>\n                      <div>\n                        <p className=\"text-sm font-medium text-foreground\">Walk-ins</p>\n                        <p className=\"text-sm text-muted-foreground\">\n                          {data.walkInsAccepted === 'accepted' ? 'Walk-ins accepted' :\n                           data.walkInsAccepted === 'declined' ? 'Walk-ins declined' :\n                           data.walkInsAccepted === 'by-appointment-preferred' ? 'By appointment preferred' :\n                           data.walkInsAccepted}\n                        </p>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Parking */}\n                  {data.parking && (\n                    <div className=\"flex items-start space-x-3\">\n                      <div \n                        className=\"w-5 h-5 rounded-full flex items-center justify-center mt-0.5 flex-shrink-0\"\n                        style={{ backgroundColor: data.primaryColor }}\n                      >\n                        <MapPin className=\"h-3 w-3 text-white\" />\n                      </div>\n                      <div>\n                        <p className=\"text-sm font-medium text-foreground\">Parking</p>\n                        <p className=\"text-sm text-muted-foreground\">\n                          {data.parking}\n                        </p>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Amenities */}\n                  {data.amenities && (\n                    <div className=\"flex items-start space-x-3\">\n                      <div \n                        className=\"w-5 h-5 rounded-full flex items-center justify-center mt-0.5 flex-shrink-0\"\n                        style={{ backgroundColor: data.primaryColor }}\n                      >\n                        <Sparkles className=\"h-3 w-3 text-white\" />\n                      </div>\n                      <div>\n                        <p className=\"text-sm font-medium text-foreground\">Amenities</p>\n                        <p className=\"text-sm text-muted-foreground\">\n                          {data.amenities}\n                        </p>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Spoken Languages */}\n                  {data.spokenLanguages && (\n                    <div className=\"flex items-start space-x-3\">\n                      <div \n                        className=\"w-5 h-5 rounded-full flex items-center justify-center mt-0.5 flex-shrink-0\"\n                        style={{ backgroundColor: data.primaryColor }}\n                      >\n                        <MessageSquare className=\"h-3 w-3 text-white\" />\n                      </div>\n                      <div>\n                        <p className=\"text-sm font-medium text-foreground\">Spoken Languages</p>\n                        <p className=\"text-sm text-muted-foreground\">\n                          {data.spokenLanguages}\n                        </p>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Kid Friendly */}\n                  {data.kidFriendly && (\n                    <div className=\"flex items-start space-x-3\">\n                      <div \n                        className=\"w-5 h-5 rounded-full flex items-center justify-center mt-0.5 flex-shrink-0\"\n                        style={{ backgroundColor: data.primaryColor }}\n                      >\n                        <Heart className=\"h-3 w-3 text-white\" />\n                      </div>\n                      <div>\n                        <p className=\"text-sm font-medium text-foreground\">Kid Friendly</p>\n                        <p className=\"text-sm text-muted-foreground\">\n                          {data.kidFriendly === 'yes' ? 'Yes' :\n                           data.kidFriendly === 'no' ? 'No' :\n                           data.kidFriendly === 'family-focused' ? 'Family-focused business' :\n                           data.kidFriendly}\n                        </p>\n                      </div>\n                    </div>\n                  )}\n                </div>\n\n                {/* Appointment Cancellation Policy - Full width if exists */}\n                {data.appointmentCancellationPolicy && (\n                  <div className=\"mt-6 pt-6 border-t border-border/20\">\n                    <div className=\"flex items-start space-x-3\">\n                      <div \n                        className=\"w-5 h-5 rounded-full flex items-center justify-center mt-0.5 flex-shrink-0\"\n                        style={{ backgroundColor: data.primaryColor }}\n                      >\n                        <FileText className=\"h-3 w-3 text-white\" />\n                      </div>\n                      <div className=\"flex-1\">\n                        <p className=\"text-sm font-medium text-foreground mb-2\">Appointment Cancellation Policy</p>\n                        <p className=\"text-sm text-muted-foreground leading-relaxed\">\n                          {data.appointmentCancellationPolicy}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </section>\n      )}\n\n      {/* Enhanced Contact Section */}\n      {data.showPhone && data.contactPhone && (\n        <section className=\"py-8 px-4\">\n          <div className=\"container mx-auto\">\n            <div className=\"max-w-2xl mx-auto text-center\">\n              <div className=\"p-6 rounded-2xl bg-card/60 backdrop-blur-sm border border-border/20\">\n                <h3 className=\"text-xl font-bold text-foreground mb-4\">Get in Touch</h3>\n                <div className=\"flex items-center justify-center gap-2 text-lg\">\n                  <Phone className=\"w-5 h-5\" style={{ color: data.primaryColor }} />\n                  <a \n                    href={`tel:${data.contactPhone}`} \n                    className=\"font-semibold hover:underline\"\n                    style={{ color: data.primaryColor }}\n                  >\n                    {data.contactPhone}\n                  </a>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n      )}\n    </div>\n  );\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Preview Controls */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex justify-between items-center\">\n            <CardTitle className=\"flex items-center gap-2\">\n              👀 Live Preview\n            </CardTitle>\n            <div className=\"flex gap-2\">\n              <Button\n                variant={viewMode === 'desktop' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => setViewMode('desktop')}\n                data-testid=\"button-preview-desktop\"\n              >\n                <Monitor className=\"w-4 h-4 mr-1\" />\n                Desktop\n              </Button>\n              <Button\n                variant={viewMode === 'mobile' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => setViewMode('mobile')}\n                data-testid=\"button-preview-mobile\"\n              >\n                <Smartphone className=\"w-4 h-4 mr-1\" />\n                Mobile\n              </Button>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <BookingPagePreview />\n        </CardContent>\n      </Card>\n\n      {/* Actions */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-3 text-blue-gradient text-xl font-bold\">\n            <div className=\"w-8 h-8 rounded-lg glass-prism flex items-center justify-center\">\n              <span className=\"text-lg\">🚀</span>\n            </div>\n            Next Steps\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          {/* Preview & Sign Up */}\n          <div className=\"glass-prism-card p-6 rounded-2xl border-none shadow-lg hover-lift animate-fade-in-up\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"space-y-2\">\n                <h4 className=\"font-semibold flex items-center gap-3 text-lg\">\n                  <div className=\"w-6 h-6 rounded-lg glass-prism flex items-center justify-center\">\n                    <span className=\"text-xs\">✨</span>\n                  </div>\n                  Create Account to Build Your Page\n                  <Badge variant=\"secondary\" className=\"glass-effect\">Required</Badge>\n                </h4>\n                <p className=\"text-sm text-muted-foreground leading-relaxed ml-9\">\n                  Sign up to convert your preview into a real booking page.\n                </p>\n              </div>\n              <Button\n                onClick={onCreateAccount}\n                disabled={isConverting || isSaving}\n                className=\"glass-prism-button px-6 py-3 h-auto\"\n                data-testid=\"button-create-account\"\n              >\n                <UserPlus className=\"w-4 h-4 mr-2\" />\n                {isConverting ? 'Redirecting...' : isSaving ? 'Creating...' : 'Sign Up'}\n              </Button>\n            </div>\n          </div>\n\n          <Separator />\n\n          {/* Restart Option */}\n          {onRestart && (\n            <div className=\"glass-effect p-6 rounded-2xl border border-border/30 hover-lift animate-slide-in-right\" style={{animationDelay: '0.1s'}}>\n              <div className=\"flex items-center justify-between\">\n                <div className=\"space-y-2\">\n                  <h4 className=\"font-semibold flex items-center gap-3\">\n                    <div className=\"w-6 h-6 rounded-lg glass-prism flex items-center justify-center\">\n                      <span className=\"text-xs\">↻</span>\n                    </div>\n                    Start Over\n                  </h4>\n                  <p className=\"text-sm text-muted-foreground leading-relaxed ml-9\">\n                    Want to create a different booking page? Start the wizard from the beginning.\n                  </p>\n                </div>\n                <Button\n                  variant=\"outline\"\n                  onClick={onRestart}\n                  className=\"glass-effect border-border/50 hover:glass-prism-card transition-all duration-300 px-6 py-3 h-auto\"\n                  data-testid=\"button-restart-wizard\"\n                >\n                  <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                  Restart\n                </Button>\n              </div>\n            </div>\n          )}\n\n        </CardContent>\n      </Card>\n\n    </div>\n  );\n}","size_bytes":32270},"client/src/components/demo/steps/BusinessInfoStep.tsx":{"content":"import { useState } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Button } from '@/components/ui/button';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Upload } from 'lucide-react';\n\ninterface DemoData {\n  businessName: string;\n  tagline: string;\n  contactPhone: string;\n  logoBase64: string;\n  businessType: string;\n  walkInsAccepted: string;\n  parking: string;\n  amenities: string;\n  spokenLanguages: string;\n  kidFriendly: string;\n  appointmentCancellationPolicy: string;\n}\n\ninterface BusinessInfoStepProps {\n  data: DemoData;\n  updateData: (updates: Partial<DemoData>) => void;\n}\n\nconst businessTypes = [\n  { value: 'salon', label: 'Salon & Spa' },\n  { value: 'barber', label: 'Barber Shop' },\n  { value: 'coach', label: 'Life Coach' },\n  { value: 'fitness', label: 'Fitness Trainer' },\n  { value: 'consultant', label: 'Consultant' },\n  { value: 'therapist', label: 'Therapist' },\n  { value: 'lawyer', label: 'Legal Services' },\n  { value: 'photographer', label: 'Photography' },\n  { value: 'tutor', label: 'Tutoring' },\n  { value: 'other', label: 'Other Service' }\n];\n\nexport default function BusinessInfoStep({ data, updateData }: BusinessInfoStepProps) {\n  const [logoUploading, setLogoUploading] = useState(false);\n\n  const handleLogoUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    if (file.size > 5 * 1024 * 1024) {\n      alert('File size must be less than 5MB');\n      return;\n    }\n\n    if (!file.type.startsWith('image/')) {\n      alert('Please select an image file');\n      return;\n    }\n\n    setLogoUploading(true);\n    \n    const reader = new FileReader();\n    reader.onload = (e) => {\n      const base64 = e.target?.result as string;\n      updateData({ logoBase64: base64 });\n      setLogoUploading(false);\n    };\n    reader.readAsDataURL(file);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            📋 Business Information\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          {/* Business Name */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"business-name\" data-testid=\"label-business-name\">\n              Business Name *\n            </Label>\n            <Input\n              id=\"business-name\"\n              data-testid=\"input-business-name\"\n              value={data.businessName}\n              onChange={(e) => updateData({ businessName: e.target.value })}\n              placeholder=\"Enter your business name\"\n              className=\"w-full\"\n            />\n          </div>\n\n          {/* Tagline */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"tagline\" data-testid=\"label-tagline\">\n              Tagline (Optional)\n            </Label>\n            <Input\n              id=\"tagline\"\n              data-testid=\"input-tagline\"\n              value={data.tagline}\n              onChange={(e) => updateData({ tagline: e.target.value })}\n              placeholder=\"A brief description of your services\"\n              className=\"w-full\"\n            />\n          </div>\n\n          {/* Phone Number */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"phone\" data-testid=\"label-phone\">\n              Phone Number (Optional)\n            </Label>\n            <Input\n              id=\"phone\"\n              data-testid=\"input-phone\"\n              type=\"tel\"\n              value={data.contactPhone}\n              onChange={(e) => updateData({ contactPhone: e.target.value })}\n              placeholder=\"(555) 123-4567\"\n              className=\"w-full\"\n            />\n          </div>\n\n          {/* Business Type */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"business-type\" data-testid=\"label-business-type\">\n              Business Type\n            </Label>\n            <Select\n              value={data.businessType}\n              onValueChange={(value) => updateData({ businessType: value })}\n            >\n              <SelectTrigger data-testid=\"select-business-type\">\n                <SelectValue placeholder=\"Select your business type\" />\n              </SelectTrigger>\n              <SelectContent>\n                {businessTypes.map((type) => (\n                  <SelectItem \n                    key={type.value} \n                    value={type.value}\n                    data-testid={`option-business-type-${type.value}`}\n                  >\n                    {type.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Additional Business Details */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            ℹ️ Additional Business Details\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          {/* Walk-ins */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"walk-ins\" data-testid=\"label-walk-ins\">\n              Walk-ins\n            </Label>\n            <Select\n              value={data.walkInsAccepted}\n              onValueChange={(value) => updateData({ walkInsAccepted: value })}\n            >\n              <SelectTrigger data-testid=\"select-walk-ins\">\n                <SelectValue placeholder=\"Select walk-in policy\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"accepted\" data-testid=\"option-walk-ins-accepted\">Walk-ins accepted</SelectItem>\n                <SelectItem value=\"declined\" data-testid=\"option-walk-ins-declined\">Walk-ins declined</SelectItem>\n                <SelectItem value=\"by-appointment-preferred\" data-testid=\"option-walk-ins-by-appointment\">By appointment preferred</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Parking */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"parking\" data-testid=\"label-parking\">\n              Parking (Optional)\n            </Label>\n            <Input\n              id=\"parking\"\n              data-testid=\"input-parking\"\n              value={data.parking}\n              onChange={(e) => updateData({ parking: e.target.value })}\n              placeholder=\"e.g., Free parking available, Street parking only\"\n              className=\"w-full\"\n            />\n          </div>\n\n          {/* Amenities */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"amenities\" data-testid=\"label-amenities\">\n              Amenities (Optional)\n            </Label>\n            <Input\n              id=\"amenities\"\n              data-testid=\"input-amenities\"\n              value={data.amenities}\n              onChange={(e) => updateData({ amenities: e.target.value })}\n              placeholder=\"e.g., Free WiFi, Refreshments, Waiting area\"\n              className=\"w-full\"\n            />\n          </div>\n\n          {/* Spoken Languages */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"spoken-languages\" data-testid=\"label-spoken-languages\">\n              Spoken Languages (Optional)\n            </Label>\n            <Input\n              id=\"spoken-languages\"\n              data-testid=\"input-spoken-languages\"\n              value={data.spokenLanguages}\n              onChange={(e) => updateData({ spokenLanguages: e.target.value })}\n              placeholder=\"e.g., English, Spanish, French\"\n              className=\"w-full\"\n            />\n          </div>\n\n          {/* Kid Friendly */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"kid-friendly\" data-testid=\"label-kid-friendly\">\n              Kid Friendly\n            </Label>\n            <Select\n              value={data.kidFriendly}\n              onValueChange={(value) => updateData({ kidFriendly: value })}\n            >\n              <SelectTrigger data-testid=\"select-kid-friendly\">\n                <SelectValue placeholder=\"Select kid-friendly policy\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"yes\" data-testid=\"option-kid-friendly-yes\">Yes</SelectItem>\n                <SelectItem value=\"no\" data-testid=\"option-kid-friendly-no\">No</SelectItem>\n                <SelectItem value=\"family-focused\" data-testid=\"option-kid-friendly-family\">Family-focused business</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Appointment Cancellation Policy */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"cancellation-policy\" data-testid=\"label-cancellation-policy\">\n              Appointment Cancellation Policy (Optional)\n            </Label>\n            <Textarea\n              id=\"cancellation-policy\"\n              data-testid=\"textarea-cancellation-policy\"\n              value={data.appointmentCancellationPolicy}\n              onChange={(e) => updateData({ appointmentCancellationPolicy: e.target.value })}\n              placeholder=\"e.g., 24-hour notice required for cancellations. Fees may apply for last-minute cancellations.\"\n              className=\"w-full min-h-[80px]\"\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Logo Upload */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            🖼️ Logo Upload\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label data-testid=\"label-logo\">Logo (Optional)</Label>\n            <div className=\"flex items-center space-x-4\">\n              {data.logoBase64 && (\n                <div className=\"w-16 h-16 rounded border border-border overflow-hidden\">\n                  <img\n                    src={data.logoBase64}\n                    alt=\"Logo preview\"\n                    className=\"w-full h-full object-cover\"\n                    data-testid=\"img-logo-preview\"\n                  />\n                </div>\n              )}\n              \n              <div className=\"flex-1\">\n                <input\n                  type=\"file\"\n                  accept=\"image/*\"\n                  onChange={handleLogoUpload}\n                  className=\"hidden\"\n                  id=\"logo-upload\"\n                  data-testid=\"input-logo-upload\"\n                />\n                <Button\n                  variant=\"outline\"\n                  onClick={() => document.getElementById('logo-upload')?.click()}\n                  disabled={logoUploading}\n                  data-testid=\"button-upload-logo\"\n                  className=\"w-full sm:w-auto\"\n                >\n                  <Upload className=\"w-4 h-4 mr-2\" />\n                  {logoUploading ? 'Uploading...' : data.logoBase64 ? 'Change Logo' : 'Upload Logo'}\n                </Button>\n              </div>\n            </div>\n            <p className=\"text-sm text-muted-foreground\">\n              Recommended: Square image, max 5MB. JPG, PNG, or GIF format.\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":11372},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/lib/supabase-queries.ts":{"content":"import { supabase } from './supabase';\n\n/**\n * Direct Supabase client operations for public and user-owned data\n * These operations bypass the API layer and use RLS policies for security\n */\n\n// Public page operations for booking pages\nexport async function getPublicPageBySlug(slug: string) {\n  if (!slug) return null;\n  \n  try {\n    const { data, error } = await supabase\n      .from('pages')\n      .select('*')\n      .eq('slug', slug)\n      .eq('published', true)\n      .single();\n\n    if (error) {\n      console.error('Error fetching public page:', error);\n      return null;\n    }\n\n    // Convert snake_case to camelCase for frontend consistency\n    if (!data) return null;\n    \n    return {\n      ...data,\n      ownerId: data.owner_id,\n      logoUrl: data.logo_url,\n      primaryColor: data.primary_color,\n      backgroundType: data.background_type,\n      backgroundValue: data.background_value,\n      fontFamily: data.font_family,\n      calendarLink: data.calendar_link,\n      locationLink: data.location_link,\n      acceptReviews: data.accept_reviews,\n      businessHours: data.business_hours,\n      contactPhone: data.contact_phone,\n      contactEmail: data.contact_email,\n      businessAddress: data.business_address,\n      cancellationPolicy: data.cancellation_policy,\n      showBusinessHours: data.show_business_hours,\n      showContactInfo: data.show_contact_info,\n      createdAt: data.created_at,\n      updatedAt: data.updated_at\n    };\n  } catch (error) {\n    console.error('Error in getPublicPageBySlug:', error);\n    return null;\n  }\n}\n\n// Public services for a published page\nexport async function getPublicServicesByPageId(pageId: string) {\n  if (!pageId) return [];\n  \n  try {\n    const { data, error } = await supabase\n      .from('services')\n      .select('*')\n      .eq('page_id', pageId)\n      .order('created_at', { ascending: true });\n\n    if (error) {\n      console.error('Error fetching public services:', error);\n      return [];\n    }\n\n    // Convert snake_case to camelCase for frontend consistency\n    return (data || []).map((service: any) => ({\n      id: service.id,\n      pageId: service.page_id,\n      name: service.name,\n      description: service.description,\n      imageUrl: service.image_url,\n      durationMinutes: service.duration_minutes,\n      price: service.price,\n      currency: service.currency,\n      createdAt: service.created_at\n    }));\n  } catch (error) {\n    console.error('Error in getPublicServicesByPageId:', error);\n    return [];\n  }\n}\n\n// Public approved reviews for a page\nexport async function getPublicReviewsByPageId(pageId: string) {\n  if (!pageId) return [];\n  \n  try {\n    const { data, error } = await supabase\n      .from('reviews')\n      .select('*')\n      .eq('page_id', pageId)\n      .eq('is_approved', 'approved')\n      .order('created_at', { ascending: false });\n\n    if (error) {\n      console.error('Error fetching public reviews:', error);\n      return [];\n    }\n\n    // Convert snake_case to camelCase for frontend consistency\n    return (data || []).map((review: any) => ({\n      id: review.id,\n      pageId: review.page_id,\n      reviewerName: review.reviewer_name,\n      reviewerEmail: review.reviewer_email,\n      rating: review.rating,\n      reviewText: review.review_text,\n      status: review.status,\n      isApproved: review.is_approved,\n      createdAt: review.created_at,\n      updatedAt: review.updated_at\n    }));\n  } catch (error) {\n    console.error('Error in getPublicReviewsByPageId:', error);\n    return [];\n  }\n}\n\n// Public staff for a published page\nexport async function getPublicStaffByPageId(pageId: string) {\n  if (!pageId) return [];\n  \n  try {\n    const { data, error } = await supabase\n      .from('staff')\n      .select('*')\n      .eq('page_id', pageId)\n      .eq('is_active', true)\n      .order('display_order', { ascending: true });\n\n    if (error) {\n      console.error('Error fetching public staff:', error);\n      return [];\n    }\n\n    return data || [];\n  } catch (error) {\n    console.error('Error in getPublicStaffByPageId:', error);\n    return [];\n  }\n}\n\n// User's own profile (RLS enforced)\nexport async function getUserProfile() {\n  try {\n    const { data: { user } } = await supabase.auth.getUser();\n    \n    if (!user) {\n      return null;\n    }\n\n    const { data, error } = await supabase\n      .from('profiles')\n      .select('*')\n      .eq('id', user.id)\n      .single();\n\n    if (error) {\n      console.error('Error fetching user profile:', error);\n      return null;\n    }\n\n    return data;\n  } catch (error) {\n    console.error('Error in getUserProfile:', error);\n    return null;\n  }\n}\n\n// User's own pages (RLS enforced)\nexport async function getUserPages() {\n  try {\n    const { data: { user } } = await supabase.auth.getUser();\n    \n    if (!user) {\n      return [];\n    }\n\n    const { data, error } = await supabase\n      .from('pages')\n      .select('*')\n      .eq('owner_id', user.id)\n      .order('created_at', { ascending: false });\n\n    if (error) {\n      console.error('Error fetching user pages:', error);\n      return [];\n    }\n\n    // Convert snake_case to camelCase for frontend consistency\n    return (data || []).map((page: any) => ({\n      ...page,\n      ownerId: page.owner_id,\n      logoUrl: page.logo_url,\n      primaryColor: page.primary_color,\n      backgroundType: page.background_type,\n      backgroundValue: page.background_value,\n      fontFamily: page.font_family,\n      calendarLink: page.calendar_link,\n      locationLink: page.location_link,\n      acceptReviews: page.accept_reviews,\n      businessHours: page.business_hours,\n      contactPhone: page.contact_phone,\n      contactEmail: page.contact_email,\n      businessAddress: page.business_address,\n      cancellationPolicy: page.cancellation_policy,\n      showBusinessHours: page.show_business_hours,\n      showContactInfo: page.show_contact_info,\n      createdAt: page.created_at,\n      updatedAt: page.updated_at\n    }));\n  } catch (error) {\n    console.error('Error in getUserPages:', error);\n    return [];\n  }\n}\n\n// User's own appointments (RLS enforced)\nexport async function getUserAppointments() {\n  try {\n    const { data: { user } } = await supabase.auth.getUser();\n    \n    if (!user) {\n      return [];\n    }\n\n    const { data, error } = await supabase\n      .from('appointments')\n      .select(`\n        *,\n        services(name, price),\n        pages(title)\n      `)\n      .eq('owner_id', user.id)\n      .order('created_at', { ascending: false });\n\n    if (error) {\n      console.error('Error fetching user appointments:', error);\n      return [];\n    }\n\n    // Convert snake_case to camelCase and add serviceName\n    const formattedData = (data || []).map((appointment: any) => ({\n      id: appointment.id,\n      pageId: appointment.page_id,\n      ownerId: appointment.owner_id,\n      serviceId: appointment.service_id,\n      customerName: appointment.customer_name,\n      customerEmail: appointment.customer_email,\n      customerPhone: appointment.customer_phone,\n      date: appointment.date,\n      time: appointment.time,\n      status: appointment.status,\n      notes: appointment.notes,\n      createdAt: appointment.created_at,\n      updatedAt: appointment.updated_at,\n      serviceName: appointment.services?.name || 'Service',\n      servicePrice: appointment.services?.price || 0,\n      pageName: appointment.pages?.title || 'Booking Page'\n    }));\n\n    return formattedData;\n  } catch (error) {\n    console.error('Error in getUserAppointments:', error);\n    return [];\n  }\n}\n\n// Get services for a user's page (for page editing)\nexport async function getUserPageServices(pageId: string) {\n  if (!pageId) return [];\n  \n  try {\n    const { data: { user } } = await supabase.auth.getUser();\n    \n    if (!user) {\n      return [];\n    }\n\n    // First verify the user owns this page\n    const { data: page } = await supabase\n      .from('pages')\n      .select('id')\n      .eq('id', pageId)\n      .eq('owner_id', user.id)\n      .single();\n      \n    if (!page) {\n      console.warn('User does not own this page or page not found');\n      return [];\n    }\n\n    const { data, error } = await supabase\n      .from('services')\n      .select('*')\n      .eq('page_id', pageId)\n      .order('created_at', { ascending: true });\n\n    if (error) {\n      console.error('Error fetching page services:', error);\n      return [];\n    }\n\n    return data || [];\n  } catch (error) {\n    console.error('Error in getUserPageServices:', error);\n    return [];\n  }\n}","size_bytes":8471},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/pages/create-page.tsx":{"content":"import { useState } from 'react';\nimport { useLocation } from 'wouter';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { Card, CardContent, CardHeader } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { useToast } from '@/hooks/use-toast';\nimport { apiRequest } from '@/lib/queryClient';\nimport { uploadFile } from '@/lib/supabase';\nimport { currencies, formatCurrencyDisplay, searchCurrencies, getCurrencyByCode } from '@/lib/currencies';\nimport { ArrowLeft, ArrowRight, CloudUpload, Plus, X, Palette, FileText, MapPin, Settings, Check, Trash2, Search, Calendar, Phone, Mail, Edit, Users, User, Info, Upload, Image as ImageIcon } from 'lucide-react';\nimport { Progress } from '@/components/ui/progress';\n\nexport default function CreatePage() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [currentStep, setCurrentStep] = useState(1);\n  \n  const [formData, setFormData] = useState({\n    title: '',\n    slug: '',\n    tagline: '',\n    primaryColor: '#2563eb',\n    locationLink: '',\n    logoUrl: '',\n    theme: 'Ocean Blue',\n    backgroundType: 'gradient',\n    backgroundValue: 'blue',\n    fontFamily: 'inter',\n    acceptReviews: 'true',\n    faqs: [{ question: '', answer: '' }],\n    businessHours: {\n      monday: '9:00-17:00',\n      tuesday: '9:00-17:00',\n      wednesday: '9:00-17:00',\n      thursday: '9:00-17:00',\n      friday: '9:00-17:00',\n      saturday: 'Closed',\n      sunday: 'Closed'\n    },\n    contactPhone: '',\n    contactEmail: '',\n    businessAddress: '',\n    cancellationPolicy: '',\n    showBusinessHours: 'true',\n    showContactInfo: 'true',\n    services: [{ name: '', description: '', durationMinutes: '', price: '', currency: 'USD', imageUrl: '' }],\n    staff: [] as Array<{name: string; bio: string; position: string; imageUrl: string; email: string; phone: string}>,\n    businessType: 'salon',\n    walkInsAccepted: 'accepted',\n    parking: '',\n    amenities: '',\n    spokenLanguages: 'English',\n    kidFriendly: 'yes',\n    appointmentCancellationPolicy: '',\n    gallery: [] as string[],\n  });\n\n  const [logoFile, setLogoFile] = useState<File | null>(null);\n  const [logoPreview, setLogoPreview] = useState<string>('');\n  const [uploadingLogo, setUploadingLogo] = useState(false);\n  const [slugManuallyEdited, setSlugManuallyEdited] = useState(false);\n  const [uploadingStaffImage, setUploadingStaffImage] = useState<{[key: number]: boolean}>({});\n  const [uploadingGallery, setUploadingGallery] = useState(false);\n  const [uploadingServiceImage, setUploadingServiceImage] = useState<{[key: number]: boolean}>({});\n  \n  // Step definitions\n  const steps = [\n    {\n      number: 1,\n      title: \"Basic Details\",\n      description: \"Set up your booking page name, web address, and tagline\",\n      icon: Edit,\n      fields: ['title', 'slug', 'tagline']\n    },\n    {\n      number: 2, \n      title: \"Services & Pricing\",\n      description: \"Add your services, set pricing and duration for each offering\",\n      icon: FileText,\n      fields: ['services']\n    },\n    {\n      number: 3,\n      title: \"Style & Branding\", \n      description: \"Customize colors, themes, and upload your logo\",\n      icon: Palette,\n      fields: ['theme', 'primaryColor', 'backgroundType', 'backgroundValue', 'fontFamily', 'logoUrl']\n    },\n    {\n      number: 4,\n      title: \"Business Information\",\n      description: \"Add contact details, business hours, and policies\",\n      icon: Settings,\n      fields: ['contactPhone', 'contactEmail', 'businessAddress', 'businessHours', 'locationLink', 'cancellationPolicy']\n    },\n    {\n      number: 5,\n      title: \"Additional Details\",\n      description: \"Add business type, amenities, and other details\",\n      icon: Info,\n      fields: ['businessType', 'walkInsAccepted', 'parking', 'amenities', 'spokenLanguages', 'kidFriendly', 'appointmentCancellationPolicy']\n    },\n    {\n      number: 6,\n      title: \"Review & Publish\",\n      description: \"Review your booking page and publish it to the world\",\n      icon: Check,\n      fields: []\n    }\n  ];\n\n  // Font options for typography customization\n  const fontOptions = [\n    { name: 'Inter (Modern)', value: 'inter', class: 'font-inter' },\n    { name: 'Roboto (Clean)', value: 'roboto', class: 'font-roboto' },\n    { name: 'Poppins (Rounded)', value: 'poppins', class: 'font-poppins' },\n    { name: 'Montserrat (Elegant)', value: 'montserrat', class: 'font-montserrat' },\n    { name: 'Lato (Professional)', value: 'lato', class: 'font-lato' },\n    { name: 'Open Sans (Friendly)', value: 'opensans', class: 'font-opensans' }\n  ];\n\n  // Beautiful color themes for booking pages\n  const colorThemes = [\n    { name: 'Ocean Blue', primary: '#2563eb', secondary: '#1e40af', accent: '#3b82f6', gradient: 'from-blue-500 to-blue-600' },\n    { name: 'Forest Green', primary: '#059669', secondary: '#047857', accent: '#10b981', gradient: 'from-emerald-500 to-emerald-600' },\n    { name: 'Sunset Orange', primary: '#ea580c', secondary: '#c2410c', accent: '#fb923c', gradient: 'from-orange-500 to-red-500' },\n    { name: 'Royal Purple', primary: '#7c3aed', secondary: '#6d28d9', accent: '#8b5cf6', gradient: 'from-violet-500 to-purple-600' },\n    { name: 'Rose Gold', primary: '#e11d48', secondary: '#be185d', accent: '#f43f5e', gradient: 'from-rose-500 to-pink-500' },\n    { name: 'Midnight', primary: '#1f2937', secondary: '#111827', accent: '#374151', gradient: 'from-gray-800 to-gray-900' },\n    { name: 'Electric Teal', primary: '#14b8a6', secondary: '#0d9488', accent: '#2dd4bf', gradient: 'from-teal-500 to-cyan-500' },\n    { name: 'Coral Sunset', primary: '#f97316', secondary: '#ea580c', accent: '#fb923c', gradient: 'from-orange-400 to-rose-500' },\n  ];\n\n  const backgroundOptions = [\n    { type: 'gradient', name: 'Blue Gradient', value: 'blue', class: 'bg-gradient-to-br from-blue-100 to-blue-200' },\n    { type: 'gradient', name: 'Green Gradient', value: 'green', class: 'bg-gradient-to-br from-emerald-100 to-emerald-200' },\n    { type: 'gradient', name: 'Purple Gradient', value: 'purple', class: 'bg-gradient-to-br from-violet-100 to-violet-200' },\n    { type: 'gradient', name: 'Rose Gradient', value: 'rose', class: 'bg-gradient-to-br from-rose-100 to-rose-200' },\n    { type: 'solid', name: 'Clean White', value: 'white', class: 'bg-white' },\n    { type: 'solid', name: 'Soft Gray', value: 'gray', class: 'bg-gray-50' },\n  ];\n\n  const createPageMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await apiRequest('POST', '/api/pages', data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.refetchQueries({ queryKey: ['/api/pages'] });\n      queryClient.refetchQueries({ queryKey: ['/api/dashboard/stats'] });\n      queryClient.refetchQueries({ queryKey: ['/api/dashboard/analytics-charts'] });\n      queryClient.refetchQueries({ queryKey: ['/api/dashboard/recent-activity'] });\n      toast({\n        title: \"Page created!\",\n        description: \"Your booking page has been created successfully.\",\n      });\n      setLocation('/dashboard');\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error creating page\",\n        description: error.message || \"Something went wrong. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleLogoUpload = async (file: File) => {\n    setUploadingLogo(true);\n    try {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setLogoPreview(e.target?.result as string);\n      };\n      reader.readAsDataURL(file);\n\n      const result = await uploadFile(file, 'logos');\n      \n      if (result.success && result.url) {\n        setFormData(prev => ({ ...prev, logoUrl: result.url || '' }));\n        setLogoFile(file);\n        toast({\n          title: \"Logo uploaded!\",\n          description: \"Your logo has been uploaded successfully.\",\n        });\n      } else {\n        toast({\n          title: \"Upload failed\",\n          description: result.error || \"Failed to upload logo. Please try again.\",\n          variant: \"destructive\",\n        });\n      }\n    } catch (error) {\n      toast({\n        title: \"Upload error\",\n        description: \"Something went wrong while uploading your logo.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setUploadingLogo(false);\n    }\n  };\n\n  const generateSlug = (title: string) => {\n    return title\n      .toLowerCase()\n      .trim()\n      .replace(/[^\\w\\s-]/g, '')\n      .replace(/[\\s_-]+/g, '-')\n      .replace(/^-+|-+$/g, '');\n  };\n\n  const handleTitleChange = (title: string) => {\n    setFormData(prev => {\n      const newData = { ...prev, title };\n      // Only auto-generate slug if user hasn't manually edited it\n      if (title && !slugManuallyEdited) {\n        newData.slug = generateSlug(title);\n      }\n      return newData;\n    });\n  };\n\n  const handleSlugChange = (slug: string) => {\n    setSlugManuallyEdited(true);\n    setFormData(prev => ({ ...prev, slug }));\n  };\n\n  // Calculate progress percentage\n  const getProgress = () => {\n    return ((currentStep - 1) / (steps.length - 1)) * 100;\n  };\n\n  const addService = () => {\n    setFormData(prev => ({\n      ...prev,\n      services: [...prev.services, { name: '', description: '', durationMinutes: '', price: '', currency: 'USD', imageUrl: '' }]\n    }));\n  };\n\n  const removeService = (index: number) => {\n    if (formData.services.length > 1) {\n      setFormData(prev => ({\n        ...prev,\n        services: prev.services.filter((_, i) => i !== index)\n      }));\n    }\n  };\n\n  const updateService = (index: number, field: string, value: string) => {\n    setFormData(prev => ({\n      ...prev,\n      services: prev.services.map((service, i) => i === index ? { ...service, [field]: value } : service)\n    }));\n  };\n\n  const handleServiceImageUpload = async (index: number, file: File) => {\n    try {\n      setUploadingServiceImage(prev => ({ ...prev, [index]: true }));\n      const result = await uploadFile(file, 'service-images');\n      \n      if (result.success && result.url) {\n        updateService(index, 'imageUrl', result.url);\n        toast({\n          title: \"Service image uploaded\",\n          description: \"The service image has been uploaded successfully.\",\n        });\n      } else {\n        toast({\n          title: \"Upload failed\",\n          description: result.error || \"Failed to upload the service image. Please try again.\",\n          variant: \"destructive\",\n        });\n      }\n    } catch (error) {\n      console.error('Error uploading service image:', error);\n      toast({\n        title: \"Upload error\",\n        description: \"Something went wrong while uploading the service image.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setUploadingServiceImage(prev => ({ ...prev, [index]: false }));\n    }\n  };\n\n  // Staff management functions\n  const addStaff = () => {\n    setFormData(prev => ({\n      ...prev,\n      staff: [...prev.staff, { name: '', bio: '', position: '', imageUrl: '', email: '', phone: '' }]\n    }));\n  };\n\n  const removeStaff = (index: number) => {\n    setFormData(prev => ({\n      ...prev,\n      staff: prev.staff.filter((_, i) => i !== index)\n    }));\n  };\n\n  const updateStaff = (index: number, field: string, value: string) => {\n    setFormData(prev => ({\n      ...prev,\n      staff: prev.staff.map((member, i) => i === index ? { ...member, [field]: value } : member)\n    }));\n  };\n\n  const handleStaffImageUpload = async (index: number, file: File) => {\n    try {\n      setUploadingStaffImage(prev => ({ ...prev, [index]: true }));\n      const result = await uploadFile(file, 'logos');\n      \n      if (result.success && result.url) {\n        updateStaff(index, 'imageUrl', result.url);\n        toast({\n          title: \"Staff image uploaded\",\n          description: \"The staff member's profile image has been uploaded successfully.\",\n        });\n      } else {\n        toast({\n          title: \"Upload failed\",\n          description: result.error || \"Failed to upload the staff image. Please try again.\",\n          variant: \"destructive\",\n        });\n      }\n    } catch (error) {\n      console.error('Error uploading staff image:', error);\n      toast({\n        title: \"Upload error\",\n        description: \"Something went wrong while uploading the staff image.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setUploadingStaffImage(prev => ({ ...prev, [index]: false }));\n    }\n  };\n\n  const handleGalleryUpload = async (files: FileList) => {\n    if (files.length === 0) return;\n    \n    setUploadingGallery(true);\n    try {\n      const uploadPromises = Array.from(files).map(file => uploadFile(file, 'gallery-images'));\n      const results = await Promise.all(uploadPromises);\n      \n      const successfulUploads = results.filter(r => r.success && r.url).map(r => r.url as string);\n      \n      if (successfulUploads.length > 0) {\n        setFormData(prev => ({\n          ...prev,\n          gallery: [...prev.gallery, ...successfulUploads]\n        }));\n        toast({\n          title: \"Images uploaded!\",\n          description: `Successfully uploaded ${successfulUploads.length} image${successfulUploads.length > 1 ? 's' : ''}.`,\n        });\n      } else {\n        toast({\n          title: \"Upload failed\",\n          description: \"Failed to upload images. Please try again.\",\n          variant: \"destructive\",\n        });\n      }\n    } catch (error) {\n      console.error('Error uploading gallery images:', error);\n      toast({\n        title: \"Upload error\",\n        description: \"Something went wrong while uploading images.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setUploadingGallery(false);\n    }\n  };\n\n  const removeGalleryImage = (index: number) => {\n    setFormData(prev => ({\n      ...prev,\n      gallery: prev.gallery.filter((_, i) => i !== index)\n    }));\n    toast({\n      title: \"Image removed\",\n      description: \"The image has been removed from your gallery.\",\n    });\n  };\n\n  const addFAQ = () => {\n    setFormData(prev => ({\n      ...prev,\n      faqs: [...prev.faqs, { question: '', answer: '' }]\n    }));\n  };\n\n  const removeFAQ = (index: number) => {\n    if (formData.faqs.length > 1) {\n      setFormData(prev => ({\n        ...prev,\n        faqs: prev.faqs.filter((_, i) => i !== index)\n      }));\n    }\n  };\n\n  const updateFAQ = (index: number, field: string, value: string) => {\n    setFormData(prev => ({\n      ...prev,\n      faqs: prev.faqs.map((faq, i) => i === index ? { ...faq, [field]: value } : faq)\n    }));\n  };\n\n  const validateStep = (step: number) => {\n    switch (step) {\n      case 1:\n        return formData.title.trim() && formData.slug.trim();\n      case 2:\n        return formData.services.some(service => service.name.trim() && service.price.trim());\n      case 3:\n        return true; // Styling is optional\n      case 4:\n        return true; // Business info is optional  \n      case 5:\n        return true; // Additional details are optional\n      case 6:\n        return true; // Review step\n      default:\n        return false;\n    }\n  };\n\n  const nextStep = () => {\n    if (validateStep(currentStep)) {\n      setCurrentStep(prev => Math.min(prev + 1, steps.length));\n    } else {\n      toast({\n        title: \"Please complete required fields\",\n        description: \"Fill in the required information before proceeding to the next step.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const prevStep = () => {\n    setCurrentStep(prev => Math.max(prev - 1, 1));\n  };\n\n  const handleSubmit = () => {\n    if (!formData.title || !formData.slug) {\n      toast({\n        title: \"Missing fields\",\n        description: \"Please fill in the title and slug.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (formData.locationLink && formData.locationLink.trim() !== '') {\n      try {\n        new URL(formData.locationLink);\n      } catch {\n        toast({\n          title: \"Invalid location link\",\n          description: \"Please enter a valid URL (e.g., https://maps.google.com/...)\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n    }\n\n    const servicesWithNumbers = formData.services.map(service => ({\n      ...service,\n      price: service.price || '0',\n      durationMinutes: parseInt(service.durationMinutes) || 60,\n      currency: service.currency || 'USD'\n    }));\n\n    const validFaqs = formData.faqs.filter(faq => faq.question.trim() && faq.answer.trim());\n\n    // Prepare the data object with additional business information\n    const pageData = {\n      businessName: formData.title,\n      businessType: formData.businessType,\n      walkInsAccepted: formData.walkInsAccepted,\n      parking: formData.parking,\n      amenities: formData.amenities,\n      spokenLanguages: formData.spokenLanguages,\n      kidFriendly: formData.kidFriendly,\n      appointmentCancellationPolicy: formData.appointmentCancellationPolicy,\n    };\n\n    // Transform gallery array to object format expected by database\n    const galleryObject = {\n      logos: [],\n      banners: [],\n      images: formData.gallery\n    };\n\n    // Destructure to exclude the new business fields from top-level payload\n    const { businessType, walkInsAccepted, parking, amenities, spokenLanguages, kidFriendly, appointmentCancellationPolicy, ...pagePayload } = formData;\n\n    createPageMutation.mutate({\n      ...pagePayload,\n      gallery: galleryObject,\n      services: servicesWithNumbers,\n      staff: formData.staff,\n      faqs: validFaqs,\n      data: pageData,\n    });\n  };\n\n  const renderStepContent = () => {\n    switch (currentStep) {\n      case 1:\n        return (\n          <div className=\"space-y-6\">\n            <Card className=\"glass-prism-card border-none shadow-lg\">\n              <CardHeader>\n                <h3 className=\"text-lg font-semibold text-blue-gradient flex items-center gap-2\">\n                  <Edit className=\"h-5 w-5\" />\n                  Basic Information\n                </h3>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div>\n                  <Label htmlFor=\"title\" className=\"text-base font-medium\">Business Name *</Label>\n                  <Input\n                    id=\"title\"\n                    type=\"text\"\n                    placeholder=\"Your Business Name\"\n                    value={formData.title}\n                    onChange={(e) => handleTitleChange(e.target.value)}\n                    className=\"glass-effect border-border/50 mt-2\"\n                    data-testid=\"input-title\"\n                  />\n                </div>\n                \n                <div>\n                  <Label htmlFor=\"slug\" className=\"text-base font-medium\">Web Address (URL) *</Label>\n                  <div className=\"flex items-center space-x-2 mt-2\">\n                    <span className=\"text-sm text-muted-foreground px-3 py-2 glass-effect rounded-lg border border-border/50\">bookinggen.xyz/</span>\n                    <Input\n                      id=\"slug\"\n                      type=\"text\"\n                      placeholder=\"your-business-name\"\n                      value={formData.slug}\n                      onChange={(e) => handleSlugChange(e.target.value)}\n                      className=\"glass-effect border-border/50\"\n                      data-testid=\"input-slug\"\n                    />\n                  </div>\n                  <p className=\"text-sm text-muted-foreground mt-2\">\n                    This will be your unique booking page URL\n                  </p>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"tagline\" className=\"text-base font-medium\">Tagline</Label>\n                  <Input\n                    id=\"tagline\"\n                    type=\"text\"\n                    placeholder=\"Professional services made easy\"\n                    value={formData.tagline}\n                    onChange={(e) => setFormData(prev => ({ ...prev, tagline: e.target.value }))}\n                    className=\"glass-effect border-border/50 mt-2\"\n                    data-testid=\"input-tagline\"\n                  />\n                  <p className=\"text-sm text-muted-foreground mt-2\">\n                    A short description that appears under your business name\n                  </p>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        );\n\n      case 2:\n        return (\n          <div className=\"space-y-6\">\n            <Card className=\"glass-prism-card border-none shadow-lg\">\n              <CardHeader>\n                <div className=\"flex items-center justify-between\">\n                  <h3 className=\"text-lg font-semibold text-blue-gradient flex items-center gap-2\">\n                    <FileText className=\"h-5 w-5\" />\n                    Your Services\n                  </h3>\n                  <Button type=\"button\" onClick={addService} className=\"glass-effect hover-lift rounded-xl\" size=\"sm\" data-testid=\"button-add-service\">\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Add Service\n                  </Button>\n                </div>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                {formData.services.map((service, index) => (\n                  <Card key={index} className=\"glass-effect border-border/50 shadow-sm\">\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-3\">\n                      <h4 className=\"text-sm font-medium\">Service #{index + 1}</h4>\n                      {formData.services.length > 1 && (\n                        <Button\n                          type=\"button\"\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => removeService(index)}\n                          className=\"hover-lift\"\n                          data-testid={`button-remove-service-${index}`}\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      )}\n                    </CardHeader>\n                    <CardContent className=\"pt-0 space-y-4\">\n                      <div>\n                        <Label className=\"text-base font-medium\">Service Name *</Label>\n                        <Input\n                          placeholder=\"e.g., 60-minute consultation\"\n                          value={service.name}\n                          onChange={(e) => updateService(index, 'name', e.target.value)}\n                          className=\"glass-effect border-border/50 mt-2\"\n                          data-testid={`input-service-name-${index}`}\n                        />\n                      </div>\n                      \n                      <div>\n                        <Label className=\"text-base font-medium\">Description</Label>\n                        <Textarea\n                          placeholder=\"Describe what's included in this service...\"\n                          value={service.description}\n                          onChange={(e) => updateService(index, 'description', e.target.value)}\n                          rows={2}\n                          className=\"glass-effect border-border/50 mt-2\"\n                          data-testid={`textarea-service-description-${index}`}\n                        />\n                      </div>\n\n                      <div className=\"grid grid-cols-3 gap-4\">\n                        <div>\n                          <Label className=\"text-base font-medium\">Duration (minutes)</Label>\n                          <Input\n                            type=\"number\"\n                            placeholder=\"60\"\n                            value={service.durationMinutes}\n                            onChange={(e) => updateService(index, 'durationMinutes', e.target.value)}\n                            className=\"glass-effect border-border/50 mt-2\"\n                            data-testid={`input-service-duration-${index}`}\n                          />\n                        </div>\n                        \n                        <div>\n                          <Label className=\"text-base font-medium\">Price *</Label>\n                          <Input\n                            type=\"number\"\n                            step=\"0.01\"\n                            placeholder=\"99.00\"\n                            value={service.price}\n                            onChange={(e) => updateService(index, 'price', e.target.value)}\n                            className=\"glass-effect border-border/50 mt-2\"\n                            data-testid={`input-service-price-${index}`}\n                          />\n                        </div>\n\n                        <div>\n                          <Label className=\"text-base font-medium\">Currency</Label>\n                          <div className=\"mt-2\">\n                            <Select\n                              value={service.currency}\n                              onValueChange={(value) => updateService(index, 'currency', value)}\n                            >\n                              <SelectTrigger className=\"glass-effect border-border/50\" data-testid={`select-service-currency-${index}`}>\n                                <SelectValue placeholder=\"USD\" />\n                              </SelectTrigger>\n                              <SelectContent>\n                                {currencies.slice(0, 10).map((currency) => (\n                                  <SelectItem key={currency.code} value={currency.code}>\n                                    <span className=\"font-mono text-sm\">{currency.symbol}</span>\n                                    <span className=\"font-medium ml-2\">{currency.code}</span>\n                                  </SelectItem>\n                                ))}\n                              </SelectContent>\n                            </Select>\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"space-y-2 pt-4 border-t\">\n                        <Label className=\"text-base font-medium flex items-center gap-2\">\n                          <ImageIcon className=\"w-4 h-4\" />\n                          Service Image (Optional)\n                        </Label>\n                        <div className=\"flex items-center gap-4\">\n                          {service.imageUrl && (\n                            <div className=\"w-20 h-20 rounded border border-border/30 overflow-hidden flex-shrink-0\">\n                              <img\n                                src={service.imageUrl}\n                                alt={`${service.name} preview`}\n                                className=\"w-full h-full object-cover\"\n                                data-testid={`img-service-preview-${index}`}\n                              />\n                            </div>\n                          )}\n                          \n                          <div className=\"flex-1\">\n                            <input\n                              type=\"file\"\n                              accept=\"image/*\"\n                              onChange={(e) => e.target.files?.[0] && handleServiceImageUpload(index, e.target.files[0])}\n                              className=\"hidden\"\n                              id={`service-image-upload-${index}`}\n                              data-testid={`input-service-image-${index}`}\n                            />\n                            <Button\n                              type=\"button\"\n                              variant=\"outline\"\n                              size=\"sm\"\n                              onClick={() => document.getElementById(`service-image-upload-${index}`)?.click()}\n                              disabled={uploadingServiceImage[index]}\n                              className=\"glass-effect hover-lift rounded-xl\"\n                              data-testid={`button-upload-service-image-${index}`}\n                            >\n                              <Upload className=\"w-4 h-4 mr-2\" />\n                              {uploadingServiceImage[index] ? 'Uploading...' : service.imageUrl ? 'Change Image' : 'Upload Image'}\n                            </Button>\n                            {service.imageUrl && (\n                              <Button\n                                type=\"button\"\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                onClick={() => updateService(index, 'imageUrl', '')}\n                                className=\"ml-2\"\n                                data-testid={`button-remove-service-image-${index}`}\n                              >\n                                <X className=\"w-4 h-4 mr-1\" />\n                                Remove\n                              </Button>\n                            )}\n                          </div>\n                        </div>\n                        <p className=\"text-xs text-muted-foreground\">\n                          Recommended: Square or 16:9 image, max 5MB\n                        </p>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </CardContent>\n            </Card>\n          </div>\n        );\n\n      case 3:\n        return (\n          <div className=\"space-y-6\">\n            <Card className=\"glass-prism-card border-none shadow-lg\">\n              <CardHeader>\n                <h3 className=\"text-lg font-semibold text-blue-gradient flex items-center gap-2\">\n                  <Palette className=\"h-5 w-5\" />\n                  Style & Branding\n                </h3>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div>\n                  <Label className=\"text-base font-medium mb-4 block\">Color Theme</Label>\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\n                    {colorThemes.map((theme, index) => (\n                      <div key={index} className=\"relative\">\n                        <button\n                          type=\"button\"\n                          onClick={() => setFormData(prev => ({ ...prev, theme: theme.name, primaryColor: theme.primary }))}\n                          className={`w-full p-3 rounded-xl border-2 transition-all hover:scale-105 hover-lift glass-effect ${\n                            formData.theme === theme.name ? 'border-primary shadow-lg' : 'border-border/50'\n                          }`}\n                          data-testid={`button-theme-${index}`}\n                        >\n                          <div className={`w-full h-8 rounded mb-2 bg-gradient-to-r ${theme.gradient}`}></div>\n                          <span className=\"text-sm font-medium\">{theme.name}</span>\n                        </button>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n\n                <div>\n                  <Label className=\"text-base font-medium mb-4 block\">Background Style</Label>\n                  <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\n                    {backgroundOptions.map((bg, index) => (\n                      <button\n                        key={index}\n                        type=\"button\"\n                        onClick={() => setFormData(prev => ({ \n                          ...prev, \n                          backgroundType: bg.type, \n                          backgroundValue: bg.value \n                        }))}\n                        className={`p-4 rounded-xl border-2 transition-all hover:scale-105 hover-lift glass-effect ${\n                          formData.backgroundValue === bg.value ? 'border-primary shadow-lg' : 'border-border/50'\n                        }`}\n                        data-testid={`button-background-${index}`}\n                      >\n                        <div className={`w-full h-12 rounded mb-2 ${bg.class}`}></div>\n                        <span className=\"text-sm font-medium\">{bg.name}</span>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Font Selection */}\n                <div>\n                  <Label className=\"text-base font-medium mb-4 block\">Typography</Label>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                    {fontOptions.map((font, index) => (\n                      <button\n                        key={index}\n                        type=\"button\"\n                        onClick={() => setFormData(prev => ({ ...prev, fontFamily: font.value }))}\n                        className={`p-4 rounded-xl border-2 transition-all hover:scale-105 hover-lift glass-effect text-left ${\n                          formData.fontFamily === font.value ? 'border-primary shadow-lg' : 'border-border/50'\n                        }`}\n                        data-testid={`button-font-${index}`}\n                      >\n                        <div className={`${font.class} text-lg mb-1`}>Aa Bb Cc</div>\n                        <span className=\"text-sm font-medium\">{font.name}</span>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Custom Color Picker */}\n                <div>\n                  <Label className=\"text-base font-medium mb-4 block\">Custom Primary Color</Label>\n                  <div className=\"glass-effect rounded-xl p-4 border border-border/50\">\n                    <div className=\"flex items-center gap-4\">\n                      <input\n                        type=\"color\"\n                        value={formData.primaryColor}\n                        onChange={(e) => setFormData(prev => ({ ...prev, primaryColor: e.target.value }))}\n                        className=\"w-16 h-16 rounded-lg border-2 border-border/50 cursor-pointer\"\n                        data-testid=\"input-primary-color\"\n                      />\n                      <div>\n                        <Label className=\"text-sm font-medium\">Primary Color</Label>\n                        <Input\n                          type=\"text\"\n                          value={formData.primaryColor}\n                          onChange={(e) => setFormData(prev => ({ ...prev, primaryColor: e.target.value }))}\n                          className=\"glass-effect border-border/50 mt-1 font-mono\"\n                          placeholder=\"#2563eb\"\n                          data-testid=\"input-primary-color-hex\"\n                        />\n                      </div>\n                    </div>\n                    <p className=\"text-sm text-muted-foreground mt-2\">\n                      Choose a primary color that represents your brand\n                    </p>\n                  </div>\n                </div>\n\n                <div>\n                  <Label className=\"text-base font-medium mb-4 block\">Upload Logo (Optional)</Label>\n                  <div className=\"border-2 border-dashed border-border/50 rounded-xl p-6 text-center glass-effect\">\n                    {logoPreview ? (\n                      <div className=\"space-y-4\">\n                        <img src={logoPreview} alt=\"Logo preview\" className=\"w-20 h-20 object-contain mx-auto\" />\n                        <Button\n                          type=\"button\"\n                          onClick={() => document.getElementById('logo-upload')?.click()}\n                          disabled={uploadingLogo}\n                          className=\"glass-effect hover-lift rounded-xl\"\n                          data-testid=\"button-change-logo\"\n                        >\n                          Change Logo\n                        </Button>\n                      </div>\n                    ) : (\n                      <div className=\"space-y-4\">\n                        <CloudUpload className=\"h-12 w-12 text-muted-foreground mx-auto\" />\n                        <Button\n                          type=\"button\"\n                          onClick={() => document.getElementById('logo-upload')?.click()}\n                          disabled={uploadingLogo}\n                          className=\"glass-effect hover-lift rounded-xl\"\n                          data-testid=\"button-upload-logo\"\n                        >\n                          {uploadingLogo ? 'Uploading...' : 'Upload Logo'}\n                        </Button>\n                        <p className=\"text-sm text-muted-foreground\">PNG, JPG up to 5MB</p>\n                      </div>\n                    )}\n                    <input\n                      id=\"logo-upload\"\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={(e) => e.target.files?.[0] && handleLogoUpload(e.target.files[0])}\n                      className=\"hidden\"\n                    />\n                  </div>\n                </div>\n\n                {/* Gallery Upload */}\n                <div>\n                  <Label className=\"text-base font-medium mb-4 block\">Photo Gallery (Optional)</Label>\n                  <div className=\"border-2 border-dashed border-border/50 rounded-xl p-6 glass-effect\">\n                    <div className=\"text-center space-y-4 mb-4\">\n                      <CloudUpload className=\"h-12 w-12 text-muted-foreground mx-auto\" />\n                      <div>\n                        <Button\n                          type=\"button\"\n                          onClick={() => document.getElementById('gallery-upload')?.click()}\n                          disabled={uploadingGallery}\n                          className=\"glass-effect hover-lift rounded-xl\"\n                          data-testid=\"button-upload-gallery\"\n                        >\n                          {uploadingGallery ? 'Uploading...' : 'Upload Images'}\n                        </Button>\n                        <input\n                          id=\"gallery-upload\"\n                          type=\"file\"\n                          accept=\"image/*\"\n                          multiple\n                          onChange={(e) => e.target.files && handleGalleryUpload(e.target.files)}\n                          className=\"hidden\"\n                        />\n                      </div>\n                      <p className=\"text-sm text-muted-foreground\">\n                        Upload multiple images to showcase your business. PNG, JPG up to 5MB each\n                      </p>\n                    </div>\n\n                    {/* Gallery Preview */}\n                    {formData.gallery.length > 0 && (\n                      <div className=\"mt-4 pt-4 border-t border-border/30\">\n                        <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3\">\n                          {formData.gallery.map((imageUrl, index) => (\n                            <div key={index} className=\"relative group aspect-square rounded-lg overflow-hidden border border-border/30\">\n                              <img \n                                src={imageUrl} \n                                alt={`Gallery ${index + 1}`} \n                                className=\"w-full h-full object-cover\"\n                              />\n                              <div className=\"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center\">\n                                <Button\n                                  type=\"button\"\n                                  size=\"sm\"\n                                  variant=\"destructive\"\n                                  onClick={() => removeGalleryImage(index)}\n                                  className=\"rounded-full\"\n                                  data-testid={`button-remove-gallery-${index}`}\n                                >\n                                  <X className=\"h-4 w-4\" />\n                                </Button>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                        <p className=\"text-sm text-muted-foreground mt-3\">\n                          {formData.gallery.length} image{formData.gallery.length > 1 ? 's' : ''} uploaded\n                        </p>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        );\n\n      case 4:\n        return (\n          <div className=\"space-y-6\">\n            <Card className=\"glass-prism-card border-none shadow-lg\">\n              <CardHeader>\n                <h3 className=\"text-lg font-semibold text-blue-gradient flex items-center gap-2\">\n                  <Settings className=\"h-5 w-5\" />\n                  Business Information\n                </h3>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div className=\"grid md:grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"contactPhone\" className=\"text-base font-medium\">Phone Number</Label>\n                    <Input\n                      id=\"contactPhone\"\n                      type=\"tel\"\n                      placeholder=\"+1 (555) 123-4567\"\n                      value={formData.contactPhone}\n                      onChange={(e) => setFormData(prev => ({ ...prev, contactPhone: e.target.value }))}\n                      className=\"glass-effect border-border/50 mt-2\"\n                      data-testid=\"input-contact-phone\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"contactEmail\" className=\"text-base font-medium\">Email Address</Label>\n                    <Input\n                      id=\"contactEmail\"\n                      type=\"email\"\n                      placeholder=\"contact@yourbusiness.com\"\n                      value={formData.contactEmail}\n                      onChange={(e) => setFormData(prev => ({ ...prev, contactEmail: e.target.value }))}\n                      className=\"glass-effect border-border/50 mt-2\"\n                      data-testid=\"input-contact-email\"\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"businessAddress\" className=\"text-base font-medium\">Business Address</Label>\n                  <Textarea\n                    id=\"businessAddress\"\n                    placeholder=\"123 Main Street, City, State 12345\"\n                    value={formData.businessAddress}\n                    onChange={(e) => setFormData(prev => ({ ...prev, businessAddress: e.target.value }))}\n                    rows={2}\n                    className=\"glass-effect border-border/50 mt-2\"\n                    data-testid=\"textarea-business-address\"\n                  />\n                </div>\n\n                <div className=\"glass-effect rounded-xl p-4 border border-border/50\">\n                  <Label htmlFor=\"locationLink\" className=\"text-base font-medium flex items-center gap-2\">\n                    <MapPin className=\"h-4 w-4\" />\n                    Google Maps Link\n                  </Label>\n                  <Input\n                    id=\"locationLink\"\n                    type=\"url\"\n                    placeholder=\"https://maps.google.com/...\"\n                    value={formData.locationLink}\n                    onChange={(e) => setFormData(prev => ({ ...prev, locationLink: e.target.value }))}\n                    className=\"glass-effect border-border/50 mt-2\"\n                    data-testid=\"input-location-link\"\n                  />\n                  <p className=\"text-sm text-muted-foreground mt-2\">\n                    Add your Google Maps link so customers can easily find you\n                  </p>\n                </div>\n\n                <div>\n                  <Label className=\"text-base font-medium mb-4 block flex items-center gap-2\">\n                    <Calendar className=\"h-4 w-4\" />\n                    Business Hours\n                  </Label>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    {Object.entries(formData.businessHours).map(([day, hours]) => (\n                      <div key={day} className=\"flex items-center space-x-2\">\n                        <Label className=\"w-20 capitalize text-sm\">{day}:</Label>\n                        <Input\n                          placeholder=\"9:00-17:00 or Closed\"\n                          value={hours}\n                          onChange={(e) => setFormData(prev => ({ \n                            ...prev, \n                            businessHours: { ...prev.businessHours, [day]: e.target.value }\n                          }))}\n                          className=\"flex-1 glass-effect border-border/50\"\n                          data-testid={`input-hours-${day}`}\n                        />\n                      </div>\n                    ))}\n                  </div>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"cancellationPolicy\" className=\"text-base font-medium\">Cancellation Policy</Label>\n                  <Textarea\n                    id=\"cancellationPolicy\"\n                    placeholder=\"Please provide 24 hours notice for cancellations...\"\n                    value={formData.cancellationPolicy}\n                    onChange={(e) => setFormData(prev => ({ ...prev, cancellationPolicy: e.target.value }))}\n                    rows={3}\n                    className=\"glass-effect border-border/50 mt-2\"\n                    data-testid=\"textarea-cancellation-policy\"\n                  />\n                </div>\n\n                {/* Staff Management Section (Optional) */}\n                <div className=\"glass-effect rounded-xl p-4 border border-border/50\">\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <Label className=\"text-base font-medium flex items-center gap-2\">\n                      <Users className=\"h-4 w-4\" />\n                      Team Members (Optional)\n                    </Label>\n                    <Button \n                      type=\"button\" \n                      onClick={addStaff} \n                      className=\"glass-effect hover-lift rounded-xl\" \n                      size=\"sm\"\n                      data-testid=\"button-add-staff\"\n                    >\n                      <Plus className=\"h-4 w-4 mr-2\" />\n                      Add Staff\n                    </Button>\n                  </div>\n                  <p className=\"text-sm text-muted-foreground mb-4\">\n                    Add your team members to showcase your staff on the booking page\n                  </p>\n\n                  {formData.staff.length === 0 ? (\n                    <div className=\"text-center py-8 text-muted-foreground\">\n                      <User className=\"h-12 w-12 mx-auto mb-2 opacity-50\" />\n                      <p>No team members added yet</p>\n                    </div>\n                  ) : (\n                    <div className=\"space-y-4\">\n                      {formData.staff.map((member, index) => (\n                        <Card key={index} className=\"glass-effect border-border/50 shadow-sm\">\n                          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-3\">\n                            <h4 className=\"text-sm font-medium\">Team Member #{index + 1}</h4>\n                            <Button\n                              type=\"button\"\n                              variant=\"ghost\"\n                              size=\"sm\"\n                              onClick={() => removeStaff(index)}\n                              className=\"hover-lift\"\n                              data-testid={`button-remove-staff-${index}`}\n                            >\n                              <Trash2 className=\"h-4 w-4\" />\n                            </Button>\n                          </CardHeader>\n                          <CardContent className=\"pt-0 space-y-4\">\n                            {/* Profile Image Upload */}\n                            <div>\n                              <Label className=\"text-sm font-medium\">Profile Image (Optional)</Label>\n                              <div className=\"mt-2 flex items-center gap-4\">\n                                {member.imageUrl ? (\n                                  <img \n                                    src={member.imageUrl} \n                                    alt={member.name || \"Staff member\"} \n                                    className=\"w-16 h-16 rounded-full object-cover border-2 border-border/50\"\n                                  />\n                                ) : (\n                                  <div className=\"w-16 h-16 rounded-full bg-muted flex items-center justify-center border-2 border-border/50\">\n                                    <User className=\"h-8 w-8 text-muted-foreground\" />\n                                  </div>\n                                )}\n                                <Button\n                                  type=\"button\"\n                                  onClick={() => document.getElementById(`staff-image-${index}`)?.click()}\n                                  disabled={uploadingStaffImage[index]}\n                                  className=\"glass-effect hover-lift rounded-xl\"\n                                  size=\"sm\"\n                                  data-testid={`button-upload-staff-image-${index}`}\n                                >\n                                  {uploadingStaffImage[index] ? 'Uploading...' : member.imageUrl ? 'Change Image' : 'Upload Image'}\n                                </Button>\n                                <input\n                                  id={`staff-image-${index}`}\n                                  type=\"file\"\n                                  accept=\"image/*\"\n                                  onChange={(e) => e.target.files?.[0] && handleStaffImageUpload(index, e.target.files[0])}\n                                  className=\"hidden\"\n                                />\n                              </div>\n                            </div>\n\n                            {/* Staff Details */}\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                              <div>\n                                <Label className=\"text-sm font-medium\">Name *</Label>\n                                <Input\n                                  placeholder=\"e.g., Dr. Sarah Johnson\"\n                                  value={member.name}\n                                  onChange={(e) => updateStaff(index, 'name', e.target.value)}\n                                  className=\"glass-effect border-border/50 mt-1\"\n                                  data-testid={`input-staff-name-${index}`}\n                                />\n                              </div>\n                              <div>\n                                <Label className=\"text-sm font-medium\">Position</Label>\n                                <Input\n                                  placeholder=\"e.g., Senior Consultant\"\n                                  value={member.position}\n                                  onChange={(e) => updateStaff(index, 'position', e.target.value)}\n                                  className=\"glass-effect border-border/50 mt-1\"\n                                  data-testid={`input-staff-position-${index}`}\n                                />\n                              </div>\n                            </div>\n\n                            <div>\n                              <Label className=\"text-sm font-medium\">Bio</Label>\n                              <Textarea\n                                placeholder=\"Brief description about this team member...\"\n                                value={member.bio}\n                                onChange={(e) => updateStaff(index, 'bio', e.target.value)}\n                                rows={2}\n                                className=\"glass-effect border-border/50 mt-1\"\n                                data-testid={`textarea-staff-bio-${index}`}\n                              />\n                            </div>\n\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                              <div>\n                                <Label className=\"text-sm font-medium\">Email</Label>\n                                <Input\n                                  type=\"email\"\n                                  placeholder=\"sarah@company.com\"\n                                  value={member.email}\n                                  onChange={(e) => updateStaff(index, 'email', e.target.value)}\n                                  className=\"glass-effect border-border/50 mt-1\"\n                                  data-testid={`input-staff-email-${index}`}\n                                />\n                              </div>\n                              <div>\n                                <Label className=\"text-sm font-medium\">Phone</Label>\n                                <Input\n                                  type=\"tel\"\n                                  placeholder=\"+1 (555) 123-4567\"\n                                  value={member.phone}\n                                  onChange={(e) => updateStaff(index, 'phone', e.target.value)}\n                                  className=\"glass-effect border-border/50 mt-1\"\n                                  data-testid={`input-staff-phone-${index}`}\n                                />\n                              </div>\n                            </div>\n                          </CardContent>\n                        </Card>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        );\n\n      case 5:\n        return (\n          <div className=\"space-y-6\">\n            <Card className=\"glass-prism-card border-none shadow-lg\">\n              <CardHeader>\n                <h3 className=\"text-lg font-semibold text-blue-gradient flex items-center gap-2\">\n                  <Info className=\"h-5 w-5\" />\n                  Additional Business Details\n                </h3>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div className=\"grid md:grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"businessType\" className=\"text-base font-medium\">Business Type</Label>\n                    <Select\n                      value={formData.businessType}\n                      onValueChange={(value) => setFormData(prev => ({ ...prev, businessType: value }))}\n                    >\n                      <SelectTrigger className=\"glass-effect border-border/50 mt-2\" data-testid=\"select-business-type\">\n                        <SelectValue placeholder=\"Select business type\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"salon\" data-testid=\"option-salon\">Salon</SelectItem>\n                        <SelectItem value=\"spa\" data-testid=\"option-spa\">Spa</SelectItem>\n                        <SelectItem value=\"clinic\" data-testid=\"option-clinic\">Clinic</SelectItem>\n                        <SelectItem value=\"consultant\" data-testid=\"option-consultant\">Consultant</SelectItem>\n                        <SelectItem value=\"photography\" data-testid=\"option-photography\">Photography</SelectItem>\n                        <SelectItem value=\"fitness\" data-testid=\"option-fitness\">Fitness</SelectItem>\n                        <SelectItem value=\"restaurant\" data-testid=\"option-restaurant\">Restaurant</SelectItem>\n                        <SelectItem value=\"education\" data-testid=\"option-education\">Education</SelectItem>\n                        <SelectItem value=\"other\" data-testid=\"option-other\">Other</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                  \n                  <div>\n                    <Label htmlFor=\"walkInsAccepted\" className=\"text-base font-medium\">Walk-ins</Label>\n                    <Select\n                      value={formData.walkInsAccepted}\n                      onValueChange={(value) => setFormData(prev => ({ ...prev, walkInsAccepted: value }))}\n                    >\n                      <SelectTrigger className=\"glass-effect border-border/50 mt-2\" data-testid=\"select-walk-ins\">\n                        <SelectValue placeholder=\"Select walk-in policy\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"accepted\" data-testid=\"option-walk-ins-accepted\">Walk-ins accepted</SelectItem>\n                        <SelectItem value=\"declined\" data-testid=\"option-walk-ins-declined\">Walk-ins declined</SelectItem>\n                        <SelectItem value=\"by-appointment-preferred\" data-testid=\"option-walk-ins-by-appointment\">By appointment preferred</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"parking\" className=\"text-base font-medium\">Parking (Optional)</Label>\n                  <Input\n                    id=\"parking\"\n                    type=\"text\"\n                    placeholder=\"e.g., Free parking available, Street parking only\"\n                    value={formData.parking}\n                    onChange={(e) => setFormData(prev => ({ ...prev, parking: e.target.value }))}\n                    className=\"glass-effect border-border/50 mt-2\"\n                    data-testid=\"input-parking\"\n                  />\n                </div>\n\n                <div>\n                  <Label htmlFor=\"amenities\" className=\"text-base font-medium\">Amenities (Optional)</Label>\n                  <Input\n                    id=\"amenities\"\n                    type=\"text\"\n                    placeholder=\"e.g., Free WiFi, Refreshments, Waiting area\"\n                    value={formData.amenities}\n                    onChange={(e) => setFormData(prev => ({ ...prev, amenities: e.target.value }))}\n                    className=\"glass-effect border-border/50 mt-2\"\n                    data-testid=\"input-amenities\"\n                  />\n                </div>\n\n                <div className=\"grid md:grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"spokenLanguages\" className=\"text-base font-medium\">Spoken Languages (Optional)</Label>\n                    <Input\n                      id=\"spokenLanguages\"\n                      type=\"text\"\n                      placeholder=\"e.g., English, Spanish, French\"\n                      value={formData.spokenLanguages}\n                      onChange={(e) => setFormData(prev => ({ ...prev, spokenLanguages: e.target.value }))}\n                      className=\"glass-effect border-border/50 mt-2\"\n                      data-testid=\"input-spoken-languages\"\n                    />\n                  </div>\n\n                  <div>\n                    <Label htmlFor=\"kidFriendly\" className=\"text-base font-medium\">Kid Friendly</Label>\n                    <Select\n                      value={formData.kidFriendly}\n                      onValueChange={(value) => setFormData(prev => ({ ...prev, kidFriendly: value }))}\n                    >\n                      <SelectTrigger className=\"glass-effect border-border/50 mt-2\" data-testid=\"select-kid-friendly\">\n                        <SelectValue placeholder=\"Select option\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"yes\" data-testid=\"option-kid-yes\">Yes</SelectItem>\n                        <SelectItem value=\"no\" data-testid=\"option-kid-no\">No</SelectItem>\n                        <SelectItem value=\"family-focused\" data-testid=\"option-kid-family\">Family-focused business</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"appointmentCancellationPolicy\" className=\"text-base font-medium\">Appointment Cancellation Policy (Optional)</Label>\n                  <Textarea\n                    id=\"appointmentCancellationPolicy\"\n                    placeholder=\"e.g., Please notify us 24 hours in advance if you need to cancel or reschedule your appointment...\"\n                    value={formData.appointmentCancellationPolicy}\n                    onChange={(e) => setFormData(prev => ({ ...prev, appointmentCancellationPolicy: e.target.value }))}\n                    rows={3}\n                    className=\"glass-effect border-border/50 mt-2\"\n                    data-testid=\"textarea-appointment-cancellation\"\n                  />\n                  <p className=\"text-sm text-muted-foreground mt-2\">\n                    This will be displayed in the About section of your booking page\n                  </p>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        );\n\n      case 6:\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"text-center mb-8 glass-prism-card p-6 rounded-2xl border-none shadow-lg animate-fade-in-up\">\n              <div className=\"flex items-center justify-center mb-4\">\n                <div className=\"w-12 h-12 rounded-xl glass-prism flex items-center justify-center\">\n                  <span className=\"text-2xl\">🚀</span>\n                </div>\n              </div>\n              <h3 className=\"text-2xl font-bold text-blue-gradient mb-2\">Ready to Launch!</h3>\n              <p className=\"text-muted-foreground\">\n                Review your booking page details below and publish when you're ready\n              </p>\n            </div>\n            \n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <Card className=\"glass-prism-card border-none shadow-lg hover-lift\">\n                <CardHeader>\n                  <h4 className=\"font-medium flex items-center text-blue-gradient\">\n                    <Edit className=\"h-4 w-4 mr-2\" />\n                    Basic Information\n                  </h4>\n                </CardHeader>\n                <CardContent className=\"glass-effect rounded-lg p-4\">\n                  <div className=\"space-y-2 text-sm\">\n                    <p><strong>Business:</strong> {formData.title || 'Not set'}</p>\n                    <p><strong>URL:</strong> bookinggen.xyz/{formData.slug || 'not-set'}</p>\n                    <p><strong>Tagline:</strong> {formData.tagline || 'None'}</p>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"glass-prism-card border-none shadow-lg hover-lift\">\n                <CardHeader>\n                  <h4 className=\"font-medium flex items-center text-blue-gradient\">\n                    <FileText className=\"h-4 w-4 mr-2\" />\n                    Services\n                  </h4>\n                </CardHeader>\n                <CardContent className=\"glass-effect rounded-lg p-4\">\n                  <div className=\"space-y-2 text-sm\">\n                    {formData.services.filter(s => s.name.trim()).map((service, index) => (\n                      <p key={index}>\n                        <strong>{service.name}</strong> - ${service.price} ({service.durationMinutes || 60} min)\n                      </p>\n                    ))}\n                    {formData.services.filter(s => s.name.trim()).length === 0 && (\n                      <p className=\"text-muted-foreground\">No services added</p>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"glass-prism-card border-none shadow-lg hover-lift\">\n                <CardHeader>\n                  <h4 className=\"font-medium flex items-center text-blue-gradient\">\n                    <Palette className=\"h-4 w-4 mr-2\" />\n                    Styling\n                  </h4>\n                </CardHeader>\n                <CardContent className=\"glass-effect rounded-lg p-4\">\n                  <div className=\"space-y-2 text-sm\">\n                    <p><strong>Theme:</strong> {formData.theme}</p>\n                    <p><strong>Logo:</strong> {formData.logoUrl ? 'Uploaded' : 'None'}</p>\n                    <p><strong>Location:</strong> {formData.locationLink ? 'Added' : 'None'}</p>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"glass-prism-card border-none shadow-lg hover-lift\">\n                <CardHeader>\n                  <h4 className=\"font-medium flex items-center text-blue-gradient\">\n                    <Phone className=\"h-4 w-4 mr-2\" />\n                    Contact Info\n                  </h4>\n                </CardHeader>\n                <CardContent className=\"glass-effect rounded-lg p-4\">\n                  <div className=\"space-y-2 text-sm\">\n                    <p><strong>Phone:</strong> {formData.contactPhone || 'Not set'}</p>\n                    <p><strong>Email:</strong> {formData.contactEmail || 'Not set'}</p>\n                    <p><strong>Address:</strong> {formData.businessAddress || 'Not set'}</p>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n        );\n\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen page-gradient\">\n      {/* Glass Prism Background Elements */}\n      <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n        <div className=\"absolute top-10 left-10 w-48 h-48 glass-prism rounded-full opacity-20 animate-float bg-overlay\"></div>\n        <div className=\"absolute top-32 right-20 w-64 h-64 glass-prism rounded-full opacity-20 animate-float bg-overlay\" style={{animationDelay: '1.5s'}}></div>\n        <div className=\"absolute bottom-20 left-1/3 w-32 h-32 glass-prism rounded-full opacity-25 animate-float bg-overlay\" style={{animationDelay: '3s'}}></div>\n      </div>\n      \n      {/* Header */}\n      <div className=\"container mx-auto px-6 pt-8 relative z-10\">\n        <div className=\"flex items-center justify-between mb-8\">\n          <Button\n            variant=\"ghost\"\n            onClick={() => setLocation('/dashboard')}\n            className=\"flex items-center glass-effect hover-lift rounded-xl\"\n            data-testid=\"button-back\"\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Back to Dashboard\n          </Button>\n        </div>\n      </div>\n\n      {/* Glass Prism Progress Header */}\n      <div className=\"container mx-auto px-6 mb-12 relative z-10\">\n        <div className=\"glass-prism-card p-8 rounded-2xl border-none shadow-2xl animate-fade-in-up\">\n          <div className=\"text-center mb-6\">\n            <div className=\"flex items-center justify-center mb-4\">\n              <div className=\"w-12 h-12 rounded-xl glass-prism flex items-center justify-center\">\n                <svg className=\"w-6 h-6\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M12 2L3 7L12 12L21 7L12 2Z\" fill=\"currentColor\" opacity=\"0.3\"/>\n                  <path d=\"M21 16L12 21L3 16\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                  <path d=\"M21 12L12 17L3 12\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                </svg>\n              </div>\n            </div>\n            <h1 className=\"text-3xl font-bold text-blue-gradient mb-2\">Create Your Booking Page</h1>\n            <p className=\"text-muted-foreground\">Build a professional booking page in just a few steps</p>\n          </div>\n          \n          {/* Progress Bar */}\n          <div className=\"space-y-4\">\n            <Progress value={getProgress()} className=\"w-full h-3 glass-effect\" data-testid=\"progress-wizard\" />\n            <div className=\"flex justify-between text-sm text-muted-foreground\">\n              {steps.map((step, index) => (\n                <div \n                  key={step.number} \n                  className={`flex flex-col items-center transition-all duration-300 ${\n                    currentStep === step.number ? 'text-primary font-medium scale-105' : \n                    currentStep > step.number ? 'text-green-600' : ''\n                  }`}\n                >\n                  <div className={`w-8 h-8 rounded-full flex items-center justify-center mb-1 transition-all duration-300 ${\n                    currentStep === step.number \n                      ? 'glass-prism text-primary shadow-lg' \n                      : currentStep > step.number\n                      ? 'bg-green-500 text-white'\n                      : 'bg-muted text-muted-foreground'\n                  }`}>\n                    {currentStep > step.number ? (\n                      <Check className=\"h-4 w-4\" />\n                    ) : (\n                      <span className=\"text-xs font-bold\">{step.number}</span>\n                    )}\n                  </div>\n                  <span className=\"text-xs text-center leading-tight\">{step.title}</span>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Step Content */}\n      <div className=\"container mx-auto px-6 pb-12 relative z-10\">\n        <div className=\"max-w-4xl mx-auto glass-prism-card border-none shadow-2xl animate-fade-in-up rounded-2xl\">\n          <CardHeader className=\"text-center pb-6 relative\">\n            <div className=\"flex items-center justify-center mb-4\">\n              <div className=\"w-12 h-12 rounded-xl glass-prism flex items-center justify-center text-blue-gradient shadow-lg\">\n                {steps[currentStep - 1] && (() => {\n                  const StepIcon = steps[currentStep - 1].icon;\n                  return <StepIcon className=\"h-6 w-6\" />;\n                })()}\n              </div>\n            </div>\n            <h2 className=\"text-2xl font-bold text-blue-gradient\">\n              {steps[currentStep - 1]?.title}\n            </h2>\n            <p className=\"text-muted-foreground\">\n              {steps[currentStep - 1]?.description}\n            </p>\n          </CardHeader>\n          <CardContent className=\"relative\">\n            <div className=\"glass-effect rounded-xl p-6\">\n              {renderStepContent()}\n            </div>\n\n            {/* Navigation Buttons */}\n            <div className=\"flex justify-between mt-8 pt-6 border-t border-border/20\">\n              <Button\n                variant=\"outline\"\n                onClick={prevStep}\n                disabled={currentStep === 1}\n                className=\"glass-effect hover-lift rounded-xl\"\n                data-testid=\"button-previous\"\n              >\n                <ArrowLeft className=\"h-4 w-4 mr-2\" />\n                Previous\n              </Button>\n\n              {currentStep < steps.length ? (\n                <Button\n                  onClick={nextStep}\n                  disabled={!validateStep(currentStep)}\n                  className=\"glass-prism-button hover-lift rounded-xl\"\n                  data-testid=\"button-next\"\n                >\n                  Next\n                  <ArrowRight className=\"h-4 w-4 ml-2\" />\n                </Button>\n              ) : (\n                <Button\n                  onClick={handleSubmit}\n                  disabled={createPageMutation.isPending}\n                  className=\"glass-prism-button hover-lift rounded-xl\"\n                  data-testid=\"button-publish\"\n                >\n                  {createPageMutation.isPending ? 'Publishing...' : 'Publish Page'}\n                  <Check className=\"h-4 w-4 ml-2\" />\n                </Button>\n              )}\n            </div>\n          </CardContent>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":72153},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/pages/pricing.tsx":{"content":"import Header from '@/components/layout/header';\nimport Footer from '@/components/layout/footer';\nimport SEO from '@/components/seo';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { useLocation } from 'wouter';\nimport { useAuth } from '@/hooks/use-auth';\nimport { Check, Sparkles, Zap, Shield, Crown, ArrowRight, HelpCircle, Mail } from 'lucide-react';\nimport { useCurrency } from '@/hooks/use-currency';\nimport CurrencySelector from '@/components/ui/currency-selector';\nimport UpgradeModal from '@/components/modals/upgrade-modal';\nimport { useState } from 'react';\n\nexport default function Pricing() {\n  const [, setLocation] = useLocation();\n  const { user } = useAuth();\n  const { formatPrice } = useCurrency();\n  const [isUpgradeModalOpen, setIsUpgradeModalOpen] = useState(false);\n\n  const plans = [\n    {\n      name: \"Pro\",\n      description: \"Everything you need to succeed\",\n      price: 14.99,\n      originalPrice: 29.99,\n      features: [\n        \"Unlimited booking pages\",\n        \"Full customization\", \n        \"Unlimited bookings\",\n        \"Analytics dashboard\",\n        \"Priority support\",\n        \"Custom branding\",\n        \"Mobile optimized\"\n      ],\n      buttonText: user ? \"Upgrade to Pro\" : \"Get Started\",\n      buttonAction: () => {\n        if (user) {\n          setIsUpgradeModalOpen(true);\n        } else {\n          setLocation('/signup');\n        }\n      },\n      isPrimary: true,\n      badge: \"Essential\",\n      offerBadge: \"50% OFF!\",\n      icon: Crown,\n      gradient: \"from-blue-500/20 to-purple-500/20\"\n    },\n    {\n      name: \"Enterprise\",\n      description: \"For teams and organizations\",\n      price: null,\n      features: [\n        \"Everything in Pro\",\n        \"Unlimited team members\",\n        \"Advanced analytics\",\n        \"Custom integrations\",\n        \"Dedicated account manager\",\n        \"24/7 priority support\"\n      ],\n      buttonText: \"Contact Sales\",\n      buttonAction: () => {\n        setLocation('/sales');\n      },\n      isPrimary: false,\n      badge: null,\n      icon: Sparkles,\n      gradient: \"from-blue-500/20 to-cyan-500/20\"\n    }\n  ];\n\n  const benefits = [\n    {\n      icon: Zap,\n      title: \"Lightning Fast Setup\",\n      description: \"Create your booking page in minutes, not hours\"\n    },\n    {\n      icon: Shield,\n      title: \"Secure & Reliable\",\n      description: \"Enterprise-grade security for your data\"\n    },\n    {\n      icon: Sparkles,\n      title: \"Beautiful Design\",\n      description: \"Stunning templates that convert visitors\"\n    }\n  ];\n\n  const faqs = [\n    {\n      question: \"Can I cancel anytime?\",\n      answer: \"Yes, you can cancel your subscription at any time. No long-term commitments required.\"\n    },\n    {\n      question: \"Is there a free trial?\",\n      answer: \"Yes! New users get a 7-day free trial to experience all Pro features.\"\n    },\n    {\n      question: \"What payment methods do you accept?\",\n      answer: \"We accept all major credit cards, debit cards, and various payment methods through our secure payment processor.\"\n    }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background page-gradient\">\n      <SEO \n        title=\"Pricing Plans | BookingGen\" \n        description=\"Choose the perfect plan for your booking needs. Get 50% off Pro plan - unlimited pages, analytics, and priority support. Start your free trial today!\"\n        ogTitle=\"BookingGen Pricing - Plans Starting at $14.99/month\"\n        ogDescription=\"Professional booking pages made simple. Choose from Pro or Enterprise plans.\"\n      />\n      <Header />\n      \n      {/* Glass Prism Background Elements */}\n      <div className=\"absolute inset-0 bg-gradient-to-br from-blue-50/80 via-white to-blue-50/80 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 bg-overlay pointer-events-none -z-10\"></div>\n      <div className=\"absolute top-20 left-10 w-72 h-72 glass-prism rounded-full opacity-30 animate-float bg-gradient-to-br from-blue-400/20 to-cyan-400/20 pointer-events-none -z-10\"></div>\n      <div className=\"absolute top-32 right-20 w-96 h-96 glass-prism rounded-full opacity-20 animate-float bg-gradient-to-br from-cyan-400/20 to-blue-400/20 pointer-events-none -z-10\" style={{animationDelay: '1.5s'}}></div>\n      <div className=\"absolute bottom-20 left-1/3 w-48 h-48 glass-prism rounded-full opacity-25 animate-float bg-gradient-to-br from-blue-400/20 to-cyan-400/20 pointer-events-none -z-10\" style={{animationDelay: '3s'}}></div>\n      \n      {/* Hero Section */}\n      <section className=\"pt-32 pb-16 relative content-layer\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"text-center mb-16 animate-fade-in-up\">\n            <div className=\"inline-flex items-center justify-center w-16 h-16 glass-prism rounded-full mb-6 backdrop-blur-md bg-gradient-to-br from-blue-500/30 to-cyan-500/30 border border-white/30 animate-pulse\">\n              <Crown className=\"h-8 w-8 text-blue-600 dark:text-blue-400\" />\n            </div>\n            <h1 className=\"text-3xl lg:text-5xl font-bold bg-gradient-to-r from-blue-600 to-blue-400 dark:from-blue-400 dark:to-blue-300 bg-clip-text text-transparent mb-6\">\n              Choose the plan that fits you\n            </h1>\n            <p className=\"text-xl text-muted-foreground mb-6 max-w-2xl mx-auto\">\n              Get everything you need to create beautiful booking pages and grow your business.\n            </p>\n            <div className=\"flex justify-center\">\n              <CurrencySelector variant=\"compact\" className=\"mb-4\" />\n            </div>\n          </div>\n\n          {/* Pricing Cards */}\n          <div className=\"flex justify-center mb-16\">\n            <div className=\"max-w-5xl w-full\">\n              <div className=\"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto\">\n                {plans.map((plan, index) => (\n                  <Card \n                    key={index} \n                    className={`relative glass-prism-card backdrop-blur-xl hover-lift animate-scale-in transition-all duration-300 ${\n                      plan.isPrimary \n                        ? 'border-2 border-primary shadow-2xl scale-105 bg-gradient-to-br from-white/95 via-blue-50/80 to-white/90 dark:from-gray-900/95 dark:via-blue-950/80 dark:to-gray-900/90' \n                        : 'border border-white/20 bg-white/80 dark:bg-gray-900/80'\n                    }`}\n                    style={{ animationDelay: `${index * 0.1}s` }}\n                    data-testid={`card-${plan.name.toLowerCase()}-plan`}\n                  >\n                    {plan.badge && (\n                      <div className=\"absolute -top-4 left-1/2 transform -translate-x-1/2 z-10\">\n                        <span className=\"glass-prism-button backdrop-blur-lg bg-gradient-to-r from-blue-100 via-blue-200 to-blue-300 dark:from-blue-800 dark:via-blue-700 dark:to-blue-600 text-blue-800 dark:text-blue-100 px-4 py-2 rounded-full text-sm font-semibold shadow-lg border border-white/30\">\n                          {plan.badge}\n                        </span>\n                      </div>\n                    )}\n                    {plan.offerBadge && (\n                      <div className=\"absolute -top-3 -right-3 z-10\">\n                        <div className=\"glass-prism-button backdrop-blur-lg bg-gradient-to-r from-red-100 via-red-200 to-red-300 dark:from-red-800 dark:via-red-700 dark:to-red-600 text-red-800 dark:text-red-100 px-3 py-1 rounded-full text-xs font-bold animate-pulse shadow-lg border border-white/30\">\n                          {plan.offerBadge}\n                        </div>\n                      </div>\n                    )}\n                    \n                    {/* Gradient background decoration */}\n                    <div className={`absolute inset-0 bg-gradient-to-br ${plan.gradient} opacity-10 rounded-lg pointer-events-none`}></div>\n                    \n                    <CardContent className=\"p-8 relative z-10\">\n                      <div className=\"mb-8\">\n                        <div className=\"inline-flex items-center justify-center w-14 h-14 glass-prism rounded-xl mb-4 backdrop-blur-md bg-gradient-to-br from-white/60 via-blue-50/40 to-white/50 dark:from-gray-800/60 dark:via-blue-950/40 dark:to-gray-800/50 border border-white/30\">\n                          <plan.icon className=\"h-7 w-7 text-blue-600 dark:text-blue-400\" />\n                        </div>\n                        <h3 className=\"text-2xl font-bold text-foreground mb-2\">{plan.name}</h3>\n                        <p className=\"text-muted-foreground mb-4\">{plan.description}</p>\n                        <div className=\"mb-2\">\n                          {plan.price === null ? (\n                            <div className=\"text-4xl font-bold bg-gradient-to-r from-blue-600 to-blue-400 dark:from-blue-400 dark:to-blue-300 bg-clip-text text-transparent\">\n                              Custom\n                            </div>\n                          ) : (\n                            <>\n                              {plan.originalPrice && (\n                                <div className=\"text-lg text-muted-foreground line-through mb-1\">\n                                  {formatPrice(plan.originalPrice)}/month\n                                </div>\n                              )}\n                              <div className=\"flex items-baseline gap-2\">\n                                <span className=\"text-4xl font-bold bg-gradient-to-r from-blue-600 to-blue-400 dark:from-blue-400 dark:to-blue-300 bg-clip-text text-transparent\">\n                                  {formatPrice(plan.price)}\n                                </span>\n                                <span className=\"text-lg font-normal text-muted-foreground\">/month</span>\n                              </div>\n                            </>\n                          )}\n                        </div>\n                      </div>\n                      <ul className=\"space-y-4 mb-8\">\n                        {plan.features.map((feature, featureIndex) => (\n                          <li key={featureIndex} className=\"flex items-center animate-fade-in-up\" style={{ animationDelay: `${(index * 0.1) + (featureIndex * 0.05)}s` }}>\n                            <div className=\"w-5 h-5 glass-prism rounded-full flex items-center justify-center mr-3 backdrop-blur-md bg-gradient-to-br from-green-100 via-green-200 to-green-300 dark:from-green-800 dark:via-green-700 dark:to-green-600 border border-white/30\">\n                              <Check className=\"h-3 w-3 text-green-700 dark:text-green-100\" />\n                            </div>\n                            <span className=\"text-muted-foreground\">{feature}</span>\n                          </li>\n                        ))}\n                      </ul>\n                      <Button\n                        type=\"button\"\n                        size=\"lg\"\n                        onClick={plan.buttonAction}\n                        className={`w-full h-12 transition-all duration-300 hover:scale-105 ${\n                          plan.isPrimary \n                            ? 'glass-prism-button backdrop-blur-lg bg-gradient-to-r from-blue-100 via-blue-200 to-blue-300 dark:from-blue-800 dark:via-blue-700 dark:to-blue-600 hover:from-blue-200 hover:via-blue-300 hover:to-blue-400 dark:hover:from-blue-700 dark:hover:via-blue-600 dark:hover:to-blue-500 text-blue-800 dark:text-blue-100 shadow-lg border border-white/30 font-semibold' \n                            : 'glass-prism-button backdrop-blur-lg bg-gradient-to-r from-white/40 via-blue-50/30 to-white/30 dark:from-gray-800/40 dark:via-blue-950/30 dark:to-gray-800/30 border border-white/30 hover:bg-white/50 dark:hover:bg-gray-800/50 text-blue-700 dark:text-blue-300 font-medium'\n                        }`}\n                        data-testid={`button-${plan.name.toLowerCase()}-plan`}\n                      >\n                        {plan.buttonText}\n                        <ArrowRight className=\"ml-2 h-4 w-4\" />\n                      </Button>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            </div>\n          </div>\n\n          {/* Benefits Section */}\n          <div className=\"max-w-5xl mx-auto mb-16 animate-fade-in-up\" style={{ animationDelay: '0.3s' }}>\n            <h2 className=\"text-3xl font-bold text-center mb-12 bg-gradient-to-r from-blue-600 to-blue-400 dark:from-blue-400 dark:to-blue-300 bg-clip-text text-transparent\">\n              Why Choose BookingGen?\n            </h2>\n            <div className=\"grid md:grid-cols-3 gap-6\">\n              {benefits.map((benefit, index) => (\n                <Card \n                  key={index} \n                  className=\"glass-prism-card backdrop-blur-xl hover-lift bg-white/80 dark:bg-gray-900/80 border border-white/20 transition-all duration-300 animate-scale-in\"\n                  style={{ animationDelay: `${0.4 + (index * 0.1)}s` }}\n                  data-testid={`card-benefit-${index}`}\n                >\n                  <CardContent className=\"p-6 text-center\">\n                    <div className=\"inline-flex items-center justify-center w-12 h-12 glass-prism rounded-xl mb-4 backdrop-blur-md bg-gradient-to-br from-blue-100 via-blue-200 to-blue-300 dark:from-blue-800 dark:via-blue-700 dark:to-blue-600 border border-white/30 mx-auto\">\n                      <benefit.icon className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n                    </div>\n                    <h3 className=\"text-lg font-semibold mb-2 text-foreground\">{benefit.title}</h3>\n                    <p className=\"text-muted-foreground text-sm\">{benefit.description}</p>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n\n          {/* FAQ Section */}\n          <div className=\"max-w-3xl mx-auto animate-fade-in-up\" style={{ animationDelay: '0.6s' }}>\n            <h2 className=\"text-3xl font-bold text-center mb-12 bg-gradient-to-r from-blue-600 to-blue-400 dark:from-blue-400 dark:to-blue-300 bg-clip-text text-transparent\">\n              Frequently Asked Questions\n            </h2>\n            <div className=\"space-y-4\">\n              {faqs.map((faq, index) => (\n                <Card \n                  key={index} \n                  className=\"glass-prism-card backdrop-blur-xl hover-lift bg-white/80 dark:bg-gray-900/80 border border-white/20 transition-all duration-300 animate-scale-in\"\n                  style={{ animationDelay: `${0.7 + (index * 0.1)}s` }}\n                  data-testid={`card-faq-${index}`}\n                >\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex items-start gap-3\">\n                      <div className=\"w-8 h-8 glass-prism rounded-lg flex items-center justify-center flex-shrink-0 backdrop-blur-md bg-gradient-to-br from-blue-100 via-blue-200 to-blue-300 dark:from-blue-800 dark:via-blue-700 dark:to-blue-600 border border-white/30\">\n                        <HelpCircle className=\"h-4 w-4 text-blue-600 dark:text-blue-400\" />\n                      </div>\n                      <div className=\"flex-1\">\n                        <h3 className=\"text-lg font-semibold mb-2 text-foreground\">{faq.question}</h3>\n                        <p className=\"text-muted-foreground\">{faq.answer}</p>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n\n          {/* CTA Section */}\n          <div className=\"max-w-4xl mx-auto mt-16 animate-fade-in-up\" style={{ animationDelay: '1s' }}>\n            <Card className=\"glass-prism-card backdrop-blur-xl bg-gradient-to-r from-blue-500/15 via-cyan-500/15 to-blue-500/15 border-blue-300/50 dark:border-blue-600/50 shadow-2xl overflow-hidden\">\n              <div className=\"absolute inset-0 bg-gradient-to-r from-blue-400/10 via-cyan-400/10 to-blue-400/10 animate-pulse pointer-events-none\"></div>\n              <CardContent className=\"p-8 md:p-12 text-center relative z-10\">\n                <div className=\"inline-flex items-center justify-center w-16 h-16 glass-prism rounded-full mb-6 backdrop-blur-md bg-gradient-to-br from-blue-500/30 to-cyan-500/30 border border-white/30 mx-auto animate-pulse\">\n                  <Mail className=\"h-8 w-8 text-blue-600 dark:text-blue-400\" />\n                </div>\n                <h2 className=\"text-3xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-blue-400 dark:from-blue-400 dark:to-blue-300 bg-clip-text text-transparent\">\n                  Still have questions?\n                </h2>\n                <p className=\"text-muted-foreground mb-6 max-w-2xl mx-auto\">\n                  Our team is here to help you find the perfect plan for your needs. Get in touch and we'll answer all your questions.\n                </p>\n                <Button\n                  size=\"lg\"\n                  onClick={() => setLocation('/contact')}\n                  className=\"glass-prism-button backdrop-blur-lg bg-gradient-to-r from-blue-100 via-blue-200 to-blue-300 dark:from-blue-800 dark:via-blue-700 dark:to-blue-600 hover:from-blue-200 hover:via-blue-300 hover:to-blue-400 dark:hover:from-blue-700 dark:hover:via-blue-600 dark:hover:to-blue-500 text-blue-800 dark:text-blue-100 shadow-lg hover:scale-105 transition-all duration-300 border border-white/30 font-semibold\"\n                  data-testid=\"button-contact-us-cta\"\n                >\n                  Contact Us\n                  <ArrowRight className=\"ml-2 h-4 w-4\" />\n                </Button>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </section>\n\n      <Footer />\n      \n      <UpgradeModal\n        isOpen={isUpgradeModalOpen}\n        onClose={() => setIsUpgradeModalOpen(false)}\n      />\n    </div>\n  );\n}\n","size_bytes":17821},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/pages/legal.tsx":{"content":"import Header from '@/components/layout/header';\nimport Footer from '@/components/layout/footer';\nimport SEO from '@/components/seo';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { useLocation } from 'wouter';\nimport { \n  Shield, \n  FileText, \n  MessageCircle, \n  Mail, \n  Phone, \n  Clock,\n  Scale,\n  HelpCircle,\n  Users,\n  Gavel\n} from 'lucide-react';\n\nexport default function Legal() {\n  const [, setLocation] = useLocation();\n\n  const legalTopics = [\n    {\n      icon: FileText,\n      title: \"Terms & Conditions\",\n      description: \"Review our comprehensive terms of service and user agreement\",\n      action: () => setLocation('/terms'),\n      buttonText: \"Read Terms\"\n    },\n    {\n      icon: Shield,\n      title: \"Privacy Policy\",\n      description: \"Learn how we protect and handle your personal information\",\n      action: () => setLocation('/privacy'),\n      buttonText: \"View Policy\"\n    },\n    {\n      icon: Scale,\n      title: \"Cancellation & Refunds\",\n      description: \"Understanding our refund policy and cancellation procedures\",\n      action: () => setLocation('/refunds'),\n      buttonText: \"View Policy\"\n    },\n    {\n      icon: MessageCircle,\n      title: \"Contact Support\",\n      description: \"Get help from our dedicated support team\",\n      action: () => setLocation('/contact'),\n      buttonText: \"Contact Us\"\n    }\n  ];\n\n  const supportOptions = [\n    {\n      icon: Mail,\n      title: \"Email Support\",\n      description: \"Send us an email for detailed assistance\",\n      contact: \"team@bookinggen.xyz\",\n      response: \"24-48 hours\",\n      action: () => setLocation('/contact'),\n      buttonText: \"Contact Us\"\n    },\n    {\n      icon: FileText,\n      title: \"Help Center\",\n      description: \"Browse our comprehensive knowledge base\",\n      contact: \"Self-service articles\",\n      response: \"Available 24/7\",\n      action: () => setLocation('/help-center'),\n      buttonText: \"Browse Help\"\n    },\n    {\n      icon: HelpCircle,\n      title: \"Documentation\",\n      description: \"Step-by-step guides and tutorials\",\n      contact: \"Complete user guides\",\n      response: \"Available 24/7\",\n      action: () => setLocation('/tutorial'),\n      buttonText: \"View Tutorials\"\n    }\n  ];\n\n  const commonQuestions = [\n    {\n      question: \"How do I customize my booking page?\",\n      answer: \"Go to your dashboard and click 'Create Page' to start customizing your booking page with your branding, services, and availability.\"\n    },\n    {\n      question: \"Is my data secure with BookingGen?\",\n      answer: \"Absolutely. We use enterprise-grade security measures including SSL encryption and secure data storage to protect your information.\"\n    },\n    {\n      question: \"Can I cancel my subscription anytime?\",\n      answer: \"Yes, you can cancel your subscription at any time from your account settings. See our refund policy for details.\"\n    }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <SEO \n        title=\"Legal & Support Center | BookingGen\" \n        description=\"Find answers to your questions, understand our policies, and get the support you need to succeed with BookingGen. Access legal documents, support options, and FAQ.\"\n        ogTitle=\"Legal & Support Center - BookingGen\"\n        ogDescription=\"Get help with BookingGen - legal documents, support options, and frequently asked questions all in one place.\"\n      />\n      <Header />\n      \n      {/* Hero Section */}\n      <section className=\"py-20 bg-muted/30\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"text-center mb-16\">\n            <div className=\"inline-flex items-center justify-center w-16 h-16 bg-primary/10 rounded-full mb-6\">\n              <Gavel className=\"h-8 w-8 text-primary\" />\n            </div>\n            <h1 className=\"text-3xl lg:text-5xl font-bold text-foreground mb-6\">\n              Legal & Support Center\n            </h1>\n            <p className=\"text-xl text-muted-foreground max-w-3xl mx-auto\">\n              Find answers to your questions, understand our policies, and get the support you need to succeed with BookingGen.\n            </p>\n          </div>\n        </div>\n      </section>\n\n      {/* Legal Documents Section */}\n      <section className=\"py-16\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl font-bold text-foreground mb-4\">\n              Legal Information\n            </h2>\n            <p className=\"text-lg text-muted-foreground\">\n              Access our legal documents and policies\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-16\">\n            {legalTopics.map((topic, index) => (\n              <Card key={index} className=\"text-center hover:shadow-lg transition-shadow\">\n                <CardHeader>\n                  <div className=\"inline-flex items-center justify-center w-12 h-12 bg-primary/10 rounded-lg mb-4 mx-auto\">\n                    <topic.icon className=\"h-6 w-6 text-primary\" />\n                  </div>\n                  <CardTitle className=\"text-lg\" data-testid={`text-topic-title-${index}`}>{topic.title}</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <p className=\"text-muted-foreground mb-4 text-sm\" data-testid={`text-topic-description-${index}`}>\n                    {topic.description}\n                  </p>\n                  <Button \n                    variant=\"outline\" \n                    size=\"sm\" \n                    onClick={topic.action}\n                    className=\"w-full\"\n                    data-testid={`button-${topic.title.toLowerCase().replace(/\\s+/g, '-')}`}\n                  >\n                    {topic.buttonText}\n                  </Button>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Support Options Section */}\n      <section className=\"py-16 bg-muted/30\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl font-bold text-foreground mb-4\">\n              Get Support\n            </h2>\n            <p className=\"text-lg text-muted-foreground\">\n              Multiple ways to get help when you need it\n            </p>\n          </div>\n\n          <div className=\"grid md:grid-cols-3 gap-8 mb-16\">\n            {supportOptions.map((option, index) => (\n              <Card key={index} className=\"text-center\">\n                <CardHeader>\n                  <div className=\"inline-flex items-center justify-center w-12 h-12 bg-primary/10 rounded-lg mb-4 mx-auto\">\n                    <option.icon className=\"h-6 w-6 text-primary\" />\n                  </div>\n                  <CardTitle className=\"text-xl\">{option.title}</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <p className=\"text-muted-foreground mb-4\">\n                    {option.description}\n                  </p>\n                  <div className=\"space-y-2 mb-4\">\n                    <div className=\"flex items-center justify-center gap-2 text-sm\">\n                      <Users className=\"h-4 w-4 text-primary\" />\n                      <span className=\"font-medium\" data-testid={`text-contact-${index}`}>{option.contact}</span>\n                    </div>\n                    <div className=\"flex items-center justify-center gap-2 text-sm text-muted-foreground\">\n                      <Clock className=\"h-4 w-4\" />\n                      <span>{option.response}</span>\n                    </div>\n                  </div>\n                  <Button \n                    variant=\"outline\" \n                    size=\"sm\" \n                    onClick={option.action}\n                    className=\"w-full\"\n                    data-testid={`button-${option.title.toLowerCase().replace(/\\s+/g, '-')}`}\n                  >\n                    {option.buttonText}\n                  </Button>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* FAQ Section */}\n      <section className=\"py-16\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl font-bold text-foreground mb-4\">\n              Frequently Asked Questions\n            </h2>\n            <p className=\"text-lg text-muted-foreground\">\n              Quick answers to common questions\n            </p>\n          </div>\n\n          <div className=\"max-w-4xl mx-auto space-y-6\">\n            {commonQuestions.map((faq, index) => (\n              <Card key={index} className=\"p-6\">\n                <div className=\"flex items-start gap-4\">\n                  <div className=\"inline-flex items-center justify-center w-8 h-8 bg-primary/10 rounded-lg flex-shrink-0\">\n                    <HelpCircle className=\"h-4 w-4 text-primary\" />\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold text-lg mb-2\" data-testid={`text-question-${index}`}>\n                      {faq.question}\n                    </h3>\n                    <p className=\"text-muted-foreground\" data-testid={`text-answer-${index}`}>\n                      {faq.answer}\n                    </p>\n                  </div>\n                </div>\n              </Card>\n            ))}\n          </div>\n\n          <div className=\"text-center mt-12\">\n            <Button \n              onClick={() => setLocation('/contact')}\n              size=\"lg\"\n              data-testid=\"button-contact-support\"\n            >\n              <MessageCircle className=\"mr-2 h-4 w-4\" />\n              Contact Support Team\n            </Button>\n          </div>\n        </div>\n      </section>\n\n      <Footer />\n    </div>\n  );\n}","size_bytes":9902},"client/src/components/dashboard/calendar.tsx":{"content":"import { useState } from 'react';\nimport { useQuery, useMutation } from '@tanstack/react-query';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { ChevronLeft, ChevronRight, Calendar as CalendarIcon, Clock, User, Mail, Building2, Check, X, Filter } from 'lucide-react';\nimport { Badge } from '@/components/ui/badge';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { apiRequest, queryClient } from '@/lib/queryClient';\nimport { useToast } from '@/hooks/use-toast';\nimport { getUserAppointments } from '@/lib/supabase-queries';\nimport { useAuth } from '@/hooks/use-auth';\n\ntype ViewMode = 'month' | 'week' | 'day';\n\nexport default function CalendarView() {\n  const [currentDate, setCurrentDate] = useState(new Date());\n  const [selectedDate, setSelectedDate] = useState<Date | null>(null);\n  const [viewMode, setViewMode] = useState<ViewMode>('month');\n  const [statusFilter, setStatusFilter] = useState<string>('all');\n  const { toast } = useToast();\n  const { user } = useAuth();\n\n  const { data: appointments = [] } = useQuery({\n    queryKey: [`user-appointments-${user?.id}`],\n    queryFn: getUserAppointments,\n    enabled: !!user?.id,\n  });\n\n  const updateAppointmentMutation = useMutation({\n    mutationFn: async ({ id, status }: { id: string; status: string }) => {\n      const response = await apiRequest('PATCH', `/api/appointments/${id}`, { status });\n      if (!response.ok) throw new Error('Failed to update appointment');\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`user-appointments-${user?.id}`] });\n      toast({\n        title: 'Success',\n        description: 'Appointment updated successfully.',\n      });\n    },\n    onError: () => {\n      toast({\n        title: 'Error',\n        description: 'Failed to update appointment.',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const goToPreviousMonth = () => {\n    setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() - 1));\n  };\n\n  const goToNextMonth = () => {\n    setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() + 1));\n  };\n\n  const goToPreviousWeek = () => {\n    const newDate = new Date(currentDate);\n    newDate.setDate(currentDate.getDate() - 7);\n    setCurrentDate(newDate);\n  };\n\n  const goToNextWeek = () => {\n    const newDate = new Date(currentDate);\n    newDate.setDate(currentDate.getDate() + 7);\n    setCurrentDate(newDate);\n  };\n\n  const goToPreviousDay = () => {\n    const newDate = new Date(currentDate);\n    newDate.setDate(currentDate.getDate() - 1);\n    setCurrentDate(newDate);\n  };\n\n  const goToNextDay = () => {\n    const newDate = new Date(currentDate);\n    newDate.setDate(currentDate.getDate() + 1);\n    setCurrentDate(newDate);\n  };\n\n  const goToToday = () => {\n    setCurrentDate(new Date());\n    setSelectedDate(new Date());\n  };\n\n  const handlePrevious = () => {\n    if (viewMode === 'month') goToPreviousMonth();\n    else if (viewMode === 'week') goToPreviousWeek();\n    else goToPreviousDay();\n  };\n\n  const handleNext = () => {\n    if (viewMode === 'month') goToNextMonth();\n    else if (viewMode === 'week') goToNextWeek();\n    else goToNextDay();\n  };\n\n  const getDaysInMonth = (date: Date) => {\n    const year = date.getFullYear();\n    const month = date.getMonth();\n    const firstDay = new Date(year, month, 1);\n    const lastDay = new Date(year, month + 1, 0);\n    const daysInMonth = lastDay.getDate();\n    const startingDayOfWeek = firstDay.getDay();\n    return { daysInMonth, startingDayOfWeek, firstDay, lastDay };\n  };\n\n  const getWeekDays = (date: Date) => {\n    const startOfWeek = new Date(date);\n    startOfWeek.setDate(date.getDate() - date.getDay());\n    const days = [];\n    for (let i = 0; i < 7; i++) {\n      const day = new Date(startOfWeek);\n      day.setDate(startOfWeek.getDate() + i);\n      days.push(day);\n    }\n    return days;\n  };\n\n  const { daysInMonth, startingDayOfWeek } = getDaysInMonth(currentDate);\n\n  const getAppointmentsForDate = (date: Date) => {\n    const appointmentsArray = appointments as any[];\n    let filtered = appointmentsArray.filter((apt: any) => {\n      const aptDate = new Date(apt.date);\n      return (\n        aptDate.getDate() === date.getDate() &&\n        aptDate.getMonth() === date.getMonth() &&\n        aptDate.getFullYear() === date.getFullYear()\n      );\n    });\n\n    if (statusFilter !== 'all') {\n      filtered = filtered.filter((apt: any) => apt.status === statusFilter);\n    }\n\n    return filtered;\n  };\n\n  const isToday = (date: Date) => {\n    const today = new Date();\n    return (\n      date.getDate() === today.getDate() &&\n      date.getMonth() === today.getMonth() &&\n      date.getFullYear() === today.getFullYear()\n    );\n  };\n\n  const isSelected = (date: Date) => {\n    if (!selectedDate) return false;\n    return (\n      date.getDate() === selectedDate.getDate() &&\n      date.getMonth() === selectedDate.getMonth() &&\n      date.getFullYear() === selectedDate.getFullYear()\n    );\n  };\n\n  const monthYear = currentDate.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });\n  const weekDays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n\n  const selectedDateAppointments = selectedDate ? getAppointmentsForDate(selectedDate) : [];\n\n  const renderMonthView = () => (\n    <div className=\"grid grid-cols-7 gap-2\">\n      {Array.from({ length: startingDayOfWeek }).map((_, index) => (\n        <div key={`empty-${index}`} className=\"aspect-square\" />\n      ))}\n      {Array.from({ length: daysInMonth }).map((_, index) => {\n        const day = index + 1;\n        const date = new Date(currentDate.getFullYear(), currentDate.getMonth(), day);\n        const dayAppointments = getAppointmentsForDate(date);\n        const hasAppointments = dayAppointments.length > 0;\n        const isTodayDate = isToday(date);\n        const isSelectedDate = isSelected(date);\n\n        return (\n          <button\n            key={day}\n            onClick={() => setSelectedDate(date)}\n            className={`aspect-square p-2 rounded-xl transition-all duration-300 relative group ${\n              isSelectedDate\n                ? 'glass-prism-button text-white shadow-lg scale-105'\n                : isTodayDate\n                ? 'glass-prism bg-blue-500/10 border border-blue-500/30 text-blue-600 dark:text-blue-400 font-bold'\n                : 'hover:glass-prism hover:scale-105 text-gray-700 dark:text-gray-300'\n            }`}\n            data-testid={`calendar-day-${day}`}\n          >\n            <span className=\"text-sm font-medium\">{day}</span>\n            {hasAppointments && (\n              <div className=\"absolute bottom-0 left-0 right-0 h-1 flex gap-px px-1\">\n                {dayAppointments.slice(0, 3).map((apt: any, i: number) => (\n                  <div\n                    key={i}\n                    className={`flex-1 rounded-sm ${\n                      apt.status === 'accepted' \n                        ? 'bg-green-500' \n                        : apt.status === 'pending'\n                        ? 'bg-yellow-500'\n                        : 'bg-blue-500'\n                    }`}\n                  />\n                ))}\n              </div>\n            )}\n          </button>\n        );\n      })}\n    </div>\n  );\n\n  const renderWeekView = () => {\n    const weekDaysData = getWeekDays(currentDate);\n    return (\n      <div className=\"space-y-2\">\n        <div className=\"grid grid-cols-7 gap-2 mb-2\">\n          {weekDays.map((day) => (\n            <div key={day} className=\"text-center text-sm font-semibold text-gray-600 dark:text-gray-400 py-2\">\n              {day}\n            </div>\n          ))}\n        </div>\n        <div className=\"grid grid-cols-7 gap-2\">\n          {weekDaysData.map((date, index) => {\n            const dayAppointments = getAppointmentsForDate(date);\n            const hasAppointments = dayAppointments.length > 0;\n            const isTodayDate = isToday(date);\n            const isSelectedDate = isSelected(date);\n\n            return (\n              <button\n                key={index}\n                onClick={() => setSelectedDate(date)}\n                className={`p-4 rounded-xl transition-all duration-300 relative group min-h-[120px] ${\n                  isSelectedDate\n                    ? 'glass-prism-button text-white shadow-lg scale-105'\n                    : isTodayDate\n                    ? 'glass-prism bg-blue-500/10 border border-blue-500/30 text-blue-600 dark:text-blue-400'\n                    : 'glass-prism hover:glass-prism-button hover:scale-105'\n                }`}\n                data-testid={`week-day-${index}`}\n              >\n                <div className=\"text-lg font-bold mb-2\">{date.getDate()}</div>\n                {hasAppointments && (\n                  <div className=\"text-xs space-y-1\">\n                    {dayAppointments.slice(0, 2).map((apt: any, i: number) => (\n                      <div \n                        key={i} \n                        className={`truncate px-1 py-0.5 rounded ${\n                          apt.status === 'accepted' \n                            ? 'bg-green-500/30 border border-green-500/50' \n                            : 'bg-blue-500/20'\n                        }`}\n                      >\n                        {apt.time}\n                      </div>\n                    ))}\n                    {dayAppointments.length > 2 && (\n                      <div className=\"text-xs opacity-70\">+{dayAppointments.length - 2} more</div>\n                    )}\n                  </div>\n                )}\n              </button>\n            );\n          })}\n        </div>\n      </div>\n    );\n  };\n\n  const renderDayView = () => {\n    const dayAppointments = getAppointmentsForDate(currentDate);\n    \n    return (\n      <div className=\"space-y-4\">\n        <div className=\"text-center mb-4\">\n          <h3 className=\"text-2xl font-bold text-gray-800 dark:text-gray-100\">\n            {currentDate.toLocaleDateString('en-US', {\n              weekday: 'long',\n              month: 'long',\n              day: 'numeric',\n              year: 'numeric',\n            })}\n          </h3>\n        </div>\n        {dayAppointments.length > 0 ? (\n          <div className=\"space-y-3\">\n            {dayAppointments.map((apt: any, index: number) => (\n              <div\n                key={apt.id}\n                className=\"glass-prism p-4 rounded-xl hover:glass-prism-button transition-all duration-300 group animate-fade-in\"\n                style={{ animationDelay: `${index * 0.1}s` }}\n                data-testid={`appointment-${apt.id}`}\n              >\n                <div className=\"flex items-start justify-between mb-2\">\n                  <h4 className=\"font-semibold text-gray-800 dark:text-gray-100\">\n                    {apt.serviceName}\n                  </h4>\n                  <Badge \n                    variant={apt.status === 'accepted' ? 'default' : 'secondary'} \n                    className={`text-xs capitalize ${apt.status === 'accepted' ? 'bg-green-600 hover:bg-green-700 text-white' : ''}`}\n                  >\n                    {apt.status}\n                  </Badge>\n                </div>\n                <div className=\"space-y-2 text-sm text-gray-600 dark:text-gray-400\">\n                  <div className=\"flex items-center gap-2\">\n                    <Building2 className=\"h-3.5 w-3.5\" />\n                    <span>{apt.pageName}</span>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <Clock className=\"h-3.5 w-3.5\" />\n                    <span>{apt.time}</span>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <User className=\"h-3.5 w-3.5\" />\n                    <span>{apt.customerName}</span>\n                  </div>\n                  {apt.customerEmail && (\n                    <div className=\"flex items-center gap-2\">\n                      <Mail className=\"h-3.5 w-3.5\" />\n                      <span className=\"truncate\">{apt.customerEmail}</span>\n                    </div>\n                  )}\n                </div>\n                {apt.status === 'pending' && (\n                  <div className=\"flex gap-2 mt-3 pt-3 border-t border-white/10\">\n                    <Button\n                      size=\"sm\"\n                      variant=\"outline\"\n                      onClick={() => updateAppointmentMutation.mutate({ id: apt.id, status: 'accepted' })}\n                      className=\"flex-1 glass-prism-button\"\n                      data-testid={`button-accept-${apt.id}`}\n                    >\n                      <Check className=\"h-3.5 w-3.5 mr-1\" />\n                      Accept\n                    </Button>\n                    <Button\n                      size=\"sm\"\n                      variant=\"destructive\"\n                      onClick={() => updateAppointmentMutation.mutate({ id: apt.id, status: 'declined' })}\n                      data-testid={`button-reject-${apt.id}`}\n                    >\n                      <X className=\"h-3.5 w-3.5 mr-1\" />\n                      Reject\n                    </Button>\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n        ) : (\n          <div className=\"text-center py-16\">\n            <div className=\"w-20 h-20 glass-prism rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse\">\n              <CalendarIcon className=\"h-10 w-10 text-gray-400\" />\n            </div>\n            <p className=\"text-gray-600 dark:text-gray-400\">No appointments on this day</p>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"space-y-6 animate-fade-in\">\n      <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n        <div>\n          <h2 className=\"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent\">\n            Calendar\n          </h2>\n          <p className=\"text-muted-foreground mt-1\">View and manage your bookings</p>\n        </div>\n        <div className=\"flex gap-2 flex-wrap\">\n          <Select value={viewMode} onValueChange={(value: ViewMode) => setViewMode(value)}>\n            <SelectTrigger className=\"w-[120px] glass-prism\" data-testid=\"select-view-mode\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"month\">Month</SelectItem>\n              <SelectItem value=\"week\">Week</SelectItem>\n              <SelectItem value=\"day\">Day</SelectItem>\n            </SelectContent>\n          </Select>\n          <Select value={statusFilter} onValueChange={setStatusFilter}>\n            <SelectTrigger className=\"w-[140px] glass-prism\" data-testid=\"select-status-filter\">\n              <SelectValue placeholder=\"Filter by status\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">All Status</SelectItem>\n              <SelectItem value=\"pending\">Pending</SelectItem>\n              <SelectItem value=\"accepted\">Accepted</SelectItem>\n              <SelectItem value=\"declined\">Declined</SelectItem>\n            </SelectContent>\n          </Select>\n          <Button onClick={goToToday} className=\"glass-prism-button text-white shadow-lg\" data-testid=\"button-today\">\n            <CalendarIcon className=\"h-4 w-4 mr-2\" />\n            Today\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"grid lg:grid-cols-3 gap-6\">\n        <Card className=\"lg:col-span-2 glass-prism-card backdrop-blur-xl bg-white/5 dark:bg-black/5 border-white/20 shadow-2xl animate-slide-in-left mobile-no-blur\">\n          <CardHeader>\n            <div className=\"flex items-center justify-between\">\n              <CardTitle className=\"text-xl font-bold text-gray-800 dark:text-gray-100\">\n                {viewMode === 'day'\n                  ? currentDate.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })\n                  : viewMode === 'week'\n                  ? `Week of ${getWeekDays(currentDate)[0].toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}`\n                  : monthYear}\n              </CardTitle>\n              <div className=\"flex gap-2\">\n                <Button\n                  variant=\"outline\"\n                  size=\"icon\"\n                  onClick={handlePrevious}\n                  className=\"glass-prism hover:glass-prism-button transition-all duration-300\"\n                  data-testid=\"button-prev\"\n                >\n                  <ChevronLeft className=\"h-4 w-4\" />\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  size=\"icon\"\n                  onClick={handleNext}\n                  className=\"glass-prism hover:glass-prism-button transition-all duration-300\"\n                  data-testid=\"button-next\"\n                >\n                  <ChevronRight className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            </div>\n          </CardHeader>\n          <CardContent>\n            {viewMode === 'month' && (\n              <>\n                <div className=\"grid grid-cols-7 gap-2 mb-2\">\n                  {weekDays.map((day) => (\n                    <div key={day} className=\"text-center text-sm font-semibold text-gray-600 dark:text-gray-400 py-2\">\n                      {day}\n                    </div>\n                  ))}\n                </div>\n                {renderMonthView()}\n              </>\n            )}\n            {viewMode === 'week' && renderWeekView()}\n            {viewMode === 'day' && renderDayView()}\n          </CardContent>\n        </Card>\n\n        <Card className=\"glass-prism-card backdrop-blur-xl bg-white/5 dark:bg-black/5 border-white/20 shadow-2xl animate-slide-in-right mobile-no-blur\">\n          <CardHeader>\n            <CardTitle className=\"text-lg font-bold text-gray-800 dark:text-gray-100\">\n              {selectedDate\n                ? selectedDate.toLocaleDateString('en-US', {\n                    weekday: 'long',\n                    month: 'long',\n                    day: 'numeric',\n                  })\n                : 'Select a date'}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {selectedDate && selectedDateAppointments.length > 0 ? (\n              <div className=\"space-y-3\">\n                {selectedDateAppointments.map((apt: any, index: number) => (\n                  <div\n                    key={apt.id}\n                    className=\"glass-prism p-4 rounded-xl hover:glass-prism-button transition-all duration-300 group animate-fade-in\"\n                    style={{ animationDelay: `${index * 0.1}s` }}\n                    data-testid={`appointment-${apt.id}`}\n                  >\n                    <div className=\"flex items-start justify-between mb-2\">\n                      <h4 className=\"font-semibold text-gray-800 dark:text-gray-100\">\n                        {apt.serviceName}\n                      </h4>\n                      <Badge \n                        variant={apt.status === 'accepted' ? 'default' : 'secondary'} \n                        className={`text-xs capitalize ${apt.status === 'accepted' ? 'bg-green-600 hover:bg-green-700 text-white' : ''}`}\n                      >\n                        {apt.status}\n                      </Badge>\n                    </div>\n                    <div className=\"space-y-2 text-sm text-gray-600 dark:text-gray-400\">\n                      <div className=\"flex items-center gap-2\">\n                        <Building2 className=\"h-3.5 w-3.5\" />\n                        <span>{apt.pageName}</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <Clock className=\"h-3.5 w-3.5\" />\n                        <span>{apt.time}</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <User className=\"h-3.5 w-3.5\" />\n                        <span>{apt.customerName}</span>\n                      </div>\n                      {apt.customerEmail && (\n                        <div className=\"flex items-center gap-2\">\n                          <Mail className=\"h-3.5 w-3.5\" />\n                          <span className=\"truncate\">{apt.customerEmail}</span>\n                        </div>\n                      )}\n                    </div>\n                    {apt.status === 'pending' && (\n                      <div className=\"flex gap-2 mt-3 pt-3 border-t border-white/10\">\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          onClick={() => updateAppointmentMutation.mutate({ id: apt.id, status: 'accepted' })}\n                          disabled={updateAppointmentMutation.isPending}\n                          className=\"flex-1 glass-prism-button\"\n                          data-testid={`button-accept-appointment-${apt.id}`}\n                        >\n                          <Check className=\"h-3.5 w-3.5 mr-1\" />\n                          Accept\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          variant=\"destructive\"\n                          onClick={() => updateAppointmentMutation.mutate({ id: apt.id, status: 'declined' })}\n                          disabled={updateAppointmentMutation.isPending}\n                          data-testid={`button-reject-appointment-${apt.id}`}\n                        >\n                          <X className=\"h-3.5 w-3.5 mr-1\" />\n                          Reject\n                        </Button>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            ) : selectedDate ? (\n              <div className=\"text-center py-8\">\n                <div className=\"w-16 h-16 glass-prism rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse\">\n                  <CalendarIcon className=\"h-8 w-8 text-gray-400\" />\n                </div>\n                <p className=\"text-gray-600 dark:text-gray-400\">No appointments on this date</p>\n              </div>\n            ) : (\n              <div className=\"text-center py-8\">\n                <div className=\"w-16 h-16 glass-prism rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <CalendarIcon className=\"h-8 w-8 text-gray-400\" />\n                </div>\n                <p className=\"text-gray-600 dark:text-gray-400\">Select a date to view appointments</p>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","size_bytes":22846},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1128},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, uuid, timestamp, jsonb, numeric, integer, date, boolean } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\nexport const profiles = pgTable(\"profiles\", {\n  id: uuid(\"id\").primaryKey(), // This will be the Supabase auth.users.id\n  email: text(\"email\"), // Store email for demo users\n  fullName: text(\"full_name\"),\n  createdAt: timestamp(\"created_at\").default(sql`now()`),\n  membershipStatus: text(\"membership_status\").default(\"free\"), // free | demo | pro\n  membershipPlan: text(\"membership_plan\"),\n  membershipExpires: timestamp(\"membership_expires\"),\n  trialStatus: text(\"trial_status\").default(\"available\"), // available | active | used | expired\n  trialStartedAt: timestamp(\"trial_started_at\"),\n  trialEndsAt: timestamp(\"trial_ends_at\"),\n});\n\nexport const pages = pgTable(\"pages\", {\n  id: uuid(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  ownerId: uuid(\"owner_id\").references(() => profiles.id),\n  title: text(\"title\").notNull(),\n  slug: text(\"slug\").notNull().unique(),\n  tagline: text(\"tagline\"),\n  logoUrl: text(\"logo_url\"),\n  primaryColor: text(\"primary_color\").default(\"#2563eb\"),\n  theme: text(\"theme\").default(\"Ocean Blue\"),\n  backgroundType: text(\"background_type\").default(\"gradient\"),\n  backgroundValue: text(\"background_value\").default(\"blue\"),\n  fontFamily: text(\"font_family\").default(\"inter\"),\n  calendarLink: text(\"calendar_link\"),\n  locationLink: text(\"location_link\"),\n  faqs: jsonb(\"faqs\").default(sql`'[]'`), // Array of {question: string, answer: string}\n  acceptReviews: text(\"accept_reviews\").default(\"true\"), // \"true\" or \"false\" \n  businessHours: jsonb(\"business_hours\").default(sql`'{\"monday\":\"9:00-17:00\",\"tuesday\":\"9:00-17:00\",\"wednesday\":\"9:00-17:00\",\"thursday\":\"9:00-17:00\",\"friday\":\"9:00-17:00\",\"saturday\":\"Closed\",\"sunday\":\"Closed\"}'`),\n  contactPhone: text(\"contact_phone\"),\n  contactEmail: text(\"contact_email\"),\n  businessAddress: text(\"business_address\"),\n  cancellationPolicy: text(\"cancellation_policy\"),\n  showBusinessHours: text(\"show_business_hours\").default(\"true\"),\n  showContactInfo: text(\"show_contact_info\").default(\"true\"),\n  gallery: jsonb(\"gallery\").default(sql`'{\"logos\": [], \"banners\": [], \"images\": []}'`), // Gallery object with logos, banners, and images arrays\n  data: jsonb(\"data\"),\n  published: boolean(\"published\").default(false),\n  createdAt: timestamp(\"created_at\").default(sql`now()`),\n  updatedAt: timestamp(\"updated_at\").default(sql`now()`),\n});\n\nexport const demoPages = pgTable(\"demo_pages\", {\n  id: uuid(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  ownerId: uuid(\"owner_id\").references(() => profiles.id), // Associate demo with user\n  data: jsonb(\"data\").notNull(), // Contains the demo page configuration\n  convertToken: text(\"convert_token\"), // Secure token for conversion (null when used)\n  createdAt: timestamp(\"created_at\").default(sql`now()`),\n  expiresAt: timestamp(\"expires_at\").default(sql`now() + interval '7 days'`),\n});\n\nexport const services = pgTable(\"services\", {\n  id: uuid(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  pageId: uuid(\"page_id\").references(() => pages.id, { onDelete: \"cascade\" }),\n  name: text(\"name\").notNull(),\n  description: text(\"description\"),\n  imageUrl: text(\"image_url\"),\n  durationMinutes: integer(\"duration_minutes\").notNull(),\n  price: numeric(\"price\").notNull(),\n  currency: text(\"currency\").default(\"USD\").notNull(),\n  createdAt: timestamp(\"created_at\").default(sql`now()`),\n});\n\nexport const staff = pgTable(\"staff\", {\n  id: uuid(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  pageId: uuid(\"page_id\").references(() => pages.id, { onDelete: \"cascade\" }),\n  name: text(\"name\").notNull(),\n  bio: text(\"bio\"),\n  imageUrl: text(\"image_url\"),\n  position: text(\"position\"),\n  email: text(\"email\"),\n  phone: text(\"phone\"),\n  displayOrder: integer(\"display_order\").default(0),\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").default(sql`now()`),\n  updatedAt: timestamp(\"updated_at\").default(sql`now()`),\n});\n\nexport const appointments = pgTable(\"appointments\", {\n  id: uuid(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  pageId: uuid(\"page_id\").references(() => pages.id, { onDelete: \"cascade\" }),\n  ownerId: uuid(\"owner_id\").references(() => profiles.id),\n  serviceId: uuid(\"service_id\").references(() => services.id),\n  customerName: text(\"customer_name\").notNull(),\n  customerEmail: text(\"customer_email\"),\n  customerPhone: text(\"customer_phone\").notNull(),\n  date: date(\"date\").notNull(),\n  time: text(\"time\").notNull(),\n  status: text(\"status\").default(\"pending\"), // pending|accepted|declined|rescheduled\n  notes: text(\"notes\"),\n  googleEventId: text(\"google_event_id\"), // Google Calendar event ID if synced\n  syncedFromGoogle: boolean(\"synced_from_google\").default(false),\n  createdAt: timestamp(\"created_at\").default(sql`now()`),\n  updatedAt: timestamp(\"updated_at\").default(sql`now()`),\n});\n\nexport const reviews = pgTable(\"reviews\", {\n  id: uuid(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  pageId: uuid(\"page_id\").references(() => pages.id, { onDelete: \"cascade\" }),\n  reviewerName: text(\"reviewer_name\").notNull(),\n  reviewerEmail: text(\"reviewer_email\"),\n  rating: integer(\"rating\").notNull(), // 1-5 stars\n  reviewText: text(\"review_text\"),\n  status: text(\"status\").default(\"pending\"), // Keep existing status column\n  isApproved: text(\"is_approved\").default(\"pending\"), // pending|approved|rejected\n  createdAt: timestamp(\"created_at\").default(sql`now()`),\n  updatedAt: timestamp(\"updated_at\").default(sql`now()`),\n});\n\nexport const paymentsDemo = pgTable(\"payments_demo\", {\n  id: uuid(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: uuid(\"user_id\").references(() => profiles.id),\n  amount: numeric(\"amount\"),\n  currency: text(\"currency\"),\n  status: text(\"status\"),\n  paymentIntentId: text(\"payment_intent_id\"), // Legacy Stripe field\n  subscriptionId: text(\"subscription_id\"), // Legacy subscription field\n  paymentId: text(\"payment_id\"), // Razorpay payment ID\n  paymentMethod: text(\"payment_method\"), // Payment method used (razorpay, razorpay_subscription, etc.)\n  plan: text(\"plan\"),\n  paypalOrderId: text(\"paypal_order_id\"), // Legacy field - PayPal no longer used\n  paypalPaymentId: text(\"paypal_payment_id\"), // Legacy field - PayPal no longer used\n  meta: jsonb(\"meta\"),\n  createdAt: timestamp(\"created_at\").default(sql`now()`),\n  updatedAt: timestamp(\"updated_at\").default(sql`now()`),\n});\n\nexport const subscriptions = pgTable(\"subscriptions\", {\n  id: text(\"id\").primaryKey(), // Legacy PayPal subscription ID - PayPal no longer used\n  userId: uuid(\"user_id\").references(() => profiles.id),\n  status: text(\"status\").notNull(), // APPROVAL_PENDING|ACTIVE|CANCELLED|SUSPENDED|EXPIRED\n  planId: text(\"plan_id\").notNull(), // Legacy PayPal plan ID - PayPal no longer used\n  currentPeriodStart: timestamp(\"current_period_start\"), // Keep existing column\n  currentPeriodEnd: timestamp(\"current_period_end\"), // Keep existing column\n  planName: text(\"plan_name\"), // \"pro\", \"premium\", etc.\n  currency: text(\"currency\").default(\"USD\"),\n  amount: numeric(\"amount\").notNull(),\n  startTime: timestamp(\"start_time\"),\n  nextBillingTime: timestamp(\"next_billing_time\"),\n  isTrial: boolean(\"is_trial\").default(false),\n  trialEndsAt: timestamp(\"trial_ends_at\"),\n  createdAt: timestamp(\"created_at\").default(sql`now()`),\n  updatedAt: timestamp(\"updated_at\").default(sql`now()`),\n});\n\n// Legacy tables that exist in the database - keep to prevent data loss\nexport const memberships = pgTable(\"memberships\", {\n  userId: uuid(\"user_id\").primaryKey().references(() => profiles.id),\n  active: boolean(\"active\").default(true).notNull(),\n  plan: text(\"plan\"),\n  purchasedAt: timestamp(\"purchased_at\", { withTimezone: true }).default(sql`now()`).notNull(),\n  expiresAt: timestamp(\"expires_at\", { withTimezone: true }),\n  transactionId: text(\"transaction_id\"),\n  createdAt: timestamp(\"created_at\", { withTimezone: true }).default(sql`now()`),\n  updatedAt: timestamp(\"updated_at\", { withTimezone: true }).default(sql`now()`),\n});\n\nexport const bookingPages = pgTable(\"booking_pages\", {\n  id: text(\"id\").primaryKey(),\n  ownerId: uuid(\"owner_id\").notNull().references(() => profiles.id),\n  slug: text(\"slug\").notNull(),\n  businessName: text(\"business_name\").notNull(),\n  tagline: text(\"tagline\"),\n  logoDataUrl: text(\"logo_data_url\"),\n  theme: jsonb(\"theme\"),\n  services: jsonb(\"services\"),\n  contact: jsonb(\"contact\"),\n  calendarUrl: text(\"calendar_url\"),\n  buttonText: text(\"button_text\"),\n  createdAt: timestamp(\"created_at\", { withTimezone: true }).default(sql`now()`),\n  updatedAt: timestamp(\"updated_at\", { withTimezone: true }).default(sql`now()`),\n});\n\nexport const notes = pgTable(\"notes\", {\n  id: uuid(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: uuid(\"user_id\").references(() => profiles.id, { onDelete: \"cascade\" }).notNull(),\n  title: text(\"title\").notNull(),\n  content: text(\"content\").default(\"\"),\n  category: text(\"category\").default(\"General\"),\n  tags: text(\"tags\").default(\"\"),\n  color: text(\"color\").default(\"blue\"),\n  isPinned: boolean(\"is_pinned\").default(false),\n  isArchived: boolean(\"is_archived\").default(false),\n  createdAt: timestamp(\"created_at\").default(sql`now()`),\n  updatedAt: timestamp(\"updated_at\").default(sql`now()`),\n});\n\n// Insert schemas (users are managed by Supabase auth)\n\nexport const insertProfileSchema = createInsertSchema(profiles).omit({\n  createdAt: true,\n});\n\nexport const insertPageSchema = createInsertSchema(pages).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n}).extend({\n  locationLink: z.string().optional().refine((val) => {\n    if (!val || val.trim() === '') return true;\n    try {\n      new URL(val);\n      return true;\n    } catch {\n      return false;\n    }\n  }, {\n    message: \"Location link must be a valid URL (e.g., https://maps.google.com/...)\"\n  })\n});\n\nexport const insertServiceSchema = createInsertSchema(services).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertStaffSchema = createInsertSchema(staff).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertAppointmentSchema = createInsertSchema(appointments).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertReviewSchema = createInsertSchema(reviews).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertPaymentSchema = createInsertSchema(paymentsDemo).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertSubscriptionSchema = createInsertSchema(subscriptions).omit({\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertDemoPageSchema = createInsertSchema(demoPages).omit({\n  id: true,\n  createdAt: true,\n  expiresAt: true,\n});\n\nexport const insertNoteSchema = createInsertSchema(notes).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\n// Types (User type managed by Supabase auth)\nexport type Profile = typeof profiles.$inferSelect;\nexport type InsertProfile = z.infer<typeof insertProfileSchema>;\nexport type Page = typeof pages.$inferSelect;\nexport type InsertPage = z.infer<typeof insertPageSchema>;\nexport type Service = typeof services.$inferSelect;\nexport type InsertService = z.infer<typeof insertServiceSchema>;\nexport type Staff = typeof staff.$inferSelect;\nexport type InsertStaff = z.infer<typeof insertStaffSchema>;\nexport type Appointment = typeof appointments.$inferSelect;\nexport type InsertAppointment = z.infer<typeof insertAppointmentSchema>;\nexport type Review = typeof reviews.$inferSelect;\nexport type InsertReview = z.infer<typeof insertReviewSchema>;\nexport type Payment = typeof paymentsDemo.$inferSelect;\nexport type InsertPayment = z.infer<typeof insertPaymentSchema>;\nexport type Subscription = typeof subscriptions.$inferSelect;\nexport type InsertSubscription = z.infer<typeof insertSubscriptionSchema>;\nexport type DemoPage = typeof demoPages.$inferSelect;\nexport type InsertDemoPage = z.infer<typeof insertDemoPageSchema>;\nexport type Note = typeof notes.$inferSelect;\nexport type InsertNote = z.infer<typeof insertNoteSchema>;\n","size_bytes":12149},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/pages/subscription-delays.tsx":{"content":"import Header from '@/components/layout/header';\nimport Footer from '@/components/layout/footer';\nimport SEO from '@/components/seo';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { useLocation } from 'wouter';\nimport { \n  ArrowLeft, \n  AlertTriangle,\n  Clock,\n  CheckCircle,\n  Mail,\n  MessageCircle,\n  Server,\n  TrendingUp,\n  Users,\n  Shield,\n  RefreshCw,\n  Wrench\n} from 'lucide-react';\n\nexport default function SubscriptionDelays() {\n  const [, setLocation] = useLocation();\n\n  const openEmailClient = () => {\n    const supportEmail = 'team@bookinggen.xyz';\n    const subject = encodeURIComponent('Subscription Activation Issue - BookingGen');\n    const body = encodeURIComponent(`Dear BookingGen Team,\n\nI'm experiencing delays with my subscription activation. Here are the details:\n\nSubscription Type:\n[e.g., Free Trial, Pro Subscription, Upgrade]\n\nPayment/Activation Date:\n[When you made the purchase/activated]\n\nCurrent Status:\n[What you're seeing in your account]\n\nExpected Behavior:\n[What should have happened]\n\nAdditional Information:\n[Any error messages, screenshots, or other relevant details]\n\nThank you for your help!\n\nBest regards,\n[Your Name]`);\n    \n    window.location.href = `mailto:${supportEmail}?subject=${subject}&body=${body}`;\n  };\n\n  const contactMethods = [\n    {\n      icon: Mail,\n      title: \"Email Support\",\n      description: \"Get personalized help from our team\",\n      action: openEmailClient,\n      buttonText: \"Send Email\"\n    },\n    {\n      icon: MessageCircle,\n      title: \"Help Center\",\n      description: \"Browse FAQs and guides\",\n      action: () => setLocation('/help-center'),\n      buttonText: \"Visit Help Center\"\n    },\n    {\n      icon: Users,\n      title: \"Contact Form\",\n      description: \"Submit a detailed support request\",\n      action: () => setLocation('/contact'),\n      buttonText: \"Contact Us\"\n    }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <SEO \n        title=\"Subscription Activation Delays | BookingGen\" \n        description=\"Important information about temporary subscription activation delays at BookingGen. We're working to resolve high server load issues.\"\n        ogTitle=\"Subscription Activation Delays - BookingGen Status Update\"\n        ogDescription=\"Learn about current subscription activation delays and how we're addressing them.\"\n      />\n      <Header />\n      \n      {/* Hero Section */}\n      <section className=\"pt-8 pb-20 bg-gradient-to-b from-yellow-50 to-background dark:from-yellow-950/20 dark:to-background\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            <Button \n              variant=\"ghost\" \n              onClick={() => setLocation('/dashboard')}\n              className=\"mt-4 mb-6 inline-flex items-center\"\n              data-testid=\"button-back-to-dashboard\"\n            >\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Back to Dashboard\n            </Button>\n            \n            <div className=\"text-center mb-12\">\n              <div className=\"inline-flex items-center justify-center w-20 h-20 bg-yellow-100 dark:bg-yellow-900/30 rounded-full mb-6 animate-pulse\">\n                <AlertTriangle className=\"h-10 w-10 text-yellow-600 dark:text-yellow-400\" />\n              </div>\n              <h1 className=\"text-3xl lg:text-5xl font-bold text-foreground mb-6\">\n                Subscription Activation Delays\n              </h1>\n              <p className=\"text-xl text-muted-foreground max-w-2xl mx-auto\">\n                We're experiencing temporary delays in subscription activations due to higher than expected traffic. \n                Here's what you need to know.\n              </p>\n              <div className=\"mt-6 inline-flex items-center gap-2 text-sm text-yellow-700 dark:text-yellow-400 bg-yellow-100 dark:bg-yellow-900/30 px-4 py-2 rounded-full\">\n                <Clock className=\"h-4 w-4\" />\n                Last Updated: {new Date().toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Main Status Card */}\n      <section className=\"py-8 -mt-8\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            <Card className=\"border-yellow-200 dark:border-yellow-800 bg-yellow-50/50 dark:bg-yellow-950/20\">\n              <CardContent className=\"p-8\">\n                <div className=\"flex items-start gap-4\">\n                  <div className=\"w-12 h-12 bg-yellow-100 dark:bg-yellow-900/40 rounded-lg flex items-center justify-center flex-shrink-0\">\n                    <Server className=\"h-6 w-6 text-yellow-600 dark:text-yellow-400\" />\n                  </div>\n                  <div className=\"flex-1\">\n                    <h2 className=\"text-2xl font-bold mb-3\">Current Status: Experiencing High Load</h2>\n                    <p className=\"text-muted-foreground text-lg leading-relaxed\">\n                      We're currently experiencing higher than normal server load due to an unexpected surge in new subscriptions and free trial activations. \n                      This is causing some delays in our subscription activation process. We sincerely apologize for any inconvenience this may cause.\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </section>\n\n      {/* What's Happening Section */}\n      <section className=\"py-16\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            <h2 className=\"text-3xl font-bold mb-8\">What's Happening?</h2>\n            \n            <div className=\"prose prose-lg dark:prose-invert max-w-none\">\n              <p className=\"text-lg text-muted-foreground leading-relaxed mb-6\">\n                BookingGen has seen tremendous growth recently, with a significant increase in users signing up for our Pro subscription and free trials. \n                While this is fantastic news, our infrastructure is currently under strain as we scale to meet this demand.\n              </p>\n\n              <Card className=\"mb-6\">\n                <CardContent className=\"p-6\">\n                  <h3 className=\"text-xl font-semibold mb-4 flex items-center gap-2\">\n                    <TrendingUp className=\"h-5 w-5 text-primary\" />\n                    Why Is This Happening?\n                  </h3>\n                  <ul className=\"space-y-3 text-muted-foreground\">\n                    <li className=\"flex items-start gap-2\">\n                      <span className=\"text-primary mt-1\">•</span>\n                      <span><strong>Unexpected Growth:</strong> We've seen a 300% increase in subscription activations over the past week due to our recent marketing campaigns and word-of-mouth growth.</span>\n                    </li>\n                    <li className=\"flex items-start gap-2\">\n                      <span className=\"text-primary mt-1\">•</span>\n                      <span><strong>Infrastructure Scaling:</strong> Our current server infrastructure is being upgraded to handle the increased load, but this process takes time to complete safely.</span>\n                    </li>\n                    <li className=\"flex items-start gap-2\">\n                      <span className=\"text-primary mt-1\">•</span>\n                      <span><strong>Payment Processing Queue:</strong> Our payment processor (Razorpay) is experiencing higher webhook volumes, causing slight delays in confirming successful payments to our system.</span>\n                    </li>\n                    <li className=\"flex items-start gap-2\">\n                      <span className=\"text-primary mt-1\">•</span>\n                      <span><strong>Database Optimization:</strong> We're performing real-time database optimizations to ensure data consistency and prevent any loss of subscription information.</span>\n                    </li>\n                  </ul>\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Expected Timeline Section */}\n      <section className=\"py-16 bg-muted/30\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            <h2 className=\"text-3xl font-bold mb-8\">What to Expect</h2>\n            \n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Clock className=\"h-5 w-5 text-primary\" />\n                    Activation Timeline\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    <div>\n                      <p className=\"font-semibold text-lg mb-1\">Normal Processing Time</p>\n                      <p className=\"text-muted-foreground\">Usually: Instant to 30 seconds</p>\n                    </div>\n                    <div className=\"pt-4 border-t border-border\">\n                      <p className=\"font-semibold text-lg mb-1 text-yellow-600 dark:text-yellow-400\">Current Processing Time</p>\n                      <p className=\"text-muted-foreground\">Currently: 2-5 minutes</p>\n                      <p className=\"text-sm text-muted-foreground mt-2\">In some cases, it may take up to 10 minutes during peak hours</p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <RefreshCw className=\"h-5 w-5 text-primary\" />\n                    What Should You Do?\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <ul className=\"space-y-3\">\n                    <li className=\"flex items-start gap-2\">\n                      <CheckCircle className=\"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0\" />\n                      <span>Wait 2-5 minutes after payment confirmation</span>\n                    </li>\n                    <li className=\"flex items-start gap-2\">\n                      <CheckCircle className=\"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0\" />\n                      <span>Refresh your dashboard page periodically</span>\n                    </li>\n                    <li className=\"flex items-start gap-2\">\n                      <CheckCircle className=\"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0\" />\n                      <span>Check your email for confirmation (sent immediately)</span>\n                    </li>\n                    <li className=\"flex items-start gap-2\">\n                      <CheckCircle className=\"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0\" />\n                      <span>Contact us if activation takes more than 10 minutes</span>\n                    </li>\n                  </ul>\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* What We're Doing Section */}\n      <section className=\"py-16\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            <h2 className=\"text-3xl font-bold mb-8\">How We're Fixing This</h2>\n            \n            <Card className=\"bg-primary/5 border-primary/20\">\n              <CardContent className=\"p-8\">\n                <div className=\"flex items-start gap-4 mb-6\">\n                  <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0\">\n                    <Wrench className=\"h-6 w-6 text-primary\" />\n                  </div>\n                  <div className=\"flex-1\">\n                    <h3 className=\"text-xl font-semibold mb-3\">Active Measures Being Taken</h3>\n                    <p className=\"text-muted-foreground mb-4\">\n                      Our engineering team is working around the clock to resolve these issues. Here's what we're doing:\n                    </p>\n                  </div>\n                </div>\n\n                <div className=\"grid gap-4\">\n                  <div className=\"bg-background rounded-lg p-4 border border-border\">\n                    <h4 className=\"font-semibold mb-2 flex items-center gap-2\">\n                      <span className=\"w-6 h-6 bg-primary/10 rounded-full flex items-center justify-center text-xs font-bold text-primary\">1</span>\n                      Server Capacity Expansion\n                    </h4>\n                    <p className=\"text-sm text-muted-foreground ml-8\">\n                      We're deploying additional server instances across multiple regions to distribute the load. Expected completion: Within 24-48 hours.\n                    </p>\n                  </div>\n\n                  <div className=\"bg-background rounded-lg p-4 border border-border\">\n                    <h4 className=\"font-semibold mb-2 flex items-center gap-2\">\n                      <span className=\"w-6 h-6 bg-primary/10 rounded-full flex items-center justify-center text-xs font-bold text-primary\">2</span>\n                      Database Optimization\n                    </h4>\n                    <p className=\"text-sm text-muted-foreground ml-8\">\n                      We're implementing database query optimizations and adding read replicas to improve performance. In progress.\n                    </p>\n                  </div>\n\n                  <div className=\"bg-background rounded-lg p-4 border border-border\">\n                    <h4 className=\"font-semibold mb-2 flex items-center gap-2\">\n                      <span className=\"w-6 h-6 bg-primary/10 rounded-full flex items-center justify-center text-xs font-bold text-primary\">3</span>\n                      Payment Webhook Processing\n                    </h4>\n                    <p className=\"text-sm text-muted-foreground ml-8\">\n                      We're adding a dedicated queue system for payment webhooks to process confirmations faster and more reliably. Testing in progress.\n                    </p>\n                  </div>\n\n                  <div className=\"bg-background rounded-lg p-4 border border-border\">\n                    <h4 className=\"font-semibold mb-2 flex items-center gap-2\">\n                      <span className=\"w-6 h-6 bg-primary/10 rounded-full flex items-center justify-center text-xs font-bold text-primary\">4</span>\n                      24/7 Monitoring & Support\n                    </h4>\n                    <p className=\"text-sm text-muted-foreground ml-8\">\n                      Our support team is on high alert and actively monitoring all subscription activations to manually intervene when necessary.\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </section>\n\n      {/* Guarantee Section */}\n      <section className=\"py-16 bg-muted/30\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            <Card className=\"bg-green-50 dark:bg-green-950/20 border-green-200 dark:border-green-800\">\n              <CardContent className=\"p-8\">\n                <div className=\"flex items-start gap-4\">\n                  <div className=\"w-12 h-12 bg-green-100 dark:bg-green-900/40 rounded-lg flex items-center justify-center flex-shrink-0\">\n                    <Shield className=\"h-6 w-6 text-green-600 dark:text-green-400\" />\n                  </div>\n                  <div className=\"flex-1\">\n                    <h3 className=\"text-2xl font-bold mb-3 text-green-900 dark:text-green-100\">Our Guarantee to You</h3>\n                    <div className=\"space-y-3 text-green-900/80 dark:text-green-100/80\">\n                      <p className=\"flex items-start gap-2\">\n                        <CheckCircle className=\"h-5 w-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0\" />\n                        <span><strong>No Lost Payments:</strong> Every payment is tracked and will be honored. If you paid, you will get your subscription activated - guaranteed.</span>\n                      </p>\n                      <p className=\"flex items-start gap-2\">\n                        <CheckCircle className=\"h-5 w-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0\" />\n                        <span><strong>Extended Trial Period:</strong> If your free trial was affected by these delays, we'll automatically extend it to ensure you get the full 7 days.</span>\n                      </p>\n                      <p className=\"flex items-start gap-2\">\n                        <CheckCircle className=\"h-5 w-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0\" />\n                        <span><strong>Priority Support:</strong> All users experiencing activation delays will receive priority support - your issue will be escalated immediately.</span>\n                      </p>\n                      <p className=\"flex items-start gap-2\">\n                        <CheckCircle className=\"h-5 w-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0\" />\n                        <span><strong>Full Refund Option:</strong> If you're not satisfied due to these delays, we'll provide a full refund - no questions asked.</span>\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </section>\n\n      {/* Contact Section */}\n      <section className=\"py-16\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            <div className=\"text-center mb-12\">\n              <h2 className=\"text-3xl font-bold mb-4\">Need Help Right Now?</h2>\n              <p className=\"text-lg text-muted-foreground\">\n                Our support team is here to help you. Choose the best way to reach us:\n              </p>\n            </div>\n\n            <div className=\"grid md:grid-cols-3 gap-6 mb-12\">\n              {contactMethods.map((method, index) => (\n                <Card key={index} className=\"hover:shadow-lg transition-shadow\" data-testid={`card-contact-method-${index}`}>\n                  <CardHeader>\n                    <div className=\"inline-flex items-center justify-center w-12 h-12 bg-primary/10 rounded-lg mb-4 mx-auto\">\n                      <method.icon className=\"h-6 w-6 text-primary\" />\n                    </div>\n                    <CardTitle className=\"text-center text-lg\">{method.title}</CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"text-center\">\n                    <p className=\"text-sm text-muted-foreground mb-4\">{method.description}</p>\n                    <Button \n                      onClick={method.action}\n                      className=\"w-full\"\n                      data-testid={`button-contact-${method.title.toLowerCase().replace(/\\s+/g, '-')}`}\n                    >\n                      {method.buttonText}\n                    </Button>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n\n            {/* Direct Email Card */}\n            <Card className=\"bg-primary/5 border-primary/20\">\n              <CardContent className=\"p-8\">\n                <div className=\"text-center\">\n                  <Mail className=\"h-12 w-12 text-primary mx-auto mb-4\" />\n                  <h3 className=\"text-2xl font-bold mb-2\">Direct Email Support</h3>\n                  <p className=\"text-muted-foreground mb-4\">\n                    For immediate assistance with subscription activation issues, email us directly:\n                  </p>\n                  <a \n                    href=\"mailto:team@bookinggen.xyz?subject=Subscription%20Activation%20Issue\" \n                    className=\"text-2xl font-bold text-primary hover:underline inline-block mb-4\"\n                    data-testid=\"link-email-support\"\n                  >\n                    team@bookinggen.xyz\n                  </a>\n                  <div className=\"flex items-center justify-center gap-2 text-sm text-muted-foreground\">\n                    <Clock className=\"h-4 w-4\" />\n                    <span>We typically respond within 1-2 hours for urgent subscription issues</span>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </section>\n\n      {/* Thank You Section */}\n      <section className=\"py-16 bg-muted/30\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"max-w-3xl mx-auto text-center\">\n            <h2 className=\"text-3xl font-bold mb-6\">Thank You for Your Patience</h2>\n            <p className=\"text-lg text-muted-foreground mb-6\">\n              We sincerely apologize for any inconvenience these delays have caused. Your trust in BookingGen means everything to us, \n              and we're committed to resolving these issues as quickly as possible while ensuring the security and reliability of your subscriptions.\n            </p>\n            <p className=\"text-lg text-muted-foreground\">\n              This rapid growth is only possible because of amazing users like you, and we're working hard to ensure our platform can \n              continue to serve you at the highest level.\n            </p>\n            <div className=\"mt-8\">\n              <Button \n                size=\"lg\" \n                onClick={() => setLocation('/dashboard')}\n                data-testid=\"button-return-dashboard\"\n              >\n                Return to Dashboard\n              </Button>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":21889},"client/src/pages/google-calendar.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useQuery, useMutation } from '@tanstack/react-query';\nimport { apiRequest, queryClient } from '@/lib/queryClient';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { useToast } from '@/hooks/use-toast';\nimport { Calendar, CheckCircle2, Loader2, RefreshCw, Unplug } from 'lucide-react';\nimport { SiGooglecalendar } from 'react-icons/si';\nimport { useLocation } from 'wouter';\nimport googleCalendarIcon from '@assets/image_1760024088726.png';\n\ninterface GoogleEvent {\n  googleEventId: string;\n  title: string;\n  date: string;\n  startTime: string;\n  endTime: string;\n  description: string;\n  location: string;\n  attendees: string;\n}\n\nexport default function GoogleCalendarPage() {\n  const { toast } = useToast();\n  const [location, setLocation] = useLocation();\n  const [showSuccess, setShowSuccess] = useState(false);\n\n  // Check connection status\n  const { data: statusData, isLoading: isCheckingStatus } = useQuery({\n    queryKey: ['/api/google/status'],\n  });\n\n  const isConnected = statusData?.connected || false;\n\n  // Get calendar events\n  const { data: eventsData, isLoading: isLoadingEvents, refetch: refetchEvents } = useQuery({\n    queryKey: ['/api/google/events'],\n    enabled: isConnected,\n  });\n\n  const events: GoogleEvent[] = eventsData?.events || [];\n\n  // Connect to Google Calendar\n  const connectMutation = useMutation({\n    mutationFn: async () => {\n      const response = await apiRequest('GET', '/api/google/auth');\n      return response.json();\n    },\n    onSuccess: (data) => {\n      if (data.url) {\n        window.location.href = data.url;\n      }\n    },\n    onError: (error) => {\n      console.error('Google connect error:', error);\n      toast({\n        title: 'Connection failed',\n        description: 'Failed to connect to Google Calendar. Please try again.',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  // Disconnect from Google Calendar\n  const disconnectMutation = useMutation({\n    mutationFn: async () => {\n      const response = await apiRequest('POST', '/api/google/disconnect', {});\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/google/status'] });\n      toast({\n        title: 'Disconnected',\n        description: 'Google Calendar has been disconnected.',\n      });\n    },\n    onError: () => {\n      toast({\n        title: 'Disconnect failed',\n        description: 'Failed to disconnect Google Calendar. Please try again.',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  // Sync events to appointments\n  const syncMutation = useMutation({\n    mutationFn: async () => {\n      const response = await apiRequest('POST', '/api/google/sync', {});\n      return response.json();\n    },\n    onSuccess: (data) => {\n      queryClient.invalidateQueries({ queryKey: ['/api/appointments'] });\n      toast({\n        title: 'Sync complete',\n        description: `${data.syncedCount || 0} events synced to your appointments.`,\n      });\n      refetchEvents();\n    },\n    onError: () => {\n      toast({\n        title: 'Sync failed',\n        description: 'Failed to sync calendar events. Please try again.',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  // Handle callback redirect\n  useEffect(() => {\n    const params = new URLSearchParams(window.location.search);\n    const connected = params.get('connected');\n    const error = params.get('error');\n\n    if (connected === 'true') {\n      setShowSuccess(true);\n      queryClient.invalidateQueries({ queryKey: ['/api/google/status'] });\n      toast({\n        title: 'Connected!',\n        description: 'Google Calendar connected successfully.',\n      });\n      \n      // Clean up URL\n      setLocation('/dashboard/google-calendar');\n      \n      // Hide success animation after 3 seconds\n      setTimeout(() => setShowSuccess(false), 3000);\n    } else if (error) {\n      toast({\n        title: 'Connection failed',\n        description: 'Failed to connect to Google Calendar. Please try again.',\n        variant: 'destructive',\n      });\n      \n      // Clean up URL\n      setLocation('/dashboard/google-calendar');\n    }\n  }, []);\n\n  const formatDate = (dateStr: string) => {\n    const date = new Date(dateStr);\n    return date.toLocaleDateString('en-US', { \n      weekday: 'short', \n      year: 'numeric', \n      month: 'short', \n      day: 'numeric' \n    });\n  };\n\n  if (isCheckingStatus) {\n    return (\n      <div className=\"flex items-center justify-center h-96\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-blue-600\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6 p-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold text-gray-900 dark:text-gray-100\">Google Calendar</h1>\n        <p className=\"text-gray-600 dark:text-gray-400 mt-2\">\n          Sync your Google Calendar events with BookingGen\n        </p>\n      </div>\n\n      {!isConnected ? (\n        <Card \n          className=\"glass-prism-card backdrop-blur-xl bg-white/40 dark:bg-black/40 border-white/20 shadow-2xl hover:shadow-3xl transition-all duration-300 hover:scale-[1.02] max-w-2xl mx-auto\"\n          data-testid=\"card-google-connect\"\n        >\n          <CardHeader className=\"text-center pb-4\">\n            <div className=\"mx-auto w-24 h-24 flex items-center justify-center mb-4\">\n              <img src={googleCalendarIcon} alt=\"Google Calendar\" className=\"w-20 h-20\" />\n            </div>\n            <CardTitle className=\"text-2xl font-bold text-gray-900 dark:text-gray-100\">\n              Connect Google Calendar\n            </CardTitle>\n            <CardDescription className=\"text-gray-600 dark:text-gray-400 text-base\">\n              Securely connect your Google Calendar to automatically sync appointments\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"flex flex-col items-center space-y-4 pb-8\">\n            <Button \n              onClick={() => connectMutation.mutate()}\n              disabled={connectMutation.isPending}\n              className=\"glass-prism-button backdrop-blur-lg bg-[#4285f4] hover:bg-[#357ae8] text-white shadow-xl px-8 py-6 text-lg font-semibold\"\n              data-testid=\"button-connect-google\"\n            >\n              {connectMutation.isPending ? (\n                <>\n                  <Loader2 className=\"mr-3 h-6 w-6 animate-spin\" />\n                  Connecting...\n                </>\n              ) : (\n                <>\n                  <img src={googleCalendarIcon} alt=\"\" className=\"w-6 h-6 mr-3\" />\n                  Sign in with Google Calendar\n                </>\n              )}\n            </Button>\n            <p className=\"text-sm text-gray-500 dark:text-gray-400 text-center max-w-md\">\n              We'll only access your calendar events to help you manage your appointments better.\n              You can disconnect anytime.\n            </p>\n          </CardContent>\n        </Card>\n      ) : (\n        <div className=\"space-y-6\">\n          {/* Success Animation */}\n          {showSuccess && (\n            <div className=\"fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-50 animate-in fade-in\">\n              <div className=\"bg-white dark:bg-gray-800 rounded-full p-8 shadow-2xl animate-in zoom-in\">\n                <CheckCircle2 className=\"h-24 w-24 text-green-500 animate-pulse\" />\n              </div>\n            </div>\n          )}\n\n          {/* Connected Status Card */}\n          <Card className=\"glass-prism-card backdrop-blur-xl bg-white/40 dark:bg-black/40 border-white/20 shadow-xl\">\n            <CardHeader>\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center\">\n                    <CheckCircle2 className=\"h-6 w-6 text-white\" />\n                  </div>\n                  <div>\n                    <CardTitle className=\"text-xl text-gray-900 dark:text-gray-100\">Connected</CardTitle>\n                    <CardDescription>Google Calendar is synced</CardDescription>\n                  </div>\n                </div>\n                <div className=\"flex space-x-2\">\n                  <Button\n                    onClick={() => syncMutation.mutate()}\n                    disabled={syncMutation.isPending}\n                    variant=\"outline\"\n                    className=\"glass-prism-button\"\n                    data-testid=\"button-sync-events\"\n                  >\n                    {syncMutation.isPending ? (\n                      <Loader2 className=\"h-4 w-4 animate-spin\" />\n                    ) : (\n                      <RefreshCw className=\"h-4 w-4\" />\n                    )}\n                    <span className=\"ml-2\">Sync Now</span>\n                  </Button>\n                  <Button\n                    onClick={() => disconnectMutation.mutate()}\n                    disabled={disconnectMutation.isPending}\n                    variant=\"outline\"\n                    className=\"text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20\"\n                    data-testid=\"button-disconnect-google\"\n                  >\n                    <Unplug className=\"h-4 w-4 mr-2\" />\n                    Disconnect\n                  </Button>\n                </div>\n              </div>\n            </CardHeader>\n          </Card>\n\n          {/* Events List */}\n          <Card className=\"glass-prism-card backdrop-blur-xl bg-white/40 dark:bg-black/40 border-white/20 shadow-xl\">\n            <CardHeader>\n              <CardTitle className=\"text-2xl text-gray-900 dark:text-gray-100 flex items-center\">\n                <Calendar className=\"h-6 w-6 mr-2\" />\n                Your Google Calendar Events\n              </CardTitle>\n              <CardDescription>\n                Recent events from your Google Calendar\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              {isLoadingEvents ? (\n                <div className=\"flex items-center justify-center py-12\">\n                  <Loader2 className=\"h-8 w-8 animate-spin text-blue-600\" />\n                </div>\n              ) : events.length === 0 ? (\n                <div className=\"text-center py-12\">\n                  <Calendar className=\"h-12 w-12 mx-auto text-gray-400 mb-4\" />\n                  <p className=\"text-gray-600 dark:text-gray-400\">\n                    No events found in your Google Calendar\n                  </p>\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {events.map((event) => (\n                    <div\n                      key={event.googleEventId}\n                      className=\"glass-prism-card backdrop-blur-lg bg-white/60 dark:bg-black/60 border-white/30 p-4 rounded-xl hover:shadow-lg transition-all duration-200\"\n                      data-testid={`event-${event.googleEventId}`}\n                    >\n                      <div className=\"flex justify-between items-start\">\n                        <div className=\"flex-1\">\n                          <h3 className=\"font-semibold text-gray-900 dark:text-gray-100\" data-testid={`event-title-${event.googleEventId}`}>\n                            {event.title}\n                          </h3>\n                          <div className=\"mt-2 space-y-1 text-sm text-gray-600 dark:text-gray-400\">\n                            <p data-testid={`event-date-${event.googleEventId}`}>\n                              <span className=\"font-medium\">Date:</span> {formatDate(event.date)}\n                            </p>\n                            <p data-testid={`event-time-${event.googleEventId}`}>\n                              <span className=\"font-medium\">Time:</span> {event.startTime} - {event.endTime}\n                            </p>\n                            {event.location && (\n                              <p data-testid={`event-location-${event.googleEventId}`}>\n                                <span className=\"font-medium\">Location:</span> {event.location}\n                              </p>\n                            )}\n                            {event.description && (\n                              <p className=\"text-gray-500 dark:text-gray-400 mt-1\">\n                                {event.description}\n                              </p>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":12753},"server/google-oauth.ts":{"content":"import { google } from 'googleapis';\nimport { storage } from './storage';\n\nconst GOOGLE_CLIENT_ID = process.env.GOOGLE_CLIENT_ID;\nconst GOOGLE_CLIENT_SECRET = process.env.GOOGLE_CLIENT_SECRET;\n\nif (!GOOGLE_CLIENT_ID || !GOOGLE_CLIENT_SECRET) {\n  console.warn('Google OAuth credentials not found - Google Calendar integration will be unavailable');\n}\n\n// Determine the correct redirect URI\nconst redirectUri = process.env.REPLIT_DEV_DOMAIN \n  ? `https://${process.env.REPLIT_DEV_DOMAIN}/api/google/callback`\n  : 'http://localhost:5000/api/google/callback';\n\nconsole.log('Google OAuth redirect URI configured as:', redirectUri);\n\n// OAuth2 client configuration\nconst oauth2Client = new google.auth.OAuth2(\n  GOOGLE_CLIENT_ID,\n  GOOGLE_CLIENT_SECRET,\n  redirectUri\n);\n\nconst SCOPES = [\n  'https://www.googleapis.com/auth/calendar.readonly',\n  'https://www.googleapis.com/auth/calendar.events'\n];\n\nexport function getAuthUrl(state: string): string {\n  return oauth2Client.generateAuthUrl({\n    access_type: 'offline',\n    scope: SCOPES,\n    state,\n    prompt: 'consent'\n  });\n}\n\nexport async function getTokensFromCode(code: string) {\n  const { tokens } = await oauth2Client.getToken(code);\n  return tokens;\n}\n\nexport async function refreshAccessToken(refreshToken: string) {\n  oauth2Client.setCredentials({ refresh_token: refreshToken });\n  const { credentials } = await oauth2Client.refreshAccessToken();\n  return credentials;\n}\n\nexport async function getCalendarEvents(accessToken: string, refreshToken: string, userId: string) {\n  try {\n    oauth2Client.setCredentials({\n      access_token: accessToken,\n      refresh_token: refreshToken\n    });\n\n    const calendar = google.calendar({ version: 'v3', auth: oauth2Client });\n    \n    const now = new Date();\n    const oneMonthAgo = new Date();\n    oneMonthAgo.setMonth(oneMonthAgo.getMonth() - 1);\n    \n    const response = await calendar.events.list({\n      calendarId: 'primary',\n      timeMin: oneMonthAgo.toISOString(),\n      maxResults: 100,\n      singleEvents: true,\n      orderBy: 'startTime',\n    });\n\n    const events = response.data.items || [];\n    \n    // Map and filter events\n    const mappedEvents = events\n      .filter(event => event.start && (event.start.dateTime || event.start.date))\n      .map(event => {\n        const startDateTime = event.start?.dateTime || event.start?.date;\n        const endDateTime = event.end?.dateTime || event.end?.date;\n        \n        const startDate = new Date(startDateTime!);\n        const endDate = new Date(endDateTime!);\n        \n        // Extract date and time\n        const date = startDate.toISOString().split('T')[0];\n        const startTime = event.start?.dateTime ? \n          startDate.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false }) : \n          '00:00';\n        const endTime = event.end?.dateTime ? \n          endDate.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false }) : \n          '23:59';\n        \n        return {\n          googleEventId: event.id,\n          title: event.summary || 'Untitled Event',\n          date,\n          startTime,\n          endTime,\n          description: event.description || '',\n          location: event.location || '',\n          attendees: event.attendees?.map(a => a.email).join(', ') || ''\n        };\n      });\n\n    return mappedEvents;\n  } catch (error: any) {\n    // Check if token expired\n    if (error.code === 401 || error.message?.includes('invalid_grant')) {\n      // Try to refresh the token\n      try {\n        const newCredentials = await refreshAccessToken(refreshToken);\n        \n        // Update stored tokens\n        await storage.updateGoogleToken(userId, {\n          accessToken: newCredentials.access_token,\n          expiresAt: new Date(newCredentials.expiry_date || Date.now() + 3600000)\n        });\n        \n        // Retry fetching events with new token\n        return getCalendarEvents(newCredentials.access_token!, refreshToken, userId);\n      } catch (refreshError) {\n        console.error('Error refreshing token:', refreshError);\n        throw new Error('Failed to refresh access token');\n      }\n    }\n    \n    console.error('Error fetching calendar events:', error);\n    throw error;\n  }\n}\n","size_bytes":4236},"client/src/components/animations/AppointmentBallpit.tsx":{"content":"import { useEffect, useRef, useState } from 'react';\nimport { Calendar, MapPin, User } from 'lucide-react';\n\ninterface AppointmentData {\n  id: number;\n  name: string;\n  pageName: string;\n  city: string;\n  date: string;\n  status: 'pending' | 'accepted' | 'rescheduled';\n  x: number;\n  y: number;\n  vx: number;\n  vy: number;\n  rotation: number;\n}\n\nconst names = [\n  'Sarah Chen', 'David Martinez', 'Elena Rodriguez', 'James Wilson',\n  'Maria Garcia', 'Michael Brown', 'Jessica Taylor', 'Robert Johnson',\n  'Lisa Anderson', 'Christopher Lee', 'Amanda White', 'Daniel Kim',\n  'Jennifer Clark', 'Matthew Davis', 'Emily Thompson', 'Ryan Martinez'\n];\n\nconst pageNames = [\n  'Yoga Studio', 'Hair Salon', 'Photography', 'Consulting',\n  'Personal Training', 'Therapy Sessions', 'Music Lessons', 'Spa Treatment',\n  'Business Coaching', 'Tutoring', 'Dental Care', 'Massage Therapy'\n];\n\nconst cities = [\n  'New York', 'Los Angeles', 'Chicago', 'San Francisco',\n  'Seattle', 'Austin', 'Boston', 'Denver',\n  'Portland', 'Miami', 'Atlanta', 'Dallas'\n];\n\nconst generateRandomDate = () => {\n  const today = new Date();\n  const daysAhead = Math.floor(Math.random() * 30);\n  const date = new Date(today);\n  date.setDate(today.getDate() + daysAhead);\n  return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n};\n\nconst statuses: Array<'pending' | 'accepted' | 'rescheduled'> = ['pending', 'accepted', 'rescheduled'];\n\nconst getRandomStatus = () => {\n  return statuses[Math.floor(Math.random() * statuses.length)];\n};\n\nconst getStatusStyles = (status: 'pending' | 'accepted' | 'rescheduled') => {\n  switch (status) {\n    case 'pending':\n      return 'bg-yellow-400 dark:bg-yellow-500 text-yellow-900 dark:text-yellow-950';\n    case 'accepted':\n      return 'bg-green-500 dark:bg-green-600 text-white';\n    case 'rescheduled':\n      return 'bg-red-500 dark:bg-red-600 text-white';\n  }\n};\n\ninterface AppointmentBallpitProps {\n  count?: number;\n}\n\nexport default function AppointmentBallpit({ count = 30 }: AppointmentBallpitProps) {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [appointments, setAppointments] = useState<AppointmentData[]>([]);\n  const animationRef = useRef<number>();\n  const mousePos = useRef({ x: -1000, y: -1000 });\n\n  useEffect(() => {\n    if (!containerRef.current) return;\n\n    const container = containerRef.current;\n    const rect = container.getBoundingClientRect();\n    const width = rect.width;\n    const height = rect.height;\n\n    const handleMouseMove = (e: MouseEvent) => {\n      const rect = container.getBoundingClientRect();\n      mousePos.current = {\n        x: e.clientX - rect.left,\n        y: e.clientY - rect.top\n      };\n    };\n\n    const handleMouseLeave = () => {\n      mousePos.current = { x: -1000, y: -1000 };\n    };\n\n    container.addEventListener('mousemove', handleMouseMove);\n    container.addEventListener('mouseleave', handleMouseLeave);\n\n    const initialAppointments: AppointmentData[] = Array.from({ length: count }, (_, i) => ({\n      id: i,\n      name: names[Math.floor(Math.random() * names.length)],\n      pageName: pageNames[Math.floor(Math.random() * pageNames.length)],\n      city: cities[Math.floor(Math.random() * cities.length)],\n      date: generateRandomDate(),\n      status: getRandomStatus(),\n      x: Math.random() * (width - 200),\n      y: Math.random() * (height - 100),\n      vx: (Math.random() - 0.5) * 2,\n      vy: (Math.random() - 0.5) * 2,\n      rotation: Math.random() * 360\n    }));\n\n    setAppointments(initialAppointments);\n\n    let lastUpdate = Date.now();\n    const targetFPS = 30; // Reduce from 60fps to 30fps for better performance\n    const frameInterval = 1000 / targetFPS;\n\n    const animate = () => {\n      const now = Date.now();\n      const elapsed = now - lastUpdate;\n\n      if (elapsed > frameInterval) {\n        lastUpdate = now - (elapsed % frameInterval);\n\n        setAppointments(prev => {\n          const rect = container.getBoundingClientRect();\n          const containerWidth = rect.width;\n          const containerHeight = rect.height;\n\n          return prev.map(apt => {\n            let newX = apt.x + apt.vx;\n            let newY = apt.y + apt.vy;\n            let newVx = apt.vx;\n            let newVy = apt.vy;\n\n            const cardWidth = 220;\n            const cardHeight = 95;\n\n            // Repel from mouse cursor\n            const dx = (apt.x + cardWidth / 2) - mousePos.current.x;\n            const dy = (apt.y + cardHeight / 2) - mousePos.current.y;\n            const distance = Math.sqrt(dx * dx + dy * dy);\n            const repelRadius = 150;\n\n            if (distance < repelRadius && distance > 0) {\n              const force = (repelRadius - distance) / repelRadius;\n              newVx += (dx / distance) * force * 3;\n              newVy += (dy / distance) * force * 3;\n            }\n\n            if (newX <= 0 || newX >= containerWidth - cardWidth) {\n              newVx = -newVx * 0.95;\n              newX = newX <= 0 ? 0 : containerWidth - cardWidth;\n            }\n\n            if (newY <= 0 || newY >= containerHeight - cardHeight) {\n              newVy = -newVy * 0.95;\n              newY = newY <= 0 ? 0 : containerHeight - cardHeight;\n            }\n\n            return {\n              ...apt,\n              x: newX,\n              y: newY,\n              vx: newVx,\n              vy: newVy,\n              rotation: apt.rotation + 0.5\n            };\n          });\n        });\n      }\n\n      animationRef.current = requestAnimationFrame(animate);\n    };\n\n    animationRef.current = requestAnimationFrame(animate);\n\n    return () => {\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n      }\n      container.removeEventListener('mousemove', handleMouseMove);\n      container.removeEventListener('mouseleave', handleMouseLeave);\n    };\n  }, [count]);\n\n  return (\n    <div \n      ref={containerRef}\n      className=\"absolute inset-0 overflow-hidden\"\n      style={{ zIndex: 0 }}\n    >\n      {appointments.map((apt) => (\n        <div\n          key={apt.id}\n          className=\"absolute pointer-events-none\"\n          style={{\n            left: `${apt.x}px`,\n            top: `${apt.y}px`,\n            width: '220px'\n          }}\n        >\n          <div className=\"bg-white dark:bg-gray-900 rounded-xl shadow-2xl p-4 border-2 border-blue-500 dark:border-blue-400 transition-all duration-200\">\n            <div className=\"flex items-center gap-2 mb-2\">\n              <div className=\"w-9 h-9 bg-blue-500 dark:bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0\">\n                <User className=\"w-5 h-5 text-white\" />\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-bold text-gray-900 dark:text-white truncate\">\n                  {apt.name}\n                </p>\n                <p className=\"text-xs font-medium text-blue-600 dark:text-blue-400 truncate\">\n                  {apt.pageName}\n                </p>\n              </div>\n              <span className={`px-2.5 py-1 rounded-full text-[10px] font-bold uppercase ${getStatusStyles(apt.status)}`}>\n                {apt.status}\n              </span>\n            </div>\n            <div className=\"flex items-center justify-between gap-2 text-xs font-medium text-gray-700 dark:text-gray-300\">\n              <div className=\"flex items-center gap-1\">\n                <MapPin className=\"w-3.5 h-3.5\" />\n                <span className=\"truncate\">{apt.city}</span>\n              </div>\n              <div className=\"flex items-center gap-1 flex-shrink-0\">\n                <Calendar className=\"w-3.5 h-3.5\" />\n                <span>{apt.date}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n","size_bytes":7753},"client/src/components/animations/Ballpit.tsx":{"content":"import { useRef, useEffect } from 'react';\nimport {\n  Clock,\n  PerspectiveCamera,\n  Scene,\n  WebGLRenderer,\n  SRGBColorSpace,\n  MathUtils,\n  Vector2,\n  Vector3,\n  MeshPhysicalMaterial,\n  ShaderChunk,\n  Color,\n  Object3D,\n  InstancedMesh,\n  PMREMGenerator,\n  SphereGeometry,\n  AmbientLight,\n  PointLight,\n  ACESFilmicToneMapping,\n  Raycaster,\n  Plane\n} from 'three';\nimport { RoomEnvironment } from 'three/examples/jsm/environments/RoomEnvironment.js';\n\nclass ThreeApp {\n  #config;\n  canvas;\n  camera;\n  cameraMinAspect;\n  cameraMaxAspect;\n  cameraFov;\n  maxPixelRatio;\n  minPixelRatio;\n  scene;\n  renderer;\n  #postprocessing;\n  size = { width: 0, height: 0, wWidth: 0, wHeight: 0, ratio: 0, pixelRatio: 0 };\n  render = this.#defaultRender;\n  onBeforeRender = () => {};\n  onAfterRender = () => {};\n  onAfterResize = () => {};\n  #visible = false;\n  #running = false;\n  isDisposed = false;\n  #intersectionObserver;\n  #resizeObserver;\n  #resizeTimeout;\n  #clock = new Clock();\n  #time = { elapsed: 0, delta: 0 };\n  #rafId;\n  \n  constructor(config) {\n    this.#config = { ...config };\n    this.#initCamera();\n    this.#initScene();\n    this.#initRenderer();\n    this.resize();\n    this.#initObservers();\n  }\n  \n  #initCamera() {\n    this.camera = new PerspectiveCamera();\n    this.cameraFov = this.camera.fov;\n  }\n  \n  #initScene() {\n    this.scene = new Scene();\n  }\n  \n  #initRenderer() {\n    if (this.#config.canvas) {\n      this.canvas = this.#config.canvas;\n    } else if (this.#config.id) {\n      this.canvas = document.getElementById(this.#config.id);\n    } else {\n      console.error('Three: Missing canvas or id parameter');\n    }\n    this.canvas.style.display = 'block';\n    const options = {\n      canvas: this.canvas,\n      powerPreference: 'high-performance',\n      ...(this.#config.rendererOptions ?? {})\n    };\n    this.renderer = new WebGLRenderer(options);\n    this.renderer.outputColorSpace = SRGBColorSpace;\n  }\n  \n  #initObservers() {\n    if (!(this.#config.size instanceof Object)) {\n      window.addEventListener('resize', this.#handleResize.bind(this));\n      if (this.#config.size === 'parent' && this.canvas.parentNode) {\n        this.#resizeObserver = new ResizeObserver(this.#handleResize.bind(this));\n        this.#resizeObserver.observe(this.canvas.parentNode);\n      }\n    }\n    this.#intersectionObserver = new IntersectionObserver(this.#handleIntersection.bind(this), {\n      root: null,\n      rootMargin: '0px',\n      threshold: 0\n    });\n    this.#intersectionObserver.observe(this.canvas);\n    document.addEventListener('visibilitychange', this.#handleVisibilityChange.bind(this));\n  }\n  \n  #removeObservers() {\n    window.removeEventListener('resize', this.#handleResize.bind(this));\n    this.#resizeObserver?.disconnect();\n    this.#intersectionObserver?.disconnect();\n    document.removeEventListener('visibilitychange', this.#handleVisibilityChange.bind(this));\n  }\n  \n  #handleIntersection(entries) {\n    this.#visible = entries[0].isIntersecting;\n    this.#visible ? this.#start() : this.#stop();\n  }\n  \n  #handleVisibilityChange() {\n    if (this.#visible) {\n      document.hidden ? this.#stop() : this.#start();\n    }\n  }\n  \n  #handleResize() {\n    if (this.#resizeTimeout) clearTimeout(this.#resizeTimeout);\n    this.#resizeTimeout = setTimeout(this.resize.bind(this), 100);\n  }\n  \n  resize() {\n    let width, height;\n    if (this.#config.size instanceof Object) {\n      width = this.#config.size.width;\n      height = this.#config.size.height;\n    } else if (this.#config.size === 'parent' && this.canvas.parentNode) {\n      width = this.canvas.parentNode.offsetWidth;\n      height = this.canvas.parentNode.offsetHeight;\n    } else {\n      width = window.innerWidth;\n      height = window.innerHeight;\n    }\n    this.size.width = width;\n    this.size.height = height;\n    this.size.ratio = width / height;\n    this.#updateCamera();\n    this.#updateRenderer();\n    this.onAfterResize(this.size);\n  }\n  \n  #updateCamera() {\n    this.camera.aspect = this.size.width / this.size.height;\n    if (this.camera.isPerspectiveCamera && this.cameraFov) {\n      if (this.cameraMinAspect && this.camera.aspect < this.cameraMinAspect) {\n        this.#adjustFov(this.cameraMinAspect);\n      } else if (this.cameraMaxAspect && this.camera.aspect > this.cameraMaxAspect) {\n        this.#adjustFov(this.cameraMaxAspect);\n      } else {\n        this.camera.fov = this.cameraFov;\n      }\n    }\n    this.camera.updateProjectionMatrix();\n    this.updateWorldSize();\n  }\n  \n  #adjustFov(targetAspect) {\n    const vFov = Math.tan(MathUtils.degToRad(this.cameraFov / 2)) / (this.camera.aspect / targetAspect);\n    this.camera.fov = 2 * MathUtils.radToDeg(Math.atan(vFov));\n  }\n  \n  updateWorldSize() {\n    if (this.camera.isPerspectiveCamera) {\n      const vFov = (this.camera.fov * Math.PI) / 180;\n      this.size.wHeight = 2 * Math.tan(vFov / 2) * this.camera.position.length();\n      this.size.wWidth = this.size.wHeight * this.camera.aspect;\n    } else if (this.camera.isOrthographicCamera) {\n      this.size.wHeight = this.camera.top - this.camera.bottom;\n      this.size.wWidth = this.camera.right - this.camera.left;\n    }\n  }\n  \n  #updateRenderer() {\n    this.renderer.setSize(this.size.width, this.size.height);\n    this.#postprocessing?.setSize(this.size.width, this.size.height);\n    let pixelRatio = window.devicePixelRatio;\n    if (this.maxPixelRatio && pixelRatio > this.maxPixelRatio) {\n      pixelRatio = this.maxPixelRatio;\n    } else if (this.minPixelRatio && pixelRatio < this.minPixelRatio) {\n      pixelRatio = this.minPixelRatio;\n    }\n    this.renderer.setPixelRatio(pixelRatio);\n    this.size.pixelRatio = pixelRatio;\n  }\n  \n  get postprocessing() {\n    return this.#postprocessing;\n  }\n  \n  set postprocessing(value) {\n    this.#postprocessing = value;\n    this.render = value.render.bind(value);\n  }\n  \n  #start() {\n    if (this.#running) return;\n    const animate = () => {\n      this.#rafId = requestAnimationFrame(animate);\n      this.#time.delta = this.#clock.getDelta();\n      this.#time.elapsed += this.#time.delta;\n      this.onBeforeRender(this.#time);\n      this.render();\n      this.onAfterRender(this.#time);\n    };\n    this.#running = true;\n    this.#clock.start();\n    animate();\n  }\n  \n  #stop() {\n    if (this.#running) {\n      cancelAnimationFrame(this.#rafId);\n      this.#running = false;\n      this.#clock.stop();\n    }\n  }\n  \n  #defaultRender() {\n    this.renderer.render(this.scene, this.camera);\n  }\n  \n  clear() {\n    this.scene.traverse(obj => {\n      if (obj.isMesh && typeof obj.material === 'object' && obj.material !== null) {\n        Object.keys(obj.material).forEach(key => {\n          const value = obj.material[key];\n          if (value !== null && typeof value === 'object' && typeof value.dispose === 'function') {\n            value.dispose();\n          }\n        });\n        obj.material.dispose();\n        obj.geometry.dispose();\n      }\n    });\n    this.scene.clear();\n  }\n  \n  dispose() {\n    this.#removeObservers();\n    this.#stop();\n    this.clear();\n    this.#postprocessing?.dispose();\n    this.renderer.dispose();\n    this.isDisposed = true;\n  }\n}\n\nconst pointerStore = new Map();\nconst pointerPosition = new Vector2();\nlet listenersAttached = false;\n\nfunction createPointer(config) {\n  const pointer = {\n    position: new Vector2(),\n    nPosition: new Vector2(),\n    hover: false,\n    touching: false,\n    onEnter() {},\n    onMove() {},\n    onClick() {},\n    onLeave() {},\n    ...config\n  };\n  \n  const domElement = config.domElement;\n  if (!pointerStore.has(domElement)) {\n    pointerStore.set(domElement, pointer);\n    if (!listenersAttached) {\n      document.body.addEventListener('pointermove', handlePointerMove);\n      document.body.addEventListener('pointerleave', handlePointerLeave);\n      document.body.addEventListener('click', handleClick);\n      document.body.addEventListener('touchstart', handleTouchStart, { passive: false });\n      document.body.addEventListener('touchmove', handleTouchMove, { passive: false });\n      document.body.addEventListener('touchend', handleTouchEnd, { passive: false });\n      document.body.addEventListener('touchcancel', handleTouchEnd, { passive: false });\n      listenersAttached = true;\n    }\n  }\n  \n  pointer.dispose = () => {\n    pointerStore.delete(domElement);\n    if (pointerStore.size === 0) {\n      document.body.removeEventListener('pointermove', handlePointerMove);\n      document.body.removeEventListener('pointerleave', handlePointerLeave);\n      document.body.removeEventListener('click', handleClick);\n      document.body.removeEventListener('touchstart', handleTouchStart);\n      document.body.removeEventListener('touchmove', handleTouchMove);\n      document.body.removeEventListener('touchend', handleTouchEnd);\n      document.body.removeEventListener('touchcancel', handleTouchEnd);\n      listenersAttached = false;\n    }\n  };\n  \n  return pointer;\n}\n\nfunction handlePointerMove(e) {\n  pointerPosition.x = e.clientX;\n  pointerPosition.y = e.clientY;\n  processInteraction();\n}\n\nfunction processInteraction() {\n  for (const [elem, pointer] of pointerStore) {\n    const rect = elem.getBoundingClientRect();\n    if (isInside(rect)) {\n      updatePosition(pointer, rect);\n      if (!pointer.hover) {\n        pointer.hover = true;\n        pointer.onEnter(pointer);\n      }\n      pointer.onMove(pointer);\n    } else if (pointer.hover && !pointer.touching) {\n      pointer.hover = false;\n      pointer.onLeave(pointer);\n    }\n  }\n}\n\nfunction handleClick(e) {\n  pointerPosition.x = e.clientX;\n  pointerPosition.y = e.clientY;\n  for (const [elem, pointer] of pointerStore) {\n    const rect = elem.getBoundingClientRect();\n    updatePosition(pointer, rect);\n    if (isInside(rect)) pointer.onClick(pointer);\n  }\n}\n\nfunction handlePointerLeave() {\n  for (const pointer of pointerStore.values()) {\n    if (pointer.hover) {\n      pointer.hover = false;\n      pointer.onLeave(pointer);\n    }\n  }\n}\n\nfunction handleTouchStart(e) {\n  if (e.touches.length > 0) {\n    e.preventDefault();\n    pointerPosition.x = e.touches[0].clientX;\n    pointerPosition.y = e.touches[0].clientY;\n    for (const [elem, pointer] of pointerStore) {\n      const rect = elem.getBoundingClientRect();\n      if (isInside(rect)) {\n        pointer.touching = true;\n        updatePosition(pointer, rect);\n        if (!pointer.hover) {\n          pointer.hover = true;\n          pointer.onEnter(pointer);\n        }\n        pointer.onMove(pointer);\n      }\n    }\n  }\n}\n\nfunction handleTouchMove(e) {\n  if (e.touches.length > 0) {\n    e.preventDefault();\n    pointerPosition.x = e.touches[0].clientX;\n    pointerPosition.y = e.touches[0].clientY;\n    for (const [elem, pointer] of pointerStore) {\n      const rect = elem.getBoundingClientRect();\n      updatePosition(pointer, rect);\n      if (isInside(rect)) {\n        if (!pointer.hover) {\n          pointer.hover = true;\n          pointer.touching = true;\n          pointer.onEnter(pointer);\n        }\n        pointer.onMove(pointer);\n      } else if (pointer.hover && pointer.touching) {\n        pointer.onMove(pointer);\n      }\n    }\n  }\n}\n\nfunction handleTouchEnd() {\n  for (const pointer of pointerStore.values()) {\n    if (pointer.touching) {\n      pointer.touching = false;\n      if (pointer.hover) {\n        pointer.hover = false;\n        pointer.onLeave(pointer);\n      }\n    }\n  }\n}\n\nfunction updatePosition(pointer, rect) {\n  const { position, nPosition } = pointer;\n  position.x = pointerPosition.x - rect.left;\n  position.y = pointerPosition.y - rect.top;\n  nPosition.x = (position.x / rect.width) * 2 - 1;\n  nPosition.y = (-position.y / rect.height) * 2 + 1;\n}\n\nfunction isInside(rect) {\n  const { x, y } = pointerPosition;\n  const { left, top, width, height } = rect;\n  return x >= left && x <= left + width && y >= top && y <= top + height;\n}\n\nconst { randFloat, randFloatSpread } = MathUtils;\nconst tempVec1 = new Vector3();\nconst tempVec2 = new Vector3();\nconst tempVec3 = new Vector3();\nconst tempVec4 = new Vector3();\nconst tempVec5 = new Vector3();\nconst tempVec6 = new Vector3();\nconst tempVec7 = new Vector3();\nconst tempVec8 = new Vector3();\nconst tempVec9 = new Vector3();\nconst tempVec10 = new Vector3();\n\nclass Physics {\n  constructor(config) {\n    this.config = config;\n    this.positionData = new Float32Array(3 * config.count).fill(0);\n    this.velocityData = new Float32Array(3 * config.count).fill(0);\n    this.sizeData = new Float32Array(config.count).fill(1);\n    this.center = new Vector3();\n    this.#initPositions();\n    this.setSizes();\n  }\n  \n  #initPositions() {\n    const { config, positionData } = this;\n    this.center.toArray(positionData, 0);\n    for (let i = 1; i < config.count; i++) {\n      const idx = 3 * i;\n      positionData[idx] = randFloatSpread(2 * config.maxX);\n      positionData[idx + 1] = randFloatSpread(2 * config.maxY);\n      positionData[idx + 2] = randFloatSpread(2 * config.maxZ);\n    }\n  }\n  \n  setSizes() {\n    const { config, sizeData } = this;\n    sizeData[0] = config.size0;\n    for (let i = 1; i < config.count; i++) {\n      sizeData[i] = randFloat(config.minSize, config.maxSize);\n    }\n  }\n  \n  update(time) {\n    const { config, center, positionData, sizeData, velocityData } = this;\n    let startIdx = 0;\n    \n    if (config.controlSphere0) {\n      startIdx = 1;\n      tempVec1.fromArray(positionData, 0);\n      tempVec1.lerp(center, 0.1).toArray(positionData, 0);\n      tempVec4.set(0, 0, 0).toArray(velocityData, 0);\n    }\n    \n    for (let idx = startIdx; idx < config.count; idx++) {\n      const base = 3 * idx;\n      tempVec2.fromArray(positionData, base);\n      tempVec5.fromArray(velocityData, base);\n      tempVec5.y -= time.delta * config.gravity * sizeData[idx];\n      tempVec5.multiplyScalar(config.friction);\n      tempVec5.clampLength(0, config.maxVelocity);\n      tempVec2.add(tempVec5);\n      tempVec2.toArray(positionData, base);\n      tempVec5.toArray(velocityData, base);\n    }\n    \n    for (let idx = startIdx; idx < config.count; idx++) {\n      const base = 3 * idx;\n      tempVec2.fromArray(positionData, base);\n      tempVec5.fromArray(velocityData, base);\n      const radius = sizeData[idx];\n      \n      for (let jdx = idx + 1; jdx < config.count; jdx++) {\n        const otherBase = 3 * jdx;\n        tempVec3.fromArray(positionData, otherBase);\n        tempVec6.fromArray(velocityData, otherBase);\n        const otherRadius = sizeData[jdx];\n        tempVec7.copy(tempVec3).sub(tempVec2);\n        const dist = tempVec7.length();\n        const sumRadius = radius + otherRadius;\n        \n        if (dist < sumRadius) {\n          const overlap = sumRadius - dist;\n          tempVec8.copy(tempVec7).normalize().multiplyScalar(0.5 * overlap);\n          tempVec9.copy(tempVec8).multiplyScalar(Math.max(tempVec5.length(), 1));\n          tempVec10.copy(tempVec8).multiplyScalar(Math.max(tempVec6.length(), 1));\n          tempVec2.sub(tempVec8);\n          tempVec5.sub(tempVec9);\n          tempVec2.toArray(positionData, base);\n          tempVec5.toArray(velocityData, base);\n          tempVec3.add(tempVec8);\n          tempVec6.add(tempVec10);\n          tempVec3.toArray(positionData, otherBase);\n          tempVec6.toArray(velocityData, otherBase);\n        }\n      }\n      \n      if (config.controlSphere0) {\n        tempVec7.copy(tempVec1).sub(tempVec2);\n        const dist = tempVec7.length();\n        const sumRadius = radius + sizeData[0];\n        if (dist < sumRadius) {\n          const diff = sumRadius - dist;\n          tempVec8.copy(tempVec7.normalize()).multiplyScalar(diff);\n          tempVec9.copy(tempVec8).multiplyScalar(Math.max(tempVec5.length(), 2));\n          tempVec2.sub(tempVec8);\n          tempVec5.sub(tempVec9);\n        }\n      }\n      \n      if (Math.abs(tempVec2.x) + radius > config.maxX) {\n        tempVec2.x = Math.sign(tempVec2.x) * (config.maxX - radius);\n        tempVec5.x = -tempVec5.x * config.wallBounce;\n      }\n      \n      if (config.gravity === 0) {\n        if (Math.abs(tempVec2.y) + radius > config.maxY) {\n          tempVec2.y = Math.sign(tempVec2.y) * (config.maxY - radius);\n          tempVec5.y = -tempVec5.y * config.wallBounce;\n        }\n      } else if (tempVec2.y - radius < -config.maxY) {\n        tempVec2.y = -config.maxY + radius;\n        tempVec5.y = -tempVec5.y * config.wallBounce;\n      }\n      \n      const maxBoundary = Math.max(config.maxZ, config.maxSize);\n      if (Math.abs(tempVec2.z) + radius > maxBoundary) {\n        tempVec2.z = Math.sign(tempVec2.z) * (config.maxZ - radius);\n        tempVec5.z = -tempVec5.z * config.wallBounce;\n      }\n      \n      tempVec2.toArray(positionData, base);\n      tempVec5.toArray(velocityData, base);\n    }\n  }\n}\n\nclass SubsurfaceScatteringMaterial extends MeshPhysicalMaterial {\n  constructor(params) {\n    super(params);\n    this.uniforms = {\n      thicknessDistortion: { value: 0.1 },\n      thicknessAmbient: { value: 0 },\n      thicknessAttenuation: { value: 0.1 },\n      thicknessPower: { value: 2 },\n      thicknessScale: { value: 10 }\n    };\n    this.defines.USE_UV = '';\n    this.onBeforeCompile = shader => {\n      Object.assign(shader.uniforms, this.uniforms);\n      shader.fragmentShader =\n        `\n        uniform float thicknessPower;\n        uniform float thicknessScale;\n        uniform float thicknessDistortion;\n        uniform float thicknessAmbient;\n        uniform float thicknessAttenuation;\n      ` + shader.fragmentShader;\n      shader.fragmentShader = shader.fragmentShader.replace(\n        'void main() {',\n        `\n        void RE_Direct_Scattering(const in IncidentLight directLight, const in vec2 uv, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, inout ReflectedLight reflectedLight) {\n          vec3 scatteringHalf = normalize(directLight.direction + (geometryNormal * thicknessDistortion));\n          float scatteringDot = pow(saturate(dot(geometryViewDir, -scatteringHalf)), thicknessPower) * thicknessScale;\n          #ifdef USE_COLOR\n            vec3 scatteringIllu = (scatteringDot + thicknessAmbient) * vColor;\n          #else\n            vec3 scatteringIllu = (scatteringDot + thicknessAmbient) * diffuse;\n          #endif\n          reflectedLight.directDiffuse += scatteringIllu * thicknessAttenuation * directLight.color;\n        }\n\n        void main() {\n      `\n      );\n      const lightsFragmentBegin = ShaderChunk.lights_fragment_begin.replaceAll(\n        'RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );',\n        `\n          RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n          RE_Direct_Scattering(directLight, vUv, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, reflectedLight);\n        `\n      );\n      shader.fragmentShader = shader.fragmentShader.replace('#include <lights_fragment_begin>', lightsFragmentBegin);\n      if (this.onBeforeCompile2) this.onBeforeCompile2(shader);\n    };\n  }\n}\n\nconst defaultConfig = {\n  count: 200,\n  colors: [0x000000],\n  ambientColor: 0xffffff,\n  ambientIntensity: 1,\n  lightIntensity: 200,\n  materialParams: {\n    metalness: 0.5,\n    roughness: 0.5,\n    clearcoat: 1,\n    clearcoatRoughness: 0.15\n  },\n  minSize: 0.5,\n  maxSize: 1,\n  size0: 1,\n  gravity: 0.5,\n  friction: 0.9975,\n  wallBounce: 0.95,\n  maxVelocity: 0.15,\n  maxX: 5,\n  maxY: 5,\n  maxZ: 2,\n  controlSphere0: false,\n  followCursor: true\n};\n\nconst tempObject = new Object3D();\n\nclass Spheres extends InstancedMesh {\n  constructor(renderer, config = {}) {\n    const finalConfig = { ...defaultConfig, ...config };\n    const environment = new RoomEnvironment();\n    const pmremGenerator = new PMREMGenerator(renderer, 0.04).fromScene(environment).texture;\n    const geometry = new SphereGeometry();\n    const material = new SubsurfaceScatteringMaterial({ envMap: pmremGenerator, ...finalConfig.materialParams });\n    material.envMapRotation.x = -Math.PI / 2;\n    super(geometry, material, finalConfig.count);\n    \n    this.config = finalConfig;\n    this.physics = new Physics(finalConfig);\n    this.#initLights();\n    this.setColors(finalConfig.colors);\n  }\n  \n  #initLights() {\n    this.ambientLight = new AmbientLight(this.config.ambientColor, this.config.ambientIntensity);\n    this.add(this.ambientLight);\n    this.light = new PointLight(this.config.colors[0], this.config.lightIntensity);\n    this.add(this.light);\n  }\n  \n  setColors(colors) {\n    if (Array.isArray(colors) && colors.length > 1) {\n      const gradient = createGradient(colors);\n      for (let idx = 0; idx < this.count; idx++) {\n        this.setColorAt(idx, gradient.getColorAt(idx / this.count));\n        if (idx === 0) {\n          this.light.color.copy(gradient.getColorAt(idx / this.count));\n        }\n      }\n      this.instanceColor.needsUpdate = true;\n    }\n  }\n  \n  update(time) {\n    this.physics.update(time);\n    for (let idx = 0; idx < this.count; idx++) {\n      tempObject.position.fromArray(this.physics.positionData, 3 * idx);\n      if (idx === 0 && this.config.followCursor === false) {\n        tempObject.scale.setScalar(0);\n      } else {\n        tempObject.scale.setScalar(this.physics.sizeData[idx]);\n      }\n      tempObject.updateMatrix();\n      this.setMatrixAt(idx, tempObject.matrix);\n      if (idx === 0) this.light.position.copy(tempObject.position);\n    }\n    this.instanceMatrix.needsUpdate = true;\n  }\n}\n\nfunction createGradient(colors) {\n  let colorValues;\n  let colorObjects;\n  \n  function setColors(newColors) {\n    colorValues = newColors;\n    colorObjects = [];\n    colorValues.forEach(col => {\n      colorObjects.push(new Color(col));\n    });\n  }\n  \n  setColors(colors);\n  \n  return {\n    setColors,\n    getColorAt: function (ratio, out = new Color()) {\n      const scaled = Math.max(0, Math.min(1, ratio)) * (colorValues.length - 1);\n      const idx = Math.floor(scaled);\n      const start = colorObjects[idx];\n      if (idx >= colorValues.length - 1) return start.clone();\n      const alpha = scaled - idx;\n      const end = colorObjects[idx + 1];\n      out.r = start.r + alpha * (end.r - start.r);\n      out.g = start.g + alpha * (end.g - start.g);\n      out.b = start.b + alpha * (end.b - start.b);\n      return out;\n    }\n  };\n}\n\nfunction createBallpit(canvas, config = {}) {\n  const three = new ThreeApp({\n    canvas,\n    size: 'parent',\n    rendererOptions: { antialias: true, alpha: true }\n  });\n  \n  let spheres;\n  three.renderer.toneMapping = ACESFilmicToneMapping;\n  three.camera.position.set(0, 0, 20);\n  three.camera.lookAt(0, 0, 0);\n  three.cameraMaxAspect = 1.5;\n  three.resize();\n  initialize(config);\n  \n  const raycaster = new Raycaster();\n  const plane = new Plane(new Vector3(0, 0, 1), 0);\n  const intersectPoint = new Vector3();\n  let paused = false;\n  \n  canvas.style.touchAction = 'none';\n  canvas.style.userSelect = 'none';\n  canvas.style.webkitUserSelect = 'none';\n  \n  const pointer = createPointer({\n    domElement: canvas,\n    onMove() {\n      raycaster.setFromCamera(pointer.nPosition, three.camera);\n      three.camera.getWorldDirection(plane.normal);\n      raycaster.ray.intersectPlane(plane, intersectPoint);\n      spheres.physics.center.copy(intersectPoint);\n      spheres.config.controlSphere0 = true;\n    },\n    onLeave() {\n      spheres.config.controlSphere0 = false;\n    }\n  });\n  \n  function initialize(newConfig) {\n    if (spheres) {\n      three.clear();\n      three.scene.remove(spheres);\n    }\n    spheres = new Spheres(three.renderer, newConfig);\n    three.scene.add(spheres);\n  }\n  \n  three.onBeforeRender = time => {\n    if (!paused) spheres.update(time);\n  };\n  \n  three.onAfterResize = size => {\n    spheres.config.maxX = size.wWidth / 2;\n    spheres.config.maxY = size.wHeight / 2;\n  };\n  \n  return {\n    three,\n    get spheres() {\n      return spheres;\n    },\n    setCount(count) {\n      initialize({ ...spheres.config, count });\n    },\n    togglePause() {\n      paused = !paused;\n    },\n    dispose() {\n      pointer.dispose();\n      three.dispose();\n    }\n  };\n}\n\nconst Ballpit = ({ className = '', followCursor = true, ...props }) => {\n  const canvasRef = useRef(null);\n  const spheresInstanceRef = useRef(null);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    spheresInstanceRef.current = createBallpit(canvas, { followCursor, ...props });\n\n    return () => {\n      if (spheresInstanceRef.current) {\n        spheresInstanceRef.current.dispose();\n      }\n    };\n  }, []);\n\n  return <canvas className={className} ref={canvasRef} style={{ width: '100%', height: '100%' }} />;\n};\n\nexport default Ballpit;\n","size_bytes":24670},"client/src/components/ui/Stepper.tsx":{"content":"import { useState, Children, useRef, useLayoutEffect } from 'react';\nimport { motion, AnimatePresence } from 'motion/react';\n\ninterface StepperProps {\n  children: React.ReactNode;\n  initialStep?: number;\n  onStepChange?: (step: number) => void;\n  onFinalStepCompleted?: () => void;\n  stepCircleContainerClassName?: string;\n  stepContainerClassName?: string;\n  contentClassName?: string;\n  footerClassName?: string;\n  backButtonProps?: React.ButtonHTMLAttributes<HTMLButtonElement>;\n  nextButtonProps?: React.ButtonHTMLAttributes<HTMLButtonElement>;\n  backButtonText?: string;\n  nextButtonText?: string;\n  disableStepIndicators?: boolean;\n  renderStepIndicator?: (props: {\n    step: number;\n    currentStep: number;\n    onStepClick: (step: number) => void;\n  }) => React.ReactNode;\n}\n\nexport default function Stepper({\n  children,\n  initialStep = 1,\n  onStepChange = () => {},\n  onFinalStepCompleted = () => {},\n  stepCircleContainerClassName = '',\n  stepContainerClassName = '',\n  contentClassName = '',\n  footerClassName = '',\n  backButtonProps = {},\n  nextButtonProps = {},\n  backButtonText = 'Back',\n  nextButtonText = 'Continue',\n  disableStepIndicators = false,\n  renderStepIndicator,\n  ...rest\n}: StepperProps) {\n  const [currentStep, setCurrentStep] = useState(initialStep);\n  const [direction, setDirection] = useState(0);\n  const stepsArray = Children.toArray(children);\n  const totalSteps = stepsArray.length;\n  const isCompleted = currentStep > totalSteps;\n  const isLastStep = currentStep === totalSteps;\n\n  const updateStep = (newStep: number) => {\n    setCurrentStep(newStep);\n    if (newStep > totalSteps) {\n      onFinalStepCompleted();\n    } else {\n      onStepChange(newStep);\n    }\n  };\n\n  const handleBack = () => {\n    if (currentStep > 1) {\n      setDirection(-1);\n      updateStep(currentStep - 1);\n    }\n  };\n\n  const handleNext = () => {\n    if (!isLastStep) {\n      setDirection(1);\n      updateStep(currentStep + 1);\n    }\n  };\n\n  const handleComplete = () => {\n    setDirection(1);\n    updateStep(totalSteps + 1);\n  };\n\n  return (\n    <div className=\"w-full\" {...rest}>\n      <div className={`bg-white dark:bg-gray-900 rounded-2xl shadow-xl p-8 border border-border ${stepCircleContainerClassName}`}>\n        <div className={`flex items-center justify-between mb-12 ${stepContainerClassName}`}>\n          {stepsArray.map((_, index) => {\n            const stepNumber = index + 1;\n            const isNotLastStep = index < totalSteps - 1;\n            return (\n              <div key={stepNumber} className=\"flex items-center flex-1 last:flex-none\">\n                {renderStepIndicator ? (\n                  renderStepIndicator({\n                    step: stepNumber,\n                    currentStep,\n                    onStepClick: clicked => {\n                      setDirection(clicked > currentStep ? 1 : -1);\n                      updateStep(clicked);\n                    }\n                  })\n                ) : (\n                  <StepIndicator\n                    step={stepNumber}\n                    disableStepIndicators={disableStepIndicators}\n                    currentStep={currentStep}\n                    onClickStep={clicked => {\n                      setDirection(clicked > currentStep ? 1 : -1);\n                      updateStep(clicked);\n                    }}\n                  />\n                )}\n                {isNotLastStep && <StepConnector isComplete={currentStep > stepNumber} />}\n              </div>\n            );\n          })}\n        </div>\n\n        <StepContentWrapper\n          isCompleted={isCompleted}\n          currentStep={currentStep}\n          direction={direction}\n          className={`min-h-[200px] ${contentClassName}`}\n        >\n          {stepsArray[currentStep - 1]}\n        </StepContentWrapper>\n\n        {!isCompleted && (\n          <div className={`mt-8 ${footerClassName}`}>\n            <div className={`flex ${currentStep !== 1 ? 'justify-between' : 'justify-end'} gap-4`}>\n              {currentStep !== 1 && (\n                <button\n                  onClick={handleBack}\n                  className=\"px-6 py-3 rounded-lg border border-border bg-background hover:bg-accent transition-colors duration-200 font-medium\"\n                  data-testid=\"button-stepper-back\"\n                  {...backButtonProps}\n                >\n                  {backButtonText}\n                </button>\n              )}\n              <button \n                onClick={isLastStep ? handleComplete : handleNext} \n                className=\"px-6 py-3 rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 transition-colors duration-200 font-medium\"\n                data-testid=\"button-stepper-next\"\n                {...nextButtonProps}\n              >\n                {isLastStep ? 'Complete' : nextButtonText}\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction StepContentWrapper({ \n  isCompleted, \n  currentStep, \n  direction, \n  children, \n  className \n}: {\n  isCompleted: boolean;\n  currentStep: number;\n  direction: number;\n  children: React.ReactNode;\n  className?: string;\n}) {\n  const [parentHeight, setParentHeight] = useState(0);\n\n  return (\n    <motion.div\n      className={className}\n      style={{ position: 'relative', overflow: 'hidden' }}\n      animate={{ height: isCompleted ? 0 : parentHeight }}\n      transition={{ type: 'spring', duration: 0.4 }}\n    >\n      <AnimatePresence initial={false} mode=\"sync\" custom={direction}>\n        {!isCompleted && (\n          <SlideTransition key={currentStep} direction={direction} onHeightReady={h => setParentHeight(h)}>\n            {children}\n          </SlideTransition>\n        )}\n      </AnimatePresence>\n    </motion.div>\n  );\n}\n\nfunction SlideTransition({ \n  children, \n  direction, \n  onHeightReady \n}: {\n  children: React.ReactNode;\n  direction: number;\n  onHeightReady: (height: number) => void;\n}) {\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  useLayoutEffect(() => {\n    if (containerRef.current) onHeightReady(containerRef.current.offsetHeight);\n  }, [children, onHeightReady]);\n\n  return (\n    <motion.div\n      ref={containerRef}\n      custom={direction}\n      variants={stepVariants}\n      initial=\"enter\"\n      animate=\"center\"\n      exit=\"exit\"\n      transition={{ duration: 0.4 }}\n      style={{ position: 'absolute', left: 0, right: 0, top: 0 }}\n    >\n      {children}\n    </motion.div>\n  );\n}\n\nconst stepVariants = {\n  enter: (dir: number) => ({\n    x: dir >= 0 ? '-100%' : '100%',\n    opacity: 0\n  }),\n  center: {\n    x: '0%',\n    opacity: 1\n  },\n  exit: (dir: number) => ({\n    x: dir >= 0 ? '50%' : '-50%',\n    opacity: 0\n  })\n};\n\nexport function Step({ children }: { children: React.ReactNode }) {\n  return <div className=\"py-4\">{children}</div>;\n}\n\ninterface StepIndicatorProps {\n  step: number;\n  currentStep: number;\n  onClickStep: (step: number) => void;\n  disableStepIndicators: boolean;\n}\n\nfunction StepIndicator({ step, currentStep, onClickStep, disableStepIndicators }: StepIndicatorProps) {\n  const status = currentStep === step ? 'active' : currentStep < step ? 'inactive' : 'complete';\n\n  const handleClick = () => {\n    if (step !== currentStep && !disableStepIndicators) onClickStep(step);\n  };\n\n  return (\n    <motion.div \n      onClick={handleClick} \n      className={`flex items-center justify-center w-12 h-12 rounded-full ${!disableStepIndicators && step !== currentStep ? 'cursor-pointer' : ''}`}\n      animate={status} \n      initial={false}\n    >\n      <motion.div\n        variants={{\n          inactive: { scale: 1, backgroundColor: 'hsl(var(--muted))', color: 'hsl(var(--muted-foreground))' },\n          active: { scale: 1.1, backgroundColor: 'hsl(var(--primary))', color: 'hsl(var(--primary-foreground))' },\n          complete: { scale: 1, backgroundColor: 'hsl(var(--primary))', color: 'hsl(var(--primary-foreground))' }\n        }}\n        transition={{ duration: 0.3 }}\n        className=\"flex items-center justify-center w-full h-full rounded-full\"\n      >\n        {status === 'complete' ? (\n          <CheckIcon className=\"w-6 h-6\" />\n        ) : status === 'active' ? (\n          <div className=\"w-3 h-3 bg-primary-foreground rounded-full\" />\n        ) : (\n          <span className=\"text-sm font-bold\">{step}</span>\n        )}\n      </motion.div>\n    </motion.div>\n  );\n}\n\nfunction StepConnector({ isComplete }: { isComplete: boolean }) {\n  const lineVariants = {\n    incomplete: { width: 0, backgroundColor: 'transparent' },\n    complete: { width: '100%', backgroundColor: 'hsl(var(--primary))' }\n  };\n\n  return (\n    <div className=\"flex-1 h-1 mx-2 bg-muted rounded-full overflow-hidden\">\n      <motion.div\n        className=\"h-full\"\n        variants={lineVariants}\n        initial={false}\n        animate={isComplete ? 'complete' : 'incomplete'}\n        transition={{ duration: 0.4 }}\n      />\n    </div>\n  );\n}\n\nfunction CheckIcon(props: React.SVGProps<SVGSVGElement>) {\n  return (\n    <svg {...props} fill=\"none\" stroke=\"currentColor\" strokeWidth={2} viewBox=\"0 0 24 24\">\n      <motion.path\n        initial={{ pathLength: 0 }}\n        animate={{ pathLength: 1 }}\n        transition={{ delay: 0.1, type: 'tween', ease: 'easeOut', duration: 0.3 }}\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        d=\"M5 13l4 4L19 7\"\n      />\n    </svg>\n  );\n}\n","size_bytes":9334},"client/src/components/dashboard/reviews-list.tsx":{"content":"import { useState } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { useToast } from '@/hooks/use-toast';\nimport { apiRequest } from '@/lib/queryClient';\nimport { Star, Check, X, Clock, MessageSquare, Calendar, User, FileText, ExternalLink, Loader2 } from 'lucide-react';\nimport { format } from 'date-fns';\n\ninterface Review {\n  id: string;\n  pageId: string;\n  reviewerName: string;\n  reviewerEmail: string | null;\n  rating: number;\n  reviewText: string | null;\n  isApproved: 'pending' | 'approved' | 'rejected';\n  createdAt: string;\n  pages: {\n    id: string;\n    title: string;\n    slug: string;\n  };\n}\n\nexport default function ReviewsList() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [activeTab, setActiveTab] = useState('pending');\n\n  // Fetch all reviews for user's pages\n  const { data: reviews = [], isLoading } = useQuery<Review[]>({\n    queryKey: ['/api/user/reviews'],\n  });\n\n  // Update review status mutation\n  const updateReviewMutation = useMutation({\n    mutationFn: async ({ id, status }: { id: string; status: 'approved' | 'rejected' }) => {\n      const response = await apiRequest('PATCH', `/api/reviews/${id}/status`, {\n        isApproved: status,\n      });\n      return response.json();\n    },\n    onSuccess: (_, variables) => {\n      toast({\n        title: variables.status === 'approved' ? 'Review approved!' : 'Review declined',\n        description:\n          variables.status === 'approved'\n            ? 'The review is now visible on your booking page.'\n            : 'The review has been declined and will not be shown.',\n      });\n      queryClient.invalidateQueries({ queryKey: ['/api/user/reviews'] });\n    },\n    onError: () => {\n      toast({\n        title: 'Error',\n        description: 'Failed to update review status. Please try again.',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  // Filter reviews by status\n  const pendingReviews = reviews.filter((r) => r.isApproved === 'pending');\n  const approvedReviews = reviews.filter((r) => r.isApproved === 'approved');\n  const rejectedReviews = reviews.filter((r) => r.isApproved === 'rejected');\n\n  const renderStars = (rating: number) => {\n    return (\n      <div className=\"flex gap-1\">\n        {[1, 2, 3, 4, 5].map((star) => (\n          <Star\n            key={star}\n            className={`h-4 w-4 ${\n              star <= rating\n                ? 'fill-yellow-400 text-yellow-400'\n                : 'text-gray-300 dark:text-gray-600'\n            }`}\n          />\n        ))}\n      </div>\n    );\n  };\n\n  const renderReviewCard = (review: Review) => {\n    const isPending = review.isApproved === 'pending';\n    const isApproved = review.isApproved === 'approved';\n    const isRejected = review.isApproved === 'rejected';\n\n    return (\n      <Card\n        key={review.id}\n        className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-xl hover-lift mobile-no-blur\"\n        data-testid={`review-card-${review.id}`}\n      >\n        <CardContent className=\"p-6\">\n          <div className=\"space-y-4\">\n            {/* Header */}\n            <div className=\"flex items-start justify-between gap-4\">\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"flex items-center gap-3 mb-2\">\n                  <div className=\"w-10 h-10 rounded-full glass-prism backdrop-blur-md bg-gradient-to-br from-blue-500/20 to-purple-500/20 border border-white/30 flex items-center justify-center flex-shrink-0\">\n                    <User className=\"h-5 w-5 text-blue-600 dark:text-blue-400\" />\n                  </div>\n                  <div className=\"min-w-0 flex-1\">\n                    <h3 className=\"font-semibold text-foreground truncate\" data-testid={`text-reviewer-${review.id}`}>\n                      {review.reviewerName}\n                    </h3>\n                    {review.reviewerEmail && (\n                      <p className=\"text-sm text-muted-foreground truncate\">{review.reviewerEmail}</p>\n                    )}\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-2 flex-wrap\">\n                  {renderStars(review.rating)}\n                  <span className=\"text-sm text-muted-foreground\">\n                    {format(new Date(review.createdAt), 'MMM d, yyyy')}\n                  </span>\n                </div>\n              </div>\n              <Badge\n                variant={isPending ? 'secondary' : isApproved ? 'default' : 'destructive'}\n                className={`flex-shrink-0 ${\n                  isPending\n                    ? 'bg-yellow-500/20 text-yellow-700 dark:text-yellow-300 border-yellow-500/30'\n                    : isApproved\n                    ? 'bg-green-500/20 text-green-700 dark:text-green-300 border-green-500/30'\n                    : 'bg-red-500/20 text-red-700 dark:text-red-300 border-red-500/30'\n                }`}\n                data-testid={`badge-status-${review.id}`}\n              >\n                {isPending && <Clock className=\"h-3 w-3 mr-1\" />}\n                {isApproved && <Check className=\"h-3 w-3 mr-1\" />}\n                {isRejected && <X className=\"h-3 w-3 mr-1\" />}\n                {review.isApproved.charAt(0).toUpperCase() + review.isApproved.slice(1)}\n              </Badge>\n            </div>\n\n            {/* Review Text */}\n            {review.reviewText && (\n              <div className=\"glass-prism-card backdrop-blur-md bg-white/5 dark:bg-black/5 border border-white/10 rounded-xl p-4\">\n                <div className=\"flex items-start gap-2\">\n                  <MessageSquare className=\"h-4 w-4 text-muted-foreground mt-0.5 flex-shrink-0\" />\n                  <p className=\"text-foreground text-sm leading-relaxed\" data-testid={`text-review-${review.id}`}>\n                    {review.reviewText}\n                  </p>\n                </div>\n              </div>\n            )}\n\n            {/* Page Info */}\n            <div className=\"flex items-center gap-2 pt-2 border-t border-white/10\">\n              <FileText className=\"h-4 w-4 text-muted-foreground\" />\n              <span className=\"text-sm text-muted-foreground\">For:</span>\n              <span className=\"text-sm font-medium text-foreground\">{review.pages.title}</span>\n              <a\n                href={`/${review.pages.slug}`}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"ml-auto text-sm text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1\"\n                data-testid={`link-view-page-${review.id}`}\n              >\n                View Page\n                <ExternalLink className=\"h-3 w-3\" />\n              </a>\n            </div>\n\n            {/* Actions */}\n            {isPending && (\n              <div className=\"flex gap-2 pt-2\">\n                <Button\n                  onClick={() => updateReviewMutation.mutate({ id: review.id, status: 'approved' })}\n                  disabled={updateReviewMutation.isPending}\n                  className=\"flex-1 glass-prism-button bg-gradient-to-r from-green-500/20 to-green-600/20 hover:from-green-500/30 hover:to-green-600/30 text-green-700 dark:text-green-300 border border-green-500/30\"\n                  data-testid={`button-approve-${review.id}`}\n                >\n                  {updateReviewMutation.isPending ? (\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  ) : (\n                    <Check className=\"h-4 w-4 mr-2\" />\n                  )}\n                  Approve\n                </Button>\n                <Button\n                  onClick={() => updateReviewMutation.mutate({ id: review.id, status: 'rejected' })}\n                  disabled={updateReviewMutation.isPending}\n                  variant=\"outline\"\n                  className=\"flex-1 glass-prism-card bg-white/10 dark:bg-black/10 border-red-500/30 text-red-700 dark:text-red-300 hover:bg-red-500/10\"\n                  data-testid={`button-decline-${review.id}`}\n                >\n                  {updateReviewMutation.isPending ? (\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  ) : (\n                    <X className=\"h-4 w-4 mr-2\" />\n                  )}\n                  Decline\n                </Button>\n              </div>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    );\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"mb-8\">\n          <h2 className=\"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent mb-2\">\n            Reviews\n          </h2>\n          <p className=\"text-gray-600 dark:text-gray-300\">Manage customer reviews for your booking pages</p>\n        </div>\n        <div className=\"flex items-center justify-center py-12\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-blue-600 dark:text-blue-400\" />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"mb-8\">\n        <h2 className=\"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300 bg-clip-text text-transparent mb-2\">\n          Reviews\n        </h2>\n        <p className=\"text-gray-600 dark:text-gray-300\">Manage customer reviews for your booking pages</p>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <Card className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-xl mobile-no-blur\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-muted-foreground mb-1\">Pending</p>\n                <p className=\"text-2xl font-bold text-yellow-600 dark:text-yellow-400\" data-testid=\"text-pending-count\">\n                  {pendingReviews.length}\n                </p>\n              </div>\n              <div className=\"w-12 h-12 rounded-xl glass-prism backdrop-blur-md bg-gradient-to-br from-yellow-500/20 to-yellow-600/20 border border-white/30 flex items-center justify-center\">\n                <Clock className=\"h-6 w-6 text-yellow-600 dark:text-yellow-400\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-xl mobile-no-blur\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-muted-foreground mb-1\">Approved</p>\n                <p className=\"text-2xl font-bold text-green-600 dark:text-green-400\" data-testid=\"text-approved-count\">\n                  {approvedReviews.length}\n                </p>\n              </div>\n              <div className=\"w-12 h-12 rounded-xl glass-prism backdrop-blur-md bg-gradient-to-br from-green-500/20 to-green-600/20 border border-white/30 flex items-center justify-center\">\n                <Check className=\"h-6 w-6 text-green-600 dark:text-green-400\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-xl mobile-no-blur\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-muted-foreground mb-1\">Declined</p>\n                <p className=\"text-2xl font-bold text-red-600 dark:text-red-400\" data-testid=\"text-declined-count\">\n                  {rejectedReviews.length}\n                </p>\n              </div>\n              <div className=\"w-12 h-12 rounded-xl glass-prism backdrop-blur-md bg-gradient-to-br from-red-500/20 to-red-600/20 border border-white/30 flex items-center justify-center\">\n                <X className=\"h-6 w-6 text-red-600 dark:text-red-400\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Tabs */}\n      <Tabs value={activeTab} onValueChange={setActiveTab} className=\"space-y-4\">\n        <TabsList className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 p-1 mobile-no-blur\">\n          <TabsTrigger\n            value=\"pending\"\n            className=\"text-gray-700 dark:text-gray-300 data-[state=active]:glass-prism-button\"\n            data-testid=\"tab-pending\"\n          >\n            Pending {pendingReviews.length > 0 && `(${pendingReviews.length})`}\n          </TabsTrigger>\n          <TabsTrigger\n            value=\"approved\"\n            className=\"text-gray-700 dark:text-gray-300 data-[state=active]:glass-prism-button\"\n            data-testid=\"tab-approved\"\n          >\n            Approved {approvedReviews.length > 0 && `(${approvedReviews.length})`}\n          </TabsTrigger>\n          <TabsTrigger\n            value=\"declined\"\n            className=\"text-gray-700 dark:text-gray-300 data-[state=active]:glass-prism-button\"\n            data-testid=\"tab-declined\"\n          >\n            Declined {rejectedReviews.length > 0 && `(${rejectedReviews.length})`}\n          </TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"pending\" className=\"space-y-4\">\n          {pendingReviews.length === 0 ? (\n            <Card className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-xl mobile-no-blur\">\n              <CardContent className=\"p-12 text-center\">\n                <Clock className=\"h-12 w-12 text-muted-foreground mx-auto mb-4 opacity-50\" />\n                <h3 className=\"text-lg font-semibold text-foreground mb-2\">No pending reviews</h3>\n                <p className=\"text-muted-foreground\">\n                  New reviews will appear here for you to approve or decline.\n                </p>\n              </CardContent>\n            </Card>\n          ) : (\n            <div className=\"grid gap-4\">{pendingReviews.map(renderReviewCard)}</div>\n          )}\n        </TabsContent>\n\n        <TabsContent value=\"approved\" className=\"space-y-4\">\n          {approvedReviews.length === 0 ? (\n            <Card className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-xl mobile-no-blur\">\n              <CardContent className=\"p-12 text-center\">\n                <Check className=\"h-12 w-12 text-muted-foreground mx-auto mb-4 opacity-50\" />\n                <h3 className=\"text-lg font-semibold text-foreground mb-2\">No approved reviews</h3>\n                <p className=\"text-muted-foreground\">\n                  Approved reviews will be displayed on your booking pages.\n                </p>\n              </CardContent>\n            </Card>\n          ) : (\n            <div className=\"grid gap-4\">{approvedReviews.map(renderReviewCard)}</div>\n          )}\n        </TabsContent>\n\n        <TabsContent value=\"declined\" className=\"space-y-4\">\n          {rejectedReviews.length === 0 ? (\n            <Card className=\"glass-prism-card backdrop-blur-xl bg-white/10 dark:bg-black/10 border border-white/20 shadow-xl mobile-no-blur\">\n              <CardContent className=\"p-12 text-center\">\n                <X className=\"h-12 w-12 text-muted-foreground mx-auto mb-4 opacity-50\" />\n                <h3 className=\"text-lg font-semibold text-foreground mb-2\">No declined reviews</h3>\n                <p className=\"text-muted-foreground\">\n                  Declined reviews will not be shown on your booking pages.\n                </p>\n              </CardContent>\n            </Card>\n          ) : (\n            <div className=\"grid gap-4\">{rejectedReviews.map(renderReviewCard)}</div>\n          )}\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n","size_bytes":16203},"client/src/pages/reschedule-public.tsx":{"content":"import { useState } from 'react';\nimport { useRoute } from 'wouter';\nimport { useQuery, useMutation } from '@tanstack/react-query';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { useToast } from '@/hooks/use-toast';\nimport { Calendar, Clock, CheckCircle, AlertCircle, User, Briefcase, MapPin } from 'lucide-react';\n\nexport default function PublicReschedulePage() {\n  const [, params] = useRoute('/reschedule/:appointmentId');\n  const appointmentId = params?.appointmentId;\n  const { toast } = useToast();\n  \n  const [formData, setFormData] = useState({\n    date: '',\n    time: '',\n    note: ''\n  });\n  \n  const [isSuccess, setIsSuccess] = useState(false);\n\n  const { data: appointment, isLoading, error } = useQuery<{\n    id: string;\n    customerName: string;\n    customerEmail: string;\n    date: string;\n    time: string;\n    status: string;\n    serviceName: string;\n    businessName: string;\n    contactEmail?: string;\n    contactPhone?: string;\n  }>({\n    queryKey: [`/api/public/appointments/${appointmentId}`],\n    enabled: !!appointmentId,\n  });\n\n  const rescheduleMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await fetch(`/api/public/appointments/${appointmentId}/reschedule`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data),\n      });\n      \n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || 'Failed to reschedule');\n      }\n      \n      return response.json();\n    },\n    onSuccess: () => {\n      setIsSuccess(true);\n      toast({\n        title: \"Appointment Rescheduled!\",\n        description: \"You'll receive a confirmation email shortly.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to reschedule appointment\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!formData.date || !formData.time) {\n      toast({\n        title: \"Missing Information\",\n        description: \"Please select both a date and time\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    rescheduleMutation.mutate({\n      newDate: formData.date,\n      newTime: formData.time,\n      note: formData.note,\n    });\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-16 w-16 border-4 border-gray-200 border-t-blue-600 mx-auto mb-6\"></div>\n          <p className=\"text-lg font-medium text-gray-700 dark:text-gray-200\">Loading your appointment...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !appointment) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4\">\n        <div className=\"max-w-md w-full\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-10 border border-gray-200 dark:border-gray-700\">\n            <div className=\"text-center\">\n              <div className=\"mx-auto w-20 h-20 bg-red-50 dark:bg-red-900/30 rounded-full flex items-center justify-center mb-6\">\n                <AlertCircle className=\"h-10 w-10 text-red-600 dark:text-red-400\" />\n              </div>\n              <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-3\">Appointment Not Found</h1>\n              <p className=\"text-gray-600 dark:text-gray-300 leading-relaxed\">\n                This appointment link may be invalid or expired. Please contact the business if you need assistance.\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (isSuccess) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4\">\n        <div className=\"max-w-lg w-full\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-10 border border-gray-200 dark:border-gray-700\">\n            <div className=\"text-center\">\n              <div className=\"mx-auto w-20 h-20 bg-green-50 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6\">\n                <CheckCircle className=\"h-10 w-10 text-green-600 dark:text-green-400\" />\n              </div>\n              <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-3\">Successfully Rescheduled!</h1>\n              <p className=\"text-gray-600 dark:text-gray-300 mb-6 leading-relaxed\">\n                Your appointment has been rescheduled. Both you and the business will receive confirmation emails shortly.\n              </p>\n              \n              <div className=\"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-6 border border-blue-200 dark:border-blue-800\">\n                <h3 className=\"font-semibold text-lg text-gray-900 dark:text-white mb-4 flex items-center justify-center\">\n                  <Calendar className=\"h-5 w-5 mr-2 text-blue-600 dark:text-blue-400\" />\n                  New Appointment Details\n                </h3>\n                <div className=\"space-y-3 text-left\">\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-gray-600 dark:text-gray-300 flex items-center\">\n                      <Calendar className=\"h-4 w-4 mr-2\" />\n                      Date:\n                    </span>\n                    <span className=\"font-semibold text-gray-900 dark:text-white\">{formData.date}</span>\n                  </div>\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-gray-600 dark:text-gray-300 flex items-center\">\n                      <Clock className=\"h-4 w-4 mr-2\" />\n                      Time:\n                    </span>\n                    <span className=\"font-semibold text-gray-900 dark:text-white\">{formData.time}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"text-center mt-6\">\n            <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n              Powered by <span className=\"font-semibold text-blue-600 dark:text-blue-400\">BookingGen</span>\n            </p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4 py-12\">\n      <div className=\"max-w-3xl w-full\">\n        {/* Header */}\n        <div className=\"text-center mb-8\">\n          <div className=\"inline-flex items-center justify-center w-20 h-20 bg-blue-600 rounded-2xl shadow-lg mb-6\">\n            <Calendar className=\"h-10 w-10 text-white\" />\n          </div>\n          <h1 className=\"text-4xl font-bold text-gray-900 dark:text-white mb-3\">Reschedule Your Appointment</h1>\n          <p className=\"text-lg text-gray-600 dark:text-gray-300\">Choose a new date and time that works best for you</p>\n        </div>\n\n        <div className=\"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden\">\n          {/* Current Appointment Section */}\n          <div className=\"bg-blue-600 p-8\">\n            <h2 className=\"text-xl font-semibold text-white mb-6 flex items-center\">\n              <AlertCircle className=\"h-5 w-5 mr-2\" />\n              Current Appointment Details\n            </h2>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20\">\n                <div className=\"flex items-start\">\n                  <MapPin className=\"h-5 w-5 text-blue-100 mt-0.5 mr-3 flex-shrink-0\" />\n                  <div>\n                    <p className=\"text-xs text-blue-100 uppercase tracking-wide mb-1\">Business</p>\n                    <p className=\"text-white font-semibold\">{appointment.businessName || 'N/A'}</p>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20\">\n                <div className=\"flex items-start\">\n                  <Briefcase className=\"h-5 w-5 text-blue-100 mt-0.5 mr-3 flex-shrink-0\" />\n                  <div>\n                    <p className=\"text-xs text-blue-100 uppercase tracking-wide mb-1\">Service</p>\n                    <p className=\"text-white font-semibold\">{appointment.serviceName}</p>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20\">\n                <div className=\"flex items-start\">\n                  <Calendar className=\"h-5 w-5 text-blue-100 mt-0.5 mr-3 flex-shrink-0\" />\n                  <div>\n                    <p className=\"text-xs text-blue-100 uppercase tracking-wide mb-1\">Current Date</p>\n                    <p className=\"text-white font-semibold\">{appointment.date}</p>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20\">\n                <div className=\"flex items-start\">\n                  <Clock className=\"h-5 w-5 text-blue-100 mt-0.5 mr-3 flex-shrink-0\" />\n                  <div>\n                    <p className=\"text-xs text-blue-100 uppercase tracking-wide mb-1\">Current Time</p>\n                    <p className=\"text-white font-semibold\">{appointment.time}</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Reschedule Form */}\n          <div className=\"p-8 bg-white dark:bg-gray-800\">\n            <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-6\">Select New Date & Time</h2>\n            \n            <form onSubmit={handleSubmit} className=\"space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"date\" className=\"text-gray-900 dark:text-white font-medium flex items-center\">\n                    <Calendar className=\"h-4 w-4 mr-2 text-blue-600\" />\n                    New Date *\n                  </Label>\n                  <Input\n                    id=\"date\"\n                    type=\"date\"\n                    value={formData.date}\n                    onChange={(e) => setFormData({ ...formData, date: e.target.value })}\n                    className=\"h-12 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500\"\n                    min={new Date().toISOString().split('T')[0]}\n                    required\n                    data-testid=\"input-reschedule-date\"\n                  />\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"time\" className=\"text-gray-900 dark:text-white font-medium flex items-center\">\n                    <Clock className=\"h-4 w-4 mr-2 text-blue-600\" />\n                    New Time *\n                  </Label>\n                  <Input\n                    id=\"time\"\n                    type=\"time\"\n                    value={formData.time}\n                    onChange={(e) => setFormData({ ...formData, time: e.target.value })}\n                    className=\"h-12 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500\"\n                    required\n                    data-testid=\"input-reschedule-time\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"note\" className=\"text-gray-900 dark:text-white font-medium\">\n                  Additional Notes (Optional)\n                </Label>\n                <Textarea\n                  id=\"note\"\n                  value={formData.note}\n                  onChange={(e) => setFormData({ ...formData, note: e.target.value })}\n                  placeholder=\"Any special requests, reasons for rescheduling, or notes for the business...\"\n                  className=\"min-h-[120px] bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500\"\n                  data-testid=\"input-reschedule-note\"\n                />\n              </div>\n\n              <Button\n                type=\"submit\"\n                className=\"w-full h-14 bg-blue-600 hover:bg-blue-700 text-white text-lg font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-200\"\n                disabled={rescheduleMutation.isPending}\n                data-testid=\"button-submit-reschedule\"\n              >\n                {rescheduleMutation.isPending ? (\n                  <div className=\"flex items-center justify-center\">\n                    <div className=\"animate-spin rounded-full h-5 w-5 border-3 border-white/30 border-t-white mr-3\"></div>\n                    Rescheduling...\n                  </div>\n                ) : (\n                  <div className=\"flex items-center justify-center\">\n                    <Calendar className=\"h-5 w-5 mr-2\" />\n                    Confirm Reschedule\n                  </div>\n                )}\n              </Button>\n            </form>\n          </div>\n        </div>\n\n        {/* Footer Branding */}\n        <div className=\"text-center mt-8\">\n          <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n            Powered by <span className=\"font-semibold text-blue-600 dark:text-blue-400\">BookingGen</span> - Effortless Appointment Management\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":13926},"server/email-templates.ts":{"content":"// Email template generator optimized for email clients (including mobile)\n\nexport interface EmailTemplateData {\n  businessName: string;\n  customerName: string;\n  serviceName: string;\n  date: string;\n  time: string;\n  status: 'pending' | 'accepted' | 'declined' | 'rescheduled';\n  appointmentId?: string;\n  contactEmail?: string;\n  contactPhone?: string;\n  note?: string;\n  originalDate?: string;\n  originalTime?: string;\n  baseUrl?: string;\n}\n\nconst getStatusColor = (status: string): { bg: string; text: string; label: string } => {\n  switch (status) {\n    case 'accepted':\n      return { bg: '#10b981', text: '#ffffff', label: 'Confirmed' };\n    case 'pending':\n      return { bg: '#f59e0b', text: '#ffffff', label: 'Pending Review' };\n    case 'declined':\n      return { bg: '#ef4444', text: '#ffffff', label: 'Declined' };\n    case 'rescheduled':\n      return { bg: '#3b82f6', text: '#ffffff', label: 'Rescheduled' };\n    default:\n      return { bg: '#6b7280', text: '#ffffff', label: 'Unknown' };\n  }\n};\n\nconst getGreeting = (status: string, customerName: string): string => {\n  switch (status) {\n    case 'accepted':\n      return `Great news, ${customerName}! 🎉`;\n    case 'pending':\n      return `Thank you for your request, ${customerName}!`;\n    case 'declined':\n      return `Hello ${customerName},`;\n    case 'rescheduled':\n      return `Hello ${customerName},`;\n    default:\n      return `Hello ${customerName},`;\n  }\n};\n\nconst getMessage = (status: string, businessName: string): string => {\n  switch (status) {\n    case 'accepted':\n      return `Your appointment with <strong>${businessName}</strong> has been confirmed!`;\n    case 'pending':\n      return `We've received your appointment request for <strong>${businessName}</strong>. We'll review it and get back to you soon.`;\n    case 'declined':\n      return `We regret to inform you that your appointment request with <strong>${businessName}</strong> could not be confirmed. Please feel free to book another time slot.`;\n    case 'rescheduled':\n      return `Your appointment with <strong>${businessName}</strong> has been rescheduled to a new date and time.`;\n    default:\n      return `Your appointment status has been updated.`;\n  }\n};\n\nexport function generateEmailTemplate(data: EmailTemplateData): string {\n  const statusInfo = getStatusColor(data.status);\n  const greeting = getGreeting(data.status, data.customerName);\n  const message = getMessage(data.status, data.businessName);\n  \n  const rescheduleUrl = data.appointmentId && data.baseUrl\n    ? `${data.baseUrl}/reschedule/${data.appointmentId}`\n    : null;\n\n  return `\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n<head>\n  <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"/>\n  <title>Appointment Update - ${data.businessName}</title>\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif; background-color: #f0f4f8;\">\n  <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"background-color: #f0f4f8;\">\n    <tr>\n      <td align=\"center\" style=\"padding: 40px 20px;\">\n        \n        <!-- Main Container -->\n        <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"600\" style=\"max-width: 600px; background-color: #ffffff; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\">\n          \n          <!-- Header -->\n          <tr>\n            <td style=\"background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); padding: 40px 30px; text-align: center;\">\n              <h1 style=\"margin: 0; font-size: 28px; font-weight: 700; color: #ffffff; letter-spacing: -0.5px;\">BookingGen</h1>\n              <p style=\"margin: 8px 0 0 0; font-size: 14px; color: rgba(255, 255, 255, 0.9); font-weight: 500;\">Effortless Appointment Management</p>\n            </td>\n          </tr>\n          \n          <!-- Content -->\n          <tr>\n            <td style=\"padding: 40px 30px;\">\n              \n              <!-- Greeting -->\n              <h2 style=\"margin: 0 0 16px 0; font-size: 22px; font-weight: 700; color: #1a202c;\">${greeting}</h2>\n              \n              <!-- Message -->\n              <p style=\"margin: 0 0 32px 0; font-size: 16px; color: #4a5568; line-height: 1.6;\">${message}</p>\n              \n              <!-- Status Badge -->\n              <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                <tr>\n                  <td>\n                    <div style=\"display: inline-block; background-color: ${statusInfo.bg}; color: ${statusInfo.text}; padding: 10px 20px; border-radius: 8px; font-size: 14px; font-weight: 600; margin-bottom: 20px;\">\n                      ${statusInfo.label}\n                    </div>\n                  </td>\n                </tr>\n              </table>\n              \n              ${data.status === 'rescheduled' && data.originalDate ? `\n              <!-- Previous Appointment Info -->\n              <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"margin-bottom: 16px; background-color: #fef2f2; border-radius: 8px; padding: 16px;\">\n                <tr>\n                  <td>\n                    <p style=\"margin: 0 0 8px 0; font-size: 12px; color: #991b1b; font-weight: 600; letter-spacing: 0.5px;\">PREVIOUS APPOINTMENT</p>\n                    <p style=\"margin: 0; font-size: 14px; color: #4a5568;\">\n                      <strong>Date:</strong> ${data.originalDate} &nbsp;&nbsp; <strong>Time:</strong> ${data.originalTime}\n                    </p>\n                  </td>\n                </tr>\n              </table>\n              \n              <!-- New Appointment Label -->\n              <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"margin-bottom: 12px;\">\n                <tr>\n                  <td>\n                    <p style=\"margin: 0; padding: 12px 16px 8px 16px; font-size: 12px; color: #065f46; font-weight: 600; background-color: #d1fae5; border-radius: 8px 8px 0 0; letter-spacing: 0.5px;\">NEW APPOINTMENT</p>\n                  </td>\n                </tr>\n              </table>\n              ` : ''}\n              \n              <!-- Appointment Details Card -->\n              <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"background-color: #f8fafc; border-radius: 12px; overflow: hidden; margin-bottom: 24px;\">\n                \n                <!-- Customer -->\n                <tr>\n                  <td style=\"padding: 16px 20px; border-bottom: 1px solid #e2e8f0;\">\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                      <tr>\n                        <td width=\"40%\" style=\"font-size: 14px; font-weight: 600; color: #2d3748;\">\n                          <span style=\"margin-right: 8px;\">👤</span>Customer:\n                        </td>\n                        <td width=\"60%\" style=\"font-size: 14px; color: #4a5568; text-align: right;\">\n                          ${data.customerName}\n                        </td>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n                \n                <!-- Business -->\n                <tr>\n                  <td style=\"padding: 16px 20px; border-bottom: 1px solid #e2e8f0;\">\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                      <tr>\n                        <td width=\"40%\" style=\"font-size: 14px; font-weight: 600; color: #2d3748;\">\n                          <span style=\"margin-right: 8px;\">📍</span>Business:\n                        </td>\n                        <td width=\"60%\" style=\"font-size: 14px; color: #4a5568; text-align: right;\">\n                          ${data.businessName}\n                        </td>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n                \n                <!-- Service -->\n                <tr>\n                  <td style=\"padding: 16px 20px; border-bottom: 1px solid #e2e8f0;\">\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                      <tr>\n                        <td width=\"40%\" style=\"font-size: 14px; font-weight: 600; color: #2d3748;\">\n                          <span style=\"margin-right: 8px;\">💼</span>Service:\n                        </td>\n                        <td width=\"60%\" style=\"font-size: 14px; color: #4a5568; text-align: right;\">\n                          ${data.serviceName}\n                        </td>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n                \n                <!-- Date -->\n                <tr>\n                  <td style=\"padding: 16px 20px; border-bottom: 1px solid #e2e8f0;\">\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                      <tr>\n                        <td width=\"40%\" style=\"font-size: 14px; font-weight: 600; color: #2d3748;\">\n                          <span style=\"margin-right: 8px;\">📅</span>Date:\n                        </td>\n                        <td width=\"60%\" style=\"font-size: 14px; color: #4a5568; text-align: right;\">\n                          ${data.date}\n                        </td>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n                \n                <!-- Time -->\n                <tr>\n                  <td style=\"padding: 16px 20px;\">\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                      <tr>\n                        <td width=\"40%\" style=\"font-size: 14px; font-weight: 600; color: #2d3748;\">\n                          <span style=\"margin-right: 8px;\">🕐</span>Time:\n                        </td>\n                        <td width=\"60%\" style=\"font-size: 14px; color: #4a5568; text-align: right;\">\n                          ${data.time}\n                        </td>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n                \n              </table>\n              \n              ${data.note ? `\n              <!-- Note Section -->\n              <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"margin-bottom: 24px; background-color: #fef3c7; border-radius: 12px; padding: 20px;\">\n                <tr>\n                  <td>\n                    <p style=\"margin: 0 0 8px 0; font-size: 14px; font-weight: 600; color: #92400e;\">\n                      <span style=\"margin-right: 8px;\">📝</span>Note from ${data.businessName}:\n                    </p>\n                    <p style=\"margin: 0; font-size: 14px; color: #4a5568; line-height: 1.5;\">\n                      ${data.note}\n                    </p>\n                  </td>\n                </tr>\n              </table>\n              ` : ''}\n              \n              ${data.status === 'accepted' || data.status === 'pending' || data.status === 'rescheduled' ? `\n              ${rescheduleUrl ? `\n              <!-- Reschedule Button -->\n              <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"margin: 32px 0;\">\n                <tr>\n                  <td align=\"center\">\n                    <a href=\"${rescheduleUrl}\" style=\"display: inline-block; background-color: #3b82f6; color: #ffffff; text-decoration: none; padding: 14px 32px; border-radius: 8px; font-weight: 600; font-size: 16px;\">\n                      <span style=\"margin-right: 8px;\">📅</span>Reschedule Appointment\n                    </a>\n                  </td>\n                </tr>\n              </table>\n              ` : ''}\n              ` : ''}\n              \n              ${data.contactEmail || data.contactPhone ? `\n              <!-- Contact Section -->\n              <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"margin-top: 24px; background-color: #f8fafc; border-radius: 12px; padding: 20px;\">\n                <tr>\n                  <td>\n                    <p style=\"margin: 0 0 12px 0; font-size: 16px; font-weight: 600; color: #2d3748;\">Need Help? Contact Us</p>\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                      ${data.contactEmail ? `\n                      <tr>\n                        <td style=\"padding: 4px 0;\">\n                          <span style=\"margin-right: 6px;\">📧</span>\n                          <a href=\"mailto:${data.contactEmail}\" style=\"color: #3b82f6; text-decoration: none; font-size: 14px;\">${data.contactEmail}</a>\n                        </td>\n                      </tr>\n                      ` : ''}\n                      ${data.contactPhone ? `\n                      <tr>\n                        <td style=\"padding: 4px 0;\">\n                          <span style=\"margin-right: 6px;\">📞</span>\n                          <a href=\"tel:${data.contactPhone}\" style=\"color: #3b82f6; text-decoration: none; font-size: 14px;\">${data.contactPhone}</a>\n                        </td>\n                      </tr>\n                      ` : ''}\n                    </table>\n                  </td>\n                </tr>\n              </table>\n              ` : ''}\n              \n            </td>\n          </tr>\n          \n          <!-- Footer -->\n          <tr>\n            <td style=\"background-color: #f8fafc; padding: 24px 30px; text-align: center; border-top: 1px solid #e2e8f0;\">\n              <p style=\"margin: 0 0 4px 0; font-size: 14px; color: #64748b;\">\n                Powered by <a href=\"https://www.bookinggen.xyz\" style=\"color: #3b82f6; text-decoration: none; font-weight: 600;\">BookingGen</a>\n              </p>\n              <p style=\"margin: 0; font-size: 12px; color: #94a3b8;\">\n                Effortless appointment management for modern businesses\n              </p>\n            </td>\n          </tr>\n          \n        </table>\n        \n      </td>\n    </tr>\n  </table>\n</body>\n</html>\n  `.trim();\n}\n\n// Template for business owner notifications\nexport function generateBusinessNotificationTemplate(data: EmailTemplateData): string {\n  const statusInfo = getStatusColor(data.status);\n  \n  const rescheduleUrl = data.appointmentId && data.baseUrl\n    ? `${data.baseUrl}/dashboard`\n    : null;\n\n  return `\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n<head>\n  <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"/>\n  <title>New Appointment Request - ${data.businessName}</title>\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif; background-color: #f0f4f8;\">\n  <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"background-color: #f0f4f8;\">\n    <tr>\n      <td align=\"center\" style=\"padding: 40px 20px;\">\n        \n        <!-- Main Container -->\n        <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"600\" style=\"max-width: 600px; background-color: #ffffff; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\">\n          \n          <!-- Header -->\n          <tr>\n            <td style=\"background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); padding: 40px 30px; text-align: center;\">\n              <h1 style=\"margin: 0; font-size: 28px; font-weight: 700; color: #ffffff; letter-spacing: -0.5px;\">\n                <span style=\"margin-right: 8px;\">🔔</span>You have a new appointment!\n              </h1>\n            </td>\n          </tr>\n          \n          <!-- Content -->\n          <tr>\n            <td style=\"padding: 40px 30px;\">\n              \n              <!-- Message -->\n              <p style=\"margin: 0 0 32px 0; font-size: 16px; color: #4a5568; line-height: 1.6;\">\n                A customer has requested an appointment with <strong>${data.businessName}</strong>. Review the details below and take action in your dashboard.\n              </p>\n              \n              <!-- Status Badge -->\n              <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                <tr>\n                  <td>\n                    <div style=\"display: inline-block; background-color: ${statusInfo.bg}; color: ${statusInfo.text}; padding: 10px 20px; border-radius: 8px; font-size: 14px; font-weight: 600; margin-bottom: 20px;\">\n                      ${statusInfo.label}\n                    </div>\n                  </td>\n                </tr>\n              </table>\n              \n              <!-- Appointment Details Card -->\n              <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"background-color: #f8fafc; border-radius: 12px; overflow: hidden; margin-bottom: 24px;\">\n                \n                <!-- Customer -->\n                <tr>\n                  <td style=\"padding: 16px 20px; border-bottom: 1px solid #e2e8f0;\">\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                      <tr>\n                        <td width=\"40%\" style=\"font-size: 14px; font-weight: 600; color: #2d3748;\">\n                          <span style=\"margin-right: 8px;\">👤</span>Customer:\n                        </td>\n                        <td width=\"60%\" style=\"font-size: 14px; color: #4a5568; text-align: right;\">\n                          ${data.customerName}\n                        </td>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n                \n                ${data.contactEmail ? `\n                <!-- Email -->\n                <tr>\n                  <td style=\"padding: 16px 20px; border-bottom: 1px solid #e2e8f0;\">\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                      <tr>\n                        <td width=\"40%\" style=\"font-size: 14px; font-weight: 600; color: #2d3748;\">\n                          <span style=\"margin-right: 8px;\">📧</span>Email:\n                        </td>\n                        <td width=\"60%\" style=\"font-size: 14px; color: #4a5568; text-align: right;\">\n                          <a href=\"mailto:${data.contactEmail}\" style=\"color: #3b82f6; text-decoration: none;\">${data.contactEmail}</a>\n                        </td>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n                ` : ''}\n                \n                ${data.contactPhone ? `\n                <!-- Phone -->\n                <tr>\n                  <td style=\"padding: 16px 20px; border-bottom: 1px solid #e2e8f0;\">\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                      <tr>\n                        <td width=\"40%\" style=\"font-size: 14px; font-weight: 600; color: #2d3748;\">\n                          <span style=\"margin-right: 8px;\">📞</span>Phone:\n                        </td>\n                        <td width=\"60%\" style=\"font-size: 14px; color: #4a5568; text-align: right;\">\n                          <a href=\"tel:${data.contactPhone}\" style=\"color: #3b82f6; text-decoration: none;\">${data.contactPhone}</a>\n                        </td>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n                ` : ''}\n                \n                <!-- Business -->\n                <tr>\n                  <td style=\"padding: 16px 20px; border-bottom: 1px solid #e2e8f0;\">\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                      <tr>\n                        <td width=\"40%\" style=\"font-size: 14px; font-weight: 600; color: #2d3748;\">\n                          <span style=\"margin-right: 8px;\">📍</span>Business:\n                        </td>\n                        <td width=\"60%\" style=\"font-size: 14px; color: #4a5568; text-align: right;\">\n                          ${data.businessName}\n                        </td>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n                \n                <!-- Service -->\n                <tr>\n                  <td style=\"padding: 16px 20px; border-bottom: 1px solid #e2e8f0;\">\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                      <tr>\n                        <td width=\"40%\" style=\"font-size: 14px; font-weight: 600; color: #2d3748;\">\n                          <span style=\"margin-right: 8px;\">💼</span>Service:\n                        </td>\n                        <td width=\"60%\" style=\"font-size: 14px; color: #4a5568; text-align: right;\">\n                          ${data.serviceName}\n                        </td>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n                \n                <!-- Date -->\n                <tr>\n                  <td style=\"padding: 16px 20px; border-bottom: 1px solid #e2e8f0;\">\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                      <tr>\n                        <td width=\"40%\" style=\"font-size: 14px; font-weight: 600; color: #2d3748;\">\n                          <span style=\"margin-right: 8px;\">📅</span>Date:\n                        </td>\n                        <td width=\"60%\" style=\"font-size: 14px; color: #4a5568; text-align: right;\">\n                          ${data.date}\n                        </td>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n                \n                <!-- Time -->\n                <tr>\n                  <td style=\"padding: 16px 20px;\">\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                      <tr>\n                        <td width=\"40%\" style=\"font-size: 14px; font-weight: 600; color: #2d3748;\">\n                          <span style=\"margin-right: 8px;\">🕐</span>Time:\n                        </td>\n                        <td width=\"60%\" style=\"font-size: 14px; color: #4a5568; text-align: right;\">\n                          ${data.time}\n                        </td>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n                \n              </table>\n              \n              ${rescheduleUrl ? `\n              <!-- Dashboard Button -->\n              <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"margin: 32px 0;\">\n                <tr>\n                  <td align=\"center\">\n                    <a href=\"${rescheduleUrl}\" style=\"display: inline-block; background-color: #3b82f6; color: #ffffff; text-decoration: none; padding: 14px 32px; border-radius: 8px; font-weight: 600; font-size: 16px;\">\n                      <span style=\"margin-right: 8px;\">📊</span>View in Dashboard\n                    </a>\n                  </td>\n                </tr>\n              </table>\n              ` : ''}\n              \n            </td>\n          </tr>\n          \n          <!-- Footer -->\n          <tr>\n            <td style=\"background-color: #f8fafc; padding: 24px 30px; text-align: center; border-top: 1px solid #e2e8f0;\">\n              <p style=\"margin: 0 0 4px 0; font-size: 14px; color: #64748b;\">\n                Powered by <a href=\"https://www.bookinggen.xyz\" style=\"color: #3b82f6; text-decoration: none; font-weight: 600;\">BookingGen</a>\n              </p>\n              <p style=\"margin: 0; font-size: 12px; color: #94a3b8;\">\n                Effortless appointment management for modern businesses\n              </p>\n            </td>\n          </tr>\n          \n        </table>\n        \n      </td>\n    </tr>\n  </table>\n</body>\n</html>\n  `.trim();\n}\n","size_bytes":24029},"client/src/components/PayPalSubscriptionButton.tsx":{"content":"import { useEffect, useRef, useState } from 'react';\nimport { useAuth } from '@/hooks/use-auth';\nimport { apiRequest, queryClient } from '@/lib/queryClient';\nimport { useToast } from '@/hooks/use-toast';\nimport { Loader2 } from 'lucide-react';\n\ninterface PayPalSubscriptionButtonProps {\n  onSuccess?: (subscriptionId: string) => void;\n  onError?: (error: any) => void;\n}\n\ndeclare global {\n  interface Window {\n    paypal?: any;\n  }\n}\n\nexport default function PayPalSubscriptionButton({ \n  onSuccess, \n  onError \n}: PayPalSubscriptionButtonProps) {\n  const { user, profile } = useAuth();\n  const { toast } = useToast();\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [planId, setPlanId] = useState<string | null>(null);\n  const paypalRef = useRef<HTMLDivElement>(null);\n  const scriptLoadedRef = useRef(false);\n  const isMountedRef = useRef(true);\n  const buttonRenderedRef = useRef(false);\n\n  useEffect(() => {\n    if (!user) return;\n\n    const fetchPlanId = async () => {\n      try {\n        // Use regular fetch for public endpoint (no auth required)\n        const response = await fetch('/api/paypal/plan-id');\n        \n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        \n        const data = await response.json();\n        \n        if (!data.planId) {\n          throw new Error('Plan ID not found');\n        }\n        \n        setPlanId(data.planId);\n      } catch (err) {\n        console.error('Failed to fetch plan ID:', err);\n        if (isMountedRef.current) {\n          setError('Failed to load payment options');\n          setIsLoading(false);\n          toast({\n            title: \"Configuration Error\",\n            description: \"Failed to load payment options. Please try again or contact support.\",\n            variant: \"destructive\",\n          });\n        }\n      }\n    };\n\n    fetchPlanId();\n  }, [user]);\n\n  useEffect(() => {\n    if (!user || !planId || !paypalRef.current || buttonRenderedRef.current) return;\n\n    const loadPayPalScript = async () => {\n      try {\n        // Check if PayPal script is already loaded\n        if (window.paypal && scriptLoadedRef.current) {\n          renderPayPalButton();\n          return;\n        }\n\n        // Load PayPal SDK\n        const script = document.createElement('script');\n        const clientId = import.meta.env.VITE_PAYPAL_CLIENT_ID;\n        \n        if (!clientId) {\n          if (isMountedRef.current) {\n            setError('PayPal Client ID not configured');\n            setIsLoading(false);\n            toast({\n              title: \"Configuration Error\",\n              description: \"PayPal is not properly configured. Please contact support.\",\n              variant: \"destructive\",\n            });\n          }\n          return;\n        }\n        \n        script.src = `https://www.paypal.com/sdk/js?client-id=${clientId}&vault=true&intent=subscription`;\n        script.async = true;\n        \n        script.onload = () => {\n          scriptLoadedRef.current = true;\n          if (isMountedRef.current) {\n            renderPayPalButton();\n          }\n        };\n        \n        script.onerror = () => {\n          if (isMountedRef.current) {\n            setError('Failed to load PayPal SDK');\n            setIsLoading(false);\n            toast({\n              title: \"Error\",\n              description: \"Failed to load PayPal payment system\",\n              variant: \"destructive\",\n            });\n          }\n        };\n\n        document.body.appendChild(script);\n      } catch (err) {\n        console.error('Error loading PayPal:', err);\n        if (isMountedRef.current) {\n          setError('Failed to initialize PayPal');\n          setIsLoading(false);\n        }\n      }\n    };\n\n    const renderPayPalButton = () => {\n      if (!window.paypal || !paypalRef.current || buttonRenderedRef.current || !planId) return;\n\n      // Mark button as rendered to prevent re-rendering\n      buttonRenderedRef.current = true;\n\n      // Capture user info at render time to avoid dependency issues\n      const userId = user.id;\n      const userEmail = user.email;\n      const userName = profile?.fullName || user.fullName || userEmail;\n\n      window.paypal.Buttons({\n        style: {\n          layout: 'vertical',\n          color: 'blue',\n          shape: 'rect',\n          label: 'subscribe',\n          height: 45,\n        },\n        createSubscription: async (data: any, actions: any) => {\n          try {\n            console.log('🔵 Creating PayPal subscription with plan ID:', planId);\n            console.log('🔵 User info:', { userId, userEmail, userName });\n            \n            // Create subscription using PayPal SDK\n            const subscriptionId = await actions.subscription.create({\n              plan_id: planId,\n              custom_id: userId, // Store user ID for webhook processing\n              subscriber: {\n                name: {\n                  given_name: userName,\n                },\n                email_address: userEmail,\n              },\n            });\n            \n            console.log('✅ PayPal subscription created:', subscriptionId);\n            return subscriptionId;\n          } catch (error) {\n            console.error('❌ Failed to create PayPal subscription:', error);\n            console.error('Error details:', JSON.stringify(error, null, 2));\n            throw error;\n          }\n        },\n        onApprove: async (data: any) => {\n          try {\n            console.log('✅ PayPal subscription approved:', data.subscriptionID);\n\n            toast({\n              title: \"Processing...\",\n              description: \"Activating your subscription. Please wait...\",\n            });\n\n            // Wait a moment for webhook to process\n            await new Promise(resolve => setTimeout(resolve, 3000));\n\n            // First try to check if webhook already activated it\n            await queryClient.invalidateQueries({ queryKey: ['/api/profile'] });\n            let profileResponse = await apiRequest('GET', '/api/profile');\n            let updatedProfile = await profileResponse.json();\n\n            if (updatedProfile.membershipStatus === 'pro') {\n              console.log('✅ Subscription activated via webhook');\n              toast({\n                title: \"Success!\",\n                description: \"Your PayPal subscription has been activated. Welcome to Pro!\",\n              });\n            } else {\n              // Webhook might be delayed, use fallback to check and activate\n              console.log('⏳ Webhook delayed, using fallback activation...');\n              \n              try {\n                const checkResponse = await apiRequest('POST', '/api/paypal/subscription/check-activate', {\n                  subscriptionId: data.subscriptionID\n                });\n                const checkResult = await checkResponse.json();\n\n                if (checkResult.success && checkResult.activated) {\n                  console.log('✅ Subscription activated via fallback');\n                  await queryClient.invalidateQueries({ queryKey: ['/api/profile'] });\n                  toast({\n                    title: \"Success!\",\n                    description: \"Your PayPal subscription has been activated. Welcome to Pro!\",\n                  });\n                } else if (checkResult.success && !checkResult.activated) {\n                  console.log('✅ Subscription already active');\n                  toast({\n                    title: \"Success!\",\n                    description: \"Your subscription is active. Welcome to Pro!\",\n                  });\n                } else {\n                  console.warn('⚠️ Subscription not yet active');\n                  toast({\n                    title: \"Subscription Created\",\n                    description: \"Your subscription is being processed. It may take up to 5 minutes to activate. Please refresh the page shortly.\",\n                  });\n                }\n              } catch (fallbackError) {\n                console.error('❌ Fallback activation failed:', fallbackError);\n                toast({\n                  title: \"Subscription Approved\",\n                  description: \"Your subscription is being activated. It may take up to 5 minutes. Please refresh the page shortly.\",\n                });\n              }\n            }\n\n            if (onSuccess) {\n              onSuccess(data.subscriptionID);\n            }\n\n            // Reload to ensure all UI updates\n            setTimeout(() => {\n              window.location.reload();\n            }, 2000);\n          } catch (err) {\n            console.error('❌ Approval error:', err);\n            toast({\n              title: \"Subscription Approved\",\n              description: \"Your subscription is being activated. Please refresh the page in a few moments.\",\n            });\n            if (onError) {\n              onError(err);\n            }\n          }\n        },\n        onCancel: (data: any) => {\n          console.log('Subscription cancelled by user:', data);\n          toast({\n            title: \"Cancelled\",\n            description: \"Subscription process was cancelled.\",\n          });\n        },\n        onError: (err: any) => {\n          console.error('❌ PayPal button error:', err);\n          \n          let errorMessage = \"There was an error processing your payment. Please try again.\";\n          \n          // Provide more specific error messages when possible\n          if (err && typeof err === 'object') {\n            if (err.message) {\n              errorMessage = err.message;\n            } else if (err.toString) {\n              errorMessage = err.toString();\n            }\n          }\n          \n          toast({\n            title: \"Payment Error\",\n            description: errorMessage,\n            variant: \"destructive\",\n          });\n          \n          if (onError) {\n            onError(err);\n          }\n        },\n      }).render(paypalRef.current);\n\n      if (isMountedRef.current) {\n        setIsLoading(false);\n      }\n    };\n\n    loadPayPalScript();\n\n    return () => {\n      // Cleanup: mark component as unmounted\n      isMountedRef.current = false;\n    };\n  }, [user, planId]);\n\n  if (error) {\n    return (\n      <div className=\"text-center p-4 bg-destructive/10 text-destructive rounded-lg\">\n        <p>{error}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"w-full\">\n      {isLoading && (\n        <div className=\"flex items-center justify-center p-4\">\n          <Loader2 className=\"h-6 w-6 animate-spin text-primary\" />\n          <span className=\"ml-2 text-sm text-muted-foreground\">Loading PayPal...</span>\n        </div>\n      )}\n      <div ref={paypalRef} className=\"w-full\" data-testid=\"paypal-subscription-button\" />\n    </div>\n  );\n}\n","size_bytes":10788},"server/paypal-webhook.ts":{"content":"import { Request, Response } from \"express\";\nimport { storage } from \"./storage\";\nimport crypto from \"crypto\";\n\nconst PAYPAL_API_BASE = \n  process.env.NODE_ENV === \"production\"\n    ? \"https://api-m.paypal.com\"\n    : \"https://api-m.sandbox.paypal.com\";\n\nconst PAYPAL_WEBHOOK_ID = process.env.PAYPAL_WEBHOOK_ID || \"\";\n\n// Get PayPal access token for webhook verification\nasync function getAccessToken(): Promise<string> {\n  const auth = Buffer.from(\n    `${process.env.PAYPAL_CLIENT_ID}:${process.env.PAYPAL_CLIENT_SECRET}`\n  ).toString(\"base64\");\n\n  const response = await fetch(`${PAYPAL_API_BASE}/v1/oauth2/token`, {\n    method: \"POST\",\n    headers: {\n      \"Authorization\": `Basic ${auth}`,\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\n    },\n    body: \"grant_type=client_credentials\",\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to get access token: ${response.statusText}`);\n  }\n\n  const data = await response.json();\n  return data.access_token;\n}\n\n// Verify PayPal webhook signature using PayPal API\nasync function verifyWebhookSignature(\n  webhookId: string,\n  headers: any,\n  body: string\n): Promise<boolean> {\n  try {\n    const accessToken = await getAccessToken();\n\n    const verificationData = {\n      transmission_id: headers[\"paypal-transmission-id\"],\n      transmission_time: headers[\"paypal-transmission-time\"],\n      cert_url: headers[\"paypal-cert-url\"],\n      auth_algo: headers[\"paypal-auth-algo\"],\n      transmission_sig: headers[\"paypal-transmission-sig\"],\n      webhook_id: webhookId,\n      webhook_event: JSON.parse(body),\n    };\n\n    const response = await fetch(\n      `${PAYPAL_API_BASE}/v1/notifications/verify-webhook-signature`,\n      {\n        method: \"POST\",\n        headers: {\n          \"Authorization\": `Bearer ${accessToken}`,\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(verificationData),\n      }\n    );\n\n    if (!response.ok) {\n      console.error(\"Webhook verification failed:\", await response.text());\n      return false;\n    }\n\n    const result = await response.json();\n    return result.verification_status === \"SUCCESS\";\n  } catch (error) {\n    console.error(\"Webhook verification error:\", error);\n    return false;\n  }\n}\n\n// PayPal Webhook Event Handler\nexport async function handlePayPalWebhook(req: Request, res: Response) {\n  try {\n    // Parse the raw body\n    const rawBody = req.body.toString('utf8');\n    const event = JSON.parse(rawBody);\n    \n    console.log(\"Received PayPal webhook event:\", event.event_type);\n\n    // SECURITY: Require webhook ID for signature verification\n    // Only allow unverified webhooks in development mode with explicit flag\n    const allowUnverifiedWebhooks = process.env.NODE_ENV === 'development' && process.env.PAYPAL_ALLOW_UNVERIFIED_WEBHOOKS === 'true';\n    \n    if (!PAYPAL_WEBHOOK_ID && !allowUnverifiedWebhooks) {\n      console.error(\"❌ PAYPAL_WEBHOOK_ID not configured and unverified webhooks are not allowed\");\n      console.error(\"❌ Set PAYPAL_WEBHOOK_ID for production or PAYPAL_ALLOW_UNVERIFIED_WEBHOOKS=true for development\");\n      return res.status(500).json({ error: \"Webhook verification not configured\" });\n    }\n\n    // Verify webhook signature\n    if (PAYPAL_WEBHOOK_ID) {\n      const isValid = await verifyWebhookSignature(\n        PAYPAL_WEBHOOK_ID,\n        req.headers,\n        rawBody\n      );\n\n      if (!isValid) {\n        console.error(\"Invalid PayPal webhook signature\");\n        return res.status(401).json({ error: \"Invalid signature\" });\n      }\n\n      console.log(\"PayPal webhook signature verified successfully\");\n    } else {\n      console.warn(\"⚠️ DEVELOPMENT MODE: Processing webhook without signature verification\");\n      console.warn(\"⚠️ This is ONLY safe in development. DO NOT use in production!\");\n    }\n\n    // Handle different event types\n    switch (event.event_type) {\n      case \"BILLING.SUBSCRIPTION.ACTIVATED\":\n        await handleSubscriptionActivated(event);\n        break;\n\n      case \"PAYMENT.SALE.COMPLETED\":\n        await handlePaymentCompleted(event);\n        break;\n\n      case \"BILLING.SUBSCRIPTION.CANCELLED\":\n        await handleSubscriptionCancelled(event);\n        break;\n\n      case \"BILLING.SUBSCRIPTION.SUSPENDED\":\n        await handleSubscriptionSuspended(event);\n        break;\n\n      case \"BILLING.SUBSCRIPTION.EXPIRED\":\n        await handleSubscriptionExpired(event);\n        break;\n\n      default:\n        console.log(`Unhandled event type: ${event.event_type}`);\n    }\n\n    // Always respond with 200 OK to acknowledge receipt\n    res.status(200).json({ received: true });\n  } catch (error) {\n    console.error(\"PayPal webhook error:\", error);\n    res.status(500).json({ error: \"Webhook processing failed\" });\n  }\n}\n\n// Handle subscription activated event\nasync function handleSubscriptionActivated(event: any) {\n  try {\n    const subscription = event.resource;\n    const subscriptionId = subscription.id;\n    const userId = subscription.custom_id; // We store userId in custom_id when creating subscription\n    const planId = subscription.plan_id;\n    const status = subscription.status;\n\n    console.log(\"Subscription activated:\", {\n      subscriptionId,\n      userId,\n      status,\n    });\n\n    if (!userId) {\n      console.error(\"No userId found in subscription custom_id\");\n      return;\n    }\n\n    // Calculate subscription period\n    const currentDate = new Date();\n    const nextBillingDate = subscription.billing_info?.next_billing_time \n      ? new Date(subscription.billing_info.next_billing_time)\n      : new Date(currentDate.getTime() + 30 * 24 * 60 * 60 * 1000); // 30 days from now\n\n    // Update user profile to Pro\n    await storage.updateProfile(userId, {\n      membershipStatus: \"pro\",\n      membershipPlan: \"pro-monthly\",\n      membershipExpires: nextBillingDate,\n    });\n\n    // Store subscription details in database\n    await storage.createSubscription({\n      id: subscriptionId,\n      userId: userId,\n      status: status,\n      planId: planId,\n      currentPeriodStart: currentDate,\n      currentPeriodEnd: nextBillingDate,\n      planName: \"pro\",\n      currency: \"USD\",\n      amount: \"14.99\",\n      startTime: currentDate,\n      nextBillingTime: nextBillingDate,\n      isTrial: false,\n    });\n\n    console.log(`User ${userId} upgraded to Pro via PayPal subscription ${subscriptionId}`);\n  } catch (error) {\n    console.error(\"Error handling subscription activation:\", error);\n    throw error;\n  }\n}\n\n// Handle payment completed event (recurring payments)\nasync function handlePaymentCompleted(event: any) {\n  try {\n    const sale = event.resource;\n    const subscriptionId = sale.billing_agreement_id;\n\n    if (!subscriptionId) {\n      console.log(\"Payment not related to subscription, skipping\");\n      return;\n    }\n\n    console.log(\"Recurring payment completed:\", {\n      subscriptionId,\n      amount: sale.amount?.total,\n      currency: sale.amount?.currency,\n    });\n\n    // Get subscription from database\n    const subscription = await storage.getSubscription(subscriptionId);\n    \n    if (!subscription) {\n      console.error(\"Subscription not found:\", subscriptionId);\n      return;\n    }\n\n    // Update subscription billing dates\n    const currentDate = new Date();\n    const nextBillingDate = new Date(currentDate.getTime() + 30 * 24 * 60 * 60 * 1000); // 30 days from now\n\n    await storage.updateSubscription(subscriptionId, {\n      currentPeriodStart: currentDate,\n      currentPeriodEnd: nextBillingDate,\n      nextBillingTime: nextBillingDate,\n      status: \"ACTIVE\",\n    });\n\n    // Ensure user profile is still Pro\n    await storage.updateProfile(subscription.userId, {\n      membershipStatus: \"pro\",\n      membershipExpires: nextBillingDate,\n    });\n\n    console.log(`Subscription ${subscriptionId} renewed successfully`);\n  } catch (error) {\n    console.error(\"Error handling payment completion:\", error);\n    throw error;\n  }\n}\n\n// Handle subscription cancelled event\nasync function handleSubscriptionCancelled(event: any) {\n  try {\n    const subscription = event.resource;\n    const subscriptionId = subscription.id;\n\n    console.log(\"Subscription cancelled:\", subscriptionId);\n\n    // Get subscription from database\n    const dbSubscription = await storage.getSubscription(subscriptionId);\n    \n    if (!dbSubscription) {\n      console.error(\"Subscription not found:\", subscriptionId);\n      return;\n    }\n\n    // Update subscription status\n    await storage.updateSubscription(subscriptionId, {\n      status: \"CANCELLED\",\n    });\n\n    // Downgrade user to free at the end of the current billing period\n    // Don't immediately revoke access - let them use it until period ends\n    console.log(`Subscription ${subscriptionId} marked as cancelled. Access will end on ${dbSubscription.currentPeriodEnd}`);\n  } catch (error) {\n    console.error(\"Error handling subscription cancellation:\", error);\n    throw error;\n  }\n}\n\n// Handle subscription suspended event\nasync function handleSubscriptionSuspended(event: any) {\n  try {\n    const subscription = event.resource;\n    const subscriptionId = subscription.id;\n\n    console.log(\"Subscription suspended:\", subscriptionId);\n\n    // Get subscription from database\n    const dbSubscription = await storage.getSubscription(subscriptionId);\n    \n    if (!dbSubscription) {\n      console.error(\"Subscription not found:\", subscriptionId);\n      return;\n    }\n\n    // Update subscription status\n    await storage.updateSubscription(subscriptionId, {\n      status: \"SUSPENDED\",\n    });\n\n    // Downgrade user to free immediately\n    await storage.updateProfile(dbSubscription.userId, {\n      membershipStatus: \"free\",\n      membershipPlan: null,\n      membershipExpires: null,\n    });\n\n    console.log(`User ${dbSubscription.userId} downgraded to free due to suspended subscription`);\n  } catch (error) {\n    console.error(\"Error handling subscription suspension:\", error);\n    throw error;\n  }\n}\n\n// Handle subscription expired event\nasync function handleSubscriptionExpired(event: any) {\n  try {\n    const subscription = event.resource;\n    const subscriptionId = subscription.id;\n\n    console.log(\"Subscription expired:\", subscriptionId);\n\n    // Get subscription from database\n    const dbSubscription = await storage.getSubscription(subscriptionId);\n    \n    if (!dbSubscription) {\n      console.error(\"Subscription not found:\", subscriptionId);\n      return;\n    }\n\n    // Update subscription status\n    await storage.updateSubscription(subscriptionId, {\n      status: \"EXPIRED\",\n    });\n\n    // Downgrade user to free\n    await storage.updateProfile(dbSubscription.userId, {\n      membershipStatus: \"free\",\n      membershipPlan: null,\n      membershipExpires: null,\n    });\n\n    console.log(`User ${dbSubscription.userId} downgraded to free due to expired subscription`);\n  } catch (error) {\n    console.error(\"Error handling subscription expiration:\", error);\n    throw error;\n  }\n}\n","size_bytes":10907},"server/paypal-subscriptions.ts":{"content":"import { Request, Response } from \"express\";\nimport crypto from \"crypto\";\n\nconst { PAYPAL_CLIENT_ID, PAYPAL_CLIENT_SECRET } = process.env;\n\nif (!PAYPAL_CLIENT_ID) {\n  throw new Error(\"Missing PAYPAL_CLIENT_ID\");\n}\nif (!PAYPAL_CLIENT_SECRET) {\n  throw new Error(\"Missing PAYPAL_CLIENT_SECRET\");\n}\n\n// PayPal API base URLs\nconst PAYPAL_API_BASE = \n  process.env.NODE_ENV === \"production\"\n    ? \"https://api-m.paypal.com\"\n    : \"https://api-m.sandbox.paypal.com\";\n\n// Store plan IDs in memory - will search for existing plans on startup\nlet PRO_PLAN_ID: string | null = null;\nconst PRO_PLAN_NAME = \"BookingGen Pro Monthly\";\n\n// Get PayPal access token\nasync function getAccessToken(): Promise<string> {\n  const auth = Buffer.from(`${PAYPAL_CLIENT_ID}:${PAYPAL_CLIENT_SECRET}`).toString(\"base64\");\n\n  const response = await fetch(`${PAYPAL_API_BASE}/v1/oauth2/token`, {\n    method: \"POST\",\n    headers: {\n      \"Authorization\": `Basic ${auth}`,\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\n    },\n    body: \"grant_type=client_credentials\",\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to get access token: ${response.statusText}`);\n  }\n\n  const data = await response.json();\n  return data.access_token;\n}\n\n// Create a product\nasync function createProduct(accessToken: string): Promise<string> {\n  const response = await fetch(`${PAYPAL_API_BASE}/v1/catalogs/products`, {\n    method: \"POST\",\n    headers: {\n      \"Authorization\": `Bearer ${accessToken}`,\n      \"Content-Type\": \"application/json\",\n      \"PayPal-Request-Id\": `PRODUCT-${Date.now()}`,\n    },\n    body: JSON.stringify({\n      name: \"BookingGen Pro\",\n      description: \"Professional booking page solution with unlimited features\",\n      type: \"SERVICE\",\n      category: \"SOFTWARE\",\n    }),\n  });\n\n  if (!response.ok) {\n    const error = await response.text();\n    throw new Error(`Failed to create product: ${error}`);\n  }\n\n  const data = await response.json();\n  console.log(\"Created PayPal product:\", data.id);\n  return data.id;\n}\n\n// Create a subscription plan\nasync function createPlan(accessToken: string, productId: string): Promise<string> {\n  const response = await fetch(`${PAYPAL_API_BASE}/v1/billing/plans`, {\n    method: \"POST\",\n    headers: {\n      \"Authorization\": `Bearer ${accessToken}`,\n      \"Content-Type\": \"application/json\",\n      \"PayPal-Request-Id\": `PLAN-${Date.now()}`,\n    },\n    body: JSON.stringify({\n      product_id: productId,\n      name: \"BookingGen Pro Monthly\",\n      description: \"Monthly subscription for BookingGen Pro with all features unlocked\",\n      billing_cycles: [\n        {\n          frequency: {\n            interval_unit: \"MONTH\",\n            interval_count: 1,\n          },\n          tenure_type: \"REGULAR\",\n          sequence: 1,\n          total_cycles: 0, // 0 means infinite\n          pricing_scheme: {\n            fixed_price: {\n              value: \"14.99\",\n              currency_code: \"USD\",\n            },\n          },\n        },\n      ],\n      payment_preferences: {\n        auto_bill_outstanding: true,\n        setup_fee: {\n          value: \"0\",\n          currency_code: \"USD\",\n        },\n        setup_fee_failure_action: \"CONTINUE\",\n        payment_failure_threshold: 3,\n      },\n    }),\n  });\n\n  if (!response.ok) {\n    const error = await response.text();\n    throw new Error(`Failed to create plan: ${error}`);\n  }\n\n  const data = await response.json();\n  console.log(\"Created PayPal billing plan:\", data.id);\n  return data.id;\n}\n\n// Search for existing plan by name\nasync function findExistingPlan(accessToken: string): Promise<string | null> {\n  try {\n    const response = await fetch(`${PAYPAL_API_BASE}/v1/billing/plans?page_size=20&total_required=true`, {\n      method: \"GET\",\n      headers: {\n        \"Authorization\": `Bearer ${accessToken}`,\n        \"Content-Type\": \"application/json\",\n      },\n    });\n\n    if (!response.ok) {\n      console.error(\"Failed to search plans:\", await response.text());\n      return null;\n    }\n\n    const data = await response.json();\n    const existingPlan = data.plans?.find((plan: any) => plan.name === PRO_PLAN_NAME);\n    \n    if (existingPlan) {\n      console.log(`Found existing PayPal plan: ${existingPlan.id}`);\n      return existingPlan.id;\n    }\n    \n    return null;\n  } catch (error) {\n    console.error(\"Error searching for existing plans:\", error);\n    return null;\n  }\n}\n\n// Get or create Pro subscription plan\nexport async function getOrCreateProPlan(): Promise<string> {\n  if (PRO_PLAN_ID) {\n    return PRO_PLAN_ID;\n  }\n\n  try {\n    const accessToken = await getAccessToken();\n    \n    // First, try to find existing plan\n    const existingPlanId = await findExistingPlan(accessToken);\n    if (existingPlanId) {\n      PRO_PLAN_ID = existingPlanId;\n      console.log(`Using existing PayPal Pro plan: ${existingPlanId}`);\n      return existingPlanId;\n    }\n\n    console.log(\"No existing plan found, creating new PayPal Pro plan...\");\n    \n    // Create product first\n    const productId = await createProduct(accessToken);\n    \n    // Then create billing plan\n    const planId = await createPlan(accessToken, productId);\n    \n    PRO_PLAN_ID = planId;\n    console.log(`✅ PayPal Pro Plan created successfully: ${planId}`);\n    return planId;\n  } catch (error) {\n    console.error(\"Failed to create PayPal plan:\", error);\n    throw error;\n  }\n}\n\n// Get PayPal plan ID (creates plan if it doesn't exist)\nexport async function getPayPalPlanId(req: Request, res: Response) {\n  try {\n    const planId = await getOrCreateProPlan();\n    res.json({ planId });\n  } catch (error: any) {\n    console.error(\"❌ Failed to get PayPal plan ID:\", error);\n    res.status(500).json({ \n      error: \"Failed to get plan ID\",\n      details: error.message || \"Unknown error occurred\"\n    });\n  }\n}\n\n// Create a subscription\nexport async function createPayPalSubscription(req: Request, res: Response) {\n  try {\n    const { userId, userEmail, userName } = req.body;\n\n    if (!userId || !userEmail) {\n      return res.status(400).json({ \n        error: \"Missing required fields\",\n        details: \"userId and userEmail are required\" \n      });\n    }\n\n    console.log(`Creating PayPal subscription for user ${userId} (${userEmail})`);\n\n    const accessToken = await getAccessToken();\n    const planId = await getOrCreateProPlan();\n\n    const baseUrl = process.env.NODE_ENV === 'production' \n      ? 'https://www.bookinggen.xyz' \n      : 'http://localhost:5000';\n\n    const response = await fetch(`${PAYPAL_API_BASE}/v1/billing/subscriptions`, {\n      method: \"POST\",\n      headers: {\n        \"Authorization\": `Bearer ${accessToken}`,\n        \"Content-Type\": \"application/json\",\n        \"PayPal-Request-Id\": `SUB-${Date.now()}`,\n      },\n      body: JSON.stringify({\n        plan_id: planId,\n        subscriber: {\n          name: {\n            given_name: userName || \"User\",\n          },\n          email_address: userEmail,\n        },\n        application_context: {\n          brand_name: \"BookingGen\",\n          locale: \"en-US\",\n          shipping_preference: \"NO_SHIPPING\",\n          user_action: \"SUBSCRIBE_NOW\",\n          payment_method: {\n            payer_selected: \"PAYPAL\",\n            payee_preferred: \"IMMEDIATE_PAYMENT_REQUIRED\",\n          },\n          return_url: `${baseUrl}/dashboard?paypal_success=true`,\n          cancel_url: `${baseUrl}/dashboard?paypal_canceled=true`,\n        },\n        custom_id: userId, // Store userId for webhook processing\n      }),\n    });\n\n    if (!response.ok) {\n      const error = await response.text();\n      throw new Error(`Failed to create subscription: ${error}`);\n    }\n\n    const data = await response.json();\n    console.log(\"✅ Created PayPal subscription:\", data.id);\n\n    const approvalUrl = data.links?.find((link: any) => link.rel === \"approve\")?.href;\n    \n    if (!approvalUrl) {\n      throw new Error(\"No approval URL returned from PayPal\");\n    }\n\n    res.json({\n      subscriptionId: data.id,\n      approvalUrl: approvalUrl,\n      status: data.status,\n    });\n  } catch (error: any) {\n    console.error(\"❌ Failed to create PayPal subscription:\", error);\n    res.status(500).json({ \n      error: \"Failed to create subscription\",\n      details: error.message || \"Unknown error occurred\"\n    });\n  }\n}\n\n// Get subscription details\nexport async function getPayPalSubscription(req: Request, res: Response) {\n  try {\n    const { subscriptionId } = req.params;\n    const accessToken = await getAccessToken();\n\n    const response = await fetch(`${PAYPAL_API_BASE}/v1/billing/subscriptions/${subscriptionId}`, {\n      method: \"GET\",\n      headers: {\n        \"Authorization\": `Bearer ${accessToken}`,\n        \"Content-Type\": \"application/json\",\n      },\n    });\n\n    if (!response.ok) {\n      const error = await response.text();\n      throw new Error(`Failed to get subscription: ${error}`);\n    }\n\n    const data = await response.json();\n    console.log(`PayPal subscription ${subscriptionId} status: ${data.status}`);\n    res.json(data);\n  } catch (error: any) {\n    console.error(\"Failed to get PayPal subscription:\", error);\n    res.status(500).json({ \n      error: \"Failed to get subscription details\",\n      details: error.message || \"Unknown error occurred\"\n    });\n  }\n}\n\n// Check and activate subscription if needed (fallback for delayed webhooks)\nexport async function checkAndActivateSubscription(req: Request, res: Response) {\n  try {\n    const { subscriptionId } = req.body;\n    const authReq = req as any;\n\n    if (!authReq.user || !authReq.user.userId) {\n      return res.status(401).json({ error: \"User not authenticated\" });\n    }\n\n    if (!subscriptionId) {\n      return res.status(400).json({ error: \"Subscription ID required\" });\n    }\n\n    console.log(`Checking PayPal subscription status for ${subscriptionId}...`);\n\n    // Fetch subscription details from PayPal\n    const accessToken = await getAccessToken();\n    const response = await fetch(`${PAYPAL_API_BASE}/v1/billing/subscriptions/${subscriptionId}`, {\n      method: \"GET\",\n      headers: {\n        \"Authorization\": `Bearer ${accessToken}`,\n        \"Content-Type\": \"application/json\",\n      },\n    });\n\n    if (!response.ok) {\n      const error = await response.text();\n      throw new Error(`Failed to get subscription: ${error}`);\n    }\n\n    const subscription = await response.json();\n    const userId = authReq.user.userId;\n\n    // Verify this subscription belongs to the authenticated user\n    if (subscription.custom_id !== userId) {\n      return res.status(403).json({ error: \"Subscription does not belong to user\" });\n    }\n\n    // Check if subscription is active or activated\n    if (subscription.status === 'ACTIVE' || subscription.status === 'APPROVED') {\n      // Import storage\n      const { storage } = await import(\"./storage\");\n      \n      // Check if already activated in our database\n      const existingSubscription = await storage.getSubscription(subscriptionId);\n      \n      if (!existingSubscription) {\n        // Webhook hasn't processed yet, activate manually\n        const currentDate = new Date();\n        const nextBillingDate = subscription.billing_info?.next_billing_time \n          ? new Date(subscription.billing_info.next_billing_time)\n          : new Date(currentDate.getTime() + 30 * 24 * 60 * 60 * 1000);\n\n        // Update user profile to Pro\n        await storage.updateProfile(userId, {\n          membershipStatus: \"pro\",\n          membershipPlan: \"pro-monthly\",\n          membershipExpires: nextBillingDate,\n        });\n\n        // Store subscription details\n        await storage.createSubscription({\n          id: subscriptionId,\n          userId: userId,\n          status: subscription.status,\n          planId: subscription.plan_id,\n          currentPeriodStart: currentDate,\n          currentPeriodEnd: nextBillingDate,\n          planName: \"pro\",\n          currency: \"USD\",\n          amount: \"14.99\",\n          startTime: currentDate,\n          nextBillingTime: nextBillingDate,\n          isTrial: false,\n        });\n\n        console.log(`✅ Manually activated subscription ${subscriptionId} for user ${userId}`);\n        \n        return res.json({ \n          success: true,\n          activated: true,\n          message: \"Subscription activated successfully\" \n        });\n      } else {\n        console.log(`Subscription ${subscriptionId} already activated`);\n        return res.json({ \n          success: true,\n          activated: false,\n          message: \"Subscription already active\" \n        });\n      }\n    } else {\n      return res.json({ \n        success: false,\n        status: subscription.status,\n        message: `Subscription status is ${subscription.status}` \n      });\n    }\n  } catch (error: any) {\n    console.error(\"❌ Failed to check subscription:\", error);\n    res.status(500).json({ \n      error: \"Failed to check subscription\",\n      details: error.message || \"Unknown error occurred\"\n    });\n  }\n}\n\n// Cancel subscription\nexport async function cancelPayPalSubscription(req: Request, res: Response) {\n  try {\n    const { subscriptionId } = req.params;\n    const { reason } = req.body;\n    const accessToken = await getAccessToken();\n\n    console.log(`Cancelling PayPal subscription ${subscriptionId}...`);\n\n    const response = await fetch(`${PAYPAL_API_BASE}/v1/billing/subscriptions/${subscriptionId}/cancel`, {\n      method: \"POST\",\n      headers: {\n        \"Authorization\": `Bearer ${accessToken}`,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        reason: reason || \"Customer requested cancellation\",\n      }),\n    });\n\n    if (!response.ok) {\n      const error = await response.text();\n      throw new Error(`Failed to cancel subscription: ${error}`);\n    }\n\n    console.log(`✅ PayPal subscription ${subscriptionId} cancelled successfully`);\n\n    res.json({ \n      success: true,\n      message: \"Subscription canceled successfully\" \n    });\n  } catch (error: any) {\n    console.error(\"❌ Failed to cancel PayPal subscription:\", error);\n    res.status(500).json({ \n      error: \"Failed to cancel subscription\",\n      details: error.message || \"Unknown error occurred\"\n    });\n  }\n}\n\n","size_bytes":14114},"PAYPAL_SETUP.md":{"content":"# PayPal Subscription Setup Guide\n\n## Overview\n\nYour application uses **PayPal Subscriptions** for recurring monthly payments ($14.99/month). The integration is fully functional and includes:\n\n✅ Automatic subscription creation and management\n✅ Recurring billing (monthly)\n✅ Webhook-based membership activation\n✅ Automatic membership renewal and cancellation handling\n\n## Required Environment Variables\n\nYou need to configure these environment variables:\n\n### Backend (Already Configured ✅)\n- `PAYPAL_CLIENT_ID` - Your PayPal REST API Client ID\n- `PAYPAL_CLIENT_SECRET` - Your PayPal REST API Secret\n\n### Frontend (NEEDS SETUP ⚠️)\n- `VITE_PAYPAL_CLIENT_ID` - Same as PAYPAL_CLIENT_ID (for frontend PayPal button)\n\n### Webhook (NEEDS SETUP ⚠️)\n- `PAYPAL_WEBHOOK_ID` - Webhook ID from PayPal Dashboard (for signature verification)\n- `PAYPAL_ALLOW_UNVERIFIED_WEBHOOKS` - (Development only) Set to `true` to allow webhooks without signature verification. **NEVER use in production!**\n\n## Setting Up PayPal Webhooks\n\nWebhooks are **CRITICAL** for your SaaS to work properly. Without webhooks, subscriptions won't activate user memberships.\n\n### Step 1: Get Your Webhook URL\n\nYour webhook endpoint is:\n```\nhttps://your-replit-domain.replit.app/api/paypal/webhook\n```\n\nFor production:\n```\nhttps://www.bookinggen.xyz/api/paypal/webhook\n```\n\n### Step 2: Create Webhook in PayPal Dashboard\n\n1. **Login to PayPal Developer Dashboard**\n   - Sandbox: https://developer.paypal.com/dashboard/\n   - Production: https://www.paypal.com/businessmanage/\n\n2. **Navigate to Webhooks**\n   - Go to \"Apps & Credentials\"\n   - Select your app\n   - Scroll down to \"Webhooks\" section\n   - Click \"Add Webhook\"\n\n3. **Configure Webhook**\n   - **Webhook URL**: Enter your webhook endpoint URL (from Step 1)\n   - **Event types**: Select these events:\n     - ✅ `BILLING.SUBSCRIPTION.ACTIVATED` (Required - activates Pro membership)\n     - ✅ `PAYMENT.SALE.COMPLETED` (Required - renews subscription)\n     - ✅ `BILLING.SUBSCRIPTION.CANCELLED` (Required - handles cancellations)\n     - ✅ `BILLING.SUBSCRIPTION.SUSPENDED` (Required - handles payment failures)\n     - ✅ `BILLING.SUBSCRIPTION.EXPIRED` (Required - handles expiration)\n\n4. **Save and Get Webhook ID**\n   - After saving, you'll see a Webhook ID (format: `WH-XXXXX-XXXXX`)\n   - **Copy this ID** - you'll need it for the next step\n\n### Step 3: Add Webhook ID to Environment Variables\n\nYou need to add the `PAYPAL_WEBHOOK_ID` environment variable with the ID from Step 2.\n\n**Important**: The frontend also needs `VITE_PAYPAL_CLIENT_ID` set to the same value as `PAYPAL_CLIENT_ID`.\n\n## How the PayPal Flow Works\n\n### User Subscribe Flow:\n1. User clicks \"Subscribe with PayPal\" button\n2. Frontend loads PayPal SDK and creates subscription via backend\n3. User is redirected to PayPal to approve subscription\n4. User approves and is redirected back to your app\n5. **Primary Path (Webhook):**\n   - PayPal sends `BILLING.SUBSCRIPTION.ACTIVATED` webhook\n   - Backend receives webhook, verifies signature, and activates Pro membership\n6. **Fallback Path (if webhook delayed):**\n   - Frontend detects membership not activated\n   - Calls fallback endpoint to check PayPal subscription status\n   - Backend verifies subscription with PayPal API and activates membership\n7. User now has active Pro subscription\n\nThis dual-path approach ensures reliable activation even if webhooks are delayed or missed.\n\n### Recurring Billing:\n1. PayPal automatically charges user monthly\n2. **PayPal sends `PAYMENT.SALE.COMPLETED` webhook**\n3. Backend receives webhook and extends membership by 30 days\n4. User's Pro membership continues\n\n### Cancellation:\n1. User cancels subscription (via PayPal or your app)\n2. **PayPal sends `BILLING.SUBSCRIPTION.CANCELLED` webhook**\n3. Backend marks subscription as cancelled\n4. User keeps access until current billing period ends\n5. After period ends, user is downgraded to free\n\n## Webhook Events Handled\n\n| Event | What Happens |\n|-------|-------------|\n| `BILLING.SUBSCRIPTION.ACTIVATED` | ✅ Activates Pro membership, stores subscription in DB |\n| `PAYMENT.SALE.COMPLETED` | ✅ Renews subscription, extends membership by 30 days |\n| `BILLING.SUBSCRIPTION.CANCELLED` | ⚠️ Marks as cancelled, user keeps access until period ends |\n| `BILLING.SUBSCRIPTION.SUSPENDED` | ❌ Immediately downgrades to free (payment failure) |\n| `BILLING.SUBSCRIPTION.EXPIRED` | ❌ Downgrades to free (subscription ended) |\n\n## Testing\n\n### Testing with Sandbox\n\n1. Use PayPal Sandbox credentials\n2. Set `NODE_ENV=development` (automatically uses sandbox URLs)\n3. Create test subscriptions with sandbox accounts\n4. Monitor webhook events in PayPal Developer Dashboard\n\n### Testing Webhooks Locally\n\nPayPal webhooks need a public URL. For local testing:\n- Use your published Replit URL\n- Or use a tool like ngrok to expose localhost\n\n## Security Features\n\n✅ **Webhook Signature Verification** - All webhooks are verified using PayPal's signature verification API\n✅ **User Validation** - Subscription user ID is validated against authenticated user\n✅ **Environment-based URLs** - Automatically switches between sandbox and production\n✅ **Secure Token Handling** - PayPal tokens are generated securely server-side\n\n## Troubleshooting\n\n### Subscription not activating?\n- Check if `PAYPAL_WEBHOOK_ID` is configured\n- Verify webhook URL is correct in PayPal Dashboard\n- Check server logs for webhook events\n- Ensure all required webhook events are subscribed\n\n### \"PayPal not configured\" error?\n- Make sure `VITE_PAYPAL_CLIENT_ID` is set for frontend\n- Restart the application after adding environment variables\n\n### Webhook signature verification failing?\n- Ensure `PAYPAL_WEBHOOK_ID` matches the ID from PayPal Dashboard\n- Verify you're using the correct environment (sandbox vs production)\n- Check that webhook URL in PayPal matches your actual endpoint\n\n## Production Checklist\n\nBefore going live:\n\n- [ ] Switch from Sandbox to Live PayPal credentials\n- [ ] Update `PAYPAL_CLIENT_ID` and `PAYPAL_CLIENT_SECRET` with live credentials\n- [ ] Update `VITE_PAYPAL_CLIENT_ID` with live client ID\n- [ ] Create webhook in **Live** PayPal Dashboard (not sandbox)\n- [ ] Set `PAYPAL_WEBHOOK_ID` to the live webhook ID\n- [ ] Set `NODE_ENV=production`\n- [ ] Test subscription flow end-to-end\n- [ ] Verify webhooks are received and processed\n- [ ] Monitor logs for any errors\n\n## Support\n\nIf you encounter issues:\n1. Check server logs for webhook events\n2. Verify all environment variables are set correctly\n3. Test with PayPal sandbox first\n4. Check PayPal Developer Dashboard for webhook delivery status\n","size_bytes":6645}},"version":2}